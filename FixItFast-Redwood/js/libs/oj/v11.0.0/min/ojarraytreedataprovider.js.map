{"version":3,"sources":["../debug/ojarraytreedataprovider.js"],"names":["define","oj","$","ArrayDataProvider","ojeventtarget","Object","prototype","hasOwnProperty","call","ArrayTreeDataProvider","[object Object]","treeData","options","_rootDataProvider","this","TreeAsyncIterator","_parent","_baseIterable","Symbol","asyncIterator","next","then","result","metadata","value","i","length","_getTreeMetadata","data","TreeAsyncIterable","_asyncIterator","_baseDataProvider","_mapKeyToNode","Map","_mapNodeToKey","_mapArrayToSequenceNum","_mapKoArrayToSubscriptions","_mapKeyToParentNodePath","_parentNodePath","_processTreeArray","params","fetchByKeys","fetchByKeysResult","results","Set","forEach","key","get","add","Promise","resolve","containsParameters","capabilityName","getCapability","getTotalSize","isEmpty","initialSet","createOptimizedKeySet","initialMap","createOptimizedKeyMap","parentKey","node","_getNodeForKey","children","_getChildren","childDataProvider","_getRootDataProvider","rootDataProvider","JSON","stringify","_applyLeafNodeFilter","baseIterable","fetchFirst","fetchByOffset","newResults","push","done","fetchParameters","set","childrenAttr","_getVal","parentKeyPath","subscribe","undefined","Error","mutationEvent","subscriptions","Array","changes","j","index","dataArray","keyArray","indexArray","metadataArray","updatedIndexes","operationUpdateEventDetail","operationAddEventDetail","operationRemoveEventDetail","removeDuplicate","status","iKey","_getId","indexOf","jKey","compareValues","_releaseNode","_getKeyForNode","map","keySet","indexes","keys","nodeArray","updateKeyArray","updateDataArray","updateIndexArray","updateMetadataArray","keyObj","_processNode","afterKeySet","afterKeyArray","parentKeyArray","keyAttributes","keyAttributesScope","addIndex","afterKey","afterKeys","addBeforeKeys","parentKeys","updateKeySet","DataProviderMutationEvent","remove","update","dispatchEvent","_flushMaps","DataProviderRefreshEvent","clear","subscription","_unsubscribeObservableArray","dispose","delete","_subscribeObservableArray","_createKeyObj","_setMapEntry","keyPath","_deleteMapEntry","_releaseTreeArray","slice","_setUseIndexAsKey","_incrementSequenceNum","row","id","isArray","_getAllVals","val","attr","keepFunc","dotIndex","startAttr","substring","endAttr","subObj","seqNum","_useIndexAsKey","filter","attributeFilter","op","criteria","attribute","filterCriterion","paramsClone","extend","_getLeafNodeFilter","keyIsPath","treeKey","_getUseIndexAsKey","_getNodeMetadata","EventTargetMixin","applyMixin","_registerLegacyNamespaceProp"],"mappings":"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"}