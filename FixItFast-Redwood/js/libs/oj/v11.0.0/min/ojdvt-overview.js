/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define(["exports","ojs/ojdvt-toolkit"],function(t,i){"use strict";var e=function(){this.Init({alta:e.VERSION_1})};i.Obj.createSubclass(e,i.BaseComponentDefaults),e.VERSION_1={overviewPosition:"below",style:{currentTimeIndicatorColor:"#c000d1",handleFillColor:"#ffffff",handleTextureColor:"#b3c6db",leftFilterPanelAlpha:.7,leftFilterPanelColor:"#ffffff",overviewBackgroundColor:"#e6ecf3",rightFilterPanelAlpha:.7,rightFilterPanelColor:"#ffffff",timeAxisBarColor:"#e5e5e5",timeAxisBarAlpha:1,timeIndicatorColor:"#bcc7d2",windowBackgroundAlpha:1,windowBackgroundColor:"#ffffff",windowBorderBottomColor:"#4f4f4f",windowBorderBottomStyle:"solid",windowBorderLeftColor:"#4f4f4f",windowBorderLeftStyle:"solid",windowBorderRightColor:"#4f4f4f",windowBorderRightStyle:"solid",windowBorderTopColor:"#4f4f4f",windowBorderTopStyle:"solid"}};var n=function(t){this.Init(t.getCtx(),t.processEvent,t),this._overview=t};i.Obj.createSubclass(n,i.EventManager),n.prototype.addListeners=function(t){i.SvgDocumentUtils.addDragListeners(this._overview,this._onDragStart,this._onDragMove,this._onDragEnd,this)},n.prototype._onDragStart=function(t){return i.Agent.isTouchDevice()?this._onTouchDragStart(t):this._onMouseDragStart(t)},n.prototype._onDragMove=function(t){return i.Agent.isTouchDevice()?this._onTouchDragMove(t):this._onMouseDragMove(t)},n.prototype._onDragEnd=function(t){return i.Agent.isTouchDevice()?this._onTouchDragEnd(t):this._onMouseDragEnd(t)},n.prototype._getRelativePosition=function(t,e){return this._stageAbsolutePosition||(this._stageAbsolutePosition=this._context.getStageAbsolutePosition()),new i.Point(t-this._stageAbsolutePosition.x,e-this._stageAbsolutePosition.y)},n.prototype._onMouseDragStart=function(t){if(t.button!==i.MouseEvent.RIGHT_CLICK_BUTTON){var e=this._getRelativePosition(t.pageX,t.pageY);return this._overview.beginDragPan(t,e.x,e.y)}return!1},n.prototype._onMouseDragMove=function(t){var i=this._getRelativePosition(t.pageX,t.pageY);return this._overview.contDragPan(t,i.x,i.y),!0},n.prototype._onMouseDragEnd=function(t){this._overview.endDragPan(),this._stageAbsolutePosition=null},n.prototype._onTouchDragStart=function(t){var i=t.touches;if(t.stopPropagation(),1===i.length){var e=this._getRelativePosition(i[0].pageX,i[0].pageY);return t.preventDefault(),this._overview.beginDragPan(t,e.x,e.y)}return!1},n.prototype._onTouchDragMove=function(t){var i=t.touches;if(1===i.length){var e=this._getRelativePosition(i[0].pageX,i[0].pageY);this._overview.contDragPan(t,e.x,e.y),t.preventDefault()}t.stopPropagation()},n.prototype._onTouchDragEnd=function(t){this._overview.endDragPan(),i.EventManager.consumeEvent(t),this._stageAbsolutePosition=null};const o=function(t){this.Init(t)};i.Obj.createSubclass(o,i.Obj),o.prototype.Init=function(t){this._view=t},o.prototype.parse=function(t){var i=t;return this.ParseRootAttributes(i)},o.prototype.ParseRootAttributes=function(t){var e=new Object;return e.animationOnClick=t.animationOnClick,null!=t.xMin&&(e.xMin=t.xMin),null!=t.xMax&&(e.xMax=t.xMax),null!=t.x1&&(e.x1=t.x1),null!=t.x2&&(e.x2=t.x2),null!=t.yMin&&(e.yMin=t.yMin),null!=t.yMax&&(e.yMax=t.yMax),null!=t.y1&&(e.y1=t.y1),null!=t.y2&&(e.y2=t.y2),null!=t.currentTime&&(e.currentTime=t.currentTime),e.orientation="horizontal",null!=t.orientation&&(e.orientation=t.orientation),e.featuresOff=t.featuresOff,e.minimumWindowSize=t.minimumWindowSize,e.leftMargin=t.leftMargin,e.rightMargin=t.rightMargin,e.overviewPosition="below",e.selectionMode="none",e.isRtl=i.Agent.isRightToLeft(this._view.getCtx()).toString(),null!=t.rtl&&(e.isRtl=t.rtl.toString()),e},o.prototype.calculateWidth=function(t,i,e,n,o){var r=o*(i-t),s=n-e;return 0==r||0==s?0:r/s};var r=new Object;i.Obj.createSubclass(r,i.Obj),r._DEFAULT_AXIS_LABEL_PADDING=5,r._DEFAULT_WINDOW_BORDER_WIDTH=1,r.getHandleFillColor=function(t){return null!=t._hfc?t._hfc:t.style.handleFillColor},r.getHandleTextureColor=function(t){return null!=t._htc?t._htc:t.style.handleTextureColor},r.getHandleBackgroundClass=function(t,i){return i?null!=t._vhbc?t._vhbc:t.style.vertHandleBackgroundClass:null!=t._hbc?t._hbc:t.style.handleBackgroundClass},r.getHandleSize=function(t,i){return i?null!=t._vhs?t._vhs:t.style.vertHandleSize:null!=t._hs?t._hs:t.style.handleSize},r.getBorderTopColor=function(t){return null!=t._btc?t._btc:t.style.borderTopColor},r.getBorderTopStyle=function(t){return null!=t._bts?t._bts:t.style.borderTopStyle},r.getWindowBackgroundColor=function(t){return null!=t._wbc?t._wbc:t.style.windowBackgroundColor},r.getWindowBackgroundAlpha=function(t){return t.style.windowBackgroundAlpha},r.getWindowBorderTopStyle=function(t){return null!=t._wbts?t._wbts:t.style.windowBorderTopStyle},r.getWindowBorderRightStyle=function(t){return null!=t._wbrs?t._wbrs:t.style.windowBorderRightStyle},r.getWindowBorderBottomStyle=function(t){return null!=t._wbbs?t._wbbs:t.style.windowBorderBottomStyle},r.getWindowBorderLeftStyle=function(t){return null!=t._wbls?t._wbls:t.style.windowBorderLeftStyle},r.getWindowBorderTopColor=function(t){return null!=t._wbtc?t._wbtc:t.style.windowBorderTopColor},r.getWindowBorderRightColor=function(t){return null!=t._wbrc?t._wbrc:t.style.windowBorderRightColor},r.getWindowBorderBottomColor=function(t){return null!=t._wbbc?t._wbbc:t.style.windowBorderBottomColor},r.getWindowBorderLeftColor=function(t){return null!=t._wblc?t._wblc:t.style.windowBorderLeftColor},r.getOverviewBackgroundColor=function(t){return null!=t._obc?t._obc:t.style.overviewBackgroundColor},r.getCurrentTimeIndicatorColor=function(t){return null!=t._ctic?t._ctic:t.style.currentTimeIndicatorColor},r.getTimeAxisBarColor=function(t){return null!=t._tabc?t._tabc:t.style.timeAxisBarColor},r.getTimeAxisBarAlpha=function(t){return null!=t._tabo?t._tabo:t.style.timeAxisBarAlpha},r.getTimeIndicatorColor=function(t){return null!=t._tic?t._tic:t.style.timeIndicatorColor},r.getLeftFilterPanelColor=function(t){return t.style.leftFilterPanelColor},r.getLeftFilterPanelAlpha=function(t){return t.style.leftFilterPanelAlpha},r.getRightFilterPanelColor=function(t){return t.style.rightFilterPanelColor},r.getRightFilterPanelAlpha=function(t){return t.style.rightFilterPanelAlpha};const s=new Object;s.supportsTouch=function(){return i.Agent.isTouchDevice()},i.Obj.createSubclass(s,i.Obj),s.getDatePosition=function(t,i,e,n){var o=(e-t)*n,r=i-t;return 0==o||0==r?0:o/r},s.getPositionDate=function(t,i,e,n){var o=e*(i-t);return 0===o||0===n?t:o/n+t};var a=new Object;i.Obj.createSubclass(a,i.Obj),a.renderOverview=function(t){t.isBackgroundRendered()&&a._renderBackground(t);var i=null!=t._callback||null!=t._callbackObj;i&&a._renderSlidingWindow(t),a._renderTimeAxis(t),a._parseFilledTimeRanges(t),a._updateCurrentTime(t),t.renderData(t.Width,t.Height),i&&(a._createBorderAroundSlidingWindow(t),a._updateSlidingWindow(t))},a._renderBackground=function(t){var e=new i.Rect(t.getCtx(),0,0,t.Width,t.Height,"bg");e.setSolidFill(t._overviewBackgroundColor),e.setPixelHinting(!0),t.addChild(e)},a._renderSlidingWindow=function(t){var e=t.Width,n=t.Height,o=new i.Rect(t.getCtx(),0,0,e,n,"window");if(o.setSolidFill(t._windowBackgroundColor,t._windowBackgroundAlpha),o.setPixelHinting(!0),!t.isFeatureOff("zoom")){var r=t.getHandleSize(),s=t.getHandleStart(),l=t.getGrippySize();if(t.isVerticalScrollingEnabled()){var h=t.getSlidingWindowWidth(),d=i.PathUtils.moveTo(0,0)+i.PathUtils.quadTo(3,6,8,8)+i.PathUtils.lineTo(28,8)+i.PathUtils.quadTo(33,6,36,0);i.PathUtils.closePath();var g=i.PathUtils.moveTo(0,0)+i.PathUtils.quadTo(3,-6,8,-8)+i.PathUtils.lineTo(28,-8)+i.PathUtils.quadTo(33,-6,36,0);i.PathUtils.closePath();var u=new i.Rect(t.getCtx(),0,0,h,r,"thb"),c=new i.Rect(t.getCtx(),0,0,h,r,"bhb");if(C="row-resize",t._vertHandleBackgroundClass)var p=a._createGrippyImage(t,h,l,!0),_=a._createGrippyImage(t,h,l,!0);else p=a._createGrippy(t,!0),_=a._createGrippy(t,!0);u.setSolidFill(t._windowBackgroundColor,0),c.setSolidFill(t._windowBackgroundColor,0),u.setPixelHinting(!0),c.setPixelHinting(!0);var f=new i.Path(t.getCtx(),d,"th"),w=new i.Path(t.getCtx(),g,"bh");f.setSolidFill(t._handleFillColor),f.setSolidStroke(t._handleFillColor),w.setSolidFill(t._handleFillColor),w.setSolidStroke(t._handleFillColor),t._windowBackgroundColor===t._handleFillColor&&(f.setPixelHinting(!0),w.setPixelHinting(!0)),u.setCursor(C),c.setCursor(C),f.setCursor(C),w.setCursor(C),p.setCursor(C),_.setCursor(C),o.addChild(u),t._windowTopHandleBackground=u,o.addChild(f),t._windowTopHandle=f,o.addChild(p),t._windowTopGrippy=p,o.addChild(c),t._windowBottomHandleBackground=c,o.addChild(w),t._windowBottomHandle=w,o.addChild(_),t._windowBottomGrippy=_}if(t.isHorizontalScrollingEnabled()){var m=t.getSlidingWindowHeight(),v=i.PathUtils.moveTo(0,0)+i.PathUtils.quadTo(6,3,8,8)+i.PathUtils.lineTo(8,28)+i.PathUtils.quadTo(6,33,0,36);i.PathUtils.closePath();var P=i.PathUtils.moveTo(0,0)+i.PathUtils.quadTo(-6,3,-8,8)+i.PathUtils.lineTo(-8,28)+i.PathUtils.quadTo(-6,33,0,36);i.PathUtils.closePath();var S=new i.Rect(t.getCtx(),0-s,0,r,m,"lhb"),y=new i.Rect(t.getCtx(),s,0,r,m,"rhb"),C="col-resize";if(t._horHandleBackgroundClass)var x=a._createGrippyImage(t,l,m,!1),T=a._createGrippyImage(t,l,m,!1);else x=a._createGrippy(t,!1),T=a._createGrippy(t,!1);S.setSolidFill(t._windowBackgroundColor,0),y.setSolidFill(t._windowBackgroundColor,0),S.setPixelHinting(!0),y.setPixelHinting(!0);var W=new i.Path(t.getCtx(),v,"lh"),M=new i.Path(t.getCtx(),P,"rh");W.setSolidFill(t._handleFillColor),W.setSolidStroke(t._handleFillColor),M.setSolidFill(t._handleFillColor),M.setSolidStroke(t._handleFillColor),t._windowBackgroundColor===t._handleFillColor&&(W.setPixelHinting(!0),M.setPixelHinting(!0)),S.setCursor(C),y.setCursor(C),W.setCursor(C),M.setCursor(C),x.setCursor(C),T.setCursor(C),o.addChild(S),t._windowLeftHandleBackground=S,o.addChild(W),t._windowLeftHandle=W,o.addChild(x),t._windowLeftGrippy=x,o.addChild(y),t._windowRightHandleBackground=y,o.addChild(M),t._windowRightHandle=M,o.addChild(T),t._windowRightGrippy=T}}o.setCursor("move"),t.addChild(o),a._renderTimeAxisTopBar(t),a._renderLeftAndRightFilters(t,s)},a._createGrippyImage=function(t,e,n,o){var r,s=t.getCtx();if(o){var a=n/2,l=i.ToolkitUtils.getIconStyle(s,t._vertHandleBackgroundClass);(r=i.OutputText.createIcon(s,{style:l,size:t._vertHandleSize,pos:{x:0,y:a}})).setId("vgrpy")}else{var h=e/2,d=i.ToolkitUtils.getIconStyle(s,t._horHandleBackgroundClass);(r=i.OutputText.createIcon(s,{style:d,size:t._horHandleSize,pos:{x:h,y:0}})).setId("hgrpy")}r.setMouseEnabled(!1);var g=new i.Container(s);return g.addChild(r),g},a._createGrippy=function(t,e){var n=t._handleTextureColor;if(e){for(var o=new i.Container(t.getCtx(),"vgrpy"),r=8,s=3,a=0;a<9;a++){var l=new i.Line(t.getCtx(),r+2*a,s,r+2*a+1,s,"dot1"+a);l.setSolidStroke(n),o.addChild(l),s+=2,(l=new i.Line(t.getCtx(),r+1+2*a,s,r+1+2*a+1,s,"dot2"+a)).setSolidStroke(n),o.addChild(l),s+=2,(l=new i.Line(t.getCtx(),r+2*a,s,r+2*a+1,s,"dot3"+a)).setSolidStroke(n),o.addChild(l),s=3}(l=new i.Line(t.getCtx(),r+18,s,r+18+1,s,"dot4")).setSolidStroke(n),o.addChild(l),s+=4,(l=new i.Line(t.getCtx(),r+18,s,r+18+1,s,"dot5")).setSolidStroke(n),o.addChild(l)}else{for(o=new i.Container(t.getCtx(),"hgrpy"),r=3,s=8,a=0;a<9;a++)(l=new i.Line(t.getCtx(),r,s+2*a,r,s+2*a+1,"dot1"+a)).setSolidStroke(n),o.addChild(l),r+=2,(l=new i.Line(t.getCtx(),r,s+1+2*a,r,s+1+2*a+1,"dot2"+a)).setSolidStroke(n),o.addChild(l),r+=2,(l=new i.Line(t.getCtx(),r,s+2*a,r,s+2*a+1,"dot3"+a)).setSolidStroke(n),o.addChild(l),r=3;(l=new i.Line(t.getCtx(),r,s+18,r,s+18+1,"dot4")).setSolidStroke(n),o.addChild(l),r+=4,(l=new i.Line(t.getCtx(),r,s+18,r,s+18+1,"dot5")).setSolidStroke(n),o.addChild(l)}return o.setPixelHinting(!0),o},a._createBorderAroundSlidingWindow=function(t){var e=t.Width,n=t.Height,o=t.getSlidingWindow(),s=r._DEFAULT_WINDOW_BORDER_WIDTH/2;if(t.isVertical())var a=o.getY(),l=a+s,h=a+o.getHeight(),d=h-s,g=0,u=s,c=e,p=c-s,_=new i.Line(t.getCtx(),g,l,e,l,"lh"),f=new i.Line(t.getCtx(),g,d,e,d,"rh"),w=new i.Line(t.getCtx(),u,0,u,a,"ltb"),m=new i.Line(t.getCtx(),u,h,u,n,"rtb"),v=new i.Line(t.getCtx(),p,a,p,h,"bb"),P=new i.Line(t.getCtx(),u,a,u,h,"tb");else l=(a=0)+s,d=(h=n)-s,u=(g=o.getX())+s,p=(c=g+o.getWidth())-s,_=new i.Line(t.getCtx(),u,a,u,h,"lh"),f=new i.Line(t.getCtx(),p,a,p,h,"rh"),w=new i.Line(t.getCtx(),0,l,g+1,l,"ltb"),m=new i.Line(t.getCtx(),c-1,l,e,l,"rtb"),v=new i.Line(t.getCtx(),g,d,c,d,"bb"),P=new i.Line(t.getCtx(),g,l,c,l,"tb");_.setPixelHinting(!0),f.setPixelHinting(!0),w.setPixelHinting(!0),m.setPixelHinting(!0),v.setPixelHinting(!0),P.setPixelHinting(!0),"none"!==t._windowBorderLeftStyle&&_.setSolidStroke(t._windowBorderLeftColor),t.addChild(_),t._leftHandle=_,"none"!==t._windowBorderRightStyle&&f.setSolidStroke(t._windowBorderRightColor),t.addChild(f),t._rightHandle=f,"none"!==t._borderTopStyle&&t._borderTopColor&&(w.setSolidStroke(t._borderTopColor),m.setSolidStroke(t._borderTopColor)),t.addChild(w),t.addChild(m),"none"!==t._windowBorderBottomStyle&&v.setSolidStroke(t._windowBorderBottomColor),t.addChild(v),"none"!==t._windowBorderTopStyle&&P.setSolidStroke(t._windowBorderTopColor),t.addChild(P)},a._updateBorderAroundSlidingWindow=function(t){var i=t.getSlidingWindow(),e=r._DEFAULT_WINDOW_BORDER_WIDTH/2,n=t.getLeftHandle(),o=t.getRightHandle(),s=t.getLeftTopBar(),a=t.getRightTopBar(),l=t.getBottomBar(),h=t.getTopBar();if(t.isVertical()){if(t.isHorizontalScrollingEnabled()){var d=i.getWidth(),g=t.getSlidingWindowPosX(i),u=g+e,c=g+d-e;t.setLinePosX(n,u,c),t.setLinePosX(o,u,c),t.setLinePosX(h,u,u),t.setLinePosX(l,c,c)}if(t.isVerticalScrollingEnabled()){var p=i.getHeight(),_=t.getSlidingWindowPosY(i),f=_+e,w=_+p-e;t.setLinePosY(n,f,f),t.setLinePosY(o,w,w),t.setLinePosY(h,f,w),t.setLinePosY(l,f,w)}}else t.isHorizontalScrollingEnabled()&&(d=i.getWidth(),u=(g=t.getSlidingWindowPosX(i))+e,c=g+d-e,t.setLinePosX(n,u,u),t.setLinePosX(o,c,c),t.setLinePosX(h,u,c),t.setLinePosX(l,u,c)),t.isVerticalScrollingEnabled()&&(p=i.getHeight(),f=(_=t.getSlidingWindowPosY(i))+e,w=_+p-e,t.setLinePosY(n,f,w),t.setLinePosY(o,f,w),t.setLinePosY(h,f,f),t.setLinePosY(l,w,w));t.setLinePos(s,-1,t.getSlidingWindowPos(i)),t.setLinePos(a,t.getLinePos1(o),-1)},a._updateSlidingWindow=function(t){var i=t.getSlidingWindow(),e=t.Width,n=t.Height;if(t.isHorizontalScrollingEnabled()){var o=Math.max(t.getMinimumPositionX(),s.getDatePosition(t._xMin,t._xMax,t._x1,e)),r=Math.max(t.getMinimumPositionX(),s.getDatePosition(t._xMin,t._xMax,t._x2,e)),l=Math.min(t.getMaximumPositionX(),r);t.isRTL()?t.setSlidingWindowPosX(i,e-l):t.setSlidingWindowPosX(i,o),a._setSlidingWindowWidth(t,i,l-o)}else a._setSlidingWindowWidth(t,i,e);if(t.isVerticalScrollingEnabled()){var h=Math.max(t.getMinimumPositionY(),s.getDatePosition(t._yMin,t._yMax,t._y1,n)),d=Math.max(t.getMinimumPositionY(),s.getDatePosition(t._yMin,t._yMax,t._y2,n)),g=Math.min(t.getMaximumPositionY(),d);t.setSlidingWindowPosY(i,h),a._setSlidingWindowHeight(t,i,g-h)}else a._setSlidingWindowHeight(t,i,n);a._updateBorderAroundSlidingWindow(t)},a._setSlidingWindowWidth=function(t,i,e){if(e=Math.min(t.getMaximumWindowWidth(),Math.max(t.getMinimumWindowWidth(),e)),i.setWidth(e),t.isLeftAndRightFilterRendered()){var n=t.getSlidingWindowPosX(i)+e,o=t.getRightBackground();if(o.setX(n),o.setWidth(Math.max(0,t.Width-n)),s.supportsTouch()&&!t.isFeatureOff("zoom"))t.getRightBackgroundHandle().setX(n)}if(!t.isFeatureOff("zoom")){if(t.isHorizontalScrollingEnabled()){var r=t._windowRightHandleBackground,a=t._windowRightHandle,l=t._windowRightGrippy;a.setTranslateX(e),r.setTranslateX(e-t.getHandleSize()),l.setTranslateX(e-t.getGrippySize())}if(t.isVerticalScrollingEnabled()){var h=(i.getWidth()-36)/2;if(t._vertHandleBackgroundClass)var d=e/2;else d=h;var g=t._windowTopHandleBackground,u=t._windowTopHandle,c=t._windowTopGrippy;u.setTranslateX(h),g.setWidth(e),c.setTranslateX(d);var p=t._windowBottomHandleBackground,_=t._windowBottomHandle,f=t._windowBottomGrippy;_.setTranslateX(h),p.setWidth(e),f.setTranslateX(d)}}},a._setSlidingWindowHeight=function(t,i,e){if(e=Math.min(t.getMaximumWindowHeight(),Math.max(t.getMinimumWindowHeight(),e)),i.setHeight(e),!t.isFeatureOff("zoom")){if(t.isHorizontalScrollingEnabled()){var n=(e-36)/2;if(t._horHandleBackgroundClass)var o=e/2;else o=n;var r=t._windowLeftHandleBackground,s=t._windowLeftHandle,a=t._windowLeftGrippy;s.setTranslateY(n),r.setHeight(e),a.setTranslateY(o);var l=t._windowRightHandleBackground,h=t._windowRightHandle,d=t._windowRightGrippy;h.setTranslateY(n),l.setHeight(e),d.setTranslateY(o)}if(t.isVerticalScrollingEnabled()){var g=t._windowBottomHandleBackground,u=t._windowBottomHandle,c=t._windowBottomGrippy;u.setTranslateY(e),g.setTranslateY(e-t.getHandleSize()),c.setTranslateY(e-t.getGrippySize())}}},a._renderTimeAxisTopBar=function(t){var e=t.Width,n=t.Height;if(t.isVertical())if(t.isRTL())var o=new i.Line(t.getCtx(),t.getTimeAxisWidth(),0,t.getTimeAxisWidth(),n,"tab");else o=new i.Line(t.getCtx(),e-t.getTimeAxisWidth(),0,e-t.getTimeAxisWidth(),n,"tab");else o=t.isOverviewAbove()?new i.Line(t.getCtx(),0,t.getTimeAxisHeight(),e,t.getTimeAxisHeight(),"tab"):new i.Line(t.getCtx(),0,n-t.getTimeAxisHeight(),e,n-t.getTimeAxisHeight(),"tab");o.setSolidStroke(t._timeAxisBarColor,t._timeAxisBarOpacity),o.setPixelHinting(!0),t._timeAxisTopBar=o,t.addChild(o)},a._renderLeftAndRightFilters=function(t,e){var n=t.Width,o=t.Height;if(t.isLeftAndRightFilterRendered()){if(t.isVertical())var r=new i.Rect(t.getCtx(),0,0,n,0,"lbg"),a=new i.Rect(t.getCtx(),0,0,n,0,"rbg");else r=new i.Rect(t.getCtx(),0,0,0,o,"lbg"),a=new i.Rect(t.getCtx(),0,0,0,o,"rbg");if(r.setSolidFill(t._leftFilterPanelColor,t._leftFilterPanelAlpha),t.addChild(r),a.setSolidFill(t._rightFilterPanelColor,t._rightFilterPanelAlpha),t.addChild(a),s.supportsTouch()&&null!=e){if(t.isVertical())var l=new i.Rect(t.getCtx(),0,0,n,e,"lbgrh"),h=new i.Rect(t.getCtx(),0,0,n,e,"rbgrh");else l=new i.Rect(t.getCtx(),0,0,e,o,"lbgrh"),h=new i.Rect(t.getCtx(),0,0,e,o,"rbgrh");l.setSolidFill(t._leftFilterPanelColor,0),t.addChild(l),h.setSolidFill(t._rightFilterPanelColor,0),t.addChild(h)}}},a._renderTimeAxis=function(t){if(null!=t._ticks)for(var i=t.Width,e=t.Height,n=t.isVertical(),o=t.getOverviewSize(),s=0;s<t._ticks.length;s++){var l=t._ticks[s],h=parseInt(l.time,10);if(n)var d=t.getDateYPosition(h);else d=t.getDateXPosition(h);var g=l.label,u=0;if(s+1<t._ticks.length){var c=parseInt(t._ticks[s+1].time,10);if(n)var p=t.getDateYPosition(c);else p=t.getDateXPosition(c);u=p-d}else u=o-d;t.isHorizontalRTL()&&(d=o-d),n&&(u=i),u-=2*r._DEFAULT_AXIS_LABEL_PADDING,a._addTick(t,d,i,e,"tick"+s),a._addLabel(t,d,g,e,u,"label"+s,t._labelStyle)}},a._addTick=function(t,e,n,o,r){if(t.isVertical())var s=new i.Line(t.getCtx(),0,e,n,e,r);else s=new i.Line(t.getCtx(),e,0,e,o,r);var a=new i.Stroke(t._timeIndicatorColor,1,1,!1,{dashArray:"3"});s.setStroke(a),s.setPixelHinting(!0),t.addChild(s)},a._addLabel=function(t,e,n,o,s,a,l){if(t.isVertical()){var h=new i.OutputText(t.getCtx(),n,4,e,a);if(h.setCSSStyle(l),t.isRTL()){var d=h.getDimensions();h.setX(Math.max(4,t.Width-d.w-4))}}else{if(t.isOverviewAbove())var g=2;else g=o-t.getTimeAxisHeight()+2;var u=r._DEFAULT_AXIS_LABEL_PADDING;(h=new i.OutputText(t.getCtx(),n,e+u,g,a)).setCSSStyle(l),t.isHorizontalRTL()&&(d=h.getDimensions(),h.setX(e-Math.min(d.w,s)-u))}i.TextUtils.fitText(h,s,1/0,t),h._rawText=h.getUntruncatedTextString()},a._parseFilledTimeRanges=function(t){if(null!=t._formattedTimeRanges)for(var i=0;i<t._formattedTimeRanges.length;i++){var e=t._formattedTimeRanges[i];a._addFilledTimeRange(t,e,t.Width,t.Height)}},a._addFilledTimeRange=function(t,e,n,o){var r=parseInt(e.rs,10),s=parseInt(e.re,10);if(null!=r&&null!=s){var a=e.c,l=t.getOverviewSize();if(t.isVertical())h=t.getDateYPosition(r),d=t.getDateYPosition(s);else var h=t.getDateXPosition(r),d=t.getDateXPosition(s);var g,u=d-h;if(t.isHorizontalRTL()&&(h=l-h-u),t.isVertical())g=new i.Rect(t.getCtx(),0,h,n-t.getTimeAxisWidth(),u,"ftr");else{var c=t.isOverviewAbove()?t.getTimeAxisHeight():0;g=new i.Rect(t.getCtx(),h,c,u,o-t.getTimeAxisHeight(),"ftr")}null!=a&&g.setSolidFill(a,.4),g.setCursor("move"),g.setPixelHinting(!0),t.addChild(g)}},a._updateCurrentTime=function(t){var e=t.Width,n=t.Height;if(!(null==t._currentTime||isNaN(t._currentTime)||t._currentTime<t._xMin||t._currentTime>t._xMax)){if(t.isVertical())var o=t.getDateYPosition(t._currentTime),r=new i.Line(t.getCtx(),0,o,e,o,"ocd");else o=t.getDateXPosition(t._currentTime),t.isRTL()&&(o=e-o),r=new i.Line(t.getCtx(),o,0,o,n,"ocd");r.setSolidStroke(t._currentTimeIndicatorColor),r.setPixelHinting(!0),t.addChild(r)}};const l=function(t,i,e){this.Init(t,i,e)};i.Obj.createSubclass(l,i.Container),l.MIN_WINDOW_SIZE=10,l.DEFAULT_VERTICAL_TIMEAXIS_SIZE=40,l.DEFAULT_HORIZONTAL_TIMEAXIS_SIZE=20,l.HANDLE_PADDING_SIZE=20,l.prototype.Init=function(t,e,o){l.superclass.Init.call(this,t),this.initDefaults(),this._callback=e,this._callbackObj=o,this._lastChildIndex=6,(null!=this._callback||null!=this._callbackObj)&&(this.EventManager=new n(this,t,e,o),this.EventManager.addListeners(this),s.supportsTouch()?(this.addEvtListener(i.TouchEvent.TOUCHSTART,this.HandleTouchStart,!1,this),this.addEvtListener(i.TouchEvent.TOUCHMOVE,this.HandleTouchMove,!1,this),this.addEvtListener(i.TouchEvent.TOUCHEND,this.HandleTouchEnd,!1,this),this.addEvtListener(i.MouseEvent.CLICK,this.HandleShapeClick,!1,this)):(this.addEvtListener(i.MouseEvent.MOUSEOVER,this.HandleShapeMouseOver,!1,this),this.addEvtListener(i.MouseEvent.MOUSEOUT,this.HandleShapeMouseOut,!1,this),this.addEvtListener(i.MouseEvent.CLICK,this.HandleShapeClick,!1,this)))},l.prototype.initDefaults=function(){this.Defaults=new e},l.prototype.setViewportRange=function(t,i,e,n){if(null!=t&&null!=i){var o=this.getDateXPosition(t),r=this.getDateXPosition(i);if(r>o){o<this.getMinimumPositionX()&&(o=this.getMinimumPositionX()),r>this.getMaximumPositionX()&&(r=this.getMaximumPositionX());var s=Math.max(r-o,this.getMinimumWindowWidth()),l=this.getSlidingWindow();this.isRTL()?this.setSlidingWindowPosX(l,this.Width-(o+s)):this.setSlidingWindowPosX(l,o),a._setSlidingWindowWidth(this,l,s)}}if(null!=e&&null!=n){var h=this.getDateYPosition(e),d=this.getDateYPosition(n);if(d>h){h<this.getMinimumPositionY()&&(h=this.getMinimumPositionY()),d>this.getMaximumPositionY()&&(d=this.getMaximumPositionY());var g=Math.max(d-h,this.getMinimumWindowHeight());l=this.getSlidingWindow(),this.setSlidingWindowPosY(l,h),a._setSlidingWindowHeight(this,l,g)}}a._updateBorderAroundSlidingWindow(this)},l.prototype.isFeatureOff=function(t){return null!=this._featuresOff&&-1!==this._featuresOff.indexOf(t)},l.prototype.isAnimationOnClick=function(){return"off"!==this._animationOnClick},l.prototype.render=function(t,i,e){if(null!=i&&null!=e&&(this.Width=i,this.Height=e),null==t){var n=this.getSlidingWindow();if(this._xMin&&this._xMax){var o=this.getSlidingWindowPosX(n);null!=n&&0!==o&&(this._x1=s.getPositionDate(this._xMin,this._xMax,o,this.Width))}this._yMin&&this._yMax&&(o=this.getSlidingWindowPosY(n),null!=n&&0!==o&&(this._y1=s.getPositionDate(this._yMin,this._yMax,o,this.Height))),this.removeChildren()}else{this.SetOptions(t);var r=this.Parse(this.Options);this._applyParsedProperties(r)}a.renderOverview(this)},l.prototype.SetOptions=function(t){this.Options=this.Defaults.calcOptions(t)},l.prototype.getParser=function(t){return new o(this)},l.prototype.Parse=function(t){return this.getParser(t).parse(t)},l.prototype._applyParsedProperties=function(t){this._xMin=t.xMin,this._xMax=t.xMax,this._x1=t.x1,this._x2=t.x2,this._yMin=t.yMin,this._yMax=t.yMax,this._y1=t.y1,this._y2=t.y2,this._currentTime=t.currentTime,this._animationOnClick=t.animationOnClick,this._leftMargin=Math.max(0,t.leftMargin),this._rightMargin=Math.max(0,t.rightMargin),isNaN(this._leftMargin)&&(this._leftMargin=0),isNaN(this._rightMargin)&&(this._rightMargin=0),this._orientation=t.orientation,this._isRtl=t.isRtl,null!=t.featuresOff&&(this._featuresOff=t.featuresOff.split(" ")),null!=t.minimumWindowSize&&t.minimumWindowSize>0&&(this._minimumWindowSize=t.minimumWindowSize),this._timeAxisInfo=t.timeAxisInfo,null!=t.timeAxisInfo&&(this._ticks=this._timeAxisInfo.ticks),this._formattedTimeRanges=t.formattedTimeRanges,this._borderTopStyle=r.getBorderTopStyle(this.Options),this._borderTopColor=r.getBorderTopColor(this.Options),this._windowBackgroundColor=r.getWindowBackgroundColor(this.Options),this._windowBackgroundAlpha=r.getWindowBackgroundAlpha(this.Options),this._windowBorderTopStyle=r.getWindowBorderTopStyle(this.Options),this._windowBorderRightStyle=r.getWindowBorderRightStyle(this.Options),this._windowBorderBottomStyle=r.getWindowBorderBottomStyle(this.Options),this._windowBorderLeftStyle=r.getWindowBorderLeftStyle(this.Options),this._windowBorderTopColor=r.getWindowBorderTopColor(this.Options),this._windowBorderRightColor=r.getWindowBorderRightColor(this.Options),this._windowBorderBottomColor=r.getWindowBorderBottomColor(this.Options),this._windowBorderLeftColor=r.getWindowBorderLeftColor(this.Options),this._handleTextureColor=r.getHandleTextureColor(this.Options),this._handleFillColor=r.getHandleFillColor(this.Options),this._horHandleBackgroundClass=r.getHandleBackgroundClass(this.Options,!1),this._horHandleSize=r.getHandleSize(this.Options,!1),this._vertHandleBackgroundClass=r.getHandleBackgroundClass(this.Options,!0),this._vertHandleSize=r.getHandleSize(this.Options,!0),this._overviewBackgroundColor=r.getOverviewBackgroundColor(this.Options),this._currentTimeIndicatorColor=r.getCurrentTimeIndicatorColor(this.Options),this._timeIndicatorColor=r.getTimeIndicatorColor(this.Options),this._timeAxisBarColor=r.getTimeAxisBarColor(this.Options),this._timeAxisBarOpacity=r.getTimeAxisBarAlpha(this.Options),this._leftFilterPanelColor=r.getLeftFilterPanelColor(this.Options),this._leftFilterPanelAlpha=r.getLeftFilterPanelAlpha(this.Options),this._rightFilterPanelColor=r.getRightFilterPanelColor(this.Options),this._rightFilterPanelAlpha=r.getRightFilterPanelAlpha(this.Options),this._labelStyle=new i.CSSStyle("font-weight:bold")},l.prototype.getDateXPosition=function(t){return Math.max(this.getMinimumPositionX(),s.getDatePosition(this._xMin,this._xMax,t,this.getOverviewWidth())+this._leftMargin)},l.prototype.getDateYPosition=function(t){return Math.max(this.getMinimumPositionY(),s.getDatePosition(this._yMin,this._yMax,t,this.getOverviewHeight()))},l.prototype.getXPositionDate=function(t){return s.getPositionDate(this._xMin,this._xMax,Math.max(this.getMinimumPositionX()-this._leftMargin,t-this._leftMargin),this.getOverviewWidth())},l.prototype.getYPositionDate=function(t){return s.getPositionDate(this._yMin,this._yMax,Math.max(this.getMinimumPositionY(),t),this.getOverviewHeight())},l.prototype.isRTL=function(){return"true"===this._isRtl},l.prototype.isHorizontalRTL=function(){return this.isRTL()&&!this.isVertical()},l.prototype.isVertical=function(){return"vertical"===this._orientation},l.prototype.isOverviewAbove=function(){return"above"===this.Options.overviewPosition},l.prototype.setMargins=function(t,i){!isNaN(t)&&null!=t&&t>0&&(this._leftMargin=t),!isNaN(i)&&null!=i&&i>0&&(this._rightMargin=i)},l.prototype.getOverviewSize=function(){return this.isVertical()?this.Height-this._leftMargin-this._rightMargin:this.Width-this._leftMargin-this._rightMargin},l.prototype.getOverviewWidth=function(){return this.Width-this._leftMargin-this._rightMargin},l.prototype.getOverviewHeight=function(){return this.Height},l.prototype.getMinimumPositionX=function(){return this._leftMargin},l.prototype.getMinimumPositionY=function(){return 0},l.prototype.getMaximumPositionX=function(){return this.Width-this._rightMargin},l.prototype.getMaximumPositionY=function(){return this.Height},l.prototype.getMinimumWindowWidth=function(){return null!=this._minWinSize?this._minWinSize:null!=this._minimumWindowSize?(this._minWinSize=s.getDatePosition(this._xMin,this._xMax,this._xMin+this._minimumWindowSize,this.getOverviewWidth()),this._minWinSize):l.MIN_WINDOW_SIZE},l.prototype.getMinimumWindowHeight=function(){return null!=this._minWinSize?this._minWinSize:null!=this._minimumWindowSize?(this._minWinSize=s.getDatePosition(this._yMin,this._yMax,this._yMin+this._minimumWindowSize,this.getOverviewHeight()),this._minWinSize):l.MIN_WINDOW_SIZE},l.prototype.getMaximumWindowWidth=function(){return this.Width},l.prototype.getMaximumWindowHeight=function(){return this.Height},l.prototype.getGrippySize=function(){return 10},l.prototype.getHandleStart=function(){return s.supportsTouch()?this.getHandleSize()/2:0},l.prototype.getHandleSize=function(){return s.supportsTouch()?30:10},l.prototype.isHandle=function(t){var i=t.getId();return"lh"===i||"rh"===i||"lhb"===i||"rhb"===i||"th"===i||"bh"===i||"thb"===i||"bhb"===i||"hgrpy"===i||"vgrpy"===i||"lbgrh"===i||"rbgrh"===i||null!=t.getParent()&&("hgrpy"===t.getParent().getId()||"vgrpy"===t.getParent().getId())},l.prototype.isLeftOrRightHandle=function(t){var i=t.getId();return"lh"===i||"rh"===i||"lhb"===i||"rhb"===i||"hgrpy"===i||"lbgrh"===i||"rbgrh"===i||null!=t.getParent()&&"hgrpy"===t.getParent().getId()},l.prototype.isTopOrBottomHandle=function(t){var i=t.getId();return"th"===i||"bh"===i||"thb"===i||"bhb"===i||"vgrpy"===i||null!=t.getParent()&&"vgrpy"===t.getParent().getId()},l.prototype.getTimeAxisWidth=function(){if(null==this._timeAxisInfo)return 0;if(null==this._timeAxisWidth){var t=parseInt(this._timeAxisInfo.width,10);!isNaN(t)&&t<this.Width?this._timeAxisWidth=t:this._timeAxisWidth=l.DEFAULT_VERTICAL_TIMEAXIS_SIZE}return this._timeAxisWidth},l.prototype.getTimeAxisHeight=function(){if(null==this._timeAxisInfo)return 0;if(null==this._timeAxisHeight){var t=parseInt(this._timeAxisInfo.height,10);!isNaN(t)&&t<this.Height?this._timeAxisHeight=t:this._timeAxisHeight=l.DEFAULT_HORIZONTAL_TIMEAXIS_SIZE}return this._timeAxisHeight},l.prototype.getPageX=function(t){return s.supportsTouch()&&null!=t.targetTouches?t.targetTouches.length>0?t.targetTouches[0].pageX:null:t.pageX},l.prototype.getPageY=function(t){return s.supportsTouch()&&null!=t.targetTouches?t.targetTouches.length>0?t.targetTouches[0].pageY:null:t.pageY},l.prototype.isBackgroundRendered=function(){return!0},l.prototype.isLeftAndRightFilterRendered=function(){return!1},l.prototype.getSlidingWindow=function(){return this.getChildAt(1)},l.prototype.getSlidingWindowWidth=function(){if(this.isHorizontalScrollingEnabled()){var t=Math.max(this.getMinimumPositionX(),s.getDatePosition(this._xMin,this._xMax,this._x1,this.Width));return Math.min(this.getMaximumPositionX(),Math.max(this.getMinimumPositionX(),s.getDatePosition(this._xMin,this._xMax,this._x2,this.Width)))-t}return this.Width},l.prototype.getSlidingWindowHeight=function(){if(this.isVerticalScrollingEnabled()){var t=Math.max(this.getMinimumPositionY(),s.getDatePosition(this._yMin,this._yMax,this._y1,this.Height));return Math.min(this.getMaximumPositionY(),Math.max(this.getMinimumPositionY(),s.getDatePosition(this._yMin,this._yMax,this._y2,this.Height)))-t}return this.Height},l.prototype.getLeftBackground=function(){return this.isLeftAndRightFilterRendered()?this.getChildAt(3):null},l.prototype.getRightBackground=function(){return this.isLeftAndRightFilterRendered()?this.getChildAt(4):null},l.prototype.getLeftBackgroundHandle=function(){return this.isLeftAndRightFilterRendered()&&!this.isFeatureOff("zoom")?this.getChildAt(5):null},l.prototype.getRightBackgroundHandle=function(){return this.isLeftAndRightFilterRendered()&&!this.isFeatureOff("zoom")?this.getChildAt(6):null},l.prototype.getLeftHandle=function(){return this._leftHandle},l.prototype.getRightHandle=function(){return this._rightHandle},l.prototype.getLeftTopBar=function(){var t=this._lastChildIndex-2;return this.getChildAt(this.getNumChildren()-t)},l.prototype.getRightTopBar=function(){var t=this._lastChildIndex-3;return this.getChildAt(this.getNumChildren()-t)},l.prototype.getBottomBar=function(){var t=this._lastChildIndex-4;return this.getChildAt(this.getNumChildren()-t)},l.prototype.getTopBar=function(){var t=this._lastChildIndex-5;return this.getChildAt(this.getNumChildren()-t)},l.prototype.setLinePos=function(t,i,e){this.isVertical()?(-1!==i&&t.setY1(i),-1!==e&&t.setY2(e)):(-1!==i&&t.setX1(i),-1!==e&&t.setX2(e))},l.prototype.setLinePosX=function(t,i,e){-1!==i&&t.setX1(i),-1!==e&&t.setX2(e)},l.prototype.setLinePosY=function(t,i,e){-1!==i&&t.setY1(i),-1!==e&&t.setY2(e)},l.prototype.getLinePos1=function(t){return this.isVertical()?t.getY1():t.getX1()},l.prototype._findDrawable=function(t){var i=t.target;if(null!=i){var e=i.getId();if(null==e)return null;if("_border"===e.substr(e.length-7))return this.getChildAfter(i);if("tick"!==e.substr(0,4)&&"ltb"!==e&&"rtb"!==e&&"bb"!==e&&"tab"!==e)return i}return null},l.prototype.isMovable=function(t){return!("window"!==t.getId()&&"ftr"!==t.getId()&&"sta"!==t.getId()&&!this.isHandle(t))},l.prototype.setRectPos=function(t,i){this.isVertical()?t.setY(i):t.setX(i)},l.prototype.getRectPos=function(t){return this.isVertical()?t.getY():t.getX()},l.prototype.getRectSize=function(t){return this.isVertical()?t.getHeight():t.getWidth()},l.prototype.setRectSize=function(t,i){this.isVertical()?t.setHeight(i):t.setWidth(i)},l.prototype.getSlidingWindowPos=function(t){return this.isVertical()?t.getTranslateY():t.getTranslateX()},l.prototype.getSlidingWindowPosX=function(t){return t.getTranslateX()},l.prototype.getSlidingWindowPosY=function(t){return t.getTranslateY()},l.prototype.setSlidingWindowPosX=function(t,i){if(i=Math.max(this.getMinimumPositionX(),i),t.setTranslateX(i),this.isLeftAndRightFilterRendered()){this.getLeftBackground().setWidth(i);var e=i+this.getSlidingWindowSize(t),n=this.getRightBackground();if(n.setX(e),n.setWidth(Math.max(0,this.Width-e)),s.supportsTouch()&&!this.isFeatureOff("zoom")){var o=this.getHandleStart();this.getLeftBackgroundHandle().setX(i-o),this.getRightBackgroundHandle().setX(e)}}},l.prototype.setSlidingWindowPosY=function(t,i){i=Math.max(this.getMinimumPositionY(),i),t.setTranslateY(i)},l.prototype.getSlidingWindowSize=function(t){return this.getRectSize(t)},l.prototype.renderData=function(t,i){},l.prototype.animateSlidingWindow=function(t,e){var n=this.getSlidingWindow();if(null!=t&&t!==this.getSlidingWindowPosX(n)||null!=e&&e!==this.getSlidingWindowPosY(n)){var o=this.getLeftHandle(),r=this.getRightHandle(),a=this.getLeftTopBar(),l=this.getRightTopBar(),h=this.getBottomBar(),d=this.getTopBar(),g=!1,u=this.isAnimationOnClick()?new i.Animator(this.getCtx(),.5,0,i.Easing.linear):null;if(this.isVerticalScrollingEnabled()&&null!=e){var c=n.getTranslateY,p=n.setTranslateY,_=o.getY1,f=o.setY1,w=o.getY2,m=o.setY2,v=r.getY1,P=r.setY1,S=r.getY2,y=r.setY2,C=h.getY1,x=h.setY1,T=h.getY2,W=h.setY2,M=d.getY1,H=d.setY1,b=d.getY2,D=d.setY2,B=this.getMinimumPositionY(),X=this.getMaximumPositionY(),L=n.getHeight();e=Math.max(B,Math.min(X-L,e)),this.animateProperty(u,n,c,p,e),this.isVertical()?(this.animateProperty(u,o,_,f,e),this.animateProperty(u,o,w,m,e),this.animateProperty(u,r,v,P,e+L),this.animateProperty(u,r,S,y,e+L),this.animateProperty(u,h,C,x,e),this.animateProperty(u,d,M,H,e),this.animateProperty(u,h,T,W,e+L),this.animateProperty(u,d,b,D,e+L),this.animateProperty(u,a,a.getY2,a.setY2,e+1),this.animateProperty(u,l,l.getY1,l.setY1,e+L-1)):(this.animateProperty(u,o,_,f,e),this.animateProperty(u,o,w,m,e+L),this.animateProperty(u,r,v,P,e),this.animateProperty(u,r,S,y,e+L),this.animateProperty(u,h,C,x,e+L),this.animateProperty(u,d,M,H,e),this.animateProperty(u,h,T,W,e+L),this.animateProperty(u,d,b,D,e)),g=!0}if(this.isHorizontalScrollingEnabled()&&null!=t){var A=n.getTranslateX,E=n.setTranslateX,O=o.getX1,R=o.setX1,Y=o.getX2,I=o.setX2,k=r.getX1,F=r.setX1,z=r.getX2,U=r.setX2,N=h.getX1,V=h.setX1,G=h.getX2,j=h.setX2,Z=d.getX1,K=d.setX1,q=d.getX2,J=d.setX2,Q=this.getMinimumPositionX(),$=this.getMaximumPositionX(),tt=n.getWidth();t=Math.max(Q,Math.min($-tt,t)),this.animateProperty(u,n,A,E,t),this.animateProperty(u,o,O,R,t),this.animateProperty(u,o,Y,I,t),this.animateProperty(u,r,k,F,t+tt),this.animateProperty(u,r,z,U,t+tt),this.isVertical()||(this.animateProperty(u,a,a.getX2,a.setX2,t+1),this.animateProperty(u,l,l.getX1,l.setX1,t+tt-1)),this.animateProperty(u,h,N,V,t),this.animateProperty(u,d,Z,K,t),this.animateProperty(u,h,G,j,t+tt),this.animateProperty(u,d,q,J,t+tt),g=!0}if(this.isLeftAndRightFilterRendered()){var it=this.getLeftBackground(),et=it.getWidth,nt=it.setWidth;this.animateProperty(u,it,et,nt,t);var ot=t+tt,rt=this.getRightBackground(),st=rt.getWidth,at=rt.setWidth,lt=rt.getX,ht=rt.setX;if(this.animateProperty(u,rt,st,at,this.Width-ot),this.animateProperty(u,rt,lt,ht,ot),s.supportsTouch()&&!this.isFeatureOff("zoom")){var dt=this.getHandleStart(),gt=this.getLeftBackgroundHandle(),ut=gt.getX,ct=gt.setX,pt=this.getRightBackgroundHandle(),_t=pt.getX,ft=pt.setX;this.animateProperty(u,gt,ut,ct,t-dt),this.animateProperty(u,pt,_t,ft,ot)}g=!0}null!=u&&g&&u.play()}},l.prototype.animateProperty=function(t,e,n,o,r){null!=t?t.addProp(i.Animator.TYPE_NUMBER,e,n,o,r):o.call(e,r)},l.prototype.HandleShapeMouseOver=function(t){var e=this._findDrawable(t);if(e&&"bg"!==e.getId()&&"ocd"!==e.getId())if("label"===e.getId().substr(0,5)&&(e instanceof i.OutputText||e instanceof i.BackgroundOutputText))e.isTruncated()&&this.getCtx().getTooltipManager().showDatatip(t.pageX,t.pageY,e._rawText,"#000000");else if("window"!==e.getId()&&"ftr"!==e.getId()&&"arr"!==e.getId()&&!this.isHandle(e))return e},l.prototype.HandleShapeMouseOut=function(t){null==this._moveDrawable&&this.setCursor("default");var i=this._findDrawable(t);return null==i?null:i},l.prototype.HandleShapeClick=function(t,e,n){t.stopPropagation();var o=this._findDrawable(t);if(!o||"window"===o.getId()||this.isHandle(o))return null;if("bg"===o.getId()||"label"===o.getId().substr(0,5)||"ocd"===o.getId()||"lbg"===o.getId()||"rbg"===o.getId()){null==e&&(e=t.pageX),null==n&&(n=t.pageY);var r=this.getCtx().pageToStageCoords(e,n);r=this.stageToLocal(r);var s,a,l,h,d=this.getSlidingWindow();if(this.isVerticalScrollingEnabled())var g=r.y,u=this.Height,c=g-d.getHeight()/2;if(this.isHorizontalScrollingEnabled())var p=r.x,_=this.Width,f=p-d.getWidth()/2;if(this.animateSlidingWindow(f,c),null!=f){var w=d.getWidth();f=Math.max(this.getMinimumPositionX(),Math.min(f,_-w)),this.isRTL()?(s=this.getXPositionDate(_-(f+w)),a=this.getXPositionDate(_-f)):(s=this.getXPositionDate(f),a=this.getXPositionDate(f+w))}if(null!=c){var m=d.getHeight();c=Math.max(this.getMinimumPositionY(),Math.min(c,u-m)),l=this.getYPositionDate(c),h=this.getYPositionDate(c+m)}var v=i.EventFactory.newOverviewEvent("scrollTime",s,a,l,h);return this.dispatchEvent(v),null}return o},l.prototype.beginDragPan=function(t,e,n){var o=this._findDrawable(t);if(null!=o&&this.isMovable(o)){if("ftr"!==o.getId()&&"sta"!==o.getId()||(o=this.getSlidingWindow()),this._initX=e,this._initY=n,this.isHandle(o)){var r=this.getSlidingWindow();"hgrpy"!==o.getParent().getId()&&"vgrpy"!==o.getParent().getId()||(o=o.getParent());var a=o.getId();"hgrpy"!==a&&"vgrpy"!==a||(a=(o=r.getChildBefore(o)).getId()),"lh"!==a&&"rh"!==a&&"th"!==a&&"bh"!==a||(a=(o=r.getChildBefore(o)).getId()),"lbgrh"===a&&(o=r.getChildAt(0)),"rbgrh"===a&&(o=r.getChildAt(r.getNumChildren()-3)),this.isLeftOrRightHandle(o)?(this._isHorizontalResize=!0,this.isRTL()?(this._oldEndPosX=this.Width-r.getX(),this._oldStartPosX=this._oldEndPosX-r.getWidth()):(this._oldStartPosX=r.getX(),this._oldEndPosX=this._oldStartPosX+r.getWidth()),s.supportsTouch()||(o.setX(0-l.HANDLE_PADDING_SIZE),o.setWidth(2*(o.getWidth()+l.HANDLE_PADDING_SIZE)))):(this._isHorizontalResize=!1,this._oldStartPosY=r.getY(),this._oldEndPosY=this._oldStartPosY+r.getHeight(),s.supportsTouch()||(o.setY(0-l.HANDLE_PADDING_SIZE),o.setHeight(2*(o.getHeight()+l.HANDLE_PADDING_SIZE)))),this.overrideCursors(o.getCursor())}this._moveDrawable=o;var h=i.EventFactory.newOverviewEvent("dropCallback");return this.dispatchEvent(h),!0}return!1},l.prototype.overrideCursors=function(t){var i=this.getSlidingWindow();if(null!=i&&i.setCursor(t),this.isLeftAndRightFilterRendered()){var e=this.getLeftBackground(),n=this.getRightBackground();null!=e&&null!=n&&(e.setCursor(t),n.setCursor(t))}},l.prototype.resetCursors=function(){var t=this.getSlidingWindow();if(null!=t&&t.setCursor("move"),this.isLeftAndRightFilterRendered()){var i=this.getLeftBackground(),e=this.getRightBackground();null!=i&&null!=e&&(i.setCursor("default"),e.setCursor("default"))}},l.prototype.endDragPan=function(){null!=this._moveDrawable&&this._isDragPanning&&("window"===this._moveDrawable.getId()?this.handleWindowDrag("scrollEnd"):this.isHandle(this._moveDrawable)&&(this.finishHandleDrag(0,0),s.supportsTouch()||(this.isTopOrBottomHandle(this._moveDrawable)?(this._moveDrawable.setY(0),this._moveDrawable.setHeight(this.getHandleSize())):this.isLeftOrRightHandle(this._moveDrawable)&&(this._moveDrawable.setX(0),this._moveDrawable.setWidth(this.getHandleSize()))),this.resetCursors()),this._isDragPanning=!1,this._moveDrawable=null,this._initX=-1)},l.prototype.contDragPan=function(t,i,e){if(null!=this._moveDrawable&&-1!==this._initX){this._isDragPanning=!0;var n=i-this._initX,o=e-this._initY;this._initX=i,this._initY=e,"window"===this._moveDrawable.getId()?this.handleWindowDrag("scrollPos",n,o):"lh"===this._moveDrawable.getId()||"lhb"===this._moveDrawable.getId()?this.handleLeftOrRightHandleDragPositioning(t,n,!0):"rh"===this._moveDrawable.getId()||"rhb"===this._moveDrawable.getId()?this.handleLeftOrRightHandleDragPositioning(t,n,!1):"th"===this._moveDrawable.getId()||"thb"===this._moveDrawable.getId()?this.handleTopOrBottomHandleDragPositioning(t,o,!0):"bh"!==this._moveDrawable.getId()&&"bhb"!==this._moveDrawable.getId()||this.handleTopOrBottomHandleDragPositioning(t,o,!1)}},l.prototype.HandleTouchStart=function(t){var i=t.touches;this._touchStartX=i[0].pageX,this._touchStartY=i[0].pageY,2===i.length&&(t.preventDefault(),this._touchStartX2=i[1].pageX,this._touchStartY2=i[1].pageY,Math.abs(this._touchStartY-this._touchStartY2)<20?this._counter=0:(this._touchStartX=null,this._touchStartY=null,this._touchStartX2=null,this._touchStartY2=null))},l.prototype.HandleTouchMove=function(t){t.preventDefault();var i=t.touches;if(null!=this._touchStartX2&&null!=this._touchStartY2){if(this._counter<50)return void this._counter++;var e=i[1].pageX-this._touchStartX2;this.handleRightHandleDragPositioning(null,e,0),this._touchStartX2=i[1].pageX,this._counter=0}else{var n=Math.abs(this._touchStartX-i[0].pageX),o=Math.abs(this._touchStartY-i[0].pageY);(n>3||o>3)&&(this._touchStartX=null,this._touchStartY=null)}},l.prototype.HandleTouchEnd=function(t){null!=this._touchStartX2&&null!=this._touchStartY2?this.finishHandleDrag(0,0):null!=this._touchStartX&&null!=this._touchStartY&&this.HandleShapeClick(t,this._touchStartX,this._touchStartY),this._touchStartX=null,this._touchStartY=null,this._touchStartX2=null,this._touchStartY2=null},l.prototype.stopDragAction=function(){this.endDragPan()},l.prototype.handleWindowDrag=function(t,i,e){var n,o,r,s,l=this.getSlidingWindow(),h=!1,d=this.getSlidingWindowPosX(l),g=this.getSlidingWindowPosY(l),u=l.getWidth(),c=l.getHeight();if("scrollPos"===t){if(this.isHorizontalScrollingEnabled()&&0!==i){var p=this.getMinimumPositionX(),_=this.getMaximumPositionX();d+i<=p?this.setSlidingWindowPosX(l,p):d+u+i>=_?this.setSlidingWindowPosX(l,_-u):this.setSlidingWindowPosX(l,d+i);var f=this.getSlidingWindowPosX(l);f!==d&&(d=f,h=!0)}if(this.isVerticalScrollingEnabled()&&0!==e){var w=this.getMinimumPositionY(),m=this.getMaximumPositionY();g+e<=w?this.setSlidingWindowPosY(l,w):g+c+e>=m?this.setSlidingWindowPosY(l,m-c):this.setSlidingWindowPosY(l,g+e);var v=this.getSlidingWindowPosY(l);v!==g&&(g=v,h=!0)}h&&a._updateBorderAroundSlidingWindow(this)}this.isHorizontalScrollingEnabled()&&(this.isRTL()?(n=this.getXPositionDate(this.Width-(d+u)),o=this.getXPositionDate(this.Width-d)):(n=this.getXPositionDate(d),o=this.getXPositionDate(d+u))),this.isVerticalScrollingEnabled()&&(r=this.getYPositionDate(g),s=this.getYPositionDate(g+c)),this.fireScrollEvent(t,n,o,r,s)},l.prototype.fireScrollEvent=function(t,e,n,o,r){var s,a,l,h;this.isHorizontalScrollingEnabled()&&(s=e,a=n),this.isVerticalScrollingEnabled()&&(l=o,h=r);var d=i.EventFactory.newOverviewEvent(t,s,a,l,h);this.dispatchEvent(d)},l.prototype.handleLeftOrRightHandleDragPositioning=function(t,e,n){if(0!==e){var o=this.getSlidingWindow(),r=this.getSlidingWindowPosX(o),s=o.getWidth();if(n){if(s-e<=this.getMinimumWindowWidth())return;if(r+e<=this.getMinimumPositionX())return;var l=this.getCtx().pageToStageCoords(this.getPageX(t),this.getPageY(t)).x;if(l=this.stageToLocal(l),e>0&&l<=r||e<0&&l>=r)return;this.setSlidingWindowPosX(o,r+e),a._setSlidingWindowWidth(this,o,s-e)}else{if(s+e<=this.getMinimumWindowWidth())return;if(r+s+e>=this.getMaximumPositionX())return;if(l=this.getCtx().pageToStageCoords(this.getPageX(t),this.getPageY(t)).x,l=this.stageToLocal(l),e>0&&l<=r+s||e<0&&l>=r+s)return;a._setSlidingWindowWidth(this,o,s+e)}if(a._updateBorderAroundSlidingWindow(this),this.isRangeChangingSupported()){var h,d;this.isRTL()?(h=this.getXPositionDate(this.Width-(this.getSlidingWindowPosX(o)+o.getWidth())),d=this.getXPositionDate(this.Width-this.getSlidingWindowPosX(o))):(h=this.getXPositionDate(this.getSlidingWindowPosX(o)),d=this.getXPositionDate(this.getSlidingWindowPosX(o)+o.getWidth()));var g=i.EventFactory.newOverviewEvent("rangeChanging",h,d);this.dispatchEvent(g)}}},l.prototype.handleTopOrBottomHandleDragPositioning=function(t,e,n){if(0!==e){var o=this.getSlidingWindow(),r=this.getSlidingWindowPosY(o),s=o.getHeight();if(n){if(s-e<=this.getMinimumWindowHeight())return;if(r+e<=this.getMinimumPositionY())return;var l=this.getCtx().pageToStageCoords(this.getPageX(t),this.getPageY(t)).y;if(l=this.stageToLocal(l),e>0&&l<=r||e<0&&l>=r)return;this.setSlidingWindowPosY(o,r+e),a._setSlidingWindowHeight(this,o,s-e)}else{if(s+e<=this.getMinimumWindowHeight())return;if(r+s+e>=this.getMaximumPositionY())return;if(l=this.getCtx().pageToStageCoords(this.getPageX(t),this.getPageY(t)).y,l=this.stageToLocal(l),e>0&&l<=r+s||e<0&&l>=r+s)return;a._setSlidingWindowHeight(this,o,s+e)}if(a._updateBorderAroundSlidingWindow(this),this.isRangeChangingSupported()){var h=this.getYPositionDate(this.getSlidingWindowPosY(o)),d=this.getYPositionDate(this.getSlidingWindowPosY(o)+o.getHeight()),g=i.EventFactory.newOverviewEvent("rangeChanging",void 0,void 0,h,d);this.dispatchEvent(g)}}},l.prototype.isHorizontalScrollingEnabled=function(){return null!=this._xMin&&null!=this._xMax},l.prototype.isVerticalScrollingEnabled=function(){return null!=this._yMin&&null!=this._yMax},l.prototype.isRangeChangingSupported=function(){return!0},l.prototype.finishHandleDrag=function(t,e){var n,o=this.getSlidingWindow();if(this._isHorizontalResize){var r=this.getXPositionDate(this._oldStartPosX),s=this.getXPositionDate(this._oldEndPosX);if(this.isRTL())var a=this.getXPositionDate(this.Width-(this.getSlidingWindowPosX(o)+o.getWidth())),l=this.getXPositionDate(this.Width-this.getSlidingWindowPosX(o));else a=this.getXPositionDate(this.getSlidingWindowPosX(o)),l=this.getXPositionDate(this.getSlidingWindowPosX(o)+o.getWidth());n=i.EventFactory.newOverviewEvent("rangeChange",a,l,void 0,void 0,r,s)}else{var h=this.getYPositionDate(this._oldStartPosY),d=this.getYPositionDate(this._oldEndPosY),g=this.getYPositionDate(this.getSlidingWindowPosY(o)),u=this.getYPositionDate(this.getSlidingWindowPosY(o)+o.getHeight());n=i.EventFactory.newOverviewEvent("rangeChange",void 0,void 0,g,u,void 0,void 0,h,d)}this.dispatchEvent(n)},l.prototype.dispatchEvent=function(t){this._callback.call(this._callbackObj,t,this)},l.prototype.destroy=function(){this.EventManager&&(this.EventManager.removeListeners(this),this.EventManager.destroy(),this.EventManager=null),s.supportsTouch()?(this.removeEvtListener(i.TouchEvent.TOUCHSTART,this.HandleTouchStart,!1,this),this.removeEvtListener(i.TouchEvent.TOUCHMOVE,this.HandleTouchMove,!1,this),this.removeEvtListener(i.TouchEvent.TOUCHEND,this.HandleTouchEnd,!1,this),this.removeEvtListener(i.MouseEvent.CLICK,this.HandleShapeClick,!1,this)):(this.removeEvtListener(i.MouseEvent.MOUSEOVER,this.HandleShapeMouseOver,!1,this),this.removeEvtListener(i.MouseEvent.MOUSEOUT,this.HandleShapeMouseOut,!1,this),this.removeEvtListener(i.MouseEvent.CLICK,this.HandleShapeClick,!1,this),this.removeEvtListener(i.KeyboardEvent.KEYDOWN,this.HandleKeyDown,!1,this),this.removeEvtListener(i.KeyboardEvent.KEYUP,this.HandleKeyUp,!1,this)),l.superclass.destroy.call(this)},t.Overview=l,t.OverviewParser=o,t.OverviewUtils=s,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ojdvt-overview.js.map