/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojlogger',["exports"],function(o){"use strict";const n={LEVEL_NONE:0,LEVEL_ERROR:1,LEVEL_WARN:2,LEVEL_INFO:3,LEVEL_LOG:4,_METHOD_ERROR:"error",_METHOD_WARN:"warn",_METHOD_INFO:"info",_METHOD_LOG:"log"};n._defaultOptions={level:n.LEVEL_ERROR,writer:null},n._options=n._defaultOptions,n.error=function(o,t){n._write(n.LEVEL_ERROR,n._METHOD_ERROR,arguments)},n.info=function(o,t){n._write(n.LEVEL_INFO,n._METHOD_INFO,arguments)},n.warn=function(o,t){n._write(n.LEVEL_WARN,n._METHOD_WARN,arguments)},n.log=function(o,t){n._write(n.LEVEL_LOG,n._METHOD_LOG,arguments)},n.option=function(o,t){var i,E,e={};if(0===arguments.length){for(E=Object.keys(n._options),i=0;i<E.length;i++)e[E[i]]=n._options[E[i]];return e}if("string"==typeof o&&void 0===t)return void 0===n._options[o]?null:n._options[o];if("string"==typeof o)n._options[o]=t;else{var _=o;for(E=Object.keys(_),i=0;i<E.length;i++)n.option(E[i],_[E[i]])}},n._write=function(o,t,i){if(!(n.option("level")<o)){var E=n._getWriter();if(null!=E){if(1===i.length&&i[0]instanceof Function){var e=i[0]();i=[e]}E[t]&&E[t].apply?E[t].apply(E,i):E[t]&&(E[t]=Function.prototype.bind.call(E[t],E),n._write(o,t,i))}}},n._getWriter=function(){var o=null;return n.option("writer")?o=n.option("writer"):"undefined"!=typeof window&&void 0!==window.console&&(o=window.console),o};const t=n.info,i=n.error,E=n.warn,e=n.log,_=n.option,r=n.LEVEL_ERROR,L=n.LEVEL_INFO,O=n.LEVEL_LOG,l=n.LEVEL_NONE,f=n.LEVEL_WARN;o.LEVEL_ERROR=r,o.LEVEL_INFO=L,o.LEVEL_LOG=O,o.LEVEL_NONE=l,o.LEVEL_WARN=f,o.error=i,o.info=t,o.log=e,o.option=_,o.warn=E,Object.defineProperty(o,"__esModule",{value:!0})});
//# sourceMappingURL=ojlogger.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojcore-base',["ojs/ojlogger"],function(e){"use strict";let t={};"undefined"!=typeof window?t=window:"undefined"!=typeof self&&(t=self);var n=t.oj;const r={version:"11.0.0",revision:"2021-07-01_19-42-54",noConflict:function(){t.oj=n},_registerLegacyNamespaceProp:function(e,t){this[e]=t}};t.oj=r;const o={};r._registerLegacyNamespaceProp("StringUtils",o),o._TRIM_ALL_RE=/^\s*|\s*$/g,o.isEmpty=function(e){return null===e||0===o.trim(e).length},o.isEmptyOrUndefined=function(e){return!(void 0!==e&&!o.isEmpty(e))},o.isString=function(e){return null!==e&&("string"==typeof e||e instanceof String)},o.trim=function(e){return o.isString(e)?e.replace(o._TRIM_ALL_RE,""):e},o.hashCode=function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t};const i=function(){};r._registerLegacyNamespaceProp("AgentUtils",i),i.BROWSER={IE:"ie",FIREFOX:"firefox",SAFARI:"safari",CHROME:"chrome",EDGE:"edge",EDGE_CHROMIUM:"edge-chromium",UNKNOWN:"unknown"},i.ENGINE={TRIDENT:"trident",WEBKIT:"webkit",GECKO:"gecko",BLINK:"blink",EDGE_HTML:"edgehtml",UNKNOWN:"unknown"},i.OS={WINDOWS:"Windows",SOLARIS:"Solaris",MAC:"Mac",UNKNOWN:"Unknown",ANDROID:"Android",IOS:"IOS",WINDOWSPHONE:"WindowsPhone",LINUX:"Linux"},i.DEVICETYPE={PHONE:"phone",TABLET:"tablet",OTHERS:"others"},i.getAgentInfo=function(e){o.isEmptyOrUndefined(e)&&(e=navigator.userAgent),e=e.toLowerCase();var t=o.hashCode(e),n=i._currAgentInfo;if(n&&n.hashCode===t)return{os:n.os,browser:n.browser,browserVersion:n.browserVersion,deviceType:n.deviceType,engine:n.engine,engineVersion:n.engineVersion,hashCode:n.hashCode};var r=i.OS.UNKNOWN,s=i.BROWSER.UNKNOWN,a=0,c=i.DEVICETYPE.OTHERS,u=i.ENGINE.UNKNOWN,l=0;return e.indexOf("iphone")>-1||e.indexOf("ipad")>-1||"MacIntel"===navigator.platform&&void 0!==navigator.standalone?r=i.OS.IOS:e.indexOf("mac")>-1?r=i.OS.MAC:e.indexOf("sunos")>-1?r=i.OS.SOLARIS:e.indexOf("android")>-1?r=i.OS.ANDROID:e.indexOf("linux")>-1?r=i.OS.LINUX:e.indexOf("windows phone")>-1?r=i.OS.WINDOWSPHONE:e.indexOf("win")>-1&&(r=i.OS.WINDOWS),r===i.OS.ANDROID?c=e.indexOf("mobile")>-1?i.DEVICETYPE.PHONE:i.DEVICETYPE.TABLET:r===i.OS.IOS&&(c=e.indexOf("iphone")>-1?i.DEVICETYPE.PHONE:i.DEVICETYPE.TABLET),e.indexOf("msie")>-1?(s=i.BROWSER.IE,a=i._parseFloatVersion(e,/msie (\d+[.]\d+)/),e.indexOf("trident")&&(u=i.ENGINE.TRIDENT,l=i._parseFloatVersion(e,/trident\/(\d+[.]\d+)/))):e.indexOf("trident")>-1?(s=i.BROWSER.IE,a=i._parseFloatVersion(e,/rv:(\d+[.]\d+)/),e.indexOf("trident")&&(u=i.ENGINE.TRIDENT,l=i._parseFloatVersion(e,/trident\/(\d+[.]\d+)/))):e.indexOf("edge")>-1?(s=i.BROWSER.EDGE,a=l=i._parseFloatVersion(e,/edge\/(\d+[.]\d+)/),u=i.ENGINE.EDGE_HTML):e.indexOf("edg")>-1?(s=i.BROWSER.EDGE_CHROMIUM,a=i._parseFloatVersion(e,/edg\/(\d+[.]\d+)/),u=i.ENGINE.BLINK,l=a):e.indexOf("chrome")>-1?(s=i.BROWSER.CHROME,(a=i._parseFloatVersion(e,/chrome\/(\d+[.]\d+)/))>=28?(u=i.ENGINE.BLINK,l=a):(u=i.ENGINE.WEBKIT,l=i._parseFloatVersion(e,/applewebkit\/(\d+[.]\d+)/))):e.indexOf("safari")>-1?(s=i.BROWSER.SAFARI,a=i._parseFloatVersion(e,/version\/(\d+[.]\d+)/),u=i.ENGINE.WEBKIT,l=i._parseFloatVersion(e,/applewebkit\/(\d+[.]\d+)/)):e.indexOf("firefox")>-1&&(s=i.BROWSER.FIREFOX,a=i._parseFloatVersion(e,/rv:(\d+[.]\d+)/),u=i.ENGINE.GECKO,l=i._parseFloatVersion(e,/gecko\/(\d+)/)),i._currAgentInfo=n={hashCode:t,os:r,browser:s,browserVersion:a,deviceType:c,engine:u,engineVersion:l},{os:n.os,browser:n.browser,browserVersion:n.browserVersion,deviceType:n.deviceType,engine:n.engine,engineVersion:n.engineVersion,hashCode:n.hashCode}},i._parseFloatVersion=function(e,t){var n=e.match(t);if(n){var r=n[1];if(r)return parseFloat(r)}return 0};const s={};r._registerLegacyNamespaceProp("Assert",s);var a="DEBUG";const c="' doesn't match prototype ";s.forceDebug=function(){s[a]=!0},s.clearDebug=function(){s[a]=!1},s.isDebug=function(){return!0===s[a]},s.assert=function(e,t){if(s[a]&&!e){var n=t||"";if(arguments.length>2){n+="(";for(var r=2;r<arguments.length;r+=1)n+=arguments[r];n+=")"}s.assertionFailed(n,1)}},s.failedInAbstractFunction=function(){s[a]&&s.assertionFailed("Abstract function called",1)},s.assertPrototype=function(e,t,n){if(s[a]){var r=t.prototype;if(null!=e)s.assertType(t,"function",null,1,!1),Object.prototype.isPrototypeOf.call(r,e)||s.assertionFailed("object '"+e+c+r,1,n);else s.assertionFailed("null object doesn't match prototype "+r,1,n)}},s.assertPrototypeOrNull=function(e,t,n){if(s[a]&&null!=e){s.assertType(t,"function",null,1,!1);var r=t.prototype;Object.prototype.isPrototypeOf.call(r,e)||s.assertionFailed("object '"+e+c+r,1,n)}},s.assertPrototypes=function(e,t,n,r){if(s[a]){var o=t.prototype,i=n.prototype,u=Object.prototype.isPrototypeOf;u.call(o,e)||u.call(i,e)||s.assertionFailed("object '"+e+c+o+" or "+i,1,r)}},s.assertDomNodeOrNull=function(e,t){s[a]&&e&&void 0===e.nodeType&&s.assertionFailed(e+" is not a DOM Node",t+1)},s.assertDomNode=function(e,t){s[a]&&(e&&void 0!==e.nodeType||s.assertionFailed(e+" is not a DOM Node",t+1))},s.assertDomElement=function(e,t){s[a]&&(s.assertDomNode(e,1),1!==e.nodeType?s.assertionFailed(e+" is not a DOM Element",1):t&&e.nodeName!==t&&s.assertionFailed(e+" is not a "+t+" Element",1))},s.assertDomElementOrNull=function(e,t){s[a]&&null!=e&&(s.assertDomNode(e,1),1!==e.nodeType?s.assertionFailed(e+" is not a DOM Element",1):t&&e.nodeName!==t&&s.assertionFailed(e+" is not a "+t+" Element",1))},s.assertType=function(e,t,n,r,o){if(s[a]&&!(null==e&&o||typeof e===t)){var i=e+" is not of type "+t;n&&(i=n+i),r||(r=0),s.assertionFailed(i,r+1)}},s.assertObject=function(e,t){s[a]&&s.assertType(e,"object",t,1,!1)},s.assertObjectOrNull=function(e,t){s[a]&&s.assertType(e,"object",t,1,!0)},s.assertNonEmptyString=function(e,t){s[a]&&(s.assertType(e,"string",t,1,!1),s.assert(e.length>0,"empty string"))},s.assertString=function(e,t){s[a]&&s.assertType(e,"string",t,1,!1)},s.assertStringOrNull=function(e,t){s[a]&&s.assertType(e,"string",t,1,!0)},s.assertFunction=function(e,t){s[a]&&s.assertType(e,"function",t,1,!1)},s.assertFunctionOrNull=function(e,t){s[a]&&s.assertType(e,"function",t,1,!0)},s.assertBoolean=function(e,t){s[a]&&s.assertType(e,"boolean",t,1,!1)},s.assertNumber=function(e,t){s[a]&&s.assertType(e,"number",t,1,!1)},s.assertNumberOrNull=function(e,t){s[a]&&s.assertType(e,"number",t,1,!0)},s.assertArray=function(e,t){s[a]&&(Array.isArray(e)||(void 0===t&&(t=e+" is not an array"),s.assertionFailed(t,1)))},s.assertArrayOrNull=function(e,t){s[a]&&null!=e&&(Array.isArray(e)||(void 0===t&&(t=e+" is not an array"),s.assertionFailed(t,1)))},s.assertNonNumeric=function(e,t){s[a]&&(isNaN(e)||(void 0===t&&(t=e+" is convertible to a number"),s.assertionFailed(t,1)))},s.assertNumeric=function(e,t){s[a]&&isNaN(e)&&(void 0===t&&(t=e+" is not convertible to a number"),s.assertionFailed(t,1))},s.assertInSet=function(e,t,n){if(null==e||void 0===t[e.toString()]){if(void 0===n){for(var r=" is not in set: {",o=Object.keys(t),i=0;i<o.length;i++){r+=o[i],r+=","}n=e+(r+="}")}s.assertionFailed(n,1)}},s.assertionFailed=function(e,t,n){t||(t=0);var r="Assertion";throw n&&(r+=" ("+n+")"),r+=" failed: ",void 0!==e&&(r+=e),new Error(r)};var u=t.__oj_Assert_DEBUG;void 0!==u&&(s[a]=u),i.getAgentInfo().browser===i.BROWSER.IE&&e.error("Internet Explorer is not supported with this version of JET.");const l={};r._registerLegacyNamespaceProp("CollectionUtils",l),l.copyInto=function(e,t,n,r,o){return l._copyIntoImpl(e,t,n,r,o,0)},l.mergeDeep=function(e,...t){if(!t.length)return e;const n=l.isPlainObject,r=l.mergeDeep,o=t.shift();return n(e)&&n(o)&&Object.keys(o).forEach(t=>{n(o[t])?(e[t]||Object.assign(e,{[t]:{}}),r(e[t],o[t])):Object.assign(e,{[t]:o[t]})}),r(e,...t)},l.isPlainObject=function(e){if(null!==e&&"object"==typeof e)try{var t=Object.prototype.hasOwnProperty;if(e.constructor&&t.call(e.constructor.prototype,"isPrototypeOf"))return!0}catch(e){}return!1},l._copyIntoImpl=function(e,t,n,r,o,i){var s;if(null==o&&(o=Number.MAX_VALUE),e&&t&&e!==t)for(var a=Object.keys(t),c=0;c<a.length;c++){var u=a[c];s=n?n(u):u;var f=t[u],d=!1;if(r&&i<o){var p=e[s];l.isPlainObject(f)&&(null==p||l.isPlainObject(p))&&(d=!0,e[s]=p||{},l._copyIntoImpl(e[s],f,n,!0,o,i+1))}d||(e[s]=f)}return e},"undefined"!=typeof window&&window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(e){var t,n=(this.document||this.ownerDocument).querySelectorAll(e),r=this;do{for(t=n.length;--t>=0&&n.item(t)!==r;);}while(t<0&&(r=r.parentElement));return r}),function(){function e(e){return function(t,n,r){return e.call(this,t,n,function(e){return"boolean"==typeof e?e:!!e&&e.capture}(r))}}if("undefined"!=typeof window&&!function(){let e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){return e=!0,e}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(e){}return e}()){let t;window.EventTarget?t=EventTarget.prototype:window.Node&&(t=Node.prototype),t&&(t.addEventListener=e(t.addEventListener),t.removeEventListener=e(t.removeEventListener))}}(),
/**
     * @license
     * Code taken from
     * https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/queueMicrotask
     * under "When queueMicrotask() isn't available".
     * @ignore
     */
"undefined"!=typeof window&&"function"!=typeof window.queueMicrotask&&(window.queueMicrotask=function(e){Promise.resolve().then(e).catch(function(e){setTimeout(function(){throw e})})}),function(){if("undefined"!=typeof window){var e;if(!((e=document.createEvent("Event")).initEvent("foo",!0,!0),e.preventDefault(),e.defaultPrevented)){var t=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(t.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}"function"!=typeof window.CustomEvent&&(n.prototype=Object.getPrototypeOf(new n("bogusEvent")),window.CustomEvent=n)}function n(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}}(),function(){function e(e){var t=document.createEvent("FocusEvent");return t.initEvent(e,!1,!1),t}"undefined"!=typeof window&&"function"!=typeof window.FocusEvent&&(e.prototype=Object.getPrototypeOf(new e("focus")),window.FocusEvent=e)}(),function(){var e,t;"undefined"!=typeof window&&!window.setImmediate&&window.postMessage&&(window.setImmediate=function(){var t=arguments[0],o=Array.prototype.slice,i=o.call(arguments,1);s.assertFunction(t);var a=n();return e||(e=new Map),e.set(a,{callback:t,args:i}),1===e.size&&window.addEventListener("message",r),window.postMessage({id:a,message:"oj-setImmediate"},"*"),a},window.clearImmediate=o);function n(){return isNaN(t)&&(t=0),t+=1}function r(t){var n=t.data;if(n&&"oj-setImmediate"===n.message){var r=n.id,i=e.get(r);if(o(r),i){var s=i.callback,a=i.args;s.apply(window,a)}}}function o(t){e&&(e.delete(t),e.size<1&&(window.removeEventListener("message",r),e=null))}}(),"undefined"!=typeof window&&(window.Symbol?(window.Symbol.asyncIterator||(window.Symbol.asyncIterator="asyncIterator"),window.Symbol.iterator||(window.Symbol.iterator="iterator")):(window.Symbol={},window.Symbol.asyncIterator="asyncIterator",window.Symbol.iterator="iterator")),function(){if("undefined"!=typeof window&&0===new window.Set([0]).size){var e=window.Set;function t(t){var n=new e;return t&&t.forEach(n.add,n),n}t.prototype=e.prototype,t.prototype.constructor=t,window.Set=t}}(),"undefined"!=typeof window&&(window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),window.DOMTokenList&&!DOMTokenList.prototype.forEach&&(DOMTokenList.prototype.forEach=Array.prototype.forEach)),"undefined"!=typeof window&&"undefined"!==window.Node&&("isConnected"in Node.prototype||Object.defineProperty(Node.prototype,"isConnected",{get(){return!(this.ownerDocument&&this.ownerDocument.compareDocumentPosition(this)&this.DOCUMENT_POSITION_DISCONNECTED)}}));const f=function(){this.Init()};r._registerLegacyNamespaceProp("Object",f),f.superclass=null,f._typeName="oj.Object",f._GET_FUNCTION_NAME_REGEXP=/function\s+([\w$][\w$\d]*)\s*\(/,(f.prototype={}).constructor=f,f.createSubclass=function(e,t,n){s.assertFunction(e),s.assertFunctionOrNull(t),s.assertStringOrNull(n),void 0===t&&(t=f),s.assert(e!==t,"Class can't extend itself");var r=f._tempSubclassConstructor;r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.superclass=t.prototype,n&&(e._typeName=n)},f.copyPropertiesForClass=function(e,t){s.assertFunction(e),s.assert(null!=t,"source object cannot be null");for(var n=Object.keys(t),r=0;r<n.length;r++){var o=n[r];e.prototype[o]=t[o]}},f._tempSubclassConstructor=function(){},f.prototype.getClass=function(e){if(void 0===e)e=this;else if(null===e)return null;return e.constructor},f.prototype.clone=function(){var e=new this.constructor;return l.copyInto(e,this),e},f.prototype.toString=function(){return this.toDebugString()},f.prototype.toDebugString=function(){return this.getTypeName()+" Object"},f.getTypeName=function(e){s.assertFunction(e);var t=e._typeName;if(null==t){var n=e.toString(),r=f._GET_FUNCTION_NAME_REGEXP.exec(n);t=r?r[1]:"anonymous",e._typeName=t}return t},f.prototype.getTypeName=function(){return f.getTypeName(this.constructor)},f.prototype.Init=function(){s.isDebug()&&s.assert(this.getTypeName,"Not an oj.Object");var e=this.constructor;e._initialized||f._initClasses(e)},f.ensureClassInitialization=function(e){s.assertFunction(e),e._initialized||f._initClasses(e)},f.prototype.equals=function(e){return this===e},f.createCallback=function(e,t){return s.assertFunction(t),t.bind(e)},f._initClasses=function(e){s.isDebug()&&(s.assertFunction(e),s.assert(!e._initialized)),e._initialized=!0;var t=e.superclass;if(t){var n=t.constructor;n&&!n._initialized&&f._initClasses(n)}var r=e.InitClass;r&&r.call(e)},f.compareValues=function(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if(null===e||null===t)return!1;if(e.constructor===t.constructor){if(Array.isArray(e))return f._compareArrayValues(e,t);if(e.constructor===Object)return f.__innerEquals(e,t);if(e.valueOf&&"function"==typeof e.valueOf)return e.valueOf()===t.valueOf()}return!1},f._compareArrayValues=function(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(!f.compareValues(e[n],t[n]))return!1;return!0},f._compareIdIndexObject=function(e,t){if("number"==typeof e&&"number"==typeof t||"string"==typeof e&&"string"==typeof t)return e===t;if("object"==typeof e&&"object"==typeof t){if(e.id&&t.id)return e.id===t.id&&(!e.index||!t.index||e.index===t.index);if(e.index&&t.index)return e.index===t.index}return!1},f._compareArrayIdIndexObject=function(e,t){if(!e)return!t||0===t.length;if(!t)return!e||0===e.length;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++){for(var r=!1,o=0;o<t.length;o++)if(f._compareIdIndexObject(e[n],t[o])){r=!0;break}if(!r)return!1}return!0},f.__innerEquals=function(e,t){if(e===t)return!0;if(!(e instanceof Object&&t instanceof Object))return!1;if(e.constructor!==t.constructor)return!1;var n,r,o=Object.prototype.hasOwnProperty,i=Object.keys(e);for(r=0;r<i.length;r++)if(n=i[r],o.call(e,n)){if(!o.call(t,n))return!1;if(e[n]!==t[n]){if("object"!=typeof e[n])return!1;if(!f.compareValues(e[n],t[n]))return!1}}var s=Object.keys(t);for(r=0;r<s.length;r++)if(n=s[r],o.call(t,n)&&!o.call(e,n))return!1;return 0!==i.length||0!==s.length||JSON.stringify(e)===JSON.stringify(t)},f.isEmpty=function(e){var t;if(null==e)return!0;for(t in e)if(e.hasOwnProperty(t))return!1;return!0};r._registerLegacyNamespaceProp("__isAmdLoaderPresent",function(){return"function"==typeof define&&define.amd});const d=function(){this.Init()};f.createSubclass(d,f,"oj.EventSource"),r._registerLegacyNamespaceProp("EventSource",d),d.prototype.Init=function(){this._eventHandlers=[],d.superclass.Init.call(this)},d.prototype.on=function(e,t){for(var n=!1,r=0;r<this._eventHandlers.length;r++)if(this._eventHandlers[r].eventType===e&&this._eventHandlers[r].eventHandlerFunc===t){n=!0;break}n||this._eventHandlers.push({eventType:e,eventHandlerFunc:t})},d.prototype.off=function(e,t){for(var n=this._eventHandlers.length-1;n>=0;n--)if(this._eventHandlers[n].eventType===e&&this._eventHandlers[n].eventHandlerFunc===t){this._eventHandlers.splice(n,1);break}},d.prototype.handleEvent=function(e,t){for(var n=0;n<this._eventHandlers.length;n++){var r=this._eventHandlers[n];if(r.eventType===e&&!1===r.eventHandlerFunc.apply(this,Array.prototype.slice.call(arguments).slice(1)))return!1}return!0};const p={};r._registerLegacyNamespaceProp("KeyUtils",p),p.equals=function(e,t){return f.compareValues(e,t)};var y=t.__ojCheckpointManager;const E={};return r._registerLegacyNamespaceProp("CHECKPOINT_MANAGER",E),E.startCheckpoint=function(e,t){y&&y.startCheckpoint(e,t)},E.endCheckpoint=function(e){y&&y.endCheckpoint(e)},E.getRecord=function(e){return y?y.getRecord(e):void 0},E.matchRecords=function(e){return y?y.matchRecords(e):[]},E.dump=function(t){e.info(function(){for(var e="Checkpoint Records:",n=E.matchRecords(t),r=0;r<n.length;r++){var o=n[r];e=e+"\n"+o.name;var i=o.description;null!=i&&(e=e+" ("+i+")"),e=(e+=":\n")+"start: "+o.start+"\tduration: "+o.duration}return e})},r});
//# sourceMappingURL=ojcore-base.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojcontext',["ojs/ojcore-base","ojs/ojlogger"],function(e,t){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;const s=function(e){this._description=e,this._addedWaitTs=s._getTs(),this._id=this._addedWaitTs.toString(36)+"_"+Math.random().toString(36)};e._registerLegacyNamespaceProp("BusyState",s),Object.defineProperties(s.prototype,{id:{get:function(){return this._id},enumerable:!0},description:{get:function(){if(this._description)return this._description instanceof Function?this._description():this._description.toString()},enumerable:!0}}),s.prototype.toString=function(){var e="Busy state: [description=",t=this.description;return null!==t&&(e+=t),e+=", elapsed="+(s._getTs()-this._addedWaitTs)+"]"},s._getTs=function(){return window.performance?window.performance.now():(new Date).getTime()};const o=function(e){this.Init(e)};let n;function i(){return n||(n=new Promise(function(e){window.setImmediate(function(){n=null,e(!0)})})),n}e.Object.createSubclass(o,e.Object,"oj.BusyContext"),e._registerLegacyNamespaceProp("BusyContext",o),o._defaultTimeout=Number.NaN,o.setDefaultTimeout=function(e){isNaN(e)||(o._defaultTimeout=e)},o.prototype.Init=function(e){o.superclass.Init.call(this),this._hostNode=e,this._statesMap=new Map,this._mediator={getMasterWhenReadyPromise:function(){return this._masterWhenReadyPromise||(this._masterWhenReadyPromise=new Promise(this._captureWhenReadyPromiseResolver.bind(this))),this._masterWhenReadyPromise},resolveMasterWhenReadyPromise:function(){this._masterWhenReadyPromiseResolver&&this._masterWhenReadyPromiseResolver(!0),this._masterWhenReadyPromise=null,this._masterWhenReadyPromiseResolver=null,this._masterWhenReadyPromiseRejecter=null},rejectMasterWhenReadyPromise:function(e){this._masterWhenReadyPromiseRejecter&&this._masterWhenReadyPromiseRejecter(e),this._masterWhenReadyPromise=null,this._masterWhenReadyPromiseRejecter=null,this._masterWhenReadyPromiseResolver=null},getSlaveTimeoutPromise:function(e,t,s){var o,n=new Promise(function(e,n){o=window.setTimeout(function(){n(t())},s)});return this._slaveTimeoutPromiseTimers.push(o),Promise.race([e,n]).finally(this._clearAllSlaveTimeouts.bind(this))},_clearAllSlaveTimeouts:function(){var e=this._slaveTimeoutPromiseTimers;this._slaveTimeoutPromiseTimers=[];for(var t=0;t<e.length;t++)window.clearTimeout(e[t]);return!0},_captureWhenReadyPromiseResolver:function(e,t){this._masterWhenReadyPromiseResolver=e,this._masterWhenReadyPromiseRejecter=t},_slaveTimeoutPromiseTimers:[]}},o._log=function(e){if(t.option("level")===t.LEVEL_LOG){t.log(">> Busy states: %d",e.size);var s=o._values(e);s.length>0&&t.log(s.join("\n"))}},o._values=function(e){var t=[];return e.forEach(function(e){t.push(e)}),t},o.prototype.addBusyState=function(e){t.log("BusyContext.addBusyState: start scope='%s'",this._getDebugScope());var n=this._statesMap,i=new s(e[o._DESCRIPTION]);return t.log(">> "+i),n.set(i.id,i),this._addBusyStateToParent(),t.log("BusyContext.addBusyState: end scope='%s'",this._getDebugScope()),this._removeBusyState.bind(this,i)},o.prototype.dump=function(e){t.info("BusyContext.dump: start scope='%s' %s",this._getDebugScope(),e||"");var s=this._statesMap;t.info(">> Busy states: %d",s.size);var n=o._values(s);n.length>0&&t.info(n.join("\n")),t.info("BusyContext.dump: start scope='%s' %s",this._getDebugScope(),e||"")},o.prototype.getBusyStates=function(){var e=this._statesMap;return o._values(e)},o.prototype.clear=function(){t.log("BusyContext.clear: start scope='%s'",this._getDebugScope());for(var e=this._statesMap,s=o._values(e),n=0;n<s.length;n++){var i=s[n];try{this._removeBusyState(i)}catch(e){t.log("BusyContext.clear: %o",e)}Object.defineProperty(i,o._OJ_RIP,{value:!0,enumerable:!1})}t.log("BusyContext.clear: end scope='%s'",this._getDebugScope())},o.prototype.whenReady=function(e){var s=this._getDebugScope();t.log("BusyContext.whenReady: start, scope='%s', timeout=%d",s,e);var n=this._statesMap,r=this._mediator,a=i(),u=o._BOOTSTRAP_MEDIATOR.whenReady();const l=r.getMasterWhenReadyPromise();var c=Promise.all([a,u]).then(function(){t.log("BusyContext.whenReady: bootstrap mediator ready scope=%s",s);try{o._deliverThrottledUpdates()}catch(e){throw t.error("Fatal exception delivering binding updates: %o",e),e}return 0!==n.size||this._waitingOnNextTickBusynessEval||(t.log("BusyContext.whenReady: resolved no busy states scope=%s",s),r.resolveMasterWhenReadyPromise()),t.log("BusyContext.whenReady: busy states returning master scope=%s",s),l}.bind(this));if(isNaN(e)&&!isNaN(o._defaultTimeout)&&(e=o._defaultTimeout),!isNaN(e)){c=r.getSlaveTimeoutPromise(c,function(){var i,r="whenReady timeout of "+e+"ms expired ";o._log(n);var a=o._values(n);return(i=o._BOOTSTRAP_MEDIATOR.isReady()?new Error(r+"with the following busy states: "+a.join(", ")):new Error(r+'while the application is loading. Busy state enabled by setting the "window.oj_whenReady = true;" global variable. Application bootstrap busy state is released by calling "oj.Context.getPageContext().getBusyContext().applicationBootstrapComplete();".')).busyStates=a,t.log("BusyContext.whenReady: rejected scope='%s'\n%s",s,i.message),i},e)}return t.log("BusyContext.whenReady: end scope='%s'",this._getDebugScope()),c},o.prototype.isReady=function(){t.log("BusyContext.isReady: start scope='%s'",this._getDebugScope());var e=!1;if(o._BOOTSTRAP_MEDIATOR.isReady()&&!this._waitingOnNextTickBusynessEval){var s=this._statesMap;e=0===s.size,o._log(s)}return t.log("BusyContext.isReady: end scope='%s'",this._getDebugScope()),e},o.prototype._removeBusyState=function(e){var s=this._getDebugScope();t.log("BusyContext._removeBusyState: start scope='%s'",s);var n=this._statesMap;if(e[o._OJ_RIP])t.log("Busy state has been forcefully resolved via clear:\n"+e);else{if(!n.delete(e.id))throw new Error("Busy state has already been resolved:\n"+e);t.log("BusyContext._removeBusyState: resolving busy state:\n"+e),0!==n.size||this._waitingOnNextTickBusynessEval||(this._waitingOnNextTickBusynessEval=!0,i().then(this._evalBusyness.bind(this))),t.log("BusyContext._removeBusyState: end scope='%s'",s)}},o.prototype._evalBusyness=function(){var e=this._getDebugScope();t.log("BusyContext._evalBusyness: begin scope='%s'",e);try{o._deliverThrottledUpdates()}catch(e){return t.error("Fatal exception delivering binding updates: %o",e),this._waitingOnNextTickBusynessEval=!1,void this._rejectWhenReadyPromises(e)}var s=this._statesMap,n=this._mediator;this._waitingOnNextTickBusynessEval=!1,0===s.size?(t.log("BusyContext._evalBusyness: resolving whenReady promises"),n.resolveMasterWhenReadyPromise(),this._resolveBusyStateForParent()):o._log(s),t.log("BusyContext._evalBusyness: end scope='%s'",e)},o.prototype.applicationBootstrapComplete=function(){var e=this._getDebugScope();t.log("BusyContext.applicationBootstrapComplete: begin scope='%s'",e),o._BOOTSTRAP_MEDIATOR.notifyComplete(),t.log("BusyContext.applicationBootstrapComplete: end scope='%s'",e)},o.prototype._getParentBusyContext=function(){if(this._hostNode){var t=e.Context.getContext(e.Context.getParentElement(this._hostNode));if(t)return t.getBusyContext()}return null},o.prototype._addBusyStateToParent=function(){if(!this._parentNotified){this._parentNotified=!0;var e=this._getParentBusyContext();if(e){var t={};t[o._DESCRIPTION]=this.toString.bind(this),this._parentResolveCallback=e.addBusyState(t)}}},o.prototype._resolveBusyStateForParent=function(){this._parentNotified=!1,this._parentResolveCallback&&(this._parentResolveCallback(),this._parentResolveCallback=null)},o.prototype._rejectWhenReadyPromises=function(e){this._mediator.rejectMasterWhenReadyPromise(e);const t=this._getParentBusyContext();t&&(t._rejectWhenReadyPromises(e),this._resolveBusyStateForParent())},o.prototype._getCompoundDescription=function(){return"["+o._values(this._statesMap).join(", ")+"]"},o.prototype._getDebugScope=function(){function e(e){var t="undefined";if(e)if(e.id&&e.id.length>0)t="#"+e.id;else{t=e.nodeName,e.hasAttribute("data-oj-context")&&(t+="[data-oj-context]");var s=e.getAttribute("class");s&&(t+="."+s.split(" ").join("."))}return t}return this._debugScope||(this._hostNode?this._debugScope=e(this._hostNode.parentElement)+" > "+e(this._hostNode):this._debugScope="page"),this._debugScope},o.prototype.toString=function(){var e="Busy Context: [scope=";return e+=this._getDebugScope(),e+=" states="+this._getCompoundDescription()+"]"},o._deliverThrottledUpdates=function(){e.ComponentBinding&&e.ComponentBinding.deliverChanges()},o._DESCRIPTION="description",o._OJ_RIP="__ojRip",o._BOOTSTRAP_MEDIATOR=new function(){var e,t,s;"undefined"!=typeof window&&(e=window.oj_whenReady),this.whenReady=function(){return t||(t=e?new Promise(function(e){s=e}):Promise.resolve(!0))},this.isReady=function(){return!e},this.notifyComplete=function(){s?i().then(function(){e=!1,"function"==typeof s&&s(!0),s=null}):e=!1}};const r=function(e){this.Init(e)};return e.Object.createSubclass(r,e.Object,"oj.Context"),r.prototype.Init=function(e){r.superclass.Init.call(this),this._node=e},r.getContext=function(e){for(;e;){var t=e[r._OJ_CONTEXT_INSTANCE];if(t)return t;if(e.hasAttribute(r._OJ_CONTEXT_ATTRIBUTE))return t=new r(e),Object.defineProperty(e,r._OJ_CONTEXT_INSTANCE,{value:t}),t;e=r.getParentElement(e)}return r.getPageContext()},r.getPageContext=function(){return r._pageContext||(r._pageContext=new r),r._pageContext},r.prototype.getBusyContext=function(){return this._busyContext||(this._busyContext=new o(this._node)),this._busyContext},r.setBusyContextDefaultTimeout=function(e){o.setDefaultTimeout(e)},r._OJ_CONTEXT_ATTRIBUTE="data-oj-context",r._OJ_CONTEXT_INSTANCE="__ojContextInstance",r._OJ_SURROGATE_ATTR="data-oj-surrogate-id",r.getParentElement=function(e){if(e&&e.hasAttribute(r._OJ_SURROGATE_ATTR)){var t=document.getElementById(e.getAttribute(r._OJ_SURROGATE_ATTR));if(t)return t.parentElement}return e._ojReportBusy||e.parentElement},r});
//# sourceMappingURL=ojcontext.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 *
 * This is a fork of the i18n Require.js plugin.
 * It makes minor chnages to the way the default locale is determined and to the way bundles are merged
 *
 * @license RequireJS i18n 2.0.2 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/i18n for details
 */
!function(){"use strict";var e=/(^.*(^|\/)nls(\/|$))([^/]*)\/?([^/]*)/;function n(e,n,o,a,r,t,l){if(n[e]||(e=e.replace(/^zh-(Hans|Hant)-([^-]+)$/,"zh-$2")),n[e]){if(o.push(e),!0===n[e]||1===n[e]){var u=l?l+e:e;a.push(r+u+"/"+t)}return!0}return!1}function o(e){return"object"==typeof e}function a(e,n){for(var r=Object.keys(n),t=0;t<r.length;t++){var l=r[t];null==e[l]?e[l]=n[l]:o(n[l])&&o(e[l])&&a(e[l],n[l])}}define('ojL10n',["module"],function(o){var r=o.config?o.config():{};return{version:"2.0.1+",load:function(o,t,l,u){var c;(u=u||{}).locale&&(r.locale=u.locale);var i,f,s,v,g,h,p,d,y,m,L,O=e.exec(o),_=O[1],b=O[5],j=[],H={},k="";O[5]?(c=(_=O[1])+b,i=O[4]):(c=o,b=O[4],i=r.locale,"undefined"!=typeof document?(i||(i=u.isBuild?"root":document.documentElement.lang)||(i=void 0===navigator?"root":navigator.systemLanguage||navigator.language||navigator.userLanguage||"root"),r.locale=i):i="root"),f=function(e){var n,o=e.toLowerCase().split(/-|_/),a=[o[0]],r=1;for(n=1;n<o.length;n++){var t=o[n],l=t.length;if(1===l)break;switch(r){case 1:if(r=2,4===l){a.push(t.charAt(0).toUpperCase()+t.slice(1));break}case 2:r=3,a.push(t.toUpperCase());break;default:a.push(t)}}return function(e){if("zh"!==e[0]||e.length>1&&4===e[1].length)return;var n="Hans",o=e.length>1?e[1]:null;"TW"!==o&&"MO"!==o&&"HK"!==o||(n="Hant");e.splice(1,0,n)}(a),a}(i),v=r.noOverlay,g=r.defaultNoOverlayLocale;var x=r.localePrefix;for((y=r.merge)&&(h=y[_+b])&&(O=e.exec(h),p=O[1],d=O[4]),m=[],s=0;s<f.length;s++)k+=(k?"-":"")+f[s],m.push(k);u.isBuild?(j.push(c),h&&j.push(h),t(j,function(){l()})):("query"===r.includeLocale&&(c=t.toUrl(c+".js"),c+=(-1===c.indexOf("?")?"?":"&")+"loc="+i),L=[c],h&&L.push(h),t(L,function(e,o){var r=[],u=function(e,o,a){for(var t=v||!0===e.__noOverlay,l=g||e.__defaultNoOverlayLocale,u=!1,c=m.length-1;c>=0&&(!u||!t);c--)u=n(m[c],e,r,j,o,a,x);var i=1===m.length&&"root"===m[0];t&&(i||!u)&&l&&n(l,e,r,j,o,a,x),i||n("root",e,r,j,o,a,x)};u(e,_,b);var c=r.length;o&&u(o,p,d),t(j,function(){var n=function(e,n,o,l,u){for(var c=n;c<o&&r[c];c++){var i=r[c],f=x?x+i:i,s=e[i];!0!==s&&1!==s||(s=t(l+f+"/"+u)),a(H,s||{})}};n(o,c,r.length,p,d),n(e,0,c,_,b),H._ojLocale_=f.join("-"),l(H)})}))}}})}();
define('ojtranslations/nls/ojtranslations',{root:{"oj-message":{fatal:"Fatal",error:"Error",warning:"Warning",info:"Info",confirmation:"Confirmation","compact-type-summary":"{0}: {1}"},"oj-converter":{summary:"Value is not in the expected format.",detail:"Enter a value in the expected format.","plural-separator":", ",hint:{summary:"Example: {exampleValue}",detail:"Enter a value in this format: '{exampleValue}'.","detail-plural":"Enter a value in these formats: '{exampleValue}'."},optionHint:{detail:"An accepted value for option '{propertyName}' is '{propertyValueValid}'.","detail-plural":"Accepted values for option '{propertyName}' are '{propertyValueValid}'."},optionTypesMismatch:{summary:"A value for the option '{requiredPropertyName}' is required when the option '{propertyName}' is set to '{propertyValue}'."},optionTypeInvalid:{summary:"A value of the expected type was not provided for option '{propertyName}'."},optionOutOfRange:{summary:"Value {propertyValue} is out of range for the option '{propertyName}'."},optionValueInvalid:{summary:"An invalid value '{propertyValue}' was specified for the option '{propertyName}'."},number:{decimalFormatMismatch:{summary:"The provided value is not in the expected number format."},shortLongUnsupportedParse:{summary:"'short' and 'long' are not supported for converter parsing.",detail:"Change component to readonly. readonly fields do not call the converter's parse function."},currencyFormatMismatch:{summary:"The provided value is not in the expected currency format."},percentFormatMismatch:{summary:"The provided value is not in the expected percent format."},invalidNumberFormat:{summary:"The provided value is not a valid number.",detail:"Please provide valid number."}},color:{invalidFormat:{summary:"Invalid color format.",detail:"Invalid color format option specification."},invalidSyntax:{summary:"Invalid color specification.",detail:"Enter a color value that conforms to the CSS3 standard."}},datetime:{datetimeOutOfRange:{summary:"Value '{value}' is out of range for the '{propertyName}'.",detail:"Enter a value between '{minValue}' and '{maxValue}'.",hour:"hour",minute:"minute",second:"second",millisec:"millisec",month:"month",day:"day",year:"year","month name":"month name",weekday:"weekday"},dateFormatMismatch:{summary:"The provided value is not in the expected date format."},invalidTimeZoneID:{summary:"Invalid timezone id {timeZoneID} provided."},nonExistingTime:{summary:"The input time does not exist because it falls during the transition to daylight saving time."},missingTimeZoneData:{summary:"TimeZone data is missing. Please call require 'ojs/ojtimezonedata' in order to load the TimeZone data."},timeFormatMismatch:{summary:"The provided value is not in the expected time format."},datetimeFormatMismatch:{summary:"The provided value is not in the expected date and time format."},dateToWeekdayMismatch:{summary:"Day '{date}' does not fall on a '{weekday}'.",detail:"Enter a weekday that corresponds with the date."},invalidISOString:{invalidRangeSummary:"The value '{value}' is out of range for the '{propertyName}' field in the ISO 8601 string '{isoStr}'.",summary:"The provided '{isoStr}' is not a valid ISO 8601 string.",detail:"Please provide valid ISO 8601 string."}}},"oj-validator":{length:{hint:{min:"Enter {min} or more characters.",max:"Enter {max} or fewer characters.",inRange:"Enter {min} to {max} characters.",exact:"Enter {length} characters."},messageDetail:{tooShort:"Enter {min} or more characters.",tooLong:"Enter no more than {max} characters."},messageSummary:{tooShort:"There are too few characters.",tooLong:"There are too many characters."}},range:{number:{hint:{min:"Enter a number greater than or equal to {min}.",max:"Enter a number less than or equal to {max}.",inRange:"Enter a number between {min} and {max}.",exact:"Enter the number {num}."},messageDetail:{rangeUnderflow:"Enter {min} or a higher number.",rangeOverflow:"Enter {max} or a lower number.",exact:"Enter the number {num}."},messageSummary:{rangeUnderflow:"The number is too low.",rangeOverflow:"The number is too high."}},datetime:{hint:{min:"Enter a date and time on or after {min}.",max:"Enter a date and time on or before {max}.",inRange:"Enter a date and time between {min} and {max}."},messageDetail:{rangeUnderflow:"Enter a date on or after {min}.",rangeOverflow:"Enter a date on or before {max}."},messageSummary:{rangeUnderflow:"Date and time is earlier than the minimum date and time.",rangeOverflow:"Date and time is later than the maximum date and time."}},date:{hint:{min:"Enter a date on or after {min}.",max:"Enter a date on or before {max}.",inRange:"Enter a date between {min} and {max}."},messageDetail:{rangeUnderflow:"Enter a date on or after {min}.",rangeOverflow:"Enter a date on or before {max}."},messageSummary:{rangeUnderflow:"Date is earlier than the minimum date.",rangeOverflow:"Date is later than the maximum date."}},time:{hint:{min:"Enter a time on or after {min}.",max:"Enter a time on or before {max}.",inRange:"Enter a time between {min} and {max}."},messageDetail:{rangeUnderflow:"Enter a time at or after {min}.",rangeOverflow:"Enter a time at or before {max}."},messageSummary:{rangeUnderflow:"Time is earlier than the minimum time.",rangeOverflow:"Time is later than the maximum time."}}},restriction:{date:{messageSummary:"Date {value} is of a disabled entry.",messageDetail:"The date you selected isn't available. Try another date."}},regExp:{summary:"Format is incorrect.",detail:"Enter allowable values described in this regular expression: '{pattern}'."},required:{summary:"Value is required.",detail:"Enter a value."}},"oj-ojEditableValue":{loading:"Loading",requiredText:"Required",helpSourceText:"Learn more..."},"oj-ojInputDate":{done:"Done",cancel:"Cancel",prevText:"Previous",nextText:"Next",currentText:"Today",weekHeader:"Wk",tooltipCalendar:"Select Date.",tooltipCalendarTime:"Select Date Time.",tooltipCalendarDisabled:"Select Date Disabled.",tooltipCalendarTimeDisabled:"Select Date Time Disabled.",picker:"Picker",weekText:"Week",datePicker:"Date Picker",inputHelp:"Press Key down or Key up for access to Calendar.",inputHelpBoth:"Press Key down or Key up for access to Calendar and Shift + Key down or Shift Key up for access to time drop down.",dateTimeRange:{hint:{min:"",max:"",inRange:""},messageDetail:{rangeUnderflow:"",rangeOverflow:""},messageSummary:{rangeUnderflow:"",rangeOverflow:""}},dateRestriction:{hint:"",messageSummary:"",messageDetail:""}},"oj-ojInputTime":{cancelText:"Cancel",okText:"OK",currentTimeText:"Now",hourWheelLabel:"Hour",minuteWheelLabel:"Minute",ampmWheelLabel:"AMPM",tooltipTime:"Select Time.",tooltipTimeDisabled:"Select Time Disabled.",inputHelp:"Press Key down or Key up for access to time drop down.",dateTimeRange:{hint:{min:"",max:"",inRange:""},messageDetail:{rangeUnderflow:"",rangeOverflow:""},messageSummary:{rangeUnderflow:"",rangeOverflow:""}}},"oj-inputBase":{required:{hint:"",messageSummary:"",messageDetail:""},regexp:{messageSummary:"",messageDetail:""},accessibleMaxLengthExceeded:"Maximum length {len} exceeded.",accessibleMaxLengthRemaining:"{chars} characters left."},"oj-ojInputPassword":{regexp:{messageDetail:"Value must match this pattern: '{pattern}'."},accessibleShowPassword:"Show password.",accessibleHidePassword:"Hide password."},"oj-ojFilmStrip":{labelAccFilmStrip:"Displaying page {pageIndex} of {pageCount}",labelAccArrowNextPage:"Select Next to display next page",labelAccArrowPreviousPage:"Select Previous to display previous page",tipArrowNextPage:"Next",tipArrowPreviousPage:"Previous"},"oj-ojDataGrid":{accessibleSortAscending:"{id} sorted in ascending order",accessibleSortDescending:"{id} sorted in descending order",accessibleActionableMode:"Enter actionable mode.",accessibleNavigationMode:"Enter navigation mode, press F2 to enter edit or actionable mode.",accessibleEditableMode:"Enter editable mode, press escape to navigate outside the data grid.",accessibleSummaryExact:"This is a data grid with {rownum} rows and {colnum} columns",accessibleSummaryEstimate:"This is a data grid with unknown number of rows and columns",accessibleSummaryExpanded:"There are currently {num} rows expanded",accessibleRowExpanded:"Row expanded",accessibleRowCollapsed:"Row collapsed",accessibleRowSelected:"Row {row} selected",accessibleColumnSelected:"Column {column} selected",accessibleStateSelected:"selected",accessibleMultiCellSelected:"{num} cells selected",accessibleColumnSpanContext:"{extent} wide",accessibleRowSpanContext:"{extent} high",accessibleRowContext:"Row {index}",accessibleColumnContext:"Column {index}",accessibleRowHeaderContext:"Row Header {index}",accessibleColumnHeaderContext:"Column Header {index}",accessibleRowEndHeaderContext:"Row End Header {index}",accessibleColumnEndHeaderContext:"Column End Header {index}",accessibleRowHeaderLabelContext:"Row Header Label {level}",accessibleColumnHeaderLabelContext:"Column Header Label {level}",accessibleRowEndHeaderLabelContext:"Row End Header Label {level}",accessibleColumnEndHeaderLabelContext:"Column End Header Label {level}",accessibleLevelContext:"Level {level}",accessibleRangeSelectModeOn:"Add selected range of cells mode on.",accessibleRangeSelectModeOff:"Add selected range of cells mode off.",accessibleFirstRow:"You have reached the first row.",accessibleLastRow:"You have reached the last row.",accessibleFirstColumn:"You have reached the first column",accessibleLastColumn:"You have reached the last column.",accessibleSelectionAffordanceTop:"Top selection handle.",accessibleSelectionAffordanceBottom:"Bottom selection handle.",msgFetchingData:"Fetching Data...",msgNoData:"No items to display.",labelResize:"Resize",labelResizeWidth:"Resize Width",labelResizeHeight:"Resize Height",labelSortRow:"Sort Row",labelSortRowAsc:"Sort Row Ascending",labelSortRowDsc:"Sort Row Descending",labelSortCol:"Sort Column",labelSortColAsc:"Sort Column Ascending",labelSortColDsc:"Sort Column Descending",labelCut:"Cut",labelPaste:"Paste",labelEnableNonContiguous:"Enable Non-Contiguous Selection",labelDisableNonContiguous:"Disable Non-Contiguous Selection",labelResizeDialogSubmit:"OK",labelResizeDialogCancel:"Cancel",accessibleContainsControls:"Contains Controls"},"oj-ojRowExpander":{accessibleLevelDescription:"Level {level}",accessibleRowDescription:"Level {level}, Row {num} of {total}",accessibleRowExpanded:"Row expanded",accessibleRowCollapsed:"Row collapsed",accessibleStateExpanded:"expanded",accessibleStateCollapsed:"collapsed"},"oj-ojListView":{msgFetchingData:"Fetching Data...",msgNoData:"No items to display.",msgItemsAppended:"{count} items appended to the end.",indexerCharacters:"A|B|C|D|E|F|G|H|I|J|K|L|M|N|O|P|Q|R|S|T|U|V|W|X|Y|Z",accessibleReorderTouchInstructionText:"Double tap and hold.  Wait for the sound then drag to rearrange.",accessibleReorderBeforeItem:"Before {item}",accessibleReorderAfterItem:"After {item}",accessibleReorderInsideItem:"Into {item}",accessibleNavigateSkipItems:"Skipping {numSkip} items",labelCut:"Cut",labelCopy:"Copy",labelPaste:"Paste",labelPasteBefore:"Paste Before",labelPasteAfter:"Paste After"},"oj-_ojLabel":{tooltipHelp:"Help",tooltipRequired:"Required"},"oj-ojLabel":{tooltipHelp:"Help",tooltipRequired:"Required"},"oj-ojInputNumber":{required:{hint:"",messageSummary:"",messageDetail:""},numberRange:{hint:{min:"",max:"",inRange:"",exact:""},messageDetail:{rangeUnderflow:"",rangeOverflow:"",exact:""},messageSummary:{rangeUnderflow:"",rangeOverflow:""}},tooltipDecrement:"Decrement",tooltipIncrement:"Increment"},"oj-ojTable":{accessibleColumnContext:"Column {index}",accessibleColumnFooterContext:"Column Footer {index}",accessibleColumnHeaderContext:"Column Header {index}",accessibleRowContext:"Row {index}",accessibleSortable:"{id} sortable",accessibleSortAscending:"{id} sorted in ascending order",accessibleSortDescending:"{id} sorted in descending order",accessibleStateSelected:"selected",labelAccSelectionAffordanceTop:"Top selection handle",labelAccSelectionAffordanceBottom:"Bottom selection handle",labelEnableNonContiguousSelection:"Enable Non-Contiguous Selection",labelDisableNonContiguousSelection:"Disable Non-Contiguous Selection",labelResize:"Resize",labelResizePopupSubmit:"OK",labelResizePopupCancel:"Cancel",labelResizePopupSpinner:"Resize Column",labelSelectRow:"Select Row",labelEditRow:"Edit Row",labelSelectAndEditRow:"Select And Edit Row",labelSelectColumn:"Select Column",labelSort:"Sort",labelSortAsc:"Sort Ascending",labelSortDsc:"Sort Descending",msgFetchingData:"Fetching Data...",msgNoData:"No data to display.",msgInitializing:"Initializing...",msgColumnResizeWidthValidation:"Width value must be an integer.",msgScrollPolicyMaxCountSummary:"Exceeded maximum rows for table scrolling.",msgScrollPolicyMaxCountDetail:"Please reload with smaller data set.",msgStatusSortAscending:"{0} sorted in ascending order.",msgStatusSortDescending:"{0} sorted in descending order."},"oj-ojTabs":{labelCut:"Cut",labelPasteBefore:"Paste Before",labelPasteAfter:"Paste After",labelRemove:"Remove",labelReorder:"Reorder",removeCueText:"Removable"},"oj-ojCheckboxset":{readonlyNoValue:"",required:{hint:"",messageSummary:"",messageDetail:""}},"oj-ojRadioset":{readonlyNoValue:"",required:{hint:"",messageSummary:"",messageDetail:""}},"oj-ojSelect":{required:{hint:"",messageSummary:"",messageDetail:""},searchField:"Search field",noMatchesFound:"No matches found",noMoreResults:"No more results",oneMatchesFound:"One match found",moreMatchesFound:"{num} matches found",filterFurther:"More results available, please filter further."},"oj-ojSwitch":{SwitchON:"On",SwitchOFF:"Off"},"oj-ojCombobox":{required:{hint:"",messageSummary:"",messageDetail:""},noMatchesFound:"No matches found",noMoreResults:"No more results",oneMatchesFound:"One match found",moreMatchesFound:"{num} matches found",filterFurther:"More results available, please filter further."},"oj-ojSelectSingle":{required:{hint:"",messageSummary:"",messageDetail:""},noMatchesFound:"No matches found",oneMatchFound:"One match found",multipleMatchesFound:"{num} matches found",nOrMoreMatchesFound:"{num} or more matches found",cancel:"Cancel",labelAccOpenDropdown:"expand",labelAccClearValue:"clear value",noResultsLine1:"No results found",noResultsLine2:"We can't find anything matching your search."},"oj-ojInputSearch2":{cancel:"Cancel"},"oj-ojInputSearch":{required:{hint:"",messageSummary:"",messageDetail:""},noMatchesFound:"No matches found",oneMatchesFound:"One match found",moreMatchesFound:"{num} matches found"},"oj-ojTreeView":{treeViewSelectorAria:"TreeView Selector {rowKey}"},"oj-ojTree":{stateLoading:"Loading...",labelNewNode:"New Node",labelMultiSelection:"Multiple Selection",labelEdit:"Edit",labelCreate:"Create",labelCut:"Cut",labelCopy:"Copy",labelPaste:"Paste",labelPasteAfter:"Paste After",labelPasteBefore:"Paste Before",labelRemove:"Remove",labelRename:"Rename",labelNoData:"No data"},"oj-ojPagingControl":{labelAccPaging:"Pagination",labelAccPageNumber:"Page {pageNum} content loaded",labelAccNavFirstPage:"First Page",labelAccNavLastPage:"Last Page",labelAccNavNextPage:"Next Page",labelAccNavPreviousPage:"Previous Page",labelAccNavPage:"Page",labelLoadMore:"Show More...",labelLoadMoreMaxRows:"Reached Maximum Limit of {maxRows} rows",labelNavInputPage:"Page",labelNavInputPageMax:"of {pageMax}",fullMsgItemRange:"{pageFrom}-{pageTo} of {pageMax} items",fullMsgItemRangeAtLeast:"{pageFrom}-{pageTo} of at least {pageMax} items",fullMsgItemRangeApprox:"{pageFrom}-{pageTo} of approx {pageMax} items",msgItemRangeNoTotal:"{pageFrom}-{pageTo} items",fullMsgItem:"{pageTo} of {pageMax} items",fullMsgItemAtLeast:"{pageTo} of at least {pageMax} items",fullMsgItemApprox:"{pageTo} of approx {pageMax} items",msgItemNoTotal:"{pageTo} items",msgItemRangeCurrent:"{pageFrom}-{pageTo}",msgItemRangeCurrentSingle:"{pageFrom}",msgItemRangeOf:"of",msgItemRangeOfAtLeast:"of at least",msgItemRangeOfApprox:"of approx.",msgItemRangeItems:"items",tipNavInputPage:"Go To Page",tipNavPageLink:"Go To Page {pageNum}",tipNavNextPage:"Next",tipNavPreviousPage:"Previous",tipNavFirstPage:"First",tipNavLastPage:"Last",pageInvalid:{summary:"The page value entered is invalid.",detail:"Please enter a value greater than 0."},maxPageLinksInvalid:{summary:"Value for maxPageLinks is invalid.",detail:"Please enter a value greater than 4."}},"oj-ojMasonryLayout":{labelCut:"Cut",labelPasteBefore:"Paste Before",labelPasteAfter:"Paste After"},"oj-panel":{labelAccButtonExpand:"Expand",labelAccButtonCollapse:"Collapse",labelAccButtonRemove:"Remove",labelAccFlipForward:"Flip forward",labelAccFlipBack:"Flip back",tipDragToReorder:"Drag to reorder",labelAccDragToReorder:"Drag to reorder, context menu available"},"oj-ojChart":{labelDefaultGroupName:"Group {0}",labelSeries:"Series",labelGroup:"Group",labelDate:"Date",labelValue:"Value",labelTargetValue:"Target",labelX:"X",labelY:"Y",labelZ:"Z",labelPercentage:"Percentage",labelLow:"Low",labelHigh:"High",labelOpen:"Open",labelClose:"Close",labelVolume:"Volume",labelQ1:"Q1",labelQ2:"Q2",labelQ3:"Q3",labelMin:"Min",labelMax:"Max",labelOther:"Other",tooltipPan:"Pan",tooltipSelect:"Marquee select",tooltipZoom:"Marquee zoom",componentName:"Chart"},"oj-dvtBaseGauge":{componentName:"Gauge"},"oj-ojDiagram":{promotedLink:"{0} link",promotedLinks:"{0} links",promotedLinkAriaDesc:"Indirect",componentName:"Diagram"},"oj-ojGantt":{componentName:"Gantt",accessibleDurationDays:"{0} days",accessibleDurationHours:"{0} hours",accessibleTaskInfo:"Start time is {0}, end time is {1}, duration is {2}",accessibleMilestoneInfo:"Time is {0}",accessibleRowInfo:"Row {0}",accessibleTaskTypeMilestone:"Milestone",accessibleTaskTypeSummary:"Summary",accessiblePredecessorInfo:"{0} predecessors",accessibleSuccessorInfo:"{0} successors",accessibleDependencyInfo:"Dependency type {0}, connects {1} to {2}",startStartDependencyAriaDesc:"start to start",startFinishDependencyAriaDesc:"start to finish",finishStartDependencyAriaDesc:"finish to start",finishFinishDependencyAriaDesc:"finish to finish",tooltipZoomIn:"Zoom In",tooltipZoomOut:"Zoom Out",labelLevel:"Level",labelRow:"Row",labelStart:"Start",labelEnd:"End",labelDate:"Date",labelBaselineStart:"Baseline Start",labelBaselineEnd:"Baseline End",labelBaselineDate:"Baseline Date",labelLabel:"Label",labelProgress:"Progress",labelMoveBy:"Move By",labelResizeBy:"Resize By",taskMoveInitiated:"Task move initiated",taskResizeEndInitiated:"Task resize end initiated",taskResizeStartInitiated:"Task resize start initiated",taskMoveSelectionInfo:"{0} others selected",taskResizeSelectionInfo:"{0} others selected",taskMoveInitiatedInstruction:"Use the arrow keys to move",taskResizeInitiatedInstruction:"Use the arrow keys to resize",taskMoveFinalized:"Task move finalized",taskResizeFinalized:"Task resize finalized",taskMoveCancelled:"Task move cancelled",taskResizeCancelled:"Task resize cancelled",taskResizeStartHandle:"Task resize start handle",taskResizeEndHandle:"Task resize end handle"},"oj-ojLegend":{componentName:"Legend",tooltipExpand:"Expand",tooltipCollapse:"Collapse"},"oj-ojNBox":{highlightedCount:"{0}/{1}",labelOther:"Other",labelGroup:"Group",labelSize:"Size",labelAdditionalData:"Additional Data",componentName:"{0} Box"},"oj-ojPictoChart":{componentName:"Picture Chart"},"oj-ojSparkChart":{componentName:"Chart"},"oj-ojSunburst":{labelColor:"Color",labelSize:"Size",tooltipExpand:"Expand",tooltipCollapse:"Collapse",componentName:"Sunburst"},"oj-ojTagCloud":{componentName:"Tag Cloud"},"oj-ojThematicMap":{componentName:"Thematic Map",areasRegion:"Areas",linksRegion:"Links",markersRegion:"Markers"},"oj-ojTimeAxis":{componentName:"Time Axis"},"oj-ojTimeline":{componentName:"Timeline",accessibleItemDesc:"Description is {0}.",accessibleItemEnd:"End time is {0}.",accessibleItemStart:"Start time is {0}.",accessibleItemTitle:"Title is {0}.",labelSeries:"Series",tooltipZoomIn:"Zoom In",tooltipZoomOut:"Zoom Out",labelStart:"Start",labelEnd:"End",labelDate:"Date",labelTitle:"Title",labelDescription:"Description"},"oj-ojTreemap":{labelColor:"Color",labelSize:"Size",tooltipIsolate:"Isolate",tooltipRestore:"Restore",componentName:"Treemap"},"oj-dvtBaseComponent":{labelScalingSuffixThousand:"K",labelScalingSuffixMillion:"M",labelScalingSuffixBillion:"B",labelScalingSuffixTrillion:"T",labelScalingSuffixQuadrillion:"Q",labelInvalidData:"Invalid data",labelNoData:"No data to display",labelClearSelection:"Clear Selection",labelDataVisualization:"Data Visualization",stateSelected:"Selected",stateUnselected:"Unselected",stateMaximized:"Maximized",stateMinimized:"Minimized",stateExpanded:"Expanded",stateCollapsed:"Collapsed",stateIsolated:"Isolated",stateHidden:"Hidden",stateVisible:"Visible",stateDrillable:"Drillable",labelAndValue:"{0}: {1}",labelCountWithTotal:"{0} of {1}"},"oj-ojNavigationList":{defaultRootLabel:"Navigation List",hierMenuBtnLabel:"Hierarchical Menu button",selectedLabel:"selected",previousIcon:"Previous",msgFetchingData:"Fetching Data...",msgNoData:"No items to display.",overflowItemLabel:"More",accessibleReorderTouchInstructionText:"Double tap and hold.  Wait for the sound then drag to rearrange.",accessibleReorderBeforeItem:"Before {item}",accessibleReorderAfterItem:"After {item}",labelCut:"Cut",labelPasteBefore:"Paste Before",labelPasteAfter:"Paste After",labelRemove:"Remove",removeCueText:"Removable"},"oj-ojSlider":{noValue:"ojSlider has no value",maxMin:"Max must not be less than or equal to min",startEnd:"value.start must not be greater than value.end",valueRange:"Value must be within min to max range",optionNum:"{option} option is not a number",invalidStep:"Invalid step; step must be > 0",lowerValueThumb:"lower value thumb",higherValueThumb:"higher value thumb"},"oj-ojDialog":{labelCloseIcon:"Close"},"oj-ojPopup":{ariaLiveRegionInitialFocusFirstFocusable:"Entering pop-up. Press F6 to navigate between the pop-up and associated control.",ariaLiveRegionInitialFocusNone:"Pop-up opened. Press F6 to navigate between the pop-up and associated control.",ariaLiveRegionInitialFocusFirstFocusableTouch:"Entering pop-up. Pop-up can be closed by navigating to the last link within the pop-up.",ariaLiveRegionInitialFocusNoneTouch:"Pop-up opened. Navigate to the next link to establish focus within the pop-up.",ariaFocusSkipLink:"Double tap to navigate to the open pop-up.",ariaCloseSkipLink:"Double tap to close the open pop-up."},"oj-ojRefresher":{ariaRefreshLink:"Activate link to refresh content",ariaRefreshingLink:"Refreshing content",ariaRefreshCompleteLink:"Refresh complete"},"oj-ojSwipeActions":{ariaShowStartActionsDescription:"Show start actions",ariaShowEndActionsDescription:"Show end actions",ariaHideActionsDescription:"Hide actions"},"oj-ojIndexer":{indexerCharacters:"A|B|C|D|E|F|G|H|I|J|K|L|M|N|O|P|Q|R|S|T|U|V|W|X|Y|Z",indexerOthers:"#",ariaDisabledLabel:"No matching group header",ariaOthersLabel:"number",ariaInBetweenText:"Between {first} and {second}",ariaKeyboardInstructionText:"Press enter to select value.",ariaTouchInstructionText:"Double tap and hold to enter gesture mode, then drag up or down to adjust value."},"oj-ojMenu":{labelCancel:"Cancel",ariaFocusSkipLink:"Focus is within the menu, double tap or swipe to move focus to the first menu item."},"oj-ojColorSpectrum":{labelHue:"Hue",labelOpacity:"Opacity",labelSatLum:"Saturation/Luminance",labelThumbDesc:"Color spectrum four way slider."},"oj-ojColorPalette":{labelNone:"None"},"oj-ojColorPicker":{labelSwatches:"Swatches",labelCustomColors:"Custom Colors",labelPrevColor:"Previous Color",labelDefColor:"Default Color",labelDelete:"Delete",labelDeleteQ:"Delete?",labelAdd:"Add",labelAddColor:"Add color",labelMenuHex:"HEX",labelMenuRgba:"RGBa",labelMenuHsla:"HSLa",labelSliderHue:"Hue",labelSliderSaturation:"Saturation",labelSliderSat:"Sat",labelSliderLightness:"Lightness",labelSliderLum:"Luminosity",labelSliderAlpha:"Alpha",labelOpacity:"Opacity",labelSliderRed:"Red",labelSliderGreen:"Green",labelSliderBlue:"Blue"},"oj-ojFilePicker":{dropzoneText:"Drop files here or click to upload",singleFileUploadError:"Upload one file at a time.",singleFileTypeUploadError:"You can't upload files of type {fileType}.",multipleFileTypeUploadError:"You can't upload files of type: {fileTypes}.",dropzonePrimaryText:"Drag and Drop",secondaryDropzoneText:"Select a file or drop one here.",secondaryDropzoneTextMultiple:"Select or drop files here.",unknownFileType:"unknown"},"oj-ojProgressbar":{ariaIndeterminateProgressText:"In Progress"},"oj-ojMessage":{labelCloseIcon:"Close",categories:{error:"Error",warning:"Warning",info:"Information",confirmation:"Confirmation"}},"oj-ojSelector":{checkboxAriaLabel:"Checkbox Select {rowKey}",checkboxAriaLabelSelected:" selected",checkboxAriaLabelUnselected:" unselected"},"oj-ojMessages":{labelLandmark:"Messages",ariaLiveRegion:{navigationFromKeyboard:"Entering messages region. Press F6 to navigate back to prior focused element.",navigationToTouch:"Messages region has new messages. Use the voice-over rotor to navigate to the messages landmark.",navigationToKeyboard:"Messages region has new messages.  Press F6 to navigate to the most recent message region.",newMessage:"Message category {category}. {summary}. {detail}."}},"oj-ojConveyorBelt":{tipArrowNext:"Next",tipArrowPrevious:"Previous"}},ar:1,"ar-XB":1,bg:1,bs:1,"bs-Cyrl":1,cs:1,da:1,de:1,el:1,"en-XA":1,"en-XC":1,es:1,et:1,fi:1,fr:1,"fr-CA":1,he:1,hr:1,hu:1,is:1,it:1,ja:1,ko:1,lt:1,lv:1,ms:1,nl:1,no:1,pl:1,pseudo:1,pt:1,"pt-PT":1,ro:1,ru:1,sk:1,sl:1,sr:1,"sr-Latn":1,sv:1,th:1,tr:1,uk:1,vi:1,"zh-Hans":1,"zh-Hant":1});

/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojconfig',["require","exports","ojs/ojcore-base","ojL10n!ojtranslations/nls/ojtranslations"],function(e,n,o,t){"use strict";function r(e){if(e&&e.__esModule)return e;var n={};return e&&Object.keys(e).forEach(function(o){var t=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(n,o,t.get?t:{enumerable:!0,get:function(){return e[o]}})}),n.default=e,n}o=o&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;const a={};let i=t;a.getDeviceRenderMode=function(){return document.body.getAttribute("data-oj-device-render-mode")||a.getDeviceType()},a.getDeviceType=function(){return o.AgentUtils.getAgentInfo().deviceType},a.getLocale=function(){if(o.__isAmdLoaderPresent()){o.Assert.assert(void 0!==i,"ojtranslations module must be defined");var e=i._ojLocale_;return"root"===e?"en":e}var n=a._locale;return null==n&&((n=document.documentElement.lang)||(n=void 0===navigator?"en":(navigator.language||navigator.userLanguage||"en").toLowerCase()),n=n.toLowerCase(),a._locale=n),n},a.setLocale=function(n,t){if(o.__isAmdLoaderPresent()){var s="ojL10n!ojtranslations/nls/",u=s+n+"/ojtranslations";var l=[new Promise(function(n,o){e([u],function(e){n(r(e))},o)}).then(e=>{i=e})];if(o.LocaleData){var c=s+n+"/localeElements";const t=new Promise(function(n,o){e([c],function(e){n(r(e))},o)}).then(e=>{e&&o.LocaleData.__updateBundle(Object.assign({},e.default))});if(l.push(t),o.TimezoneData){var g=o.TimezoneData.__getBundleNames().map(o=>new Promise(function(t,a){e([`${s}${n}${o}`],function(e){t(r(e))},a)}));l.push(Promise.all(g).then(e=>{e.forEach(o.TimezoneData.__mergeIntoLocaleElements)}))}}Promise.all(l).then(()=>{t&&t()})}else a._locale=n,t&&t()},a.getResourceUrl=function(e){if(null==e||/^\/|:/.test(e))return e;var n=a._resourceBaseUrl;null==n&&(n=a._getOjBaseUrl()||"");var o=n.length;return n+(0===o||"/"===n.charAt(o-1)?"":"/")+e},a.setResourceBaseUrl=function(e){a._resourceBaseUrl=e},a.setAutomationMode=function(e){a._automationMode=e},a.getAutomationMode=function(){return a._automationMode},a.getVersionInfo=function(){var e="Oracle JET Version: "+o.version+"\n";e+="Oracle JET Revision: "+o.revision+"\n";var n="undefined"!=typeof window;return n&&window.navigator&&(e+="Browser: "+window.navigator.userAgent+"\n",e+="Browser Platform: "+window.navigator.platform+"\n"),$&&($.fn&&(e+="jQuery Version: "+$.fn.jquery+"\n"),$.ui&&$.ui.version&&(e+="jQuery UI Version: "+$.ui.version+"\n")),o.ComponentBinding&&(e+="Knockout Version: "+o.ComponentBinding.__getKnockoutVersion()+"\n"),n&&window.require&&(e+="Require Version: "+window.require.version+"\n"),e},a.logVersionInfo=function(){},a._getOjBaseUrl=function(){var n=null;o.__isAmdLoaderPresent()&&(n=e.toUrl("ojs/_foo_").replace(/[^/]*$/,"../"));return n},a.__getTemplateEngine=function(){if(!a._templateEnginePromise){if(!o.__isAmdLoaderPresent())throw new Error("JET Template engine cannot be loaded without an AMD loader");a._templateEnginePromise=new Promise(function(n,o){e(["ojs/ojtemplateengine"],function(e){n(r(e))},o)}).then(e=>e.default)}return a._templateEnginePromise},a.getConfigBundle=function(){return i},a.getExpressionEvaluator=function(){return a._expressionEvaluator},a.setExpressionEvaluator=function(e){if(a._expressionEvaluator)throw new Error("JET Expression evaluator can't be set more than once.");a._expressionEvaluator=e};const s=a.getDeviceRenderMode,u=a.getDeviceType,l=a.getLocale,c=a.setLocale,g=a.getResourceUrl,d=a.setResourceBaseUrl,f=a.setAutomationMode,m=a.getAutomationMode,v=a.getVersionInfo,_=a.logVersionInfo,p=a.setExpressionEvaluator,E=a.getExpressionEvaluator,w=a.getConfigBundle,j=a.__getTemplateEngine;n.__getTemplateEngine=j,n.getAutomationMode=m,n.getConfigBundle=w,n.getDeviceRenderMode=s,n.getDeviceType=u,n.getExpressionEvaluator=E,n.getLocale=l,n.getResourceUrl=g,n.getVersionInfo=v,n.logVersionInfo=_,n.setAutomationMode=f,n.setExpressionEvaluator=p,n.setLocale=c,n.setResourceBaseUrl=d,Object.defineProperty(n,"__esModule",{value:!0})});
//# sourceMappingURL=ojconfig.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojresponsiveutils',["exports","ojs/ojcore-base","ojs/ojlogger"],function(e,o,t){"use strict";o=o&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o;const r={};o._registerLegacyNamespaceProp("ResponsiveUtils",r),r.SCREEN_RANGE={SM:"sm",MD:"md",LG:"lg",XL:"xl",XXL:"xxl"},r.FRAMEWORK_QUERY_KEY={SM_UP:"sm-up",MD_UP:"md-up",LG_UP:"lg-up",XL_UP:"xl-up",XXL_UP:"xxl-up",SM_ONLY:"sm-only",MD_ONLY:"md-only",LG_ONLY:"lg-only",XL_ONLY:"xl-only",MD_DOWN:"md-down",LG_DOWN:"lg-down",XL_DOWN:"xl-down",HIGH_RESOLUTION:"high-resolution"},r._RANGE={},r._RANGE[r.SCREEN_RANGE.SM]=0,r._RANGE[r.SCREEN_RANGE.MD]=1,r._RANGE[r.SCREEN_RANGE.LG]=2,r._RANGE[r.SCREEN_RANGE.XL]=3,r._RANGE[r.SCREEN_RANGE.XXL]=4,r._getMediaQueryFromClass=function(e){var o=document.getElementsByClassName(e).item(0);return null===o&&((o=document.createElement("meta")).className=e,document.head.appendChild(o)),window.getComputedStyle(o).getPropertyValue("font-family").replace(/^[/\\'"]+|(;\s?})+|[/\\'"]+$/g,"")},r.getFrameworkQuery=function(e){var o="oj-mq-"+e,s=r._getMediaQueryFromClass(o);return"null"===s?(t.warn("Framework query not found. Please check that the value of the theming variable$includeResponsiveMediaQueryClasses is set to true, if itis set to false the media queries are not sent down to the browser."),null):s},r.compare=function(e,o){var t=r._RANGE[e],s=r._RANGE[o];if(null==t)throw new Error("size1 param "+e+" illegal, please use one of the screen size constants like oj.ResponsiveUtils.SCREEN_RANGE.MD");if(null==s)throw new Error("size2 param "+o+" illegal, please use one of the screen size constants like oj.ResponsiveUtils.SCREEN_RANGE.MD");return t-s};const s=r.compare,l=r.getFrameworkQuery,n=r.SCREEN_RANGE,a=r.FRAMEWORK_QUERY_KEY;e.FRAMEWORK_QUERY_KEY=a,e.SCREEN_RANGE=n,e.compare=s,e.getFrameworkQuery=l,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojresponsiveutils.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojthemeutils',["exports","ojs/ojcore-base","ojs/ojlogger"],function(e,t,a){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;const r={getThemeName:function(){return(r.parseJSONFromFontFamily("oj-theme-json")||{}).name},getThemeTargetPlatform:function(){return(r.parseJSONFromFontFamily("oj-theme-json")||{}).targetPlatform},clearCache:function(){r._cache=null,r._cssVarCache=null},parseJSONFromFontFamily:function(e){null==r._cache&&(r._cache={},r._null_cache_value={},r._headfontstring=window.getComputedStyle(document.head).getPropertyValue("font-family"));var t=r._cache[e];if(t===r._null_cache_value)return null;if(null!=t)return t;if("undefined"==typeof document)return null;var o=document.createElement("meta");o.className=e,document.head.appendChild(o);var n=window.getComputedStyle(o).getPropertyValue("font-family");if(null!=n)if(n===r._headfontstring)a.warn("parseJSONFromFontFamily: When the selector ",e," is applied the font-family read off the dom element is ",n,". The parent dom elment has the same font-family value."," This is interpreted to mean that no value was sent down for selector ",e,". Null will be returned.");else{var l=n.replace(/^['"]+|\s+|\\|(;\s?})+|['"]$/g,"");if(l)try{t=JSON.parse(l)}catch(r){var s=l.indexOf(","),c=!1;if(s>-1){l=l.substring(s+2);try{t=JSON.parse(l),c=!0}catch(e){}}if(!1===c)throw a.error("Error parsing json for selector "+e+".\nString being parsed is "+l+". Error is:\n",r),document.head.removeChild(o),r}}return document.head.removeChild(o),r._cache[e]=null==t?r._null_cache_value:t,t}};var o=e=>(r._cssVarCache||(r._cssVarCache=new Map),r._cssVarCache.has(e)||r._cssVarCache.set(e,(e=>(r._rootCSSStyles||(r._rootCSSStyles=window.getComputedStyle(document.documentElement)),r._rootCSSStyles.getPropertyValue(e).replace(/^['"\s]+|\s+|\\|(;\s?})+|['"]$/g,"")))(e)),r._cssVarCache.get(e));r.getCachedCSSVarValues=e=>e.map(e=>o(e)),r.verifyThemeVersion=()=>{};const n=r.clearCache,l=r.getThemeName,s=r.getThemeTargetPlatform,c=r.parseJSONFromFontFamily,m=r.verifyThemeVersion,i=r.getCachedCSSVarValues;e.clearCache=n,e.getCachedCSSVarValues=i,e.getThemeName=l,e.getThemeTargetPlatform=s,e.parseJSONFromFontFamily=c,e.verifyThemeVersion=m,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojthemeutils.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojtimerutils',["exports"],function(e){"use strict";const n={};function t(){}t.prototype.getPromise=function(){},t.prototype.clear=function(){},n.getTimer=function(e){return new n._TimerImpl(e)},n._TimerImpl=function(e){var n,t,i;function o(e){i=null,t(e)}this.getPromise=function(){return n},this.clear=function(){window.clearTimeout(i),i=null,o(!1)},n="undefined"==typeof window?Promise.reject():new Promise(function(n){t=n,i=window.setTimeout(o.bind(null,!0),e)})};const i=n.getTimer;e.getTimer=i,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojtimerutils.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojtranslation',["exports","ojs/ojcore-base","ojs/ojconfig"],function(e,t,r){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;const n={setBundle:function(e){n._bundle=e},getResource:function(e){return n._getResourceString(e)},applyParameters:function(e,t){return null==e?null:n._format(e,t)},getTranslatedString:function(e,t){var r=n._getResourceString(e);if(null==r)return e;var a={};return arguments.length>2?a=Array.prototype.slice.call(arguments,1):2===arguments.length&&("object"==typeof(a=arguments[1])||a instanceof Array||(a=[a])),n.applyParameters(r,a)},getComponentTranslations:function(e){var t=n._getBundle()[e];if(null==t)return{};for(var r={},a=Object.keys(t),s=0;s<a.length;s++){var l=a[s];r[l]=t[l]}return r},_getResourceString:function(e){var r=e?e.split("."):[],a=n._getBundle();t.Assert.assertObject(a);for(var s=0;s<r.length&&null!=a;s++){a=a[r[s]]}return null!=a?a:null},_format:function(e,t){var r,n,a=e.length,s=[],l=null,o=!1,u=!1,i=!1,c=!1;for(n=0;n<a;n++){var f=e.charAt(n),g=!1;if(o)g=!0,o=!1;else switch(f){case"$":o=!0;break;case"{":c||(u||(r=!1,l=[]),u=!0);break;case"}":if(u&&l.length>0){var d=t[l.join("")];s.push(void 0===d?"null":d)}u=!1;break;case"[":u||(i?c=!0:i=!0);break;case"]":c?c=!1:i=!1;break;default:g=!0}g&&(u?","===f||" "===f?r=!0:r||l.push(f):c||s.push(f))}return s.join("")},_getBundle:function(){var e=n._bundle;if(e)return e;if(t.__isAmdLoaderPresent()){var a=r.getConfigBundle();return t.Assert.assert(void 0!==a,"ojtranslations module must be defined"),a}return{}}},a=n.setBundle,s=n.getResource,l=n.applyParameters,o=n.getTranslatedString,u=n.getComponentTranslations;e.applyParameters=l,e.getComponentTranslations=u,e.getResource=s,e.getTranslatedString=o,e.setBundle=a,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojtranslation.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojcore',["ojs/ojcore-base","ojs/ojlogger","ojs/ojcontext","ojs/ojconfig","ojs/ojresponsiveutils","ojs/ojthemeutils","ojs/ojtimerutils","ojs/ojtranslation"],function(e,o,s,r,t,a,i,c){"use strict";return e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,s=s&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s,e._registerLegacyNamespaceProp("Logger",o),e._registerLegacyNamespaceProp("Context",s),e._registerLegacyNamespaceProp("Config",r),e._registerLegacyNamespaceProp("ResponsiveUtils",t),e._registerLegacyNamespaceProp("ThemeUtils",a),e._registerLegacyNamespaceProp("TimerUtils",i),e._registerLegacyNamespaceProp("Translations",c),e});
//# sourceMappingURL=ojcore.js.map;
/*! Hammer.JS - v2.0.8 - 2016-04-23
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(a,b,c,d){"use strict";function e(a,b,c){return setTimeout(j(a,c),b)}function f(a,b,c){return Array.isArray(a)?(g(a,c[b],c),!0):!1}function g(a,b,c){var e;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(e=0;e<a.length;)b.call(c,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}function h(b,c,d){var e="DEPRECATED METHOD: "+c+"\n"+d+" AT \n";return function(){var c=new Error("get-stack-trace"),d=c&&c.stack?c.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",f=a.console&&(a.console.warn||a.console.log);return f&&f.call(a.console,e,d),b.apply(this,arguments)}}function i(a,b,c){var d,e=b.prototype;d=a.prototype=Object.create(e),d.constructor=a,d._super=e,c&&la(d,c)}function j(a,b){return function(){return a.apply(b,arguments)}}function k(a,b){return typeof a==oa?a.apply(b?b[0]||d:d,b):a}function l(a,b){return a===d?b:a}function m(a,b,c){g(q(b),function(b){a.addEventListener(b,c,!1)})}function n(a,b,c){g(q(b),function(b){a.removeEventListener(b,c,!1)})}function o(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function p(a,b){return a.indexOf(b)>-1}function q(a){return a.trim().split(/\s+/g)}function r(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function s(a){return Array.prototype.slice.call(a,0)}function t(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];r(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function u(a,b){for(var c,e,f=b[0].toUpperCase()+b.slice(1),g=0;g<ma.length;){if(c=ma[g],e=c?c+f:b,e in a)return e;g++}return d}function v(){return ua++}function w(b){var c=b.ownerDocument||b;return c.defaultView||c.parentWindow||a}function x(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){k(a.options.enable,[a])&&c.handler(b)},this.init()}function y(a){var b,c=a.options.inputClass;return new(b=c?c:xa?M:ya?P:wa?R:L)(a,z)}function z(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&Ea&&d-e===0,g=b&(Ga|Ha)&&d-e===0;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,A(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function A(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=D(b)),e>1&&!c.firstMultiple?c.firstMultiple=D(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=E(d);b.timeStamp=ra(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=I(h,i),b.distance=H(h,i),B(c,b),b.offsetDirection=G(b.deltaX,b.deltaY);var j=F(b.deltaTime,b.deltaX,b.deltaY);b.overallVelocityX=j.x,b.overallVelocityY=j.y,b.overallVelocity=qa(j.x)>qa(j.y)?j.x:j.y,b.scale=g?K(g.pointers,d):1,b.rotation=g?J(g.pointers,d):0,b.maxPointers=c.prevInput?b.pointers.length>c.prevInput.maxPointers?b.pointers.length:c.prevInput.maxPointers:b.pointers.length,C(c,b);var k=a.element;o(b.srcEvent.target,k)&&(k=b.srcEvent.target),b.target=k}function B(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};b.eventType!==Ea&&f.eventType!==Ga||(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function C(a,b){var c,e,f,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=Ha&&(i>Da||h.velocity===d)){var j=b.deltaX-h.deltaX,k=b.deltaY-h.deltaY,l=F(i,j,k);e=l.x,f=l.y,c=qa(l.x)>qa(l.y)?l.x:l.y,g=G(j,k),a.lastInterval=b}else c=h.velocity,e=h.velocityX,f=h.velocityY,g=h.direction;b.velocity=c,b.velocityX=e,b.velocityY=f,b.direction=g}function D(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:pa(a.pointers[c].clientX),clientY:pa(a.pointers[c].clientY)},c++;return{timeStamp:ra(),pointers:b,center:E(b),deltaX:a.deltaX,deltaY:a.deltaY}}function E(a){var b=a.length;if(1===b)return{x:pa(a[0].clientX),y:pa(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:pa(c/b),y:pa(d/b)}}function F(a,b,c){return{x:b/a||0,y:c/a||0}}function G(a,b){return a===b?Ia:qa(a)>=qa(b)?0>a?Ja:Ka:0>b?La:Ma}function H(a,b,c){c||(c=Qa);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function I(a,b,c){c||(c=Qa);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function J(a,b){return I(b[1],b[0],Ra)+I(a[1],a[0],Ra)}function K(a,b){return H(b[0],b[1],Ra)/H(a[0],a[1],Ra)}function L(){this.evEl=Ta,this.evWin=Ua,this.pressed=!1,x.apply(this,arguments)}function M(){this.evEl=Xa,this.evWin=Ya,x.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function N(){this.evTarget=$a,this.evWin=_a,this.started=!1,x.apply(this,arguments)}function O(a,b){var c=s(a.touches),d=s(a.changedTouches);return b&(Ga|Ha)&&(c=t(c.concat(d),"identifier",!0)),[c,d]}function P(){this.evTarget=bb,this.targetIds={},x.apply(this,arguments)}function Q(a,b){var c=s(a.touches),d=this.targetIds;if(b&(Ea|Fa)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=s(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return o(a.target,i)}),b===Ea)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(Ga|Ha)&&delete d[g[e].identifier],e++;return h.length?[t(f.concat(h),"identifier",!0),h]:void 0}function R(){x.apply(this,arguments);var a=j(this.handler,this);this.touch=new P(this.manager,a),this.mouse=new L(this.manager,a),this.primaryTouch=null,this.lastTouches=[]}function S(a,b){a&Ea?(this.primaryTouch=b.changedPointers[0].identifier,T.call(this,b)):a&(Ga|Ha)&&T.call(this,b)}function T(a){var b=a.changedPointers[0];if(b.identifier===this.primaryTouch){var c={x:b.clientX,y:b.clientY};this.lastTouches.push(c);var d=this.lastTouches,e=function(){var a=d.indexOf(c);a>-1&&d.splice(a,1)};setTimeout(e,cb)}}function U(a){for(var b=a.srcEvent.clientX,c=a.srcEvent.clientY,d=0;d<this.lastTouches.length;d++){var e=this.lastTouches[d],f=Math.abs(b-e.x),g=Math.abs(c-e.y);if(db>=f&&db>=g)return!0}return!1}function V(a,b){this.manager=a,this.set(b)}function W(a){if(p(a,jb))return jb;var b=p(a,kb),c=p(a,lb);return b&&c?jb:b||c?b?kb:lb:p(a,ib)?ib:hb}function X(){if(!fb)return!1;var b={},c=a.CSS&&a.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(d){b[d]=c?a.CSS.supports("touch-action",d):!0}),b}function Y(a){this.options=la({},this.defaults,a||{}),this.id=v(),this.manager=null,this.options.enable=l(this.options.enable,!0),this.state=nb,this.simultaneous={},this.requireFail=[]}function Z(a){return a&sb?"cancel":a&qb?"end":a&pb?"move":a&ob?"start":""}function $(a){return a==Ma?"down":a==La?"up":a==Ja?"left":a==Ka?"right":""}function _(a,b){var c=b.manager;return c?c.get(a):a}function aa(){Y.apply(this,arguments)}function ba(){aa.apply(this,arguments),this.pX=null,this.pY=null}function ca(){aa.apply(this,arguments)}function da(){Y.apply(this,arguments),this._timer=null,this._input=null}function ea(){aa.apply(this,arguments)}function fa(){aa.apply(this,arguments)}function ga(){Y.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ha(a,b){return b=b||{},b.recognizers=l(b.recognizers,ha.defaults.preset),new ia(a,b)}function ia(a,b){this.options=la({},ha.defaults,b||{}),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=a,this.input=y(this),this.touchAction=new V(this,this.options.touchAction),ja(this,!0),g(this.options.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function ja(a,b){var c=a.element;if(c.style){var d;g(a.options.cssProps,function(e,f){d=u(c.style,f),b?(a.oldCssProps[d]=c.style[d],c.style[d]=e):c.style[d]=a.oldCssProps[d]||""}),b||(a.oldCssProps={})}}function ka(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d)}var la,ma=["","webkit","Moz","MS","ms","o"],na=b.createElement("div"),oa="function",pa=Math.round,qa=Math.abs,ra=Date.now;la="function"!=typeof Object.assign?function(a){if(a===d||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var e=arguments[c];if(e!==d&&null!==e)for(var f in e)e.hasOwnProperty(f)&&(b[f]=e[f])}return b}:Object.assign;var sa=h(function(a,b,c){for(var e=Object.keys(b),f=0;f<e.length;)(!c||c&&a[e[f]]===d)&&(a[e[f]]=b[e[f]]),f++;return a},"extend","Use `assign`."),ta=h(function(a,b){return sa(a,b,!0)},"merge","Use `assign`."),ua=1,va=/mobile|tablet|ip(ad|hone|od)|android/i,wa="ontouchstart"in a,xa=u(a,"PointerEvent")!==d,ya=wa&&va.test(navigator.userAgent),za="touch",Aa="pen",Ba="mouse",Ca="kinect",Da=25,Ea=1,Fa=2,Ga=4,Ha=8,Ia=1,Ja=2,Ka=4,La=8,Ma=16,Na=Ja|Ka,Oa=La|Ma,Pa=Na|Oa,Qa=["x","y"],Ra=["clientX","clientY"];x.prototype={handler:function(){},init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(w(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(w(this.element),this.evWin,this.domHandler)}};var Sa={mousedown:Ea,mousemove:Fa,mouseup:Ga},Ta="mousedown",Ua="mousemove mouseup";i(L,x,{handler:function(a){var b=Sa[a.type];b&Ea&&0===a.button&&(this.pressed=!0),b&Fa&&1!==a.which&&(b=Ga),this.pressed&&(b&Ga&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:Ba,srcEvent:a}))}});var Va={pointerdown:Ea,pointermove:Fa,pointerup:Ga,pointercancel:Ha,pointerout:Ha},Wa={2:za,3:Aa,4:Ba,5:Ca},Xa="pointerdown",Ya="pointermove pointerup pointercancel";a.MSPointerEvent&&!a.PointerEvent&&(Xa="MSPointerDown",Ya="MSPointerMove MSPointerUp MSPointerCancel"),i(M,x,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=Va[d],f=Wa[a.pointerType]||a.pointerType,g=f==za,h=r(b,a.pointerId,"pointerId");e&Ea&&(0===a.button||g)?0>h&&(b.push(a),h=b.length-1):e&(Ga|Ha)&&(c=!0),0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var Za={touchstart:Ea,touchmove:Fa,touchend:Ga,touchcancel:Ha},$a="touchstart",_a="touchstart touchmove touchend touchcancel";i(N,x,{handler:function(a){var b=Za[a.type];if(b===Ea&&(this.started=!0),this.started){var c=O.call(this,a,b);b&(Ga|Ha)&&c[0].length-c[1].length===0&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:za,srcEvent:a})}}});var ab={touchstart:Ea,touchmove:Fa,touchend:Ga,touchcancel:Ha},bb="touchstart touchmove touchend touchcancel";i(P,x,{handler:function(a){var b=ab[a.type],c=Q.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:za,srcEvent:a})}});var cb=2500,db=25;i(R,x,{handler:function(a,b,c){var d=c.pointerType==za,e=c.pointerType==Ba;if(!(e&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d)S.call(this,b,c);else if(e&&U.call(this,c))return;this.callback(a,b,c)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var eb=u(na.style,"touchAction"),fb=eb!==d,gb="compute",hb="auto",ib="manipulation",jb="none",kb="pan-x",lb="pan-y",mb=X();V.prototype={set:function(a){a==gb&&(a=this.compute()),fb&&this.manager.element.style&&mb[a]&&(this.manager.element.style[eb]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return g(this.manager.recognizers,function(b){k(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),W(a.join(" "))},preventDefaults:function(a){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var d=this.actions,e=p(d,jb)&&!mb[jb],f=p(d,lb)&&!mb[lb],g=p(d,kb)&&!mb[kb];if(e){var h=1===a.pointers.length,i=a.distance<2,j=a.deltaTime<250;if(h&&i&&j)return}return g&&f?void 0:e||f&&c&Na||g&&c&Oa?this.preventSrc(b):void 0},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var nb=1,ob=2,pb=4,qb=8,rb=qb,sb=16,tb=32;Y.prototype={defaults:{},set:function(a){return la(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(f(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=_(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return f(a,"dropRecognizeWith",this)?this:(a=_(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(f(a,"requireFailure",this))return this;var b=this.requireFail;return a=_(a,this),-1===r(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(f(a,"dropRequireFailure",this))return this;a=_(a,this);var b=r(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(b,a)}var c=this,d=this.state;qb>d&&b(c.options.event+Z(d)),b(c.options.event),a.additionalEvent&&b(a.additionalEvent),d>=qb&&b(c.options.event+Z(d))},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=tb)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(tb|nb)))return!1;a++}return!0},recognize:function(a){var b=la({},a);return k(this.options.enable,[this,b])?(this.state&(rb|sb|tb)&&(this.state=nb),this.state=this.process(b),void(this.state&(ob|pb|qb|sb)&&this.tryEmit(b))):(this.reset(),void(this.state=tb))},process:function(a){},getTouchAction:function(){},reset:function(){}},i(aa,Y,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(ob|pb),e=this.attrTest(a);return d&&(c&Ha||!e)?b|sb:d||e?c&Ga?b|qb:b&ob?b|pb:ob:tb}}),i(ba,aa,{defaults:{event:"pan",threshold:10,pointers:1,direction:Pa},getTouchAction:function(){var a=this.options.direction,b=[];return a&Na&&b.push(lb),a&Oa&&b.push(kb),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&Na?(e=0===f?Ia:0>f?Ja:Ka,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?Ia:0>g?La:Ma,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return aa.prototype.attrTest.call(this,a)&&(this.state&ob||!(this.state&ob)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=$(a.direction);b&&(a.additionalEvent=this.options.event+b),this._super.emit.call(this,a)}}),i(ca,aa,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[jb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&ob)},emit:function(a){if(1!==a.scale){var b=a.scale<1?"in":"out";a.additionalEvent=this.options.event+b}this._super.emit.call(this,a)}}),i(da,Y,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[hb]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(Ga|Ha)&&!f)this.reset();else if(a.eventType&Ea)this.reset(),this._timer=e(function(){this.state=rb,this.tryEmit()},b.time,this);else if(a.eventType&Ga)return rb;return tb},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===rb&&(a&&a.eventType&Ga?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=ra(),this.manager.emit(this.options.event,this._input)))}}),i(ea,aa,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[jb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&ob)}}),i(fa,aa,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Na|Oa,pointers:1},getTouchAction:function(){return ba.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(Na|Oa)?b=a.overallVelocity:c&Na?b=a.overallVelocityX:c&Oa&&(b=a.overallVelocityY),this._super.attrTest.call(this,a)&&c&a.offsetDirection&&a.distance>this.options.threshold&&a.maxPointers==this.options.pointers&&qa(b)>this.options.velocity&&a.eventType&Ga},emit:function(a){var b=$(a.offsetDirection);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),i(ga,Y,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ib]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime<b.time;if(this.reset(),a.eventType&Ea&&0===this.count)return this.failTimeout();if(d&&f&&c){if(a.eventType!=Ga)return this.failTimeout();var g=this.pTime?a.timeStamp-this.pTime<b.interval:!0,h=!this.pCenter||H(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,h&&g?this.count+=1:this.count=1,this._input=a;var i=this.count%b.taps;if(0===i)return this.hasRequireFailures()?(this._timer=e(function(){this.state=rb,this.tryEmit()},b.interval,this),ob):rb}return tb},failTimeout:function(){return this._timer=e(function(){this.state=tb},this.options.interval,this),tb},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==rb&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ha.VERSION="2.0.8",ha.defaults={domEvents:!1,touchAction:gb,enable:!0,inputTarget:null,inputClass:null,preset:[[ea,{enable:!1}],[ca,{enable:!1},["rotate"]],[fa,{direction:Na}],[ba,{direction:Na},["swipe"]],[ga],[ga,{event:"doubletap",taps:2},["tap"]],[da]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ub=1,vb=2;ia.prototype={set:function(a){return la(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?vb:ub},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&rb)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],b.stopped===vb||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(ob|pb|qb)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof Y)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(f(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(f(a,"remove",this))return this;if(a=this.get(a)){var b=this.recognizers,c=r(b,a);-1!==c&&(b.splice(c,1),this.touchAction.update())}return this},on:function(a,b){if(a!==d&&b!==d){var c=this.handlers;return g(q(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this}},off:function(a,b){if(a!==d){var c=this.handlers;return g(q(a),function(a){b?c[a]&&c[a].splice(r(c[a],b),1):delete c[a]}),this}},emit:function(a,b){this.options.domEvents&&ka(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&ja(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},la(ha,{INPUT_START:Ea,INPUT_MOVE:Fa,INPUT_END:Ga,INPUT_CANCEL:Ha,STATE_POSSIBLE:nb,STATE_BEGAN:ob,STATE_CHANGED:pb,STATE_ENDED:qb,STATE_RECOGNIZED:rb,STATE_CANCELLED:sb,STATE_FAILED:tb,DIRECTION_NONE:Ia,DIRECTION_LEFT:Ja,DIRECTION_RIGHT:Ka,DIRECTION_UP:La,DIRECTION_DOWN:Ma,DIRECTION_HORIZONTAL:Na,DIRECTION_VERTICAL:Oa,DIRECTION_ALL:Pa,Manager:ia,Input:x,TouchAction:V,TouchInput:P,MouseInput:L,PointerEventInput:M,TouchMouseInput:R,SingleTouchInput:N,Recognizer:Y,AttrRecognizer:aa,Tap:ga,Pan:ba,Swipe:fa,Pinch:ca,Rotate:ea,Press:da,on:m,off:n,each:g,merge:ta,extend:sa,assign:la,inherit:i,bindFn:j,prefixed:u});var wb="undefined"!=typeof a?a:"undefined"!=typeof self?self:{};wb.Hammer=ha,"function"==typeof define&&define.amd?define('hammerjs',[],function(){return ha}):"undefined"!=typeof module&&module.exports?module.exports=ha:a[c]=ha}(window,document,"Hammer");

/*! jQuery UI - v1.12.1 - 2016-09-15
* http://jqueryui.com
* Copyright jQuery Foundation and other contributors; Licensed  */
!function(e){"function"==typeof define&&define.amd?define('jqueryui-amd/version',["jquery"],e):e(jQuery)}(function(e){return e.ui=e.ui||{},e.ui.version="1.12.1"});
/*! jQuery UI - v1.12.1 - 2016-09-15
* http://jqueryui.com
* Copyright jQuery Foundation and other contributors; Licensed  */
!function(t){"function"==typeof define&&define.amd?define('jqueryui-amd/widget',["jquery","./version"],t):t(jQuery)}(function(t){var e=0,i=Array.prototype.slice;return t.cleanData=function(e){return function(i){var s,n,o;for(o=0;null!=(n=i[o]);o++)try{s=t._data(n,"events"),s&&s.remove&&t(n).triggerHandler("remove")}catch(t){}e(i)}}(t.cleanData),t.widget=function(e,i,s){var n,o,a,r={},l=e.split(".")[0];e=e.split(".")[1];var u=l+"-"+e;return s||(s=i,i=t.Widget),t.isArray(s)&&(s=t.extend.apply(null,[{}].concat(s))),t.expr[":"][u.toLowerCase()]=function(e){return!!t.data(e,u)},t[l]=t[l]||{},n=t[l][e],o=t[l][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new o(t,e)},t.extend(o,n,{version:s.version,_proto:t.extend({},s),_childConstructors:[]}),a=new i,a.options=t.widget.extend({},a.options),t.each(s,function(e,s){return t.isFunction(s)?void(r[e]=function(){function t(){return i.prototype[e].apply(this,arguments)}function n(t){return i.prototype[e].apply(this,t)}return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=n,e=s.apply(this,arguments),this._super=i,this._superApply=o,e}}()):void(r[e]=s)}),o.prototype=t.widget.extend(a,{widgetEventPrefix:n?a.widgetEventPrefix||e:e},r,{constructor:o,namespace:l,widgetName:e,widgetFullName:u}),n?(t.each(n._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete n._childConstructors):i._childConstructors.push(o),t.widget.bridge(e,o),o},t.widget.extend=function(e){for(var s,n,o=i.call(arguments,1),a=0,r=o.length;a<r;a++)for(s in o[a])n=o[a][s],o[a].hasOwnProperty(s)&&void 0!==n&&(t.isPlainObject(n)?e[s]=t.isPlainObject(e[s])?t.widget.extend({},e[s],n):t.widget.extend({},n):e[s]=n);return e},t.widget.bridge=function(e,s){var n=s.prototype.widgetFullName||e;t.fn[e]=function(o){var a="string"==typeof o,r=i.call(arguments,1),l=this;return a?this.length||"instance"!==o?this.each(function(){var i,s=t.data(this,n);return"instance"===o?(l=s,!1):s?t.isFunction(s[o])&&"_"!==o.charAt(0)?(i=s[o].apply(s,r),i!==s&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+o+"'")}):l=void 0:(r.length&&(o=t.widget.extend.apply(null,[o].concat(r))),this.each(function(){var e=t.data(this,n);e?(e.option(o||{}),e._init&&e._init()):t.data(this,n,new s(o,this))})),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(i,s){s=t(s||this.defaultElement||this)[0],this.element=t(s),this.uuid=e++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},s!==this&&(t.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===s&&this.destroy()}}),this.document=t(s.style?s.ownerDocument:s.document||s),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),i),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,function(t,i){e._removeClass(i,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var s,n,o,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},s=e.split("."),e=s.shift(),s.length){for(n=a[e]=t.widget.extend({},this.options[e]),o=0;o<s.length-1;o++)n[s[o]]=n[s[o]]||{},n=n[s[o]];if(e=s.pop(),1===arguments.length)return void 0===n[e]?null:n[e];n[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=i}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,s,n;for(i in e)n=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&n&&n.length&&(s=t(n.get()),this._removeClass(n,i),s.addClass(this._classes({element:s,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){function i(i,o){var a,r;for(r=0;r<i.length;r++)a=n.classesElementLookup[i[r]]||t(),a=t(e.add?t.unique(a.get().concat(e.element.get())):a.not(e.element).get()),n.classesElementLookup[i[r]]=a,s.push(i[r]),o&&e.classes[i[r]]&&s.push(e.classes[i[r]])}var s=[],n=this;return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&i(e.keys.match(/\S+/g)||[],!0),e.extra&&i(e.extra.match(/\S+/g)||[]),s.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,function(s,n){t.inArray(e.target,n)!==-1&&(i.classesElementLookup[s]=t(n.not(e.target).get()))})},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,s){s="boolean"==typeof s?s:i;var n="string"==typeof t||null===t,o={extra:n?e:i,keys:n?t:e,element:n?this.element:t,add:s};return o.element.toggleClass(this._classes(o),s),this},_on:function(e,i,s){var n,o=this;"boolean"!=typeof e&&(s=i,i=e,e=!1),s?(i=n=t(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),t.each(s,function(s,a){function r(){if(e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof a?o[a]:a).apply(o,arguments)}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||t.guid++);var l=s.match(/^([\w:-]*)\s*(.*)$/),u=l[1]+o.eventNamespace,h=l[2];h?n.on(u,h,r):i.on(u,r)})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(i).off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,s){var n,o,a=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,n,o){"string"==typeof n&&(n={effect:n});var a,r=n?n===!0||"number"==typeof n?i:n.effect||i:e;n=n||{},"number"==typeof n&&(n={duration:n}),a=!t.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&t.effects&&t.effects.effect[r]?s[e](n):r!==e&&s[r]?s[r](n.duration,n.easing,o):s.queue(function(i){t(this)[e](),o&&o.call(s[0]),i()})}}),t.widget});
/*! jQuery UI - v1.12.1 - 2016-09-15
* http://jqueryui.com
* Copyright jQuery Foundation and other contributors; Licensed  */
!function(i){"function"==typeof define&&define.amd?define('jqueryui-amd/unique-id',["jquery","./version"],i):i(jQuery)}(function(i){return i.fn.extend({uniqueId:function(){var i=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++i)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&i(this).removeAttr("id")})}})});
/*! jQuery UI - v1.12.1 - 2016-09-15
* http://jqueryui.com
* Copyright jQuery Foundation and other contributors; Licensed  */
!function(E){"function"==typeof define&&define.amd?define('jqueryui-amd/keycode',["jquery","./version"],E):E(jQuery)}(function(E){return E.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});
/*! jQuery UI - v1.12.1 - 2016-09-15
* http://jqueryui.com
* Copyright jQuery Foundation and other contributors; Licensed  */
!function(e){"function"==typeof define&&define.amd?define('jqueryui-amd/focusable',["jquery","./version"],e):e(jQuery)}(function(e){function i(e){for(var i=e.css("visibility");"inherit"===i;)e=e.parent(),i=e.css("visibility");return"hidden"!==i}return e.ui.focusable=function(t,n){var a,r,s,o,u,f=t.nodeName.toLowerCase();return"area"===f?(a=t.parentNode,r=a.name,!(!t.href||!r||"map"!==a.nodeName.toLowerCase())&&(s=e("img[usemap='#"+r+"']"),s.length>0&&s.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(f)?(o=!t.disabled,o&&(u=e(t).closest("fieldset")[0],u&&(o=!u.disabled))):o="a"===f?t.href||n:n,o&&e(t).is(":visible")&&i(e(t)))},e.extend(e.expr[":"],{focusable:function(i){return e.ui.focusable(i,null!=e.attr(i,"tabindex"))}}),e.ui.focusable});
/*! jQuery UI - v1.12.1 - 2016-09-15
* http://jqueryui.com
* Copyright jQuery Foundation and other contributors; Licensed  */
!function(e){"function"==typeof define&&define.amd?define('jqueryui-amd/tabbable',["jquery","./version","./focusable"],e):e(jQuery)}(function(e){return e.extend(e.expr[":"],{tabbable:function(n){var t=e.attr(n,"tabindex"),u=null!=t;return(!u||t>=0)&&e.ui.focusable(n,u)}})});
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojmessaging',["ojs/ojcore-base","jquery"],function(t,e){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;const E=function(t,e,E){this.Init(t,e,E)};t._registerLegacyNamespaceProp("Message",E),E.SEVERITY_TYPE={CONFIRMATION:"confirmation",INFO:"info",WARNING:"warning",ERROR:"error",FATAL:"fatal"},E.SEVERITY_LEVEL={FATAL:5,ERROR:4,WARNING:3,INFO:2,CONFIRMATION:1},t.Object.createSubclass(E,t.Object,"Message"),E.prototype.Init=function(t,e,n){E.superclass.Init.call(this),this.summary=t,this.detail=e,this.severity=n||E.SEVERITY_TYPE.ERROR},E.getSeverityLevel=function(t){var e=t;if(e)if("string"==typeof t){var n=E._LEVEL_TO_TYPE.indexOf(e,1);e=-1===n?E.SEVERITY_LEVEL.ERROR:n}else"number"==typeof e&&(e<E.SEVERITY_LEVEL.CONFIRMATION||e>E.SEVERITY_LEVEL.FATAL)&&(e=E.SEVERITY_LEVEL.ERROR);return e||E.SEVERITY_LEVEL.ERROR},E.getSeverityType=function(t){var e=t;e&&("string"==typeof e?-1===E._LEVEL_TO_TYPE.indexOf(e,1)&&(e=E.SEVERITY_TYPE.ERROR):"number"==typeof e&&(e=e<E.SEVERITY_LEVEL.CONFIRMATION||e>E.SEVERITY_LEVEL.FATAL?E.SEVERITY_TYPE.ERROR:E._LEVEL_TO_TYPE[t]));return e||E.SEVERITY_TYPE.ERROR},E.getMaxSeverity=function(t){var n=-1;return t&&t.length>0&&e.each(t,function(t,e){var i=E.getSeverityLevel(e.severity);n=n<i?i:n}),n},E.isValid=function(t){return!(E.getMaxSeverity(t)>=E.SEVERITY_LEVEL.ERROR)},E._LEVEL_TO_TYPE=["none",E.SEVERITY_TYPE.CONFIRMATION,E.SEVERITY_TYPE.INFO,E.SEVERITY_TYPE.WARNING,E.SEVERITY_TYPE.ERROR,E.SEVERITY_TYPE.FATAL];const n=function(t,e,E,n){this.Init(t,e,E,n)};return t.Object.createSubclass(n,E,"ComponentMessage"),n._DEFAULT_OPTIONS={display:(n.DISPLAY={SHOWN:"shown",HIDDEN:"hidden"}).SHOWN,context:""},n.prototype.Init=function(t,E,i,o){n.superclass.Init.call(this,t,E,i),this._options=e.extend({},n._DEFAULT_OPTIONS,o)},n.prototype.clone=function(){return new n(this.summary,this.detail,this.severity,this._options)},n.prototype.canDisplay=function(){return!(this._options&&this._options.display&&this._options.display===n.DISPLAY.HIDDEN)},n.prototype._forceDisplayToShown=function(){return!(!this._options||n.DISPLAY.HIDDEN!==this._options.display)&&(this._options.display=n.DISPLAY.SHOWN,!0)},n.prototype._isMessageAddedByComponent=function(){return!(!this._options||!this._options.context)},E.ComponentMessage=n,E});
//# sourceMappingURL=ojmessaging.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojcustomelement-utils',["exports","ojs/ojcore-base","ojs/ojcontext","ojs/ojlogger","ojs/ojthemeutils"],function(e,t,i,r,n){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;const s={};class o{static isValidCustomElementName(e){const t=o._RESERVED_TAGS.has(e),i=o._ELEMENT_NAME_REGEXP.test(e);return!t&&i&&!e.startsWith("oj-bind-",0)}static getSupportedTypes(e){if(!e)return{};let t=s[e];if(!t){t={};const i=e.toLowerCase(),r=i.match(/(?=[^|])(?:[^|]*<[^>]+>)*[^|]*/g);let n=0;r.forEach(e=>{const i=e.trim();"any"===i||"boolean"===i||"number"===i||"string"===i||"array"===i||"object"===i||"null"===i?t[i]=1:0===i.indexOf("array<")?t.array=1:0===i.indexOf("object<")?t.object=1:t.other=1,n++}),t.typeCount=n,s[i]=t}return t}static getUniqueId(e){if(e)return e;const t=o._UNIQUE+o._UNIQUE_INCR;return o._UNIQUE_INCR+=1,t}static comparePropertyValues(e,i,r){return e.writeback?t.Object.compareValues(i,r):i===r}}o._UNIQUE_INCR=0,o._UNIQUE="_oj",o._RESERVED_TAGS=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]),o._ELEMENT_NAME_REGEXP=/^[a-z][.0-9_a-z]*-[-.0-9_a-z]*$/;const a={accessKey:"accesskey",autocapitalize:"autocapitalize",autofocus:"autofocus",class:"class",contentEditable:"contenteditable",dir:"dir",draggable:"draggable",enterKeyHint:"enterkeyhint",hidden:"hidden",id:"id",inputMode:"inputmode",lang:"lang",role:"role",slot:"slot",spellcheck:"spellcheck",style:"style",tabIndex:"tabindex",translate:"translate",title:"title"};class l extends Error{constructor(e,t){super(`${e.localName} with id '${e.id||""}': ${t}`),Error.captureStackTrace&&Error.captureStackTrace(this,l),this.name="JetElementError"}}const d=/^\s*\[[^]*\]\s*$/,c=/^\s*\{[^]*\}\s*$/,p=/^(?:\{\{)([^]+)(?:\}\})$/,u=/^(?:\[\[)([^]+)(?:\]\])$/,g={};Object.keys(a).forEach(function(e){const t=a[e];e!==t&&(g[t]=e)});class h{static getExpressionInfo(e){let t,i=!1;if(e){const r=e.trim();let n=p.exec(r);t=null==n?void 0:n[1],t||(i=!0,n=u.exec(r),t=null==n?void 0:n[1])}return{downstreamOnly:i,expr:t}}static attributeToPropertyValue(e,t,i,r){if(null!=i)try{return h.coerceValue(e,t,i,r.type)}catch(i){throw new l(e,`Error while parsing parsing attribute ${t}. ${i.stack||i}`)}}static coerceValue(e,t,i,r){const n=e.tagName.toLowerCase();if(!r)throw new Error(`Unable to parse ${t}='${i}' for ${n} with id '${e.id}'.         This attribute only supports data bound values. Check the API doc for supported types`);const s=o.getSupportedTypes(r),a=d.test(i),l=c.test(i);if(s.array&&a||s.object&&l||s.any&&(a||l))try{return JSON.parse(i)}catch(r){throw new Error(`Unable to parse ${t}='${i}' for ${n} with id '${e.id}'           to a JSON Object. Check the value for correct JSON syntax, e.g. double quoted strings. ${r}`)}else{if(s.string||s.any)return i;if(s.boolean)return h.coerceBooleanValue(e,t,i,r);if(s.number&&!isNaN(i))return Number(i)}throw new Error(`Unable to parse ${t}='${i}' for ${n} with id '${e.id}'       to a ${r}.`)}static coerceBooleanValue(e,t,i,r){if(null==i||"true"===i||""===i||i.toLowerCase()===t)return!0;if("false"===i)return!1;const n=e.tagName.toLowerCase();throw new Error(`Unable to parse ${t}='${i}' for ${n} with id '${e.id}' to a ${r}.`)}static isGlobalOrData(e){return Object.prototype.hasOwnProperty.call(a,e)||e.startsWith("data-")||e.startsWith("aria-")}static getGlobalAttrForProp(e){return a[e]||e}static getGlobalPropForAttr(e){return g[e]||e}}function m(e,t){let i=e.cache;return i||(i=new Map,e.cache=i),i.has(t)||i.set(t,e(t)),i.get(t)}h.attributeToPropertyName=m.bind(null,e=>e.toLowerCase().replace(/-(.)/g,(e,t)=>t.toUpperCase())),h.propertyNameToAttribute=m.bind(null,e=>e.replace(/([A-Z])/g,e=>"-"+e.toLowerCase())),h.eventTypeToEventListenerProperty=m.bind(null,e=>"on"+e.substr(0,1).toUpperCase()+e.substr(1)),h.isEventListenerProperty=m.bind(null,e=>/^on[A-Z]/.test(e)),h.isEventListenerAttr=m.bind(null,e=>/^on-[a-z]/.test(e)),h.eventListenerPropertyToEventType=m.bind(null,e=>e.substr(2,1).toLowerCase()+e.substr(3)),h.propertyNameToChangeEventType=m.bind(null,e=>e+"Changed"),h.propertyNameToChangedCallback=m.bind(null,e=>`on${e[0].toUpperCase()}${e.substr(1)}Changed`),h.eventTriggerToEventType=m.bind(null,e=>`oj${e.substr(0,1).toUpperCase()}${e.substr(1)}`),h.eventAttrToPreactPropertyName=m.bind(null,e=>e.toLowerCase().split("-").reduce((e,t,i)=>{return i>1?e+((r=t).charAt(0).toUpperCase()+r.substr(1)):e+t;var r},""));const _=new Set;class E{static registerElement(e,t,i){const r=e.toUpperCase();if(!E._CUSTOM_ELEMENT_REGISTRY[r]){if(!t.descriptor)throw new Error(`Custom element ${e} must be registered with a descriptor.`);E._CUSTOM_ELEMENT_REGISTRY[e]=t,E._CUSTOM_ELEMENT_REGISTRY[r]=t,Object.defineProperty(i,"name",{value:E.tagNameToElementClassName(e)}),customElements.define(e,i)}}static tagNameToElementClassName(e){return e.toLowerCase().match(/-(?<match>.*)/)[0].replace(/-(.)/g,(e,t)=>t.toUpperCase())+"Element"}static isComposite(e){var t,i;return null!==(i=null===(t=E.getElementRegistration(e))||void 0===t?void 0:t.composite)&&void 0!==i&&i}static isVComponent(e){var t,i;return null!==(i=null===(t=E.getElementRegistration(e))||void 0===t?void 0:t.vcomp)&&void 0!==i&&i}static isElementRegistered(e){return null!=E._CUSTOM_ELEMENT_REGISTRY[e]}static getElementRegistration(e){var t;return null!==(t=E._CUSTOM_ELEMENT_REGISTRY[e])&&void 0!==t?t:null}static getElementDescriptor(e){var t;return(null===(t=E.getElementRegistration(e))||void 0===t?void 0:t.descriptor)||{}}static getElementProperties(e){var t,i;const r=E.getElementDescriptor(e.tagName);return(null===(i=null!==(t=r._metadata)&&void 0!==t?t:r.metadata)||void 0===i?void 0:i.properties)||{}}static getElementInfo(e){return e?`${e.tagName.toLowerCase()} with id '${e.id}'`:""}static getElementState(e){let t=e[E._ELEMENT_STATE_KEY];if(!t&&E.isElementRegistered(e.tagName)){t=new(0,E.getElementRegistration(e.tagName).stateClass)(e),Object.defineProperty(e,E._ELEMENT_STATE_KEY,{value:t})}return null!=t?t:null}static getElementBridge(e){let t=e[E._ELEMENT_BRIDGE_KEY];if(!t&&E.isElementRegistered(e.tagName)){const i=E.getElementRegistration(e.tagName).bridgeProto;t=Object.create(i);const r=E.getElementDescriptor(e.tagName);t.initializeBridge(e,r),Object.defineProperty(e,E._ELEMENT_BRIDGE_KEY,{value:t})}return null!=t?t:null}static getSlotMap(e){const t={},i=e.childNodes;for(let e=0;e<i.length;e++){const r=i[e];if(E.isSlotable(r)){const e=E.getSlotAssignment(r);t[e]||(t[e]=[]),t[e].push(r)}}return t}static getSlotAssignment(e){const t=null!=e.__oj_slots?e.__oj_slots:e.getAttribute&&e.getAttribute("slot");return t||""}static isSlotable(e){return 1===e.nodeType||3===e.nodeType&&!!e.nodeValue.trim()}static getElementProperty(e,t){if(E.isElementRegistered(e.tagName)){let i=e._vcomp;return i&&!i.isCustomElementFirst()||(i=e[E.VCOMP_INSTANCE])?E.getPropertyValue(i.props,t):e.getProperty(t)}return e[t]}static getPropertyValue(e,t){let i=e;const r=t.split(".");try{r.forEach(e=>i=i[e])}catch(e){return}return i}static allowSlotRelocation(e){E._ALLOW_RELOCATION_COUNT+=e?1:-1}static canRelocateNode(e,t){const i=E.getElementState(e);if(!i.getSlotMap()||E._ALLOW_RELOCATION_COUNT>0)return!0;const r=i.getSlotSet();if(i.isPostCreateCallbackOrComplete()&&r.has(t)){if(e.hasAttribute("data-oj-preact"))throw new l(e,t.localName+" cannot be relocated as a child of this element.");if("preact"===i.getBindingProviderType())return!1}return!0}static getClassSet(e){if(e){const t=e.split(/\s+/).filter(e=>e.length>0);if(t.length>0)return new Set(t)}return _}static convertEmptyStringToUndefined(e,t,i){if(""===i){if("preact"===E.getElementState(e).getBindingProviderType()){if(!o.getSupportedTypes(t.type).string||t.enumValues)return}}return i}}E._CUSTOM_ELEMENT_REGISTRY={},E._ELEMENT_STATE_KEY="_ojElementState",E._ELEMENT_BRIDGE_KEY="_ojBridge",E._ALLOW_RELOCATION_COUNT=0,E.VCOMP_INSTANCE=Symbol("vcompInstance");const C=Symbol("childBindingProvider"),b=Symbol("cachedBindingProvider");class v{constructor(e){this.dirtyProps=new Set,this._componentState=P.WaitingToCreate,this._outerClasses=new Set,this.Element=e}startCreationCycle(){this._isInErrorState()||(null!=this._preCreatedPromise&&this._componentState!==P.WaitingToCreate||this._updateComponentState(P.Creating),this._registerBusyState())}pauseCreationCycle(){this._resolveBusyState()}resetCreationCycle(){this._updateComponentState(P.WaitingToCreate),this._bindingProviderPromise=null,this._preCreatedPromise=null,this._createdPromise=null}isComplete(){return this._componentState===P.Complete}isCreating(){return this._componentState===P.Creating}isPostCreateCallbackOrComplete(){return this._componentState===P.PostCreateCallback||this.isComplete()}canHandleAttributes(){return!this._isInErrorState()&&this._componentState!==P.WaitingToCreate}beginApplyingBindings(){this.isComplete()||(this._bindingProviderType="knockout",this._updateComponentState(P.ApplyingBindings))}allowPropertySets(){return this._componentState===P.Creating||this._componentState===P.ApplyingBindings||this._componentState===P.BindingsApplied||this._componentState===P.PostCreateCallback||this._componentState===P.Complete}allowPropertyChangedEvents(){return this._componentState===P.BindingsApplied||this._componentState===P.PostCreateCallback||this._componentState===P.Complete}getTrackChildrenOption(){var e,t;const i=E.getElementDescriptor(this.Element.tagName).metadata;return null!==(t=null===(e=null==i?void 0:i.extension)||void 0===e?void 0:e._TRACK_CHILDREN)&&void 0!==t?t:"none"}setCreateCallback(e){this._isInErrorState()||(this._updateComponentState(P.WaitingForBindings),this._preCreatedPromise||(this._preCreatedPromise=this.GetPreCreatedPromise()),this._createdPromise=this._preCreatedPromise.then(()=>{if(!this._isInErrorState()){const t=e();return this._updateComponentState(P.PostCreateCallback),t}return Promise.reject()}),this._createdPromise.then(()=>{this._updateComponentState(P.Complete)},e=>{if(this._updateComponentState(P.Incomplete),e)throw e}))}setBindingsDisposedCallback(e){this._disposedCallback=e}resolveBindingProvider(e){this._bpClean=e.__CleanNode,this._resolveBindingProviderCallback&&(this._bindingsApplied(),this._resolveBindingProviderCallback(e),this._resolveBindingProviderCallback=null,this._rejectBindingProviderCallback=null),this._bindingProvider=e}rejectBindingProvider(e){this._rejectBindingProviderCallback&&(this._rejectBindingProviderCallback(e),this._resolveBindingProviderCallback=null,this._rejectBindingProviderCallback=null)}disposeBindingProvider(){var e;this.isComplete()?null===(e=this._disposedCallback)||void 0===e||e.call(this):(this.rejectBindingProvider(),this._updateComponentState(P.BindingsDisposed))}setBindingProviderCallback(e){this._bindingProviderCallback=e}getBindingProviderPromise(){const e=this.getBindingProviderType();if(!this._bindingProviderPromise)if(n.verifyThemeVersion(),"none"===e||"preact"===e)this._bindingsApplied(),this._bindingProviderPromise=Promise.resolve(null);else{if("knockout"!==e)throw new l(this.Element,`Unknown binding provider '${e}'.`);this._bindingProvider?(this._bindingsApplied(),this._bindingProviderPromise=Promise.resolve(this._bindingProvider)):this._bindingProviderPromise=new Promise((e,t)=>{this._resolveBindingProviderCallback=e,this._rejectBindingProviderCallback=t})}return this._bindingProviderPromise}getBindingProvider(){return this._bindingProvider}getBindingProviderType(){return this._bindingProviderType||(this._bindingProviderType=v._walkBindingProviders(this.Element)),this._bindingProviderType}getBindingProviderCleanNode(){return this._bpClean||v._NOOP}getDescriptiveText(){let e=this.GetDescriptiveValue("aria-label")||this.GetDescriptiveValue("title")||this.GetDescriptiveLabelByValue("labelled-by")||this.GetDescriptiveValue("label-hint")||this.GetDescriptiveLabelByValue("aria-labelledby");return e=e?e.trim().replace(/\s+/g," "):"",e}getSlotMap(e){return!this._slotMap&&e&&(this._slotMap=E.getSlotMap(this.Element)),this._slotMap}getSlotSet(){if(!this._slotSet){const e=Object.keys(this._slotMap);let t=[];e.forEach(e=>t=t.concat(this._slotMap[e])),this._slotSet=new Set(t)}return this._slotSet}setOuterClasses(e){this.PatchClasses(this._outerClasses,e),this._outerClasses=e}PatchClasses(e,t){e.forEach(e=>{t.has(e)||this.Element.classList.remove(e)}),t.forEach(t=>{e.has(t)||this.Element.classList.add(t)})}GetCreatedPromise(){return this._createdPromise}GetPreCreatedPromise(){let e=this.getBindingProviderPromise();return"none"!==this.getTrackChildrenOption()&&(e=e.then(e=>this._getTrackedChildrenPromises(e))),e}IsTransferAttribute(e){return!1}GetDescriptiveValue(e){const t=h.attributeToPropertyName(e),i=E.getElementProperties(this.Element);let r;return r=i&&i[t]?this.Element[t]:this.IsTransferAttribute(e)?this.GetDescriptiveTransferAttributeValue(e):this.Element.getAttribute(e),r}GetDescriptiveTransferAttributeValue(e){return""}GetDescriptiveLabelByValue(e){const t=this.GetDescriptiveValue(e);if(t){const e=document.getElementById(t);if(e)return e.textContent}return null}_updateComponentState(e){if(this._componentState!==P.BindingsDisposed){switch(e){case P.WaitingToCreate:this.Element.classList.remove("oj-complete"),this._createdPromise=null;break;case P.Complete:this.Element.classList.add("oj-complete"),this._resolveBusyState();break;case P.BindingsDisposed:case P.Incomplete:this.Element.classList.add("oj-incomplete"),this._resolveBusyState()}this._componentState=e}}_bindingsApplied(){var e;this._updateComponentState(P.BindingsApplied),null===(e=this._bindingProviderCallback)||void 0===e||e.call(this)}_registerBusyState(){const e=i.getContext(this.Element).getBusyContext();if(this._resolveCreatedBusyState)throw new l(this.Element,"Registering busy state before previous state is resolved.");this._resolveCreatedBusyState=e.addBusyState({description:E.getElementInfo(this.Element)+" is being upgraded."})}_resolveBusyState(){this._resolveCreatedBusyState&&(this._resolveCreatedBusyState(),this._resolveCreatedBusyState=null)}static _walkBindingProviders(e,t=e){var i;let r=e[b];if(r)return r;if(r=e.getAttribute("data-oj-binding-provider"),!r){const n=e.parentElement;if(null==n){if(e!==document.documentElement)throw new l(t,"Cannot determine binding provider for a disconnected subtree.");r="knockout"}else r=null!==(i=n[C])&&void 0!==i?i:v._walkBindingProviders(n,t)}return e[b]=r,r}_getTrackedChildrenPromises(e){const t=this.getTrackChildrenOption(),n=i.getContext(this.Element).getBusyContext(),s=this._getChildrenToTrack(this.Element,t,[]).map(t=>{if(!e){const e=n.addBusyState({description:`Waiting for element ${t.localName} to be defined.`}),i=setInterval(()=>{r.warn(`Waiting for element ${t.localName} to be defined.`)},2e4);return customElements.whenDefined(t.localName).then(()=>(e(),clearInterval(i),E.isElementRegistered(t.tagName)?E.getElementState(t).GetCreatedPromise():null)).catch(r=>{throw e(),clearInterval(i),new Error(`Error defining element ${t.localName} : ${r}`)})}return E.isElementRegistered(t.tagName)?E.getElementState(t).GetCreatedPromise():null});return Promise.all(s)}_getChildrenToTrack(e,t,i){const r=e.childNodes;for(let e=0;e<r.length;e++){const n=r[e];o.isValidCustomElementName(n.localName)?i.push(n):"nearestCustomElement"===t&&this._getChildrenToTrack(n,t,i)}return i}_isInErrorState(){return this._componentState===P.Incomplete||this._componentState===P.BindingsDisposed}}var P;v._NOOP=()=>{},function(e){e[e.WaitingToCreate=0]="WaitingToCreate",e[e.Creating=1]="Creating",e[e.WaitingForBindings=2]="WaitingForBindings",e[e.ApplyingBindings=3]="ApplyingBindings",e[e.BindingsApplied=4]="BindingsApplied",e[e.PostCreateCallback=5]="PostCreateCallback",e[e.Complete=6]="Complete",e[e.Incomplete=7]="Incomplete",e[e.BindingsDisposed=8]="BindingsDisposed"}(P||(P={})),e.AttributeUtils=h,e.CACHED_BINDING_PROVIDER=b,e.CHILD_BINDING_PROVIDER=C,e.CustomElementUtils=E,e.ElementState=v,e.ElementUtils=o,e.JetElementError=l,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojcustomelement-utils.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojmetadatautils',["exports","ojs/ojcore-base","ojs/ojcustomelement-utils"],function(e,t,r){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;const o={getDefaultValue:function(e,r){let n=e.value;if(void 0===n){const t=e.properties;if(t){const r={},u=Object.keys(t);for(let e=0;e<u.length;e++){const n=o.getDefaultValue(t[u[e]]);void 0!==n&&(r[u[e]]=n)}Object.keys(r).length>0&&(e.value=r,n=r)}}return void 0!==n&&(Array.isArray(n)?n=r?o.deepFreeze(n):n.slice():null!==n&&"object"==typeof n&&(n=r?o.deepFreeze(n):t.CollectionUtils.copyInto({},n,void 0,!0))),n},getDefaultValues:function(e,t){const r={},n=Object.keys(e);let u=!1;return n.forEach(function(n){const l=o.getDefaultValue(e[n],t);void 0!==l&&(r[n]=l,u=!0)}),u?r:null},deepFreeze:function(e){if(Object.isFrozen(e))return e;if(Array.isArray(e))e=e.map(e=>o.deepFreeze(e)),Object.freeze(e);else if(null!==e&&"object"==typeof e){const t=Object.getPrototypeOf(e);null!==t&&t!==Object.prototype||(Object.keys(e).forEach(function(t){e[t]=o.deepFreeze(e[t])}),Object.freeze(e))}return e},getPropertyMetadata:function(e,t){let r=t;if(r&&e){const t=e.split(".");for(let e=0;e<t.length&&(r=r[t[e]],r&&1!==t.length&&e!==t.length-1&&r.properties);e++)r=r.properties}return r},checkEnumValues:function(e,t,r,o){if("string"==typeof r&&o){const e=o.enumValues;if(e&&-1===e.indexOf(r))throw new Error(`Invalid value '${r}' found for property '${t}'.Expected one of the following '${e.toString()}'.`)}},getFlattenedAttributes:function(e){const t=[];return o._getAttributesFromProperties("",e,t),t},_getAttributesFromProperties:function(e,t,n){if(t){Object.keys(t).forEach(u=>{const l=t[u],i=e+u;n.push(r.AttributeUtils.propertyNameToAttribute(i)),l.properties&&o._getAttributesFromProperties(i+".",l.properties,n)})}}},n=o.getDefaultValue,u=o.getDefaultValues,l=o.deepFreeze,i=o.getPropertyMetadata,s=o.checkEnumValues,c=o.getFlattenedAttributes;e.checkEnumValues=s,e.deepFreeze=l,e.getDefaultValue=n,e.getDefaultValues=u,e.getFlattenedAttributes=c,e.getPropertyMetadata=i,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojmetadatautils.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojdomutils',["exports","ojs/ojthemeutils","ojs/ojcore-base","jquery"],function(e,t,n,o){"use strict";n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,o=o&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o;const i={_HTML_START_TAG:"<html>",_HTML_END_TAG:"</html>",_LEGAL_ELEMENTS:{SPAN:1,B:1,I:1,EM:1,BR:1,HR:1,LI:1,OL:1,UL:1,P:1,TT:1,BIG:1,SMALL:1,PRE:1},_LEGAL_ATTRIBUTES:{class:1,style:1}};var r,a,s,l,c,u,f;i.isHTMLContent=function(e){return 0===e.indexOf(i._HTML_START_TAG)&&e.lastIndexOf(i._HTML_END_TAG)===e.length-7},i.cleanHtml=function(e){var t=o(document.createElement("span")).get(0);return t.innerHTML=e,e&&e.indexOf("<")>=0&&i._cleanElementHtml(t),t},i._cleanElementHtml=function(e){for(var t=e.childNodes,n=t.length-1;n>=0;n--){var r=t.item(n);if(r&&1===r.nodeType)if(i._LEGAL_ELEMENTS[r.nodeName]){for(var a=r.attributes,s=a.length-1;s>=0;s--){var l=a[s];void 0!==o(r).attr(l.name)&&(i._LEGAL_ATTRIBUTES[l.name]||r.removeAttribute(l.nodeName))}i._cleanElementHtml(r)}else r&&e.removeChild(r)}},i.isAncestor=function(e,t){for(var n=t.parentNode;n;){if(n===e)return!0;n=n.parentNode}return!1},i.isAncestorOrSelf=function(e,t){return t===e||i.isAncestor(e,t)},i.addResizeListener=function(e,t,n,o){let r=i._RSZ_TRKR;o&&(r=i._RSZ_TRKR_OBS,i._OBS_BASED.set(t,!0));let a=r.get(e);null==a&&(a=new i._ResizeTracker(e,o),r.set(e,a),a.start()),a.addListener(t,n)},i.removeResizeListener=function(e,t){const n=i._OBS_BASED.get(t)?i._RSZ_TRKR_OBS:i._RSZ_TRKR,o=n.get(e);null!=o&&(o.removeListener(t),o.isEmpty()&&(o.stop(),n.delete(e)))},i.fixResizeListeners=function(e){o(e).find(".oj-helper-detect-expansion").parent().each(function(e,t){var n=i._RSZ_TRKR.get(t);null!=n&&n.init(!0)})},i.isMetaKeyPressed=function(e){var t=n.AgentUtils.getAgentInfo();return n.AgentUtils.OS.MAC===t.os?e.metaKey:e.ctrlKey},i.dispatchEvent=function(e,t){var n="disabled",o=e[n];try{e[n]=!1,e.dispatchEvent(t)}finally{e[n]=o}},i._invokeAfterPaint=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,0)}).bind(window),i._cancelInvokeAfterPaint=(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||function(e){return window.clearTimeout(e)}).bind(window),i._ResizeTracker=function(e,t){e instanceof o&&(e=e[0]);var n=e.hasAttribute("data-oj-resize-notify"),r=o.Callbacks(),a=[],s=[],l=0,c=null,u=null,f=null,d=null,g=null,h=null,v=null;function m(e){var t=!1;if(null!=d.offsetParent){var n=d.offsetWidth,o=d.offsetHeight;u===n&&f===o||(l=2,S(n,o),t=!0,e&&p(!0))}return t}function L(t){const n=t[0].borderBoxSize;p(!1,[n?(n[0]||n).inlineSize:e.offsetWidth,n?(n[0]||n).blockSize:e.offsetHeight])}function p(t,o){var s=o?o[0]:e.offsetWidth,l=o?o[1]:e.offsetHeight,u=(t,o)=>{r.fire(t,o),n&&e.dispatchEvent(new Event("oj-resize"))};r.has()&&(t?(null!==c&&i._cancelInvokeAfterPaint(c),c=i._invokeAfterPaint(function(){c=null,u(s,l)})):u(s,l));for(var f=0;f<a.length;f++)a[f].getCallback()(s,l)}function E(e){e.stopPropagation(),m(!0)||l>0&&null!=d.offsetParent&&(0===d.scrollLeft||0===d.scrollTop)&&(l-=1,S(u,f))}function S(e,t){u=e,f=t;var n=d.firstChild.style,o=1;do{n.width=e+o+"px",n.height=t+o+"px",d.scrollLeft=o,d.scrollTop=o,o+=1}while((0===d.scrollTop||0===d.scrollLeft)&&o<=5);g.scrollLeft=e,g.scrollTop=t}this.addListener=function(t,o){if(void 0===o||isNaN(o)||0===o)r.add(t);else{var l=()=>{t.apply(null,arguments),e.dispatchEvent(new Event("oj-resize"))};a.push(new i._collapsingListenerManager(n?l:t,o)),s.push(t)}},this.removeListener=function(e){var t=s.indexOf(e);t>=0?(s.splice(t,1),a.splice(t,1)[0].stop()):r.remove(e)},this.isEmpty=function(){return!r.has()&&0===s.length},this.start=function(){if(t&&window.ResizeObserver instanceof Function)(v=new ResizeObserver(L)).observe(e,{box:"border-box"});else{h=E;var n=e.childNodes[0];(d=document.createElement("div")).className="oj-helper-detect-expansion";var o=document.createElement("div");d.appendChild(o),null!=n?e.insertBefore(d,n):e.appendChild(d),d.addEventListener("scroll",h,!1),(g=document.createElement("div")).className="oj-helper-detect-contraction";var i=document.createElement("div");i.style.width="200%",i.style.height="200%",g.appendChild(i),e.insertBefore(g,d),g.addEventListener("scroll",h,!1),this.init(!1)}},this.stop=function(){null!=c&&(i._cancelInvokeAfterPaint(c),c=null),null!=v?(v.disconnect(),v=null):null!=d&&(d.removeEventListener("scroll",h),g.removeEventListener("scroll",h),d.parentNode&&e.removeChild(d),g.parentNode&&e.removeChild(g))},this.init=function(e){if(d){var t=m(e);e&&!t&&null!=d.offsetParent&&S(u,f)}}},i._RSZ_TRKR=new WeakMap,i._RSZ_TRKR_OBS=new WeakMap,i._OBS_BASED=new WeakMap,i.isValidIdentifier=function(e){return/^[A-Za-z][0-9A-Z_a-z-]*$/.test(e)},i._collapsingListenerManager=function(e,t){var n=null,o=null,i=function(){e.apply(null,n),o=null},r=function(){n=Array.prototype.slice.call(arguments),null==o&&(o=window.setTimeout(i,t))};this.getCallback=function(){return r},this.stop=function(){null!=o&&(window.clearTimeout(o),o=null)}},i.isTouchSupported=function(){return"ontouchstart"in window||navigator.msMaxTouchPoints>0||navigator.maxTouchPoints>0},i.setInKoCleanExternal=function(e){i._koCleanNode=e},i.unwrap=function(e,t){var n=i._koCleanNode;n&&e.get(0)===n||(t?t.replaceWith(e):e.unwrap())},i.isChromeEvent=function(e){if(!("clientX"in e)||!("clientY"in e))return!1;var t=n.AgentUtils.getAgentInfo();if(n.AgentUtils.OS.ANDROID===t.os||n.AgentUtils.OS.IOS===t.os)return!1;if(t.engine!==n.AgentUtils.ENGINE.GECKO&&t.engine!==n.AgentUtils.ENGINE.WEBKIT&&t.engine!==n.AgentUtils.ENGINE.BLINK&&t.browser!==n.AgentUtils.BROWSER.IE)return!1;var r="ltr"===i.getReadingDirection(),a=!r&&t.browser===n.AgentUtils.BROWSER.SAFARI,s=e.target,l=o(s),c=s.getBoundingClientRect(),u=i.getScrollBarWidth();return!(!r||"HTML"!==s.nodeName&&"visible"===l.css("overflow-x")||!(e.clientX>c.right-u))||(!r&&!a&&"HTML"===s.nodeName&&e.clientX>c.right-u||(!r&&"visible"!==l.css("overflow-x")&&e.clientX<c.left+u||("HTML"===s.nodeName||"visible"!==l.css("overflow-y"))&&e.clientY>c.bottom-u))},i.getScrollBarWidth=function(){return o.position.scrollbarWidth()},i.getReadingDirection=function(){var e=document.documentElement.getAttribute("dir");return e&&(e=e.toLowerCase()),"rtl"===e?"rtl":"ltr"},i.setScrollLeft=function(e,t){e.scrollLeft=i.calculateScrollLeft(t)},i.calculateScrollLeft=function(e){var t=e;if("rtl"===i.getReadingDirection()){var o=n.AgentUtils.getAgentInfo().browser;o!==n.AgentUtils.BROWSER.IE&&o!==n.AgentUtils.BROWSER.EDGE&&(t=-e)}return t},i.getCSSLengthAsInt=function(e){if(!isNaN(e))return parseInt(e,10);if(e&&e.length>0&&"auto"!==e){var t=parseInt(e,10);return isNaN(t)&&(t=0),t}return 0},i.getCSSLengthAsFloat=function(e){if(!isNaN(e))return parseFloat(e);if(e&&e.length>0){var t=parseFloat(e);return isNaN(t)&&(t=0),t}return 0},i.getCSSTimeUnitAsMillis=function(e){if(!isNaN(e))return parseInt(e,10);if(e&&e.length>0){var t=parseFloat(e);if(isNaN(t))t=0;else{var n,o=e+"";o.length>2&&o.endsWith("ms")?n=o.slice(-3,-2):o.length>1&&o.endsWith("s")&&(n=o.slice(-2,-1)),isNaN(n)?t=0:!o.endsWith("ms")&&o.endsWith("s")&&(t*=1e3)}return t}return 0},i._LOGICAL_PARENT_DATA="oj-logical-parent",i.getLogicalParent=function(e){if(e)return e.data(i._LOGICAL_PARENT_DATA)},i.setLogicalParent=function(e,t){e&&(null===t?e.removeData(i._LOGICAL_PARENT_DATA):e.data(i._LOGICAL_PARENT_DATA,t))},i.isLogicalAncestorOrSelf=function(e,t){n.Assert.assertDomElement(e),n.Assert.assertDomElement(t);for(var r=t;r;){if(r===e)return!0;var a=i.getLogicalParent(o(r));r=a?a[0]:r.parentNode}return!1},i.validateURL=function(e,t){var n=t||["http:","https:"],o=document.createElement("a");o.href=e;var i=o.protocol;if(null!=i&&(i=i.toLowerCase()),n.indexOf(i)<0&&""!==i)throw new Error(i+" is not a valid URL protocol")},i._suppressNativeContextMenu=function(){o(document.body).hasClass("oj-hybrid")&&!o(document.body).hasClass("oj-hybrid-show-context-menu")&&document.body.addEventListener("contextmenu",function(e){"INPUT"!==e.target.nodeName&&"TEXTAREA"!==e.target.nodeName&&e.preventDefault()},!0)},i._suppressNativeContextMenu(),i.PRESS_HOLD_THRESHOLD=750,i.recentTouchEnd=function(){var e=0;function t(){e=Date.now()}return document.addEventListener("touchend",t,!0),document.addEventListener("touchcancel",t,!0),function(){return Date.now()-e<500}}(),i.recentTouchStart=(r=0,a=i.PRESS_HOLD_THRESHOLD+50,document.addEventListener("touchstart",function(){r=Date.now()},{passive:!0,capture:!0}),function(){return Date.now()-r<a}),i.recentPointer=(l=0,c=i.PRESS_HOLD_THRESHOLD+600,document.addEventListener("mousedown",function(){var e=Date.now();(!s||e>l+i.PRESS_HOLD_THRESHOLD)&&(l=e,s=!1)},!0),document.addEventListener("touchstart",function(){l=Date.now(),s=!0},{passive:!0,capture:!0}),document.addEventListener("mouseup",function(){l=Date.now(),s=!1},!0),document.addEventListener("touchend",function(){l=Date.now(),s=!1},!0),function(){return Date.now()-l<(s?c:600)}),i.makeFocusable=(u=0,f=(t.parseJSONFromFontFamily("oj-focus-config")||{}).focusHighlightPolicy,function(e){var t=e.element,n="ojFocusable";if(e.remove){t.removeClass("oj-focus oj-focus-highlight");var r=t.data(n);if(null==r)return;var a=".ojFocusable"+(""+r).split(",").join(" .ojFocusable");t.off(a).removeData(n)}else{var s=e.afterToggle||o.noop,l=e.applyHighlight?function(t){t.addClass("oj-focus"),function(e,t){switch(e?e():f){case"all":return!0;case"none":return!1;default:return!(i.recentPointer()||t&&t())}}(e.getFocusHighlightPolicy,e.recentPointer)&&t.addClass("oj-focus-highlight"),s("focusin")}:function(e){e.addClass("oj-focus"),s("focusin")},c=!1;(e.setupHandlers||function(i,r){var a=e.component,s=function(e){i(o(e.currentTarget)),c=!0},l=function(e){c&&(r(o(e.currentTarget)),c=!1)};if(a)a._on(t,{focusin:s,focusout:l});else{var f=u;u+=1;var d=t.data(n);t.data(n,null==d?f:d+","+f);var g={},h=".ojFocusable"+f;g["focusin"+h]=s,g["focusout"+h]=l,t.on(g)}})(l,function(e){e.removeClass("oj-focus oj-focus-highlight"),s("focusout")})}}),i.getNoJQFocusHandlers=function(e,t){return{focusIn:function(t){return e(o(t))},focusOut:function(e){return t(o(e))}}};const d=i.isHTMLContent,g=i.cleanHtml,h=i.isAncestor,v=i.isAncestorOrSelf,m=i.addResizeListener,L=i.removeResizeListener,p=i.fixResizeListeners,E=i.isMetaKeyPressed,S=i.dispatchEvent,A=i.isValidIdentifier,_=i.isTouchSupported,T=i.setInKoCleanExternal,R=i.unwrap,w=i.isChromeEvent,N=i.getScrollBarWidth,O=i.getReadingDirection,C=i.setScrollLeft,H=i.calculateScrollLeft,P=i.getCSSLengthAsInt,b=i.getCSSLengthAsFloat,D=i.getCSSTimeUnitAsMillis,I=i.getLogicalParent,y=i.setLogicalParent,M=i.isLogicalAncestorOrSelf,j=i.validateURL,B=i.PRESS_HOLD_THRESHOLD,F=i.recentTouchEnd,x=i.recentTouchStart,U=i.recentPointer,z=i.getNoJQFocusHandlers,k=i.makeFocusable;e.PRESS_HOLD_THRESHOLD=B,e.addResizeListener=m,e.calculateScrollLeft=H,e.cleanHtml=g,e.dispatchEvent=S,e.fixResizeListeners=p,e.getCSSLengthAsFloat=b,e.getCSSLengthAsInt=P,e.getCSSTimeUnitAsMillis=D,e.getLogicalParent=I,e.getNoJQFocusHandlers=z,e.getReadingDirection=O,e.getScrollBarWidth=N,e.isAncestor=h,e.isAncestorOrSelf=v,e.isChromeEvent=w,e.isHTMLContent=d,e.isLogicalAncestorOrSelf=M,e.isMetaKeyPressed=E,e.isTouchSupported=_,e.isValidIdentifier=A,e.makeFocusable=k,e.recentPointer=U,e.recentTouchEnd=F,e.recentTouchStart=x,e.removeResizeListener=L,e.setInKoCleanExternal=T,e.setLogicalParent=y,e.setScrollLeft=C,e.unwrap=R,e.validateURL=j,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojdomutils.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojtrace-event',["exports"],function(e){"use strict";function t(e){var t;let n=e.type;const a=null===(t=e.detail)||void 0===t?void 0:t.value;if(null!=a)switch(n){case"validChanged":n=`${n}=${a}`;break;case"expandedChanged":"boolean"==typeof a&&(n=`${n}=${a}`)}return n}e.traceDispatchEvent=function(e){return function(n){const a=this,r=function(){var e;const t=window.GlobalTracer;return null===(e=null==t?void 0:t.get)||void 0===e?void 0:e.call(t)}();if("undefined"!=typeof window&&window.__JET_TRACER_ENABLED__&&r&&function(e){const t=null==e?void 0:e.type;if(!t||t.startsWith("ojBefore"))return!1;switch(t){case"attribute-changed":case"ojAnimateStart":case"ojAnimateEnd":case"ojTransitionStart":case"ojTransitionEnd":case"labelledByChanged":case"beforeDestroyChanged":return!1}return!0}(n)){const o={operationName:"componentEvent",trigger:{type:t(n),target:a}};return r.span(o,t=>{let r;try{return e.call(a,n)}catch(e){r=e}finally{const e={};r&&(e.error=r),t.finish(e)}})}return e.call(a,n)}},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojtrace-event.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojbootstrap',["exports"],function(e){"use strict";var n;const t={whenDocumentReady:function(){return n||(n="loading"===document.readyState?new Promise(function(e){var n=function(){document.removeEventListener("DOMContentLoaded",n),e()};document.addEventListener("DOMContentLoaded",n)}):Promise.resolve()),n}}.whenDocumentReady;e.whenDocumentReady=t,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojbootstrap.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojcustomelement',["ojs/ojcore","ojs/ojlogger","ojs/ojcustomelement-utils","ojs/ojtrace-event","ojs/ojmetadatautils","ojs/ojbootstrap","ojs/ojcore-base"],function(e,t,r,n,i,o,s){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,s=s&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s;const a={};a.proto={getClass:function(e){var t=Object.create(HTMLElement.prototype);this.InitializePrototype(t),t.dispatchEvent=n.traceDispatchEvent(HTMLElement.prototype.dispatchEvent);var i=this.GetMetadata(e);a._enumerateMetadataForKey(t,i,"properties",this.DefinePropertyCallback.bind(this)),a._enumerateMetadataForKey(t,i,"methods",this.DefineMethodCallback.bind(this)),this.AddComponentMethods(t),t.setProperties=function(e){r.CustomElementUtils.getElementBridge(this)._setProperties(this,e)},Object.defineProperty(t,"set",{value:function(e,t){this.setProperty(e,t)}}),Object.defineProperty(t,"unset",{value:function(e){this.setProperty(e,void 0)}}),t.attributeChangedCallback=this.AttributeChangedCallback,t.connectedCallback=this._connectedCallback,t.disconnectedCallback=this._detachedCallback;const o=t.appendChild;t.appendChild=function(e){return r.CustomElementUtils.canRelocateNode(this,e)?o.call(this,e):e};const s=t.insertBefore;t.insertBefore=function(e,t){return r.CustomElementUtils.canRelocateNode(this,e)?s.call(this,e,t):e},t.setAttribute=function(e,t){if("class"===e){const e=r.CustomElementUtils.getClassSet(t);r.CustomElementUtils.getElementState(this).setOuterClasses(e)}else HTMLElement.prototype.setAttribute.call(this,e,t)},t.removeAttribute=function(e){"class"===e?this.setAttribute("class",""):HTMLElement.prototype.removeAttribute.call(this,e)};var l=function(){var e=window.Reflect;return void 0!==e?e.construct(HTMLElement,[],this.constructor):HTMLElement.call(this)},u=this;return Object.defineProperty(l,"observedAttributes",{get:function(){return u.GetAttributes(i)}}),Object.defineProperty(t,"constructor",{value:l,writable:!0,configurable:!0}),l.prototype=t,Object.setPrototypeOf(l,HTMLElement),l},initializeBridge:function(e,t){this.METADATA=this.GetMetadata(t),this._eventListeners={},this.State=r.CustomElementUtils.getElementState(e)},AddComponentMethods:function(e){},AttributeChangedCallback:function(e,n,o){const s=r.AttributeUtils.attributeToPropertyName(e),l=r.CustomElementUtils.getElementBridge(this);if(n!==o||l.State.dirtyProps.has(s)){if(l.State.dirtyProps.delete(s.split(".")[0]),"disabled"===e&&l.ShouldRemoveDisabled()&&l._isDisabledAttributeRemoved())return void(null!=o&&(t.warn("Ignoring 'disabled' attribute change after component initialization. Use element property setter instead."),l._removeDisabledAttribute(this)));if(l.ShouldHandleAttributeChanged(this)){a.__CheckOverlappingAttribute(this,e),null===o&&(o=void 0);var u={detail:{attribute:e,value:o,previousValue:n}};if(this.dispatchEvent(new CustomEvent("attribute-changed",u)),!r.AttributeUtils.getExpressionInfo(o).expr){const t=i.getPropertyMetadata(s,r.CustomElementUtils.getElementProperties(this));t&&this.setProperty(s,a.__ParseAttrValue(this,e,s,o,t)),l.HandleAttributeChanged(this,e,n,o)}}}},CreateComponent:function(e){},DefineMethodCallback:function(e,t,r){},DefinePropertyCallback:function(e,t,r){},GetAttributes:function(e){return e?i.getFlattenedAttributes(e.properties):[]},GetMetadata:function(e){return e[a.DESC_KEY_META]||{}},GetAliasForProperty:function(e){return e},ShouldHandleAttributeChanged:function(e){return this.State.canHandleAttributes()},ShouldCallHandleAttributeChanged:function(e){return this.ShouldHandleAttributeChanged()},HandleAttributeChanged:function(e,t,r,n){},HandleBindingsApplied:function(e,t){},HandleDetached:function(e){},HandleReattached:function(e){},InitializeElement:function(e){},InitializePrototype:function(e){},BatchedPropertySet:function(e,t){for(var r=Object.keys(t),n=0;n<r.length;n++){var i=r[n];e.setProperty(i,t[i])}},GetEventListenerProperty:function(e){var t=r.AttributeUtils.eventListenerPropertyToEventType(e),n=this._eventListeners[t];if(n)return n.getListener()},GetProperty:function(e,t,n){var o=i.getPropertyMetadata(t,r.CustomElementUtils.getElementProperties(e));return r.AttributeUtils.isEventListenerProperty(t)||!o||-1===t.indexOf(".")?n[t]:r.CustomElementUtils.getPropertyValue(n,t)},HandlePropertyChanged:function(e,t,r,n,i,o){var s=i?"external":"internal";a.__FirePropertyChangeEvent(e,t,r,n,s,o)},PlaybackEarlyPropertySets:function(e){if(this._earlySets)for(;this._earlySets.length;){var t=this._earlySets.shift();e.setProperty(t.property,t.value)}},SaveEarlyPropertySet:function(e,t,r){return!this.State.allowPropertySets()&&(this._earlySets||(this._earlySets=[]),this._earlySets.push({property:t,value:r}),!0)},SetEventListenerProperty:function(e,t,n){var i=r.AttributeUtils.eventListenerPropertyToEventType(t),o=this._eventListeners[i];o||(o=this._createEventListenerWrapper(),this._eventListeners[i]=o,e.addEventListener(i,o)),null==n||n instanceof Function?o.setListener(n):a.__ThrowTypeError(e,t,n,"function")},SetProperty:function(t,n,o,s,l){var u=i.getPropertyMetadata(n,r.CustomElementUtils.getElementProperties(t));if(r.AttributeUtils.isEventListenerProperty(n)||!u)t[n]=o;else{var p=t.getProperty(n),c=n.split(".")[0],d=s[c];if(e.CollectionUtils.isPlainObject(d)&&(d=e.CollectionUtils.copyInto({},d,void 0,!0)),!r.ElementUtils.comparePropertyValues(u,o,p)){var h=-1!==n.indexOf(".");if(h&&(this._SKIP_PROP_CHANGE_EVENT=!0),l?this.ValidateAndSetProperty(this.GetAliasForProperty.bind(this),s,n,o,t):a.__SetProperty(this.GetAliasForProperty.bind(this),s,n,o),this._SKIP_PROP_CHANGE_EVENT=!1,h){var y={path:n,value:o,previousValue:p};this.HandlePropertyChanged(t,c,s[c],d,l,y)}return this.State.dirtyProps.add(c),{property:c,propertySet:!0,isSubproperty:h}}}return{property:null,propertySet:!1,isSubproperty:!1}},ShouldRemoveDisabled:function(){return!0},ValidateAndSetProperty:function(e,t,r,n,i){var o=this.ValidatePropertySet(i,r,n);a.__SetProperty(e,t,r,o)},ValidatePropertySet:function(e,n,o){var s=r.CustomElementUtils.getElementProperties(e),l=i.getPropertyMetadata(n,s),u=n.split(".");if(l){if(s[u[0]].readOnly)throw new r.JetElementError(e,`Read-only property '${n}' cannot be set.`);try{i.checkEnumValues(e,n,o,l)}catch(t){throw new r.JetElementError(e,t.message)}return null!=o?a.checkType(e,n,o,l):o}t.warn(r.CustomElementUtils.getElementInfo(e)+": Ignoring property set for undefined property '"+n+"'.")},PostCreate:function(e){e.hasAttribute("disabled")&&this.ShouldRemoveDisabled()&&!this._isDisabledAttributeRemoved()&&this._removeDisabledAttribute(e)},_connected:function(e){const t=this.State;if(t.isComplete())this.HandleReattached(e);else if(t.startCreationCycle(),t.isCreating()){this.InitializeElement(e),t.setBindingProviderCallback(this.PlaybackEarlyPropertySets.bind(this,e));const r=()=>{try{t.getSlotMap(!0);return(this.CreateComponent(e)||Promise.resolve()).then(this.PostCreate.bind(this,e))}catch(e){return Promise.reject(e)}};t.setCreateCallback(r)}},_connectedCallback:function(){r.CustomElementUtils.getElementBridge(this)._connected(this)},_detachedCallback:function(){const e=r.CustomElementUtils.getElementBridge(this),t=e.State;t.isComplete()?e.HandleDetached(this):t.pauseCreationCycle()},_createEventListenerWrapper:function(){var e,t=function(t){e&&e(t)};return t.setListener=function(t){e=t},t.getListener=function(){return e},t},_setProperties:function(e,t){for(var r=[],n={},i=!1,o=Object.keys(t),s=0;s<o.length;s++){var a=o[s];a.indexOf(".")>=0?r.push(a):(n[a]=t[a],i=!0)}i&&this.BatchedPropertySet(e,n);for(var l=0;l<r.length;l++){var u=r[l];e.setProperty(u,t[u])}},_isDisabledAttributeRemoved:function(){return!0===this._disabledProcessed},_removeDisabledAttribute:function(e){this._disabledProcessed=!0,e.removeAttribute("disabled")}},a._enumerateMetadataForKey=function(e,t,r,n){if(t&&t[r]){var i=t[r];Object.keys(i).forEach(function(t){n(e,t,i[t])})}},a.checkType=function(e,t,n,i){const o=i.type,s=r.ElementUtils.getSupportedTypes(o);if(1===s.typeCount&&!s.any&&!s.other){const r=typeof n;if(s.array&&!Array.isArray(n)||s.object&&"object"!==r||s.string&&"string"!==r||s.number&&("number"!==r||!isFinite(n)))a.__ThrowTypeError(e,t,n,o);else if(s.boolean)return!!n}return n},a.__ThrowTypeError=function(e,t,n,i){throw new r.JetElementError(e,`Invalid type '${typeof n}' found for property '${t}'. Expected value of type '${i}'.`)},a.__CheckOverlappingAttribute=function(e,t){var n=t.split(".");if(n.length>1)for(n.pop();n.length;){var i=n.join(".");if(e.hasAttribute(i))throw new r.JetElementError(e,`Cannot set overlapping attributes '${t}' and '${i}'.`);n.pop()}},a.__InitProperties=function(e,t){const n=r.CustomElementUtils.getElementBridge(e);var o=r.CustomElementUtils.getElementProperties(e);if(o)for(var s=e.attributes,l=0;l<s.length;l++){var u=s[l],p=r.AttributeUtils.attributeToPropertyName(u.nodeName),c=i.getPropertyMetadata(p,o);if(c&&!c.readOnly)if(a.__CheckOverlappingAttribute(e,u.nodeName),!r.AttributeUtils.getExpressionInfo(u.value).expr){var d=a.__ParseAttrValue(e,u.nodeName,p,u.value,c);n.ValidateAndSetProperty(n.GetAliasForProperty.bind(n),t,p,d,e)}}},a.__SetProperty=function(e,t,r,n){var i,o=t,s=r.split("."),a=e(s[0]);s.length>1&&!t[a]&&(o=i={});for(var l=0;l<s.length;l++){var u=e(s[l]);l===s.length-1?o[u]=n:o[u]||(o[u]={}),o=o[u]}i&&(t[a]=i[a])},a.__ParseAttrValue=function(e,t,n,i,o){if(null==i)return i;function s(n){return r.AttributeUtils.attributeToPropertyValue(e,t,n,o)}var a=r.CustomElementUtils.getElementDescriptor(e.tagName).parseFunction;return a?a(i,n,o,function(e){return s(e)}):s(i)},a.__ProcessEventListeners=function(t){var n=e.CollectionUtils.copyInto({},t,void 0,!0,1);return n.properties=n.properties||{},a._enumerateMetadataForKey(null,n,"properties",function(e,t){var i=r.AttributeUtils.propertyNameToChangeEventType(t),o=r.AttributeUtils.eventTypeToEventListenerProperty(i);n.properties[o]={_derived:!0,_eventListener:!0}}),a._enumerateMetadataForKey(null,n,"events",function(e,t){var i=r.AttributeUtils.eventTypeToEventListenerProperty(t);n.properties[i]={_derived:!0,_eventListener:!0}}),n},a.__FirePropertyChangeEvent=function(e,t,n,i,o,s){var a=r.CustomElementUtils.getElementBridge(e);if(!a._SKIP_PROP_CHANGE_EVENT){var l={};s&&(l.subproperty=s),l.value=n,l.previousValue=i,l.updatedFrom=o,a.beforePropertyChangedEvent&&a.beforePropertyChangedEvent(e,t,l),("external"!==o||a.State.isComplete())&&e.dispatchEvent(new CustomEvent(t+"Changed",{detail:l}))}},a.__DefineDynamicObjectProperty=function(e,t,r,n){Object.defineProperty(e,t,{enumerable:!0,get:r,set:n})},a.DESC_KEY_META="metadata",e._registerLegacyNamespaceProp("BaseCustomElementBridge",a),o.whenDocumentReady().then(function(){!function(){var e=document.createElement("div");e.style.border="1px solid",e.style.borderColor="red green",e.style.position="absolute",e.style.top="-999px",e.style.backgroundImage="url(data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACwAAAAAAQABAAACAkQBADs=)";var t=document.body;t.appendChild(e);var r=window.getComputedStyle(e),n=r.backgroundImage;r.borderTopColor!==r.borderRightColor&&(null==n||"none"!==n&&"url (invalid-url:)"!==n)||t.classList.add("oj-hicontrast"),t.removeChild(e)}()}),o.whenDocumentReady().then(function(){!function(){let e=[];const t=s.AgentUtils.getAgentInfo();e.push("oj-agent-os-"+t.os.toLowerCase()),e.push("oj-agent-browser-"+t.browser.toLowerCase()),document.documentElement.classList.add(...e)}()})});
//# sourceMappingURL=ojcustomelement.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojdefaultsutils',["exports","ojs/ojmetadatautils"],function(e,t){"use strict";function n(e,t,n){let l=e._defaults;if(void 0===l){const s=i(e,t,n);l=Object.create(s),a(e,l),e._defaults=l}return l}function i(e,n,i){var a;let l=e._staticDefaults;if(void 0===l){if(l=null,n){const e=n.properties,s=null===(a=n.extension)||void 0===a?void 0:a._DEFAULTS;if(s){const e=new s;l=Object.create(e)}else e&&(l=Object.create(t.getDefaultValues(e,i)))}e._staticDefaults=l}return l}function a(e,t){if(e.getDynamicDefaults){const n=e.getDynamicDefaults();if(n)for(let e in n)void 0===t[e]&&(t[e]=n[e])}}var l=Object.freeze({__proto__:null,getFrozenDefault:function(e,i,a){const l=n(i,a,!0);return t.deepFreeze(l[e])},getDefaults:n,getStaticDefaults:i,applyDynamicDefaults:a});e.DefaultsUtils=l,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojdefaultsutils.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojfocusutils',["jquery","ojs/ojcore-base","ojs/ojdomutils"],function(t,e,n){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;const r={_TABBABLE:":tabbable,iframe",containsFocus:function(t){var e=document.activeElement;return!(!t||!e)&&n.isAncestorOrSelf(t,e)},focusElement:function(t){t.focus()},focusFirstTabStop:function(t){var e=r.getFirstTabStop(t);return e&&r.focusElement(e),e},isFirstActiveElement:function(e){var n=t(e).find(r._TABBABLE);if(null==n||0===n.length)return!1;var i=n[0];return document.activeElement===i||i.name===document.activeElement.name&&"radio"===i.type&&"radio"===document.activeElement.type},isLastActiveElement:function(e){var n=t(e).find(r._TABBABLE);if(null==n||0===n.length)return!1;var i=n[n.length-1];return document.activeElement===i||i.name===document.activeElement.name&&"radio"===i.type&&"radio"===document.activeElement.type},getFirstTabStop:function(e){var n=t(e);if(n.is(r._TABBABLE))return e;var i=n.find(r._TABBABLE);if(i&&i.length>0){if(i[0].classList.contains("oj-radio")){var o=i.filter(".oj-selected.oj-radio");return o&&o.length?o[0]:i[0]}return i[0]}return null},getLastTabStop:function(e){var n=t(e).find(r._TABBABLE);if(n&&n.length>0){if(n[n.length-1].classList.contains("oj-radio")){var i=n.filter(".oj-selected.oj-radio");return i&&i.length?i[i.length-1]:n[n.length-1]}return n[n.length-1]}return null},isFocusable:function(n){return!!t(n).is(":focusable")&&!("A"===n.nodeName&&!n.hasAttribute("tabindex")&&e.AgentUtils.getAgentInfo().browser===e.AgentUtils.BROWSER.SAFARI)}};return r});
//# sourceMappingURL=ojfocusutils.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojgestureutils',["exports","jquery","ojs/ojdomutils"],function(e,t,n){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;const o={_EVENT_NAMESPACE:".contextMenu",stopDetectContextMenuGesture:function(e){e._clickListener&&(t(e).off(o._EVENT_NAMESPACE).removeClass("oj-menu-context-menu-launcher")[0].removeEventListener("click",e._clickListener,!0),clearTimeout(e._contextMenuPressHoldTimer),delete e._clickListener,delete e._contextMenuPressHoldTimer),e._touchStartAndMouseDownListener&&(e.removeEventListener("touchstart",e._touchStartAndMouseDownListener,{passive:!1}),delete e._touchStartAndMouseDownListener),e._touchMoveListener&&(e.removeEventListener("touchmove",e._touchMoveListener,{passive:!0}),delete e._touchMoveListener)},startDetectContextMenuGesture:function(e,u){var r,s,c,i,a=n.PRESS_HOLD_THRESHOLD,d=!1,l=!1,v=null,p=o._EVENT_NAMESPACE,h=!1;function m(n,o,r){if((d=r)&&t(e).one("touchend"+p,function(){h=!0,setTimeout(function(){h=!1},50)}),"touchstart"===v&&"contextmenu"===n.type||"contextmenu"===v&&"touchstart"===n.type||"keydown"===v&&"contextmenu"===n.type)return"keydown"===v&&"contextmenu"===n.type&&n.preventDefault(),v=null,void clearTimeout(i);n.isDefaultPrevented&&n.isDefaultPrevented()||n.originalEvent&&n.originalEvent.defaultPrevented||n.defaultPrevented||("touchstart"!==n.type&&"touchmove"!==n.type||(n.originalEvent=n),u(n,o),(n.isDefaultPrevented&&n.isDefaultPrevented()||n.defaultPrevented)&&("touchstart"!==n.type&&"contextmenu"!==n.type&&"keydown"!==n.type||(v=n.type,i=setTimeout(function(){v=null},300))))}var f=function(e){d&&(e.preventDefault(),e.stopPropagation(),d=!1)};e._clickListener=f,e.addEventListener("click",f,!0);var y=function(t){if("mousedown"!==t.type||!h){if(d=!1,"touchstart"===t.type&&1===t.touches.length){var n=t.touches[0];s=n.pageX,c=n.pageY,l=!0,r=setTimeout(m.bind(void 0,t,"touch",!0),a),e._contextMenuPressHoldTimer=r}return!0}};e._touchStartAndMouseDownListener=y,e.addEventListener("touchstart",y,{passive:!1});var _=function(e){var t=e.touches[0];return(Math.abs(s-t.pageX)>5||Math.abs(c-t.pageY)>5)&&(l=!1,clearTimeout(r)),!0};e._touchMoveListener=_,e.addEventListener("touchmove",_,{passive:!0}),t(e).on("mousedown"+p,y).on("touchend"+p+" touchcancel"+p,function(){return l=!1,clearTimeout(r),!0}).on("keydown"+p+" contextmenu"+p,function(e){("contextmenu"===e.type||121===e.keyCode&&e.shiftKey)&&m(e,l?"touch":"keydown"===e.type?"keyboard":"mouse",!1);return!0}),n.isTouchSupported()&&t(e).addClass("oj-menu-context-menu-launcher")}},u=o.startDetectContextMenuGesture,r=o.stopDetectContextMenuGesture;e.startDetectContextMenuGesture=u,e.stopDetectContextMenuGesture=r,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojgestureutils.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojcomponentcore',["exports","jqueryui-amd/widget","jqueryui-amd/unique-id","jqueryui-amd/keycode","jqueryui-amd/focusable","jqueryui-amd/tabbable","ojs/ojcore","jquery","ojs/ojmessaging","ojs/ojmetadatautils","ojs/ojcore-base","ojs/ojdomutils","ojs/ojcustomelement","ojs/ojcustomelement-utils","ojs/ojlogger","ojs/ojdefaultsutils","ojs/ojtranslation","ojs/ojfocusutils","ojs/ojgestureutils"],function(t,e,n,i,o,s,r,a,l,u,c,_,h,p,d,E,f,g,m){"use strict";r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r,a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a,l=l&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l,c=c&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c;
/**
   * @preserve Copyright 2013 jQuery Foundation and other contributors
   * Released under the MIT license.
   * http://jquery.org/license
   */
const v=function(t){this.Init(t)};r.Object.createSubclass(v,r.Object,"oj.ComponentMessaging"),r._registerLegacyNamespaceProp("ComponentMessaging",v),v._STRATEGY_TYPE={NONE:"none",NOTEWINDOW:"notewindow",PLACEHOLDER:"placeholder",INLINE:"inline",LABEL_EDGE_INSIDE:"inside",LABEL_EDGE_INSIDE_FORM_CNTRL:"insideformcontrol",USER_ASSISTANCE_INLINE:"userassistanceinline"},v._STRATEGY_TYPE_TO_CALLBACK={};const y="aria-describedby";v.registerMessagingStrategy=function(t,e){t&&"function"==typeof e&&(v._STRATEGY_TYPE_TO_CALLBACK[t]=e)},v.prototype.Init=function(t){v.superclass.Init.call(this),this._component=t,this._activated=!1,this._initializeMessagingStrategies()},v.prototype.activate=function(t,e,n){var i=this;r.Assert.assertObject(n),this._launcher=t,this._contentElement=e,this._messagingContent=r.CollectionUtils.copyInto(this._messagingContent||{},n),this._isActive()?this._reactivate():(a.each(this._strategies,function(t,e){e.activate(i)}),this._activated=!0)},v.prototype.update=function(t){r.Assert.assertObject(t),r.Assert.assertBoolean(this._activated),this._messagingContent=r.CollectionUtils.copyInto(this._messagingContent||{},t),this._activated&&a.each(this._strategies,function(e,n){n.shouldUpdate(t)&&n.update()})},v.prototype.deactivate=function(){a.each(this._strategies,function(t,e){e.deactivate()}),this._activated=!1,this._component=null,this._launcher=null,this._contentElement=null,this._strategies={}},v.prototype.close=function(){this._activated&&a.each(this._strategies,function(t,e){e.close()})},v.prototype._createMessagingStrategy=function(t,e){return new(v._STRATEGY_TYPE_TO_CALLBACK[t]||v._STRATEGY_TYPE_TO_CALLBACK[v._STRATEGY_TYPE.NONE])(e)},v.prototype._getComponent=function(){return this._component||null},v.prototype._getLauncher=function(){return this._launcher||null},v.prototype._getContentElement=function(){return this._contentElement||null},v.prototype._getMessagingContent=function(){return this._messagingContent||{}},v.prototype._setMessagingContent=function(t){r.Assert.assertObject(t),this._messagingContent=r.CollectionUtils.copyInto(this._messagingContent||{},t)},v.prototype._isActive=function(){return this._activated},v.prototype._getResolvedMessagingDisplayOptions=function(t){for(var e={},n=!1,i=this._component.options,o={},s=Object.keys(t),r=0;r<s.length;r++){var l=s[r],u=t[l];n=!1;var c=l+"";if(Array.isArray(u))for(var _=0;_<u.length;_++){var h=u[_];n||(n=this._resolveStrategyTypeForArtifact(c,h,i,o))}else"string"==typeof u&&(n||(n=this._resolveStrategyTypeForArtifact(c,u,i,o)));n||(o[c]=v._STRATEGY_TYPE.NONE)}return this._addLabelStrategy(o),a.each(v._STRATEGY_TYPE,function(t,n){e[n]=[]}),a.each(o,function(t,n){e[n].push(t)}),e},v.prototype._getUserAssistanceStrategyToArtifactsObj=function(){var t={},e=this._component.options.displayOptions||{},n={},i=Object.keys(e);for(let t=0;t<i.length;t++){let o=i[t],s=e[o],r=o+"";n[r]="string"==typeof s&&"none"===s?v._STRATEGY_TYPE.NONE:v._STRATEGY_TYPE.USER_ASSISTANCE_INLINE}return this._addLabelStrategy(n),Object.keys(v._STRATEGY_TYPE).forEach(function(e){let n=v._STRATEGY_TYPE[e];t[n]=[]}),Object.keys(n).forEach(function(e){let i=n[e];t[i].push(e)}),t},v.prototype._addLabelStrategy=function(t){var e=this._component._ResolveLabelEdgeStrategyType();this._resolveStrategyTypeForArtifact("labelEdge",e,this._component.options,t)||(t.labelEdge=v._STRATEGY_TYPE.NONE)},v.prototype._resolveStrategyTypeForArtifact=function(t,e,n,i){var o=!1,s=n.placeholder;switch(e){case v._STRATEGY_TYPE.PLACEHOLDER:"converterHint"===t&&(o||s||(i[t]=e,o=!0));break;case v._STRATEGY_TYPE.INLINE:"messages"===t&&(o||(i[t]=e,o=!0));break;case v._STRATEGY_TYPE.LABEL_EDGE_INSIDE:case v._STRATEGY_TYPE.LABEL_EDGE_INSIDE_FORM_CNTRL:"labelEdge"!==t||o||r.StringUtils.isEmptyOrUndefined(n.labelHint)||(i[t]=e,o=!0);break;default:o||"labelEdge"===t||(i[t]=e,o=!0)}return o},v.prototype._initializeMessagingStrategies=function(){var t=this._strategyToArtifacts(),e=t[v._STRATEGY_TYPE.NOTEWINDOW],n=t[v._STRATEGY_TYPE.NONE],i=t[v._STRATEGY_TYPE.PLACEHOLDER],o=t[v._STRATEGY_TYPE.INLINE],s=t[v._STRATEGY_TYPE.LABEL_EDGE_INSIDE],r=t[v._STRATEGY_TYPE.LABEL_EDGE_INSIDE_FORM_CNTRL],a=t[v._STRATEGY_TYPE.USER_ASSISTANCE_INLINE],l={};e.length>0&&(l[v._STRATEGY_TYPE.NOTEWINDOW]=this._createMessagingStrategy(v._STRATEGY_TYPE.NOTEWINDOW,e)),i.length>0&&0===s.length&&(l[v._STRATEGY_TYPE.PLACEHOLDER]=this._createMessagingStrategy(v._STRATEGY_TYPE.PLACEHOLDER,i)),o.length>0&&(l[v._STRATEGY_TYPE.INLINE]=this._createMessagingStrategy(v._STRATEGY_TYPE.INLINE,o)),a.length>0&&(l[v._STRATEGY_TYPE.USER_ASSISTANCE_INLINE]=this._createMessagingStrategy(v._STRATEGY_TYPE.USER_ASSISTANCE_INLINE,a)),s.length>0?l[v._STRATEGY_TYPE.LABEL_EDGE_INSIDE]=this._createMessagingStrategy(v._STRATEGY_TYPE.LABEL_EDGE_INSIDE,s):r.length>0&&(l[v._STRATEGY_TYPE.LABEL_EDGE_INSIDE_FORM_CNTRL]=this._createMessagingStrategy(v._STRATEGY_TYPE.LABEL_EDGE_INSIDE_FORM_CNTRL,r)),l[v._STRATEGY_TYPE.NONE]=this._createMessagingStrategy(v._STRATEGY_TYPE.NONE,n),this._strategies=l},v.prototype._reactivate=function(){var t,e=this._strategyToArtifacts(),n=this;a.each(e,function(e,i){e+="",t=n._strategies[e],i&&i.length>0?t?t&&t.reactivate(i):(t=n._createMessagingStrategy(e,i),n._strategies[e]=t,t.activate(n)):t&&v._STRATEGY_TYPE.NONE!==e&&(t.deactivate(),delete n._strategies[e])})},v.prototype._strategyToArtifacts=function(){let t,e=this._component._getResolvedUserAssistance();if("compact"!==e&&"displayOptions"!==e)t=this._getUserAssistanceStrategyToArtifactsObj();else{let n=this._component.options.displayOptions||{};"compact"===e?(n.messages="notewindow",n.validatorHint="notewindow",n.converterHint="notewindow",t=this._getResolvedMessagingDisplayOptions(n)):t=this._getResolvedMessagingDisplayOptions(n)}return t};const T=function(t){this.Init(t)};r.Object.createSubclass(T,r.Object,"oj.MessagingStrategy"),r._registerLegacyNamespaceProp("MessagingStrategy",T),T.prototype.Init=function(t){r.Assert.assertArray(t),T.superclass.Init.call(this),this._displayOptions=t},T.prototype.activate=function(t){this._componentMessaging=t},T.prototype.deactivate=function(){},T.prototype.close=function(){},T.prototype.reactivate=function(t){this.Init(t)},T.prototype.shouldUpdate=function(t){return!0},T.prototype.update=function(){},T.prototype.GetLauncher=function(){return this._componentMessaging._getLauncher()},T.prototype.GetContentElement=function(){return this._componentMessaging._getContentElement()},T.prototype.GetComponent=function(){return this._componentMessaging._getComponent()},T.prototype.setHasValidatorHints=function(t){this._hasValidatorHints=t},T.prototype.getHasValidatorHints=function(){return!0===this._hasValidatorHints},T.prototype.GenerateIdIfNeeded=function(t){isNaN(T._uidCounter)&&(T._uidCounter=0);var e=t;e.id||(e.id="ojms_"+T._uidCounter,T._uidCounter+=1)},T.prototype.GetMessages=function(){return this.GetValidityState().getMessages()},T.prototype.GetMaxSeverity=function(){return this.GetValidityState().getMaxSeverity()},T.prototype.GetConverterHint=function(){var t=[],e=this._getMessagingContent(),n=e&&e.converterHint;return n&&t.push(n),t},T.prototype.GetValidatorHints=function(){if(!this.getHasValidatorHints()){this.setHasValidatorHints(!0);let t=this.GetComponent();this._setMessagingContent(t._getValidatorHintsMC()),t._initAsyncValidatorMessagingHint()}var t=this._getMessagingContent();return t&&t.validatorHint||[]},T.prototype.GetTitle=function(){var t=this._getMessagingContent();return t&&t.title||""},T.prototype.GetValidityState=function(){var t=this._getMessagingContent();return t&&t.validityState||null},T.prototype.HasMessages=function(){var t=this.GetMessages();return!!(t&&t.length>0)},T.prototype.ShowMessages=function(){return-1!==this._displayOptions.indexOf("messages")},T.prototype.ShowConverterHint=function(){return-1!==this._displayOptions.indexOf("converterHint")},T.prototype.ShowValidatorHint=function(){return-1!==this._displayOptions.indexOf("validatorHint")},T.prototype.ShowTitle=function(){return-1!==this._displayOptions.indexOf("title")||-1!==this._displayOptions.indexOf("helpInstruction")},T.prototype.IsInvalid=function(){return this.GetValidityState().isInvalid()},T.prototype.AddAriaDescribedByForInlineMessaging=function(t){let e=this.GetContentElement();r.Assert.assertPrototype(e,a);let n=a(t).uniqueId()[0].getAttribute("id");e.each(function(){let t=this.getAttribute(y),e=t?t.split(/\s+/):[];-1===e.indexOf(n)&&e.push(n);let i=e.join(" ").trim();this.setAttribute(y,i)})},T.prototype.AddDescribedByToElement=function(t,e){const n=t.getAttribute("described-by");let i,o=n?n.split(/\s+/):[];-1===o.indexOf(e)&&o.push(e),i=o.join(" ").trim(),t.setAttribute("described-by",i)},T.prototype.RemoveAriaDescribedByForInlineMessaging=function(t){let e=this.GetContentElement();r.Assert.assertPrototype(e,a);let n=t.getAttribute("id");e.each(function(){let t=this.getAttribute(y),e=t?t.split(/\s+/):[],i=e.indexOf(n);-1!==i&&e.splice(i,1);let o=e.join(" ").trim();o?this.setAttribute(y,o):this.removeAttribute(y)})},T.prototype._getMessagingContent=function(){return this._componentMessaging?this._componentMessaging._getMessagingContent():{}},T.prototype._setMessagingContent=function(t){return this._componentMessaging?this._componentMessaging._setMessagingContent(t):{}};const C=function(t){this.Init(t)};v.registerMessagingStrategy(v._STRATEGY_TYPE.NONE,C),C._SELECTOR_STATE_INVALID="oj-invalid",C._SELECTOR_STATE_WARNING="oj-warning",r.Object.createSubclass(C,T,"oj.DefaultMessagingStrategy"),r._registerLegacyNamespaceProp("DefaultMessagingStrategy",C),C.prototype.update=function(){C.superclass.update.call(this);var t=this.GetLauncher(),e=this.GetMaxSeverity(),n=[],i=[],o=!1,s=this.GetComponent().widget();t&&(this.IsInvalid()?(n.push(C._SELECTOR_STATE_WARNING),i.push(C._SELECTOR_STATE_INVALID),o=!0):this.HasMessages()&&e===l.SEVERITY_LEVEL.WARNING?(n.push(C._SELECTOR_STATE_INVALID),i.push(C._SELECTOR_STATE_WARNING)):(n.push(C._SELECTOR_STATE_INVALID),n.push(C._SELECTOR_STATE_WARNING)),s.removeClass(n.join(" ")).addClass(i.join(" ")),this.GetContentElement().attr({"aria-invalid":o}))},C.prototype.deactivate=function(){this.GetComponent().widget().removeClass(C._SELECTOR_STATE_INVALID).removeClass(C._SELECTOR_STATE_WARNING),this.GetContentElement().removeAttr("aria-invalid"),C.superclass.deactivate.call(this)};const S=function(t){this.Init(t)};v.registerMessagingStrategy(v._STRATEGY_TYPE.PLACEHOLDER,S),r.Object.createSubclass(S,T,"oj.PlaceholderMessagingStrategy"),r._registerLegacyNamespaceProp("PlaceholderMessagingStrategy",S),S.prototype.Init=function(t){S.superclass.Init.call(this,t)},S.prototype.activate=function(t){S.superclass.activate.call(this,t),this._refreshPlaceholder()},S.prototype.reactivate=function(t){S.superclass.reactivate.call(this,t),this._refreshPlaceholder()},S.prototype.shouldUpdate=function(t){return!(!t||void 0===t.converterHint)},S.prototype.update=function(){S.superclass.update.call(this),this._refreshPlaceholder()},S.prototype._refreshPlaceholder=function(){var t=this.GetLauncher();if(this.ShowPlaceholderContent()&&t){var e=this.GetConverterHint(),n=e.length?e[0]:"";if(r.StringUtils.isEmptyOrUndefined(n))return;this.GetComponent().option({placeholder:n},{_context:{internalMessagingSet:!0}})}},S.prototype.ShowPlaceholderContent=function(){return this.ShowConverterHint()};const A=function(t,e){this.Init(t,e)};A.isInvalid=function(t){return l.getMaxSeverity(t)>=l.SEVERITY_LEVEL.ERROR},r.Object.createSubclass(A,r.Object,"oj.ComponentValidity"),r._registerLegacyNamespaceProp("ComponentValidity",A),A.prototype.Init=function(t,e){A.superclass.Init.call(this),this._initialize(t,e)},A.prototype.isInvalid=function(){return this._invalid},A.prototype.getMessages=function(){return this._messages},A.prototype.getMaxSeverity=function(){return this._maxSeverity},A.prototype.update=function(t,e){this._initialize(t,e)},A.prototype._initialize=function(t,e){this._compValid=t,this._compMessages=e,this._messages=this._getImmediateMessages(),this._maxSeverity=l.getMaxSeverity(this._messages),this._invalid=A.isInvalid(this._messages)},A.prototype._getImmediateMessages=function(){for(var t=this._compMessages||[],e=[],n=0;n<t.length;n++){var i=t[n];i instanceof l.ComponentMessage&&!i.canDisplay()||e.push(i)}return e};const N={};c._registerLegacyNamespaceProp("Components",N),N._OJ_CONTAINER_ATTR="data-oj-container";const b="node is not a component element";function O(t,e){if(null==t)return null;var n=1===t.nodeType,i=c.Composite&&!e?c.Composite.getContainingComposite(t):null;if(i)return i;if(n&&t.hasAttribute("data-oj-internal"))return t.parentNode instanceof Element&&t.parentNode.hasAttribute("data-oj-surrogate-id")?O(t=document.querySelector("[data-oj-popup-"+t.id+"-parent]"),e):O(t.parentNode,e);if(L(t))return t;if(n&&t.classList.contains("oj-component")){if(G(t=t.querySelector(".oj-component-initnode:not([data-oj-internal])")||t))return t}else if(n&&t.hasAttribute("data-oj-containerid"))return O(t=document.getElementById(t.getAttribute("data-oj-containerid")),e);return O(t.parentNode,e)}function P(t,e){var n=function(){var t=a(this),n=t.data("oj-component-names");if(null!=n)for(var i=0;i<n.length;i++){var o=t.data("oj-"+n[i]);null!=o&&e(o)}},i=a(t);i.hasClass("oj-component-initnode")&&n.call(t),i.find(".oj-component-initnode").each(n)}function I(t,e,n){function i(t){if(e&&t.classList.contains("oj-component-initnode")){var i=a(t),o=i.data("oj-component-names");if(null!=o)for(var s=0;s<o.length;s++){var r=i.data("oj-"+o[s]);null!=r&&e(r)}}if(n&&"oj-defer"===t.tagName.toLowerCase()){if(!t._activate)throw new Error("subtreeShown called before module ojs/ojdefer was loaded");t._activate()}}if(!function(t){for(var e=t;e;){if(e.nodeType===Node.DOCUMENT_NODE)return!1;if(e.nodeType===Node.ELEMENT_NODE&&e.classList.contains("oj-subtree-hidden"))return!0;e=e.parentNode}return!0}(t)){i(t);var o=[".oj-component-initnode"];n&&o.push("oj-defer");var s=[];o.forEach(function(t){s.push(".oj-subtree-hidden "+t),s.push(".oj-pending-subtree-hidden "+t)});for(var r=o.join(","),l=s.join(","),u=function(t,e){for(var n=[],i=0,o=0;o<e.length;o++){for(var s=e[o];i<t.length&&t[i]!==s;)n.push(t[i]),i+=1;i+=1}for(;i<t.length;)n.push(t[i]),i+=1;return n}(t.querySelectorAll(r),t.querySelectorAll(l)),c=0;c<u.length;c++)i(u[c])}}function R(t){this.getCallback=function(){return t}}function D(t,e,n){return Object.keys(e).forEach(function(i){var o=t[i]||[],s=e[i];n?o=o.concat(s):o.push(s),t[i]=o}),t}function M(t){return p.CustomElementUtils.isElementRegistered(t.tagName)}function G(t){return!!N.__GetWidgetConstructor(t)}function L(t){return M(t)||G(t)}N.setDefaultOptions=function(t){var e=N._defaultProperties||{};Object.keys(t).forEach(function(n){var i=t[n];if(!c.CollectionUtils.isPlainObject(i))throw new Error("Invalid default options");e[n]=D(e[n]||{},i,!1)}),N._defaultProperties=e},N.getDefaultOptions=function(){return N._defaultProperties||{}},N.createDynamicPropertyGetter=function(t){return new R(t)},N.getWidgetConstructor=function(t,e){return t&&!p.CustomElementUtils.isElementRegistered(t.tagName)?N.__GetWidgetConstructor(t,e):null},N.__GetWidgetConstructor=function(t,e){var n=a(t),i=n.data("oj-component-names");if(i&&(null==e?e=i[0]:i.indexOf(e)<0&&(e=void 0),null!=e)){var o=n[e];if("function"==typeof o)return o.bind(n)}return null},N.subtreeAttached=function(t){_.fixResizeListeners(t),P(t,function(t){t.__handleSubtreeAttached()})},N.subtreeDetached=function(t){P(t,function(t){t.__handleSubtreeDetached()})},N.subtreeShown=function(t,e){var n=a(t)[0];if(n.nodeType===Node.ELEMENT_NODE){var i=(e||{}).initialRender;i||_.fixResizeListeners(n),n.classList.remove("oj-subtree-hidden"),I(n,function(t){p.CustomElementUtils.allowSlotRelocation(!0);try{i?t._NotifyInitShown():t._NotifyShown()}finally{p.CustomElementUtils.allowSlotRelocation(!1)}},!0)}},N.subtreeHidden=function(t){var e=a(t)[0];e.nodeType===Node.ELEMENT_NODE&&(I(e,function(t){p.CustomElementUtils.allowSlotRelocation(!0);try{t._NotifyHidden()}finally{p.CustomElementUtils.allowSlotRelocation(!1)}},!1),e.classList.add("oj-subtree-hidden"))},N.markPendingSubtreeHidden=function(t){t.classList.add("oj-pending-subtree-hidden")},N.unmarkPendingSubtreeHidden=function(t){t.classList.remove("oj-pending-subtree-hidden")},N.isComponentInitialized=function(t,e){var n=t.data("oj-component-names");return!!(a.isArray(n)&&n.indexOf(e)>-1&&t.is(".oj-component-initnode"))},N.__getDefaultOptions=function(t){for(var e={},n=N.getDefaultOptions(),i=t.length-1;i>=0;i--){var o=n[t[i]];void 0!==o&&(e=D(e,o,!0))}return e},N.getComponentElementByNode=function(t){var e=!!(arguments.length>1&&arguments[1]);return O(t,e)},N.getSubIdByNode=function(t,e){return N.callComponentMethod(t,"getSubIdByNode",e)},N.getNodeBySubId=function(t,e){return N.callComponentMethod(t,"getNodeBySubId",e)},N.getComponentOption=function(t,e){if(!L(t))throw new Error(b);return M(t)?t.getProperty?t.getProperty.call(t,e):void 0:N.__GetWidgetConstructor(t)("option",e)},N.setComponentOption=function(t,e,n){if(!L(t))throw new Error(b);M(t)?t.setProperty&&t.setProperty.call(t,e,n):N.__GetWidgetConstructor(t)("option",e,n)},N.callComponentMethod=function(t,e,n){if(!L(t))throw new Error(b);return M(t)?t[e]?t[e].apply(t,[].slice.call(arguments,2)):void 0:N.__GetWidgetConstructor(t).apply(a(t),[].slice.call(arguments,1))};const j={};j.proto=Object.create(r.BaseCustomElementBridge.proto),r.CollectionUtils.copyInto(j.proto,{beforePropertyChangedEvent:function(t,e,n){var i=e,o=n.value;n.subproperty&&(i=n.subproperty.path,o=n.subproperty.value),this._partialRender(t,i,o)},AddComponentMethods:function(t){t.refresh=function(){p.CustomElementUtils.getElementBridge(this)._fullRender(this)},t.setProperty=function(t,e){var n=p.CustomElementUtils.getElementBridge(this);n.SaveEarlyPropertySet(this,t,e)||n.SetProperty(this,t,e,this,!0)},t.getProperty=function(t){return p.CustomElementUtils.getElementBridge(this).GetProperty(this,t,this)},t._propsProto.setProperty=function(t,e){this._BRIDGE.SetProperty(this._ELEMENT,t,e,this,!1)},t._propsProto.getProperty=function(t){return this._BRIDGE.GetProperty(this,t,this)}},CreateComponent:function(t){if(N.unmarkPendingSubtreeHidden(t),!this._INSTANCE&&this._EXTENSION._CONSTRUCTOR){var e=p.ElementUtils.getUniqueId();if(this._CONTEXT={element:t,props:this._PROPS_PROXY,unique:e},this._CONTEXT.uniqueId=t.id?t.id:e,this._INSTANCE=new this._EXTENSION._CONSTRUCTOR(this._CONTEXT),this._INSTANCE.createDOM&&this._INSTANCE.createDOM(),this._INSTANCE.updateDOM){p.CustomElementUtils.allowSlotRelocation(!0);try{this._INSTANCE.updateDOM()}finally{p.CustomElementUtils.allowSlotRelocation(!1)}}}},DefineMethodCallback:function(t,e,n){t[e]=function(){var t=p.CustomElementUtils.getElementBridge(this);if(t._INSTANCE){var i=n.internalName||e;return t._INSTANCE[i].apply(t._INSTANCE,arguments)}}},DefinePropertyCallback:function(t,e,n){function i(t,i){if(i&&(t=p.CustomElementUtils.convertEmptyStringToUndefined(this._ELEMENT,n,t)),!this._BRIDGE.SaveEarlyPropertySet(this._ELEMENT,e,t)){var o=this._BRIDGE._PROPS[e];p.ElementUtils.comparePropertyValues(n,t,o)?d.info(p.CustomElementUtils.getElementInfo(this._ELEMENT)+": Ignoring property set for property '"+e+"' with same value."):(i&&(t=this._BRIDGE.ValidatePropertySet(this._ELEMENT,e,t)),n._eventListener?(this._BRIDGE.SetEventListenerProperty(this._ELEMENT,e,t),this._BRIDGE._PROPS[e]=t):(this._BRIDGE._PROPS[e]=t,r.BaseCustomElementBridge.__FirePropertyChangeEvent(this._ELEMENT,e,t,o,i?"external":"internal"),this._BRIDGE.State.dirtyProps.add(e)))}}function o(){var t=this._BRIDGE._PROPS[e];return void 0===t&&(t=this._BRIDGE._getDefaultValue(e,n),this._BRIDGE._PROPS[e]=t),t}n._derived||r.BaseCustomElementBridge.__DefineDynamicObjectProperty(t._propsProto,e,function(){return o.bind(this)()},function(t){i.bind(this)(t,!1)}),r.BaseCustomElementBridge.__DefineDynamicObjectProperty(t,e,function(){var t=p.CustomElementUtils.getElementBridge(this);return o.bind(t._PROPS_PROXY)()},function(t){var e=p.CustomElementUtils.getElementBridge(this);i.bind(e._PROPS_PROXY)(t,!0)})},InitializeElement:function(t){r.BaseCustomElementBridge.proto.InitializeElement.call(this,t),this._EXTENSION._CONTROLS_SUBTREE_HIDDEN&&N.markPendingSubtreeHidden(t),r.BaseCustomElementBridge.__InitProperties(t,t)},InitializePrototype:function(t){r.BaseCustomElementBridge.proto.InitializePrototype.call(this,t),Object.defineProperty(t,"_propsProto",{value:{}})},initializeBridge:function(t,e){r.BaseCustomElementBridge.proto.initializeBridge.call(this,t,e),this._EXTENSION=this.METADATA.extension||{},this._PROPS={},t._propsProto&&(this._PROPS_PROXY=Object.create(t._propsProto),this._PROPS_PROXY._BRIDGE=this,this._PROPS_PROXY._ELEMENT=t)},ShouldRemoveDisabled:function(){return!0===this._EXTENSION._SHOULD_REMOVE_DISABLED},_fullRender:function(t){if(this._INSTANCE&&this._INSTANCE.updateDOM){p.CustomElementUtils.allowSlotRelocation(!0);try{this._INSTANCE.updateDOM()}finally{p.CustomElementUtils.allowSlotRelocation(!1)}}},_partialRender:function(t,e,n){if(this._INSTANCE){var i=this._INSTANCE.handlePropertyChanged;if((!i||!i(e,n))&&this._INSTANCE.updateDOM){p.CustomElementUtils.allowSlotRelocation(!0);try{this._INSTANCE.updateDOM()}finally{p.CustomElementUtils.allowSlotRelocation(!1)}}}},_getDefaultValue:function(t,e){return this._EXTENSION._CONSTRUCTOR?E.DefaultsUtils.getDefaults(this._EXTENSION._CONSTRUCTOR,this.METADATA,!1)[t]:u.getDefaultValue(e)}}),r._registerLegacyNamespaceProp("DefinitionElementBridge",j);class B extends p.ElementState{IsTransferAttribute(t){const e=p.CustomElementUtils.getElementBridge(this.Element),n=e._EXTENSION._GLOBAL_TRANSFER_ATTRS;return e._WIDGET_ELEM&&n&&n.includes(t)}GetDescriptiveTransferAttributeValue(t){return p.CustomElementUtils.getElementBridge(this.Element)._WIDGET_ELEM.getAttribute(t)}}const w={};w.proto=Object.create(r.BaseCustomElementBridge.proto),r._registerLegacyNamespaceProp("CustomElementBridge",w),r.CollectionUtils.copyInto(w.proto,{getThrottlePromise:function(){var t=this.State.getBindingProviderPromise();return t=t.then(function(t){return t?t.__GetThrottlePromise():null})},AddComponentMethods:function(t){t.setProperty=function(t,e){var n=p.CustomElementUtils.getElementBridge(this);if(!n.SaveEarlyPropertySet(this,t,e)&&!n._setEventProperty(this,t,e)&&!n._validateAndSetCopyProperty(this,t,e,null)){var i=u.getPropertyMetadata(t,p.CustomElementUtils.getElementProperties(this));i?(n._setOption(t,e,i,this),n.State.dirtyProps.add(t.split(".")[0])):this[t]=e}},t.getProperty=function(t){var e=p.CustomElementUtils.getElementBridge(this),n=u.getPropertyMetadata(t,p.CustomElementUtils.getElementProperties(this));if(p.AttributeUtils.isEventListenerProperty(t)||!n)return this[t];var i=n?n.extension:null;return i&&i._COPY_TO_INNER_ELEM?e._getCopyProperty(this,t,n):w._getPropertyAccessor(this,t)()},t.focus=function(){var t=p.CustomElementUtils.getElementBridge(this);if(t._WIDGET_INSTANCE){var e=t._WIDGET_INSTANCE.__getFocusElement();e&&(e!==this?e.focus():HTMLElement.prototype.focus.call(this))}else HTMLElement.prototype.focus.call(this)},t.blur=function(){var t=p.CustomElementUtils.getElementBridge(this);if(t._WIDGET_INSTANCE){var e=t._WIDGET_INSTANCE.__getFocusElement();e&&(e!==this?e.blur():HTMLElement.prototype.blur.call(this))}else HTMLElement.prototype.blur.call(this)}},BatchedPropertySet:function(t,e){var n,i=Object.keys(e),o={};for(n=0;n<i.length;n++){var s=i[n],r=e[s];this._setEventProperty(t,s,r)||this._validateAndSetCopyProperty(t,s,r,null)||(r=this.ValidatePropertySet(t,s,r),o[s=this.GetAliasForProperty(s)]=r)}var a=N.__GetWidgetConstructor(this._WIDGET_ELEM);if(a)a("option",o);else for(n=0;n<i.length;n++){var l=i[n];t.setProperty(l,e[l])}},CreateComponent:function(t){var e=this._INNER_DOM_FUNCTION;if(this._WIDGET_ELEM=w._getWidgetElement(t,e?e(t):this._EXTENSION._INNER_ELEM),this._WIDGET_ELEM!==t){for(var n=this._EXTENSION._GLOBAL_TRANSFER_ATTRS||[],i=0;i<n.length;i++){var o=n[i];t.hasAttribute(o)&&(this._WIDGET_ELEM.setAttribute(o,t.getAttribute(o)),this._removingTransfer=!0,t.removeAttribute(o))}this._copyProperties()}N.unmarkPendingSubtreeHidden(t);var s=a(this._WIDGET_ELEM),r=a(this._WIDGET_ELEM)[this._EXTENSION._WIDGET_NAME].bind(s);r(this._PROPS),this._WIDGET=r,this._WIDGET_INSTANCE=r("instance"),this._WRITEBACK_PROPS&&this._WIDGET_INSTANCE.__saveWritebackOptions(this._WRITEBACK_PROPS);var l=function(e){return function(n){t.dispatchEvent(new FocusEvent(e,{relatedTarget:n.relatedTarget}))}},u=this._WIDGET_INSTANCE.__getFocusElement();u&&u!==t&&(u.addEventListener("focus",l("focus")),u.addEventListener("blur",l("blur")))},DefineMethodCallback:function(t,e,n){t[e]=function(){var t=p.CustomElementUtils.getElementBridge(this),i=n.internalName||e;p.CustomElementUtils.allowSlotRelocation(!0);try{return t._WIDGET.apply(null,[i].concat([].slice.call(arguments)))}finally{p.CustomElementUtils.allowSlotRelocation(!1)}}},DefinePropertyCallback:function(t,e,n){var i=n.extension;Object.defineProperty(t,e,{enumerable:!0,get:function(){var t=p.CustomElementUtils.getElementBridge(this);return n._eventListener?t.GetEventListenerProperty(e):i&&i._COPY_TO_INNER_ELEM?t._getCopyProperty(this,e,n):w._getPropertyAccessor(this,e)()},set:function(t){var i=p.CustomElementUtils.getElementBridge(this);t=p.CustomElementUtils.convertEmptyStringToUndefined(this,n,t),i.SaveEarlyPropertySet(this,e,t)||(n._eventListener?i.SetEventListenerProperty(this,e,t):i._validateAndSetCopyProperty(this,e,t,n)||(i._setOption(e,t,n,this),i.State.dirtyProps.add(e)))}})},GetAttributes:function(t){var e=u.getFlattenedAttributes(t.properties);return t.extension._GLOBAL_TRANSFER_ATTRS&&(e=e.concat(t.extension._GLOBAL_TRANSFER_ATTRS)),t.extension._WATCHED_ATTRS&&(e=e.concat(t.extension._WATCHED_ATTRS)),e},GetAliasForProperty:function(t){var e=this._EXTENSION._ALIASED_PROPS;return e&&e[t]?e[t]:t},InitializeElement:function(t){r.BaseCustomElementBridge.proto.InitializeElement.call(this,t),this._EXTENSION._CONTROLS_SUBTREE_HIDDEN&&N.markPendingSubtreeHidden(t),r.BaseCustomElementBridge.__InitProperties(t,this._PROPS)},HandleAttributeChanged:function(t,e,n,i){var o=this._EXTENSION._GLOBAL_TRANSFER_ATTRS,s=o&&-1!==o.indexOf(e),r=this._EXTENSION._WATCHED_ATTRS,a=r&&-1!==r.indexOf(e);s&&this._WIDGET_ELEM?this._removingTransfer?this._removingTransfer&&(this._removingTransfer=!1):(this._WIDGET_ELEM.setAttribute(e,i),this._removingTransfer=!0,t.removeAttribute(e)):a&&n!==i&&this._WIDGET_INSTANCE&&this._WIDGET_INSTANCE.__handleWatchedAttribute(e,n,i)},HandleDetached:function(t){r.BaseCustomElementBridge.proto.HandleDetached.call(this,t),N.__GetWidgetConstructor(this._WIDGET_ELEM)&&this._WIDGET_INSTANCE&&this._WIDGET_INSTANCE.__handleDisconnected()},HandleReattached:function(t){r.BaseCustomElementBridge.proto.HandleReattached.call(this,t),this._WIDGET_INSTANCE&&this._WIDGET_INSTANCE.__handleConnected()},initializeBridge:function(t,e){r.BaseCustomElementBridge.proto.initializeBridge.call(this,t,e),this._INNER_DOM_FUNCTION=e.innerDomFunction,this._EXTENSION=this.METADATA.extension||{},this._PROPS=this._EXTENSION._INNER_ELEM||this._INNER_DOM_FUNCTION?{_wrapper:t}:{},this._setupPropertyAccumulator(t,this._PROPS),this._processProperties(t)},_setOption:function(t,e,n,i){let o={};if(void 0===e&&-1===t.indexOf(".")&&(o={_context:{skipEvent:!0}},e=u.getDefaultValue(n),this.State.isComplete())){const e=i[t];r.BaseCustomElementBridge.__FirePropertyChangeEvent(i,t,void 0,e,"external")}w._getPropertyAccessor(i,t,o)(e)},_copyProperties:function(){if(this._COPY_ATTRS)for(var t=0;t<this._COPY_ATTRS.length;t++){var e=this._COPY_ATTRS[t],n=p.AttributeUtils.attributeToPropertyName(e);if(Object.prototype.hasOwnProperty.call(this._PROPS,n)){var i=this._PROPS[n];this._setCopyProperty(e,i),delete this._PROPS[n]}}},_getCopyProperty:function(t,e,n){var i=p.AttributeUtils.propertyNameToAttribute(e);if(n.extension._ATTRIBUTE_ONLY){if(this._WIDGET_ELEM.hasAttribute(i)){var o=this._WIDGET_ELEM.getAttribute(i);return p.AttributeUtils.attributeToPropertyValue(t,i,o,n)}return null}return this._WIDGET_ELEM[e]},_processProperties:function(t){var e=p.CustomElementUtils.getElementProperties(t);if(e)for(var n=Object.keys(e),i=0;i<n.length;i++){var o=n[i],s=e[o];s.writeback&&(this._WRITEBACK_PROPS||(this._WRITEBACK_PROPS={}),this._WRITEBACK_PROPS[o]=!0);var r=s.extension;r&&r._COPY_TO_INNER_ELEM&&(this._COPY_ATTRS||(this._COPY_ATTRS=[]),this._COPY_ATTRS.push(o))}},_setCopyProperty:function(t,e){null==e||!1===e?this._WIDGET_ELEM.removeAttribute(t):!0===e?this._WIDGET_ELEM.setAttribute(t,""):this._WIDGET_ELEM.setAttribute(t,e)},_setupPropertyAccumulator:function(t,e){this._WIDGET=function(n,i,o){if("option"===n)return r.BaseCustomElementBridge.__SetProperty(this.GetAliasForProperty.bind(this),e,i,o),e[i];throw new p.JetElementError(t,"Cannot access methods before element is upgraded.")}},_validateAndSetCopyProperty:function(t,e,n,i){var o=p.AttributeUtils.propertyNameToAttribute(e),s=this._COPY_ATTRS&&-1!==this._COPY_ATTRS.indexOf(o);if(s)if(n=this.ValidatePropertySet(t,e,n),this._WIDGET_ELEM){i||(i=u.getPropertyMetadata(e,p.CustomElementUtils.getElementProperties(t)));var a=this._getCopyProperty(t,e,i);this._setCopyProperty(o,n),r.BaseCustomElementBridge.__FirePropertyChangeEvent(t,e,this._getCopyProperty(t,e,i),a,"external")}else this._PROPS[o]=n;return s},_setEventProperty:function(t,e,n){var i=p.AttributeUtils.isEventListenerProperty(e);return i&&(t[e]=n),i}}),w.getMetadata=function(t){return w._METADATA_MAP[t.toLowerCase()]},w.isKnownEvent=function(t,e){var n=p.CustomElementUtils.getElementBridge(t);return null!=(n.METADATA.events&&n.METADATA.events[e])},w.isKnownProperty=function(t,e){var n=p.CustomElementUtils.getElementBridge(t);return null!=(n.METADATA.properties&&n.METADATA.properties[e])},w.getPropertyForAlias=function(t,e){var n=p.CustomElementUtils.getElementBridge(t)._EXTENSION._COMPONENT_TO_ELEMENT_ALIASES;return n&&n[e]?n[e]:e},w.register=function(t,e){var n=e[r.BaseCustomElementBridge.DESC_KEY_META];n=r.BaseCustomElementBridge.__ProcessEventListeners(n),e[r.BaseCustomElementBridge.DESC_KEY_META]=n,w._METADATA_MAP[t.toLowerCase()]=n;var i=n.extension,o=i&&i._WIDGET_NAME?w.proto:j.proto;const s=i&&i._WIDGET_NAME?B:p.ElementState;var a=i._ALIASED_PROPS;a&&(i._COMPONENT_TO_ELEMENT_ALIASES={},Object.keys(a).forEach(function(t){i._COMPONENT_TO_ELEMENT_ALIASES[a[t]]=t}));const l={descriptor:e,bridgeProto:o,stateClass:s};p.CustomElementUtils.registerElement(t,l,o.getClass(e))},w._getPropertyAccessor=function(t,e,n){return function(i){var o=p.CustomElementUtils.getElementBridge(t);return 1===arguments.length?(i=o.ValidatePropertySet(t,e,i),e=o.GetAliasForProperty(e),void o._WIDGET("option",e,i,n)):(e=o.GetAliasForProperty(e),o._WIDGET("option",e))}.bind(t)},w._getWidgetElement=function(t,e){var n=t;if(e){var i=t.firstElementChild;if(i&&i.tagName.toLowerCase()===e)n=i;else{n=document.createElement(e);for(var o=[],s=t.childNodes,r=0;r<s.length;r++)o.push(s[r]);for(t.appendChild(n);o.length;){var a=o.shift();p.CustomElementUtils.getSlotAssignment(a)||n.appendChild(a)}}n.setAttribute("data-oj-internal","")}return n},w._METADATA_MAP={};class x{static isDataProvider(t){return!!t.fetchFirst}static isTreeDataProvider(t){return!!t.getChildDataProvider}}c._registerLegacyNamespaceProp("DataProviderFeatureChecker",x);var U,Y,W={isDefaultPrevented:function(){return!1},preventDefault:function(){this.isDefaultPrevented=X},stopPropagation:function(){this.isPropagationStopped=X},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=X}};function H(t,e,n,i,o,s,r){var a=n,l=!1,u={};delete i[o],Object.defineProperty(i,o,{get:function(){if(l)return a;if(null!=t._settingNestedKey)return a;var n=s(r?r():o);return F([e,n,a],u)},set:function(e){a=e,null!=t._settingNestedKey?u[t._settingNestedKey]=!0:l=!0},enumerable:!0})}function k(t){if(1===t.length){var e=t[0];return e instanceof R?e.getCallback():null}for(var n=!1,i=0;i<t.length&&!n;i++){var o=t[i];null!=o&&o instanceof R&&(n=!0)}return n?function(e){var n=[];return t.forEach(function(t){null!=t&&t instanceof R?n.push(t.getCallback()(e)):n.push(t)}),F(n)}:null}function F(t,e){for(var n,i=0;i<t.length;i++){var o=t[i];if(void 0!==o)if(a.isPlainObject(o))n=V({},a.isPlainObject(n)?[n,o]:[o],i===t.length-1?null:e,null);else n=o}return n}function V(t,e,n,i){for(var o=e.length,s=0;s<o;s++)for(var r=e[s],l=Object.keys(r),u=0;u<l.length;u++){var c,_=l[u];if(c=null==n?null:null==i?_:i+"."+_,null==n||!n[c]){var h=r[_];if(void 0!==h)if(a.isPlainObject(h)){var p=a.isPlainObject(t[_])?[t[_],h]:[h];t[_]=V({},p,n,c)}else t[_]=h}}return t}function X(){return!0}function K(t){return t.getAttribute&&t.getAttribute("class")||""}a.widget("oj.baseComponent",{options:{contextMenu:null,rootAttributes:null,optionChange:void 0,destroy:void 0},refresh:function(){this._propertyContext=null,this._SetupContextMenu()},_createWidget:function(t,e){t&&(this.OuterWrapper=t._wrapper),this._originalDefaults=this.options||{},this._constructorOptions=t||{},this._super(t,e),this._AfterCreateEvent()},_SetRootAttributes:function(){var t=this.options.rootAttributes;if(t){var e=this.widget();if(null==e)return;var n=t.class;n&&e.addClass(n),t.style&&d.error("The rootAttributes.style option violates the recommended\n          Content Security Policy which disallows inline styles and is therefore ignored.\n          Use the rootAttributes.class option instead."),delete(t=a.extend({},t)).class,delete t.style,e.attr(t),delete t.id;var i=Object.keys(t);if(i.length)throw new Error("Unsupported values passed to rootAttributes option: "+i.toString())}},_create:function(){this._SaveAttributes(this.element),this._InitOptions(this._originalDefaults,this._constructorOptions),delete this._originalDefaults,delete this._constructorOptions,this._ComponentCreate(),this._AfterCreate(),this._SetupResources(),this.element.addClass("oj-component-initnode")},_InitOptions:function(t,e){this._setupDefaultOptions(t,e),this._initContextMenuOption(e)},_ComponentCreate:function(){var t,e,n;t=this.element,e=this.widgetName,(n=t.data("oj-component-names"))||(n=[],t.data("oj-component-names",n)),n.indexOf(e)<0&&n.push(e),this.activeableEventNamespace=this.eventNamespace+"activeable",this.hoverableEventNamespace=this.eventNamespace+"hoverable"},_AfterCreate:function(){this._SetRootAttributes(),this.contextMenuEventNamespace=this.eventNamespace+"contextMenu",this.activeableEventNamespace=this.eventNamespace+"activeable",this.hoverableEventNamespace=this.eventNamespace+"hoverable"},_AfterCreateEvent:a.noop,_setOptionClasses:function(){},_setOptionDisabled:function(){},_classes:function(){return""},_removeClass:function(){return this},_addClass:function(){return this},_toggleClass:function(){return this},_SaveAttributes:function(t){},_SaveAllAttributes:function(t){var e=this;this._savedAttributes=[],a.each(t,function(t,n){var i={},o={element:n,attributes:i},s=n.attributes;e._savedAttributes.push(o),a.each(s,function(t,e){var n=e.name;i[n]={attr:e.value}})})},_GetSavedAttributes:function(t){var e=this._savedAttributes;if(void 0===e)return null;for(var n=t[0],i=0,o=e.length;i<o;i++){var s=e[i];if(s.element===n)return s.attributes}return{}},_RestoreAttributes:function(){},_RestoreAllAttributes:function(){a.each(this._savedAttributes,function(t,e){var n=a(e.element),i=e.attributes;if(1===n.length){var o,s,r=e.element.attributes,l=[];for(o=0,s=r.length;o<s;o++)r[o].name in i||l.push(r[o].name);for(o=0,s=l.length;o<s;o++)n.removeAttr(l[o]);var u=Object.keys(i);for(o=0;o<u.length;o++){var c=u[o];n.attr(c,i[c].attr)}}})},_GetTranslationsSectionName:function(){return this.widgetFullName},_CompareOptionValues:function(t,e,n){return this._IsCustomElement()&&this._getWritebackOption(t)?r.Object.compareValues(e,n):e===n},getTranslatedString:function(t,e){var n={};arguments.length>2?n=Array.prototype.slice.call(arguments,1):2===arguments.length&&("object"==typeof(n=arguments[1])||n instanceof Array||(n=[n]));var i=this.option("translations."+t);return null==i?t:f.applyParameters(i.toString(),n)},getNodeBySubId:function(t){return null!=t&&null!=t.subId||!this.element?null:this.element[0]},getSubIdByNode:function(t){return null},destroy:function(){if(this._IsCustomElement())throw new Error("destroy cannot be called on a custom element");this._trigger("destroy"),_.dispatchEvent(this.element[0],new CustomEvent("_ojDestroy")),this._ReleaseResources(),this._super(),this.element.removeClass("oj-component-initnode"),this.widget().removeClass("oj-disabled"),this._removeStateClasses(this.element),function(t,e){var n=t.data("oj-component-names");if(n){var i=n.indexOf(e);i>=0&&(n.splice(i,1),0===n.length&&t.removeData("oj-component-names"))}}(this.element,this.widgetName),this._RestoreAttributes(),this._initialCmDomAttr?this.element.attr("contextmenu",this._initialCmDomAttr):this.element.removeAttr("contextmenu"),this._propertyContext=null},option:function(t,e){if(0===arguments.length)return a.widget.extend({},this.options);var n,i=arguments[0],o=i,s=null,r={};if("string"==typeof i){o={};var l=i.split(".");if(i=l.shift(),l.length){var u;s=l.join(".");try{arguments.length>1&&(this._settingNestedKey=s),u=a.widget.extend({},this.options[i]),o[i]=u}finally{this._settingNestedKey=null}for(n=0;n<l.length-1;n++)u[l[n]]=u[l[n]]||{},u=u[l[n]];if(i=l.pop(),1===arguments.length)return void 0===u[i]?null:u[i];u[i]=e}else{if(1===arguments.length)return void 0===this.options[i]?null:this.options[i];o[i]=e}r=arguments[2]||r}else r=arguments[1]||r;if(null!=s){var c={path:t,value:e};r=a.widget.extend({},r,{subkey:s,subproperty:c})}var _=r?r._context:null,h=!!_&&_.internalSet,E={},f=Object.keys(o);for(n=0;n<f.length;n++){var g=f[n],m=o[g],v=this.options[g],y=r&&r.changed;y||!this._CompareOptionValues(g,v,m)?E[g]=m:this._IsCustomElement()&&d.info(p.CustomElementUtils.getElementInfo(this.element[0])+": Ignoring property set for property '"+g+"' with same value.")}if(Object.keys(E).length>0){p.CustomElementUtils.allowSlotRelocation(!0);try{h?this._internalSetOptions(E,r):this._setOptions(E,r)}finally{p.CustomElementUtils.allowSlotRelocation(!1)}}return this},_internalSetOptions:function(t,e){for(var n=Object.keys(t),i=0;i<n.length;i++){var o=n[i],s=t[o],r=this.options[o];this.options[o]=s,this._optionChanged(o,s,r,e)}},_setOptions:function(t,e){p.CustomElementUtils.allowSlotRelocation(!0);try{for(var n=Object.keys(t),i=0;i<n.length;i++){var o=n[i],s=t[o];this._setOption(o,s,e)}}finally{p.CustomElementUtils.allowSlotRelocation(!1)}return this},_setOption:function(t,e,n){var i=this.options[t];if("disabled"===t)this.options[t]=e,this.widget().toggleClass("oj-disabled",!!e).attr("aria-disabled",e),e&&this._removeStateClasses(this.widget());else{try{var o=null==n?null:n.subkey;null!=o&&(this._settingNestedKey=o),this._super(t,e)}finally{this._settingNestedKey=null}"contextMenu"===t&&this._SetupContextMenu()}return this._optionChanged(t,e,i,n),this},_optionChanged:function(t,e,n,i){var o,s=null,r=!1,l=!1,u=null,c="external",_=null;if(i&&(s=i._context)){if(s.skipEvent)return;u=s.originalEvent,r=void 0===s.writeback?null!=u:s.writeback,l=s.readOnly,_=s.optionMetadata,o=s.extraData,s.internalSet&&(c="internal")}(_=_||{}).writeback=r?"shouldWrite":"shouldNotWrite",l&&(_.readOnly=!0);var h={option:t,previousValue:n,value:e,optionMetadata:_,updatedFrom:c},p=null==i?null:i.subkey;if(p){var d=p.split("."),E=n;d.forEach(function(t){E&&(E=E[t])});var f=i.subproperty;f.previousValue=E,h.subproperty=f}null!=o&&(h=a.extend({},o,h)),this._trigger("optionChange",u,h)},_SetupResources:function(){this._SetupContextMenu()},_ReleaseResources:function(){this._ReleaseContextMenu()},_trigger:function(t,e,n){return this._trigger2(t,e,n).proceed},_trigger2:function(t,e,n){var i=n||{};if(this._IsCustomElement())return this._triggerCustomEvent(t,e,i);var o=this.options[t],s=a.Event(e,W);return s.type=(this.widgetEventPrefix+t).toLowerCase(),s.target=this.element[0],this.element.trigger(s,i),{proceed:!(a.isFunction(o)&&!1===o.apply(this.element[0],[s].concat(i))||s.isDefaultPrevented()),event:s}},_triggerCustomEvent:function(t,e,n){var i,o,s,r={},l=this._getRootElement();if("optionChange"===t){var u=w.getPropertyForAlias(l,n.option);if(!w.isKnownProperty(l,u))return{proceed:!0,event:null};i=p.AttributeUtils.propertyNameToChangeEventType(u);for(var c=Object.keys(n),_=0;_<c.length;_++){var h=c[_];if("option"!==h)if("optionMetadata"===h)for(var d=Object.keys(n[h]),E=0;E<d.length;E++){var f=d[E];"writeback"!==f&&"component"!==f&&(r[f]=n[h][f])}else r[h]=n[h]}}else{if(i=p.AttributeUtils.eventTriggerToEventType(t),!w.isKnownEvent(l,i))return{proceed:!0,event:null};o=!0,s=!0,r=this._resolveJQueryObjects(n)}e&&(r.originalEvent=e instanceof a.Event?e.originalEvent:e);var g={detail:r};o&&(g.bubbles=!0),s&&(g.cancelable=!0);var m=new CustomEvent(i,g);return l.dispatchEvent(m),{proceed:!m.defaultPrevented,event:m}},_resolveJQueryObjects:function(t){for(var e=r.CollectionUtils.copyInto({},t),n=Object.keys(e),i=0;i<n.length;i++){var o=n[i],s=e[o];s&&s instanceof a&&(0===s.length?e[o]=null:1===s.length?e[o]=s[0]:e=s.toArray())}return e},_initContextMenuOption:function(t){var e=this.element.attr("contextmenu");this._initialCmDomAttr=e,e&&!("contextMenu"in t)&&this.option("contextMenu",document.getElementById(e),{_context:{internalSet:!0}})},_handleContextMenuGesture:function(t,e,n){if(!this._IsEffectivelyDisabled()){var i;if("OJ-MENU"===t.tagName)i=t;else{var o=N.__GetWidgetConstructor(t,"ojMenu");if(!(i=o&&o("instance")))throw new Error("Invalid JET Menu.")}this._NotifyContextMenuGesture(i,e,n),a(t).is(":visible")&&e.preventDefault()}},_SetupContextMenu:function(){var t=this._GetContextMenu();if(t||(t=this._GetDefaultContextMenu()),t&&void 0===this._contextMenuGestureInit){this._contextMenuGestureInit=t;var e=this;m.startDetectContextMenuGesture(this.widget()[0],function(n,i){e._handleContextMenuGesture(t,n,i)})}},_ReleaseContextMenu:function(){this._contextMenuGestureInit=void 0,m.stopDetectContextMenuGesture(this.widget()[0])},_GetContextMenu:function(){if(this._IsCustomElement()){var t=p.CustomElementUtils.getSlotMap(this._getRootElement()).contextMenu;if(t&&t.length>0)return t[0]}else if(this.options.contextMenu)return a(this.options.contextMenu).first()[0];return null},_NotifyContextMenuGesture:function(t,e,n){this._OpenContextMenu(e,n)},_OpenContextMenu:function(t,e,n,i,o){var s=this._GetContextMenu();if(s||(s=this._contextMenuGestureInit&&a(this._contextMenuGestureInit).is(":visible")?this._contextMenuGestureInit:this._GetDefaultContextMenu()),s){var r={mouse:{my:"start top",at:"start bottom",of:t,collision:"flipfit"},touch:{my:"start>40 center",at:"start bottom",of:t,collision:"flipfit"},keyboard:{my:"start top",at:"start bottom",of:"launcher",collision:"flipfit"}},l={launcher:this.element,position:r[e]},u={initialFocus:"menu"},c=o?a.extend(l,n,u):a.extend(!0,l,n,u);if(s.__openingContextMenu=!0,"OJ-MENU"===s.tagName)s.open(t,c,i);else{var _=N.__GetWidgetConstructor(s,"ojMenu");(_&&_("instance")).open(t,c,i);var h=function(t){t.preventDefault()};s.addEventListener("contextmenu",h),window.setTimeout(function(){s.removeEventListener("contextmenu",h)},50)}s.__openingContextMenu=!1}},_GetDefaultContextMenu:function(){return null},_removeStateClasses:function(t){t.removeClass("oj-hover oj-focus oj-focus-highlight oj-active"),t.find(".oj-hover").removeClass("oj-hover"),t.find(".oj-focus").removeClass("oj-focus"),t.find(".oj-focus-highlight").removeClass("oj-focus-highlight"),t.find(".oj-active").removeClass("oj-active")},_isRealMouseEvent:function(){return!_.recentTouchEnd()},_AddHoverable:function(t){var e;a.isPlainObject(t)?e=t.element:(e=t,t={});var n=t.afterToggle||a.noop;e.on("mouseenter"+this.hoverableEventNamespace,this._hoverStartHandler.bind(this,n)).on("mouseleave"+this.hoverableEventNamespace,this._hoverAndActiveEndHandler.bind(this,"oj-hover",n))},_RemoveHoverable:function(t){t&&t.off(this.hoverableEventNamespace)},_AddActiveable:function(t){var e;a.isPlainObject(t)?e=t.element:(e=t,t={});var n=t.afterToggle||a.noop;_.isTouchSupported()&&(e[0]&&(this._touchstartListener=this._activeStartHandler.bind(this,n),e[0].addEventListener("touchstart",this._touchstartListener,{passive:!0})),e.on("touchend"+this.activeableEventNamespace+" touchcancel"+this.activeableEventNamespace,this._hoverAndActiveEndHandler.bind(this,"oj-active",n))),e.on("mousedown"+this.activeableEventNamespace,this._activeStartHandler.bind(this,n)).on("mouseup"+this.activeableEventNamespace,this._hoverAndActiveEndHandler.bind(this,"oj-active",n)).on("mouseenter"+this.activeableEventNamespace,this._activeStartHandler.bind(this,n)).on("mouseleave"+this.activeableEventNamespace,this._hoverAndActiveEndHandler.bind(this,"oj-active",n))},_RemoveActiveable:function(t){t&&(t[0]&&(t[0].removeEventListener("touchstart",this._touchstartListener,{passive:!0}),delete this._touchstartListener),t.off(this.activeableEventNamespace),U=null)},_activeStartHandler:function(t,e){var n=a(e.currentTarget);("mouseenter"!==e.type||this._isTargetInActiveElement(e.currentTarget))&&(n.hasClass("oj-disabled")||"touchstart"!==e.type&&!this._isRealMouseEvent(e)||(n.addClass("oj-active"),t(e.type),"mousedown"===e.type&&(U=e.currentTarget,this.document.one("mouseup",function(){U=null}))))},_hoverStartHandler:function(t,e){var n=a(e.currentTarget);!n.hasClass("oj-disabled")&&this._isRealMouseEvent(e)&&(n.addClass("oj-hover"),t(e.type))},_hoverAndActiveEndHandler:function(t,e,n){("oj-active"!==t||"mouseleave"!==n.type||this._isTargetInActiveElement(n.currentTarget))&&(a(n.currentTarget).removeClass(t),e(n.type))},_isTargetInActiveElement:function(t){return U===t||null!=U&&a.contains(U,t)},_hoverable:function(){},_focusable:function(t){a.isPlainObject(t)||(t={element:t}),t.component=this,_.makeFocusable(t)},_UnregisterChildNode:function(t){if(t){a(t).off(this.eventNamespace);var e=this.bindings;e&&(this.bindings=a(e.not(t)))}},_GetReadingDirection:function(){return _.getReadingDirection()},_NotifyAttached:function(){this._propertyContext=null},_NotifyDetached:function(){this._propertyContext=null,this._removeStateClasses(this.widget())},_NotifyInitShown:function(){},_NotifyShown:function(){},_NotifyHidden:function(){},_IsEffectivelyDisabled:function(){return!(!this.options.disabled&&!this._ancestorDisabled)},__setAncestorComponentDisabled:function(t){this._ancestorDisabled=t},_getTranslationSectionLoader:function(){var t=[],e=this,n=0;this._traverseWidgetHierarchy(function(i){var o=0===n?e._GetTranslationsSectionName():i.widgetFullName;n+=1;var s=f.getComponentTranslations(o);null==s||a.isEmptyObject(s)||t.push(o)});var i=t.length;return i>0?function(){if(1===i)return f.getComponentTranslations(t[0]);for(var e={},n=i-1;n>=0;n--)a.widget.extend(e,f.getComponentTranslations(t[n]));return e}:null},_getDynamicPropertyContext:function(){if(!this._propertyContext){var t={};this._propertyContext=t;var e=this.element[0];t.containers=function(t){for(var e=t,n=[];e;){var i=e.getAttribute,o=i?i.call(e,N._OJ_CONTAINER_ATTR):null;null!=o&&n.push(o),e=e.parentNode}return n}(e),t.element=e,t.isCustomElement=this._IsCustomElement(),t.isCustomElement&&(t.customElement=this._getRootElement())}return this._propertyContext},_setupDefaultOptions:function(t,e){var n=this.options,i=this._getTranslationSectionLoader(),o=e.translations;null==i||void 0!==o&&!a.isPlainObject(o)||H(this,void 0,e.translations,n,"translations",i),this._loadGlobalDefaultOptions(t,e)},_loadGlobalDefaultOptions:function(t,e){var n=this.options,i=[];this._traverseWidgetHierarchy(function(t){i.push(t.widgetName)}),i.push("default");var o=N.__getDefaultOptions(i);if(!a.isEmptyObject(o))for(var s=this,r=function(){return s._getDynamicPropertyContext()},l=Object.keys(o),u=0;u<l.length;u++){var c=l[u],_=e[c];if(void 0===_||a.isPlainObject(_)){var h=o[c];if(h){var p=k(h);if(p)H(this,t[c],_,n,c,p,r);else{var d=[t[c]].concat(h);d.push(_),n[c]=F(d)}}}}},_traverseWidgetHierarchy:function(t){for(var e=this.constructor.prototype;null!=e&&"oj"===e.namespace;)t(e),e=Object.getPrototypeOf(e)},_getRootElement:function(){return this.OuterWrapper||this.element[0]},_IsCustomElement:function(){return p.CustomElementUtils.isElementRegistered(this._getRootElement().tagName)},_GetThrottlePromise:function(){if(this._IsCustomElement()){var t=this._getRootElement();return p.CustomElementUtils.getElementBridge(t).getThrottlePromise()}return Promise.resolve(null)},_FixRendererContext:function(t){if(this._IsCustomElement()){var e=r.CollectionUtils.copyInto({},t);return delete e.component,e.componentElement=this._getRootElement(),e}return t},_WrapCustomElementRenderer:function(t){return this._IsCustomElement()&&"function"==typeof t?function(e){var n=t(e);return n&&n.insert?n.insert:null}:t},__saveWritebackOptions:function(t){this._writebackOptions=t},_getWritebackOption:function(t){return!(!this._writebackOptions||!this._writebackOptions[t])},__handleSubtreeAttached:function(){this._IsCustomElement()||this._NotifyAttached()},__handleSubtreeDetached:function(){this._IsCustomElement()||this._NotifyDetached()},_VerifyConnectedForSetup:function(){return!1},__handleConnected:function(){this._NotifyAttached(),this.__delayConnectDisconnect(0)||this._SetupResources()},__handleDisconnected:function(){this.__delayConnectDisconnect(1)||this._ReleaseResources(),this._NotifyDetached()},__delayConnectDisconnect:function(t){return!!this._VerifyConnectedForSetup()&&(void 0===this.connectedState&&window.queueMicrotask(function(){this.connectedState===t&&(0===t?this._SetupResources():this._ReleaseResources()),this.connectedState=void 0}.bind(this)),this.connectedState=t,!0)},__handleWatchedAttribute:function(t,e,n){this._WatchedAttributeChanged(t,e,n)},_WatchedAttributeChanged:function(t,e,n){},__getFocusElement:function(){return this.GetFocusElement()},GetFocusElement:function(){return this.element[0]}}),delete a.fn.baseComponent,r.__registerWidget=function(t,e,n,i){if(a.widget(t,e,n),i){var o=t.split(".")[1];delete a.fn[o]}if("oj.oj"===t.substring(0,5)||"oj._oj"===t.substring(0,6)){var s,r=t.split("."),l=r[0],u=r[1],c=l+"-"+u;s="_"===u.substring(0,1)?"_"+l+"-"+u.substring(3):l+"-"+u.substring(2),a.expr.pseudos[s.toLowerCase()]=function(t){return!!a.data(t,c)}}},a.cleanData=(Y=a.cleanData,function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n];if(null==i)break;var o=!1,s=N.__GetWidgetConstructor(i);if(s&&!(o=s("instance")._IsCustomElement())){var r=N.getComponentElementByNode(i);o=r&&p.CustomElementUtils.isElementRegistered(r.tagName)}o||e.push(i)}e.length>0&&Y(e)}),a.fn.addClass=function(t){if("function"==typeof t)return this.each(function(e){a(this).addClass(t.call(this,e,K(this)))});const e=Array.isArray(t)?t:p.CustomElementUtils.getClassSet(t);return this.each(function(){1===this.nodeType&&this.classList.add(...e)}),this},a.fn.removeClass=function(t){if("function"==typeof t)return this.each(function(e){a(this).removeClass(t.call(this,e,K(this)))});const e=Array.isArray(t)?t:p.CustomElementUtils.getClassSet(t);return this.each(function(){1===this.nodeType&&this.classList.remove(...e)}),this};const z={};r._registerLegacyNamespaceProp("Test",z),z.ready=!1,z.domNodeForLocator=function(t){var e=t;if(r.StringUtils.isString(t)){var n=t;try{e=JSON.parse(n)}catch(t){return null}}if(e&&e.element){var i=a(e.element);if(i&&i.length>0){delete e.element;var o=e;return N.getNodeBySubId(i[0],o)}}return null},z.getOpenPopupCount=function(){return r.ZOrderUtils.getOpenPopupCount()},z.findOpenPopups=function(){return r.ZOrderUtils.findOpenPopups()},z.compareStackingContexts=function(t,e){return r.ZOrderUtils.compareStackingContexts(t,e)};const q=N.subtreeAttached,J=N.subtreeDetached,Z=N.subtreeHidden,Q=N.subtreeShown,$=N.createDynamicPropertyGetter,tt=N.setDefaultOptions,et=N.getDefaultOptions,nt=N.__GetWidgetConstructor,it=N.setComponentOption,ot=N.getComponentOption,st=N.getWidgetConstructor,rt=N.isComponentInitialized,at=N.markPendingSubtreeHidden,lt=N.unmarkPendingSubtreeHidden,ut=N.__getDefaultOptions,ct=N.getComponentElementByNode,_t=N.getSubIdByNode,ht=N.getNodeBySubId,pt=N.callComponentMethod,dt=N._OJ_CONTAINER_ATTR;t.DataProviderFeatureChecker=x,t._OJ_CONTAINER_ATTR=dt,t.__GetWidgetConstructor=nt,t.__getDefaultOptions=ut,t.callComponentMethod=pt,t.createDynamicPropertyGetter=$,t.getComponentElementByNode=ct,t.getComponentOption=ot,t.getDefaultOptions=et,t.getNodeBySubId=ht,t.getSubIdByNode=_t,t.getWidgetConstructor=st,t.isComponentInitialized=rt,t.markPendingSubtreeHidden=at,t.setComponentOption=it,t.setDefaultOptions=tt,t.subtreeAttached=q,t.subtreeDetached=J,t.subtreeHidden=Z,t.subtreeShown=Q,t.unmarkPendingSubtreeHidden=lt,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ojcomponentcore.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojjquery-hammer',["ojs/ojlogger","hammerjs","jquery"],function(e,t,a){"use strict";var r;a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a,t?(a.fn.ojHammer=function(e){switch(e){case"instance":return this.data("ojHammer");case"destroy":return this.each(function(){var e=a(this),t=e.data("ojHammer");t&&(t.destroy(),e.removeData("ojHammer"))});default:return this.each(function(){var r=a(this);r.data("ojHammer")||r.data("ojHammer",new t.Manager(r[0],e))})}},t.Manager.prototype.emit=(r=t.Manager.prototype.emit,function(e,t){r.call(this,e,t),a(this.element).trigger({type:e,gesture:t})})):e.warn("Hammer jQuery extension loaded without Hammer.")});
//# sourceMappingURL=ojjquery-hammer.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojpreact-patch',["exports"],function(e){"use strict";const t=Symbol(),n=Symbol(),o=Symbol();function l(e,n){Object.defineProperty(e,"firstChild",{get(){let l=e.childNodes[0];return l?(l=l[o]||l,n&&(l=l[t]||l),l):null},enumerable:!0})}const r=Symbol();e.OJ_POPUP=o,e.OJ_REPLACER=t,e.OJ_SLOT=n,e.patchPopupParent=function(e){e[r]||(e[r]=!0,l(e,!1))},e.patchSlotParent=function(e){if(!e[r]){e[r]=!0;const t=e.insertBefore;e.insertBefore=(o,l)=>t.call(e,o,(null==l?void 0:l[n])||l),l(e,!0)}},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojpreact-patch.js.map;
/*! jQuery UI - v1.12.1 - 2016-09-15
* http://jqueryui.com
* Copyright jQuery Foundation and other contributors; Licensed  */
!function(t){"function"==typeof define&&define.amd?define('jqueryui-amd/position',["jquery","./version"],t):t(jQuery)}(function(t){return function(){function i(t,i,o){return[parseFloat(t[0])*(c.test(t[0])?i/100:1),parseFloat(t[1])*(c.test(t[1])?o/100:1)]}function o(i,o){return parseInt(t.css(i,o),10)||0}function e(i){var o=i[0];return 9===o.nodeType?{width:i.width(),height:i.height(),offset:{top:0,left:0}}:t.isWindow(o)?{width:i.width(),height:i.height(),offset:{top:i.scrollTop(),left:i.scrollLeft()}}:o.preventDefault?{width:0,height:0,offset:{top:o.pageY,left:o.pageX}}:{width:i.outerWidth(),height:i.outerHeight(),offset:i.offset()}}var l,n=Math.max,f=Math.abs,s=/left|center|right/,h=/top|center|bottom/,r=/[\+\-]\d+(\.[\d]+)?%?/,p=/^\w+/,c=/%$/,a=t.fn.position;t.position={scrollbarWidth:function(){if(void 0!==l)return l;var i,o,e=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),n=e.children()[0];return t("body").append(e),i=n.offsetWidth,e.css("overflow","scroll"),o=n.offsetWidth,i===o&&(o=e[0].clientWidth),e.remove(),l=i-o},getScrollInfo:function(i){var o=i.isWindow||i.isDocument?"":i.element.css("overflow-x"),e=i.isWindow||i.isDocument?"":i.element.css("overflow-y"),l="scroll"===o||"auto"===o&&i.width<i.element[0].scrollWidth,n="scroll"===e||"auto"===e&&i.height<i.element[0].scrollHeight;return{width:n?t.position.scrollbarWidth():0,height:l?t.position.scrollbarWidth():0}},getWithinInfo:function(i){var o=t(i||window),e=t.isWindow(o[0]),l=!!o[0]&&9===o[0].nodeType,n=!e&&!l;return{element:o,isWindow:e,isDocument:l,offset:n?t(i).offset():{left:0,top:0},scrollLeft:o.scrollLeft(),scrollTop:o.scrollTop(),width:o.outerWidth(),height:o.outerHeight()}}},t.fn.position=function(l){if(!l||!l.of)return a.apply(this,arguments);l=t.extend({},l);var c,d,g,u,m,w,W=t(l.of),v=t.position.getWithinInfo(l.within),y=t.position.getScrollInfo(v),H=(l.collision||"flip").split(" "),b={};return w=e(W),W[0].preventDefault&&(l.at="left top"),d=w.width,g=w.height,u=w.offset,m=t.extend({},u),t.each(["my","at"],function(){var t,i,o=(l[this]||"").split(" ");1===o.length&&(o=s.test(o[0])?o.concat(["center"]):h.test(o[0])?["center"].concat(o):["center","center"]),o[0]=s.test(o[0])?o[0]:"center",o[1]=h.test(o[1])?o[1]:"center",t=r.exec(o[0]),i=r.exec(o[1]),b[this]=[t?t[0]:0,i?i[0]:0],l[this]=[p.exec(o[0])[0],p.exec(o[1])[0]]}),1===H.length&&(H[1]=H[0]),"right"===l.at[0]?m.left+=d:"center"===l.at[0]&&(m.left+=d/2),"bottom"===l.at[1]?m.top+=g:"center"===l.at[1]&&(m.top+=g/2),c=i(b.at,d,g),m.left+=c[0],m.top+=c[1],this.each(function(){var e,s,h=t(this),r=h.outerWidth(),p=h.outerHeight(),a=o(this,"marginLeft"),w=o(this,"marginTop"),x=r+a+o(this,"marginRight")+y.width,T=p+w+o(this,"marginBottom")+y.height,L=t.extend({},m),P=i(b.my,h.outerWidth(),h.outerHeight());"right"===l.my[0]?L.left-=r:"center"===l.my[0]&&(L.left-=r/2),"bottom"===l.my[1]?L.top-=p:"center"===l.my[1]&&(L.top-=p/2),L.left+=P[0],L.top+=P[1],e={marginLeft:a,marginTop:w},t.each(["left","top"],function(i,o){t.ui.position[H[i]]&&t.ui.position[H[i]][o](L,{targetWidth:d,targetHeight:g,elemWidth:r,elemHeight:p,collisionPosition:e,collisionWidth:x,collisionHeight:T,offset:[c[0]+P[0],c[1]+P[1]],my:l.my,at:l.at,within:v,elem:h})}),l.using&&(s=function(t){var i=u.left-L.left,o=i+d-r,e=u.top-L.top,s=e+g-p,c={target:{element:W,left:u.left,top:u.top,width:d,height:g},element:{element:h,left:L.left,top:L.top,width:r,height:p},horizontal:o<0?"left":i>0?"right":"center",vertical:s<0?"top":e>0?"bottom":"middle"};d<r&&f(i+o)<d&&(c.horizontal="center"),g<p&&f(e+s)<g&&(c.vertical="middle"),n(f(i),f(o))>n(f(e),f(s))?c.important="horizontal":c.important="vertical",l.using.call(this,t,c)}),h.offset(t.extend(L,{using:s}))})},t.ui.position={fit:{left:function(t,i){var o,e=i.within,l=e.isWindow?e.scrollLeft:e.offset.left,f=e.width,s=t.left-i.collisionPosition.marginLeft,h=l-s,r=s+i.collisionWidth-f-l;i.collisionWidth>f?h>0&&r<=0?(o=t.left+h+i.collisionWidth-f-l,t.left+=h-o):r>0&&h<=0?t.left=l:h>r?t.left=l+f-i.collisionWidth:t.left=l:h>0?t.left+=h:r>0?t.left-=r:t.left=n(t.left-s,t.left)},top:function(t,i){var o,e=i.within,l=e.isWindow?e.scrollTop:e.offset.top,f=i.within.height,s=t.top-i.collisionPosition.marginTop,h=l-s,r=s+i.collisionHeight-f-l;i.collisionHeight>f?h>0&&r<=0?(o=t.top+h+i.collisionHeight-f-l,t.top+=h-o):r>0&&h<=0?t.top=l:h>r?t.top=l+f-i.collisionHeight:t.top=l:h>0?t.top+=h:r>0?t.top-=r:t.top=n(t.top-s,t.top)}},flip:{left:function(t,i){var o,e,l=i.within,n=l.offset.left+l.scrollLeft,s=l.width,h=l.isWindow?l.scrollLeft:l.offset.left,r=t.left-i.collisionPosition.marginLeft,p=r-h,c=r+i.collisionWidth-s-h,a="left"===i.my[0]?-i.elemWidth:"right"===i.my[0]?i.elemWidth:0,d="left"===i.at[0]?i.targetWidth:"right"===i.at[0]?-i.targetWidth:0,g=-2*i.offset[0];p<0?(o=t.left+a+d+g+i.collisionWidth-s-n,(o<0||o<f(p))&&(t.left+=a+d+g)):c>0&&(e=t.left-i.collisionPosition.marginLeft+a+d+g-h,(e>0||f(e)<c)&&(t.left+=a+d+g))},top:function(t,i){var o,e,l=i.within,n=l.offset.top+l.scrollTop,s=l.height,h=l.isWindow?l.scrollTop:l.offset.top,r=t.top-i.collisionPosition.marginTop,p=r-h,c=r+i.collisionHeight-s-h,a="top"===i.my[1],d=a?-i.elemHeight:"bottom"===i.my[1]?i.elemHeight:0,g="top"===i.at[1]?i.targetHeight:"bottom"===i.at[1]?-i.targetHeight:0,u=-2*i.offset[1];p<0?(e=t.top+d+g+u+i.collisionHeight-s-n,(e<0||e<f(p))&&(t.top+=d+g+u)):c>0&&(o=t.top-i.collisionPosition.marginTop+d+g+u-h,(o>0||f(o)<c)&&(t.top+=d+g+u))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}}}(),t.ui.position});
!function(n,l){"object"==typeof exports&&"undefined"!=typeof module?l(exports):"function"==typeof define&&define.amd?define('preact',["exports"],l):l(n.preact={})}(this,function(n){var l,u,i,t,o,f,r={},e=[],c=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function s(n,l){for(var u in l)n[u]=l[u];return n}function a(n){var l=n.parentNode;l&&l.removeChild(n)}function v(n,l,u){var i,t,o,f=arguments,r={};for(o in l)"key"==o?i=l[o]:"ref"==o?t=l[o]:r[o]=l[o];if(arguments.length>3)for(u=[u],o=3;o<arguments.length;o++)u.push(f[o]);if(null!=u&&(r.children=u),"function"==typeof n&&null!=n.defaultProps)for(o in n.defaultProps)void 0===r[o]&&(r[o]=n.defaultProps[o]);return h(n,r,i,t,null)}function h(n,u,i,t,o){var f={type:n,props:u,key:i,ref:t,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==o?++l.__v:o};return null!=l.vnode&&l.vnode(f),f}function y(n){return n.children}function p(n,l){this.props=n,this.context=l}function d(n,l){if(null==l)return n.__?d(n.__,n.__.__k.indexOf(n)+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return"function"==typeof n.type?d(n):null}function _(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return _(n)}}function k(n){(!n.__d&&(n.__d=!0)&&i.push(n)&&!b.__r++||o!==l.debounceRendering)&&((o=l.debounceRendering)||t)(b)}function b(){for(var n;b.__r=i.length;)n=i.sort(function(n,l){return n.__v.__b-l.__v.__b}),i=[],n.some(function(n){var l,u,i,t,o,f;n.__d&&(o=(t=(l=n).__v).__e,(f=l.__P)&&(u=[],(i=s({},t)).__v=t.__v+1,j(f,t,i,l.__n,void 0!==f.ownerSVGElement,null!=t.__h?[o]:null,u,null==o?d(t):o,t.__h),H(u,t),t.__e!=o&&_(t)))})}function m(n,l,u,i,t,o,f,c,s,a){var v,p,_,k,b,m,x,A=i&&i.__k||e,P=A.length;for(u.__k=[],v=0;v<l.length;v++)if(null!=(k=u.__k[v]=null==(k=l[v])||"boolean"==typeof k?null:"string"==typeof k||"number"==typeof k||"bigint"==typeof k?h(null,k,null,null,k):Array.isArray(k)?h(y,{children:k},null,null,null):k.__b>0?h(k.type,k.props,k.key,null,k.__v):k)){if(k.__=u,k.__b=u.__b+1,null===(_=A[v])||_&&k.key==_.key&&k.type===_.type)A[v]=void 0;else for(p=0;p<P;p++){if((_=A[p])&&k.key==_.key&&k.type===_.type){A[p]=void 0;break}_=null}j(n,k,_=_||r,t,o,f,c,s,a),b=k.__e,(p=k.ref)&&_.ref!=p&&(x||(x=[]),_.ref&&x.push(_.ref,null,k),x.push(p,k.__c||b,k)),null!=b?(null==m&&(m=b),"function"==typeof k.type&&null!=k.__k&&k.__k===_.__k?k.__d=s=g(k,s,n):s=w(n,k,_,A,b,s),a||"option"!==u.type?"function"==typeof u.type&&(u.__d=s):n.value=""):s&&_.__e==s&&s.parentNode!=n&&(s=d(_))}for(u.__e=m,v=P;v--;)null!=A[v]&&("function"==typeof u.type&&null!=A[v].__e&&A[v].__e==u.__d&&(u.__d=d(i,v+1)),z(A[v],A[v]));if(x)for(v=0;v<x.length;v++)T(x[v],x[++v],x[++v])}function g(n,l,u){var i,t;for(i=0;i<n.__k.length;i++)(t=n.__k[i])&&(t.__=n,l="function"==typeof t.type?g(t,l,u):w(u,t,t,n.__k,t.__e,l));return l}function w(n,l,u,i,t,o){var f,r,e;if(void 0!==l.__d)f=l.__d,l.__d=void 0;else if(null==u||t!=o||null==t.parentNode)n:if(null==o||o.parentNode!==n)n.appendChild(t),f=null;else{for(r=o,e=0;(r=r.nextSibling)&&e<i.length;e+=2)if(r==t)break n;n.insertBefore(t,o),f=o}return void 0!==f?f:t.nextSibling}function x(n,l,u,i,t){var o;for(o in u)"children"===o||"key"===o||o in l||P(n,o,null,u[o],i);for(o in l)t&&"function"!=typeof l[o]||"children"===o||"key"===o||"value"===o||"checked"===o||u[o]===l[o]||P(n,o,l[o],u[o],i)}function A(n,l,u){"-"===l[0]?n.setProperty(l,u):n[l]=null==u?"":"number"!=typeof u||c.test(l)?u:u+"px"}function P(n,l,u,i,t){var o;n:if("style"===l)if("string"==typeof u)n.style.cssText=u;else{if("string"==typeof i&&(n.style.cssText=i=""),i)for(l in i)u&&l in u||A(n.style,l,"");if(u)for(l in u)i&&u[l]===i[l]||A(n.style,l,u[l])}else if("o"===l[0]&&"n"===l[1])o=l!==(l=l.replace(/Capture$/,"")),l=l.toLowerCase()in n?l.toLowerCase().slice(2):l.slice(2),n.l||(n.l={}),n.l[l+o]=u,u?i||n.addEventListener(l,o?$:C,o):n.removeEventListener(l,o?$:C,o);else if("dangerouslySetInnerHTML"!==l){if(t)l=l.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==l&&"list"!==l&&"form"!==l&&"tabIndex"!==l&&"download"!==l&&l in n)try{n[l]=null==u?"":u;break n}catch(n){}"function"==typeof u||(null!=u&&(!1!==u||"a"===l[0]&&"r"===l[1])?n.setAttribute(l,u):n.removeAttribute(l))}}function C(n){this.l[n.type+!1](l.event?l.event(n):n)}function $(n){this.l[n.type+!0](l.event?l.event(n):n)}function j(n,u,i,t,o,f,r,e,c){var a,v,h,d,_,k,b,g,w,x,A,P=u.type;if(void 0!==u.constructor)return null;null!=i.__h&&(c=i.__h,e=u.__e=i.__e,u.__h=null,f=[e]),(a=l.__b)&&a(u);try{n:if("function"==typeof P){if(g=u.props,w=(a=P.contextType)&&t[a.__c],x=a?w?w.props.value:a.__:t,i.__c?b=(v=u.__c=i.__c).__=v.__E:("prototype"in P&&P.prototype.render?u.__c=v=new P(g,x):(u.__c=v=new p(g,x),v.constructor=P,v.render=L),w&&w.sub(v),v.props=g,v.state||(v.state={}),v.context=x,v.__n=t,h=v.__d=!0,v.__h=[]),null==v.__s&&(v.__s=v.state),null!=P.getDerivedStateFromProps&&(v.__s==v.state&&(v.__s=s({},v.__s)),s(v.__s,P.getDerivedStateFromProps(g,v.__s))),d=v.props,_=v.state,h)null==P.getDerivedStateFromProps&&null!=v.componentWillMount&&v.componentWillMount(),null!=v.componentDidMount&&v.__h.push(v.componentDidMount);else{if(null==P.getDerivedStateFromProps&&g!==d&&null!=v.componentWillReceiveProps&&v.componentWillReceiveProps(g,x),!v.__e&&null!=v.shouldComponentUpdate&&!1===v.shouldComponentUpdate(g,v.__s,x)||u.__v===i.__v){v.props=g,v.state=v.__s,u.__v!==i.__v&&(v.__d=!1),v.__v=u,u.__e=i.__e,u.__k=i.__k,u.__k.forEach(function(n){n&&(n.__=u)}),v.__h.length&&r.push(v);break n}null!=v.componentWillUpdate&&v.componentWillUpdate(g,v.__s,x),null!=v.componentDidUpdate&&v.__h.push(function(){v.componentDidUpdate(d,_,k)})}v.context=x,v.props=g,v.state=v.__s,(a=l.__r)&&a(u),v.__d=!1,v.__v=u,v.__P=n,a=v.render(v.props,v.state,v.context),v.state=v.__s,null!=v.getChildContext&&(t=s(s({},t),v.getChildContext())),h||null==v.getSnapshotBeforeUpdate||(k=v.getSnapshotBeforeUpdate(d,_)),A=null!=a&&a.type===y&&null==a.key?a.props.children:a,m(n,Array.isArray(A)?A:[A],u,i,t,o,f,r,e,c),v.base=u.__e,u.__h=null,v.__h.length&&r.push(v),b&&(v.__E=v.__=null),v.__e=!1}else null==f&&u.__v===i.__v?(u.__k=i.__k,u.__e=i.__e):u.__e=I(i.__e,u,i,t,o,f,r,c);(a=l.diffed)&&a(u)}catch(n){u.__v=null,(c||null!=f)&&(u.__e=e,u.__h=!!c,f[f.indexOf(e)]=null),l.__e(n,u,i)}}function H(n,u){l.__c&&l.__c(u,n),n.some(function(u){try{n=u.__h,u.__h=[],n.some(function(n){n.call(u)})}catch(n){l.__e(n,u.__v)}})}function I(n,l,u,i,t,o,f,c){var s,v,h,y,p=u.props,d=l.props,_=l.type,k=0;if("svg"===_&&(t=!0),null!=o)for(;k<o.length;k++)if((s=o[k])&&(s===n||(_?s.localName==_:3==s.nodeType))){n=s,o[k]=null;break}if(null==n){if(null===_)return document.createTextNode(d);n=t?document.createElementNS("http://www.w3.org/2000/svg",_):document.createElement(_,d.is&&d),o=null,c=!1}if(null===_)p===d||c&&n.data===d||(n.data=d);else{if(o=o&&e.slice.call(n.childNodes),v=(p=u.props||r).dangerouslySetInnerHTML,h=d.dangerouslySetInnerHTML,!c){if(null!=o)for(p={},y=0;y<n.attributes.length;y++)p[n.attributes[y].name]=n.attributes[y].value;(h||v)&&(h&&(v&&h.__html==v.__html||h.__html===n.innerHTML)||(n.innerHTML=h&&h.__html||""))}if(x(n,d,p,t,c),h)l.__k=[];else if(k=l.props.children,m(n,Array.isArray(k)?k:[k],l,u,i,t&&"foreignObject"!==_,o,f,n.firstChild,c),null!=o)for(k=o.length;k--;)null!=o[k]&&a(o[k]);c||("value"in d&&void 0!==(k=d.value)&&(k!==n.value||"progress"===_&&!k)&&P(n,"value",k,p.value,!1),"checked"in d&&void 0!==(k=d.checked)&&k!==n.checked&&P(n,"checked",k,p.checked,!1))}return n}function T(n,u,i){try{"function"==typeof n?n(u):n.current=u}catch(n){l.__e(n,i)}}function z(n,u,i){var t,o,f;if(l.unmount&&l.unmount(n),(t=n.ref)&&(t.current&&t.current!==n.__e||T(t,null,u)),i||"function"==typeof n.type||(i=null!=(o=n.__e)),n.__e=n.__d=void 0,null!=(t=n.__c)){if(t.componentWillUnmount)try{t.componentWillUnmount()}catch(n){l.__e(n,u)}t.base=t.__P=null}if(t=n.__k)for(f=0;f<t.length;f++)t[f]&&z(t[f],u,i);null!=o&&a(o)}function L(n,l,u){return this.constructor(n,u)}function M(n,u,i){var t,o,f;l.__&&l.__(n,u),o=(t="function"==typeof i)?null:i&&i.__k||u.__k,f=[],j(u,n=(!t&&i||u).__k=v(y,null,[n]),o||r,r,void 0!==u.ownerSVGElement,!t&&i?[i]:o?null:u.firstChild?e.slice.call(u.childNodes):null,f,!t&&i?i:o?o.__e:u.firstChild,t),H(f,n)}l={__e:function(n,l){for(var u,i,t;l=l.__;)if((u=l.__c)&&!u.__)try{if((i=u.constructor)&&null!=i.getDerivedStateFromError&&(u.setState(i.getDerivedStateFromError(n)),t=u.__d),null!=u.componentDidCatch&&(u.componentDidCatch(n),t=u.__d),t)return u.__E=u}catch(l){n=l}throw n},__v:0},u=function(n){return null!=n&&void 0===n.constructor},p.prototype.setState=function(n,l){var u;u=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=s({},this.state),"function"==typeof n&&(n=n(s({},u),this.props)),n&&s(u,n),null!=n&&this.__v&&(l&&this.__h.push(l),k(this))},p.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),k(this))},p.prototype.render=y,i=[],t="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,b.__r=0,f=0,n.render=M,n.hydrate=function n(l,u){M(l,u,n)},n.createElement=v,n.h=v,n.Fragment=y,n.createRef=function(){return{current:null}},n.isValidElement=u,n.Component=p,n.cloneElement=function(n,l,u){var i,t,o,f=arguments,r=s({},n.props);for(o in l)"key"==o?i=l[o]:"ref"==o?t=l[o]:r[o]=l[o];if(arguments.length>3)for(u=[u],o=3;o<arguments.length;o++)u.push(f[o]);return null!=u&&(r.children=u),h(n.type,r,i||n.key,t||n.ref,null)},n.createContext=function(n,l){var u={__c:l="__cC"+f++,__:n,Consumer:function(n,l){return n.children(l)},Provider:function(n){var u,i;return this.getChildContext||(u=[],(i={})[l]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(n){this.props.value!==n.value&&u.some(k)},this.sub=function(n){u.push(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){u.splice(u.indexOf(n),1),l&&l.call(n)}}),n.children}};return u.Provider.__=u.Consumer.contextType=u},n.toChildArray=function n(l,u){return u=u||[],null==l||"boolean"==typeof l||(Array.isArray(l)?l.some(function(l){n(l,u)}):u.push(l)),u},n.options=l});
//# sourceMappingURL=preact.umd.js.map
;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojpopupcore',["exports","ojs/ojcore-base","jquery","ojs/ojcomponentcore","ojs/ojlogger","ojs/ojdomutils","ojs/ojpreact-patch","jqueryui-amd/position","ojs/ojcontext","preact"],function(e,t,o,i,r,n,s,a,l,p){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,o=o&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o,l=l&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l;const c=function(e){this._tapCallback=e,this.Init()};t._registerLegacyNamespaceProp("SimpleTapRecognizer",c),t.Object.createSubclass(c,t.Object,"oj.SimpleTapRecognizer"),c.prototype.Init=function(){c.superclass.Init.call(this);var e=this._eventHandler.bind(this);this._eventHandlerCallback=e;for(var t,o=document.documentElement,i=0;i<c._TOUCHEVENTS.length;i++)"touchstart"===(t=c._TOUCHEVENTS[i])||"touchmove"===t?o.addEventListener(t,e,{passive:!1,capture:!0}):o.addEventListener(t,e,!0)},c.prototype._eventHandler=function(e){var t=this._tapCallback,o=e.type;if("touchstart"===o)this._touchStartEvent=e,this._touchStartEvent._tapStart=(new Date).getTime();else if("touchmove"===o||"touchcancel"===o)this._touchStartEvent=null;else if("touchend"===o){if(this._touchStartEvent){var i=this._touchStartEvent._tapStart;if(isNaN(i))t(this._touchStartEvent);else(new Date).getTime()-i<c._PRESSHOLDTHRESSHOLD&&t(this._touchStartEvent)}this._touchStartEvent=null}},c.prototype.destroy=function(){this._tapCallback=null;var e=this._eventHandlerCallback;this._eventHandlerCallback=null;for(var t,o=document.documentElement,i=0;i<c._TOUCHEVENTS.length;i++)"touchstart"===(t=c._TOUCHEVENTS[i])||"touchmove"===t?o.removeEventListener(t,e,{passive:!1,capture:!0}):o.removeEventListener(t,e,!0)},c._TOUCHEVENTS=["touchstart","touchmove","touchcancel","touchend"],c._PRESSHOLDTHRESSHOLD=700;const u=function(){this.Init()};t._registerLegacyNamespaceProp("PopupService",u),t.Object.createSubclass(u,t.Object,"oj.PopupService");const _=function(){this.Init()},E={};u.prototype.Init=function(){u.superclass.Init.call(this)},u.getInstance=function(e){return u._popupService||(u._popupService=new _),u._popupService},u.prototype.open=function(e){t.Assert.failedInAbstractFunction()},u.prototype.close=function(e){t.Assert.failedInAbstractFunction()},u.prototype.changeOptions=function(e){t.Assert.failedInAbstractFunction()},u.prototype.triggerOnDescendents=function(e,o,i){t.Assert.failedInAbstractFunction()},u.prototype.destroy=function(){u._popupService=null},u.MODALITY={NONE:"none",MODAL:"modal",MODELESS:"modeless"},u.EVENT={POPUP_REMOVE:"ojPopupRemove",POPUP_CLOSE:"ojPopupClose",POPUP_REFRESH:"ojPopupRefresh",POPUP_AUTODISMISS:"ojPopupAutoDismiss",POPUP_BEFORE_OPEN:"ojPopupBeforeOpen",POPUP_AFTER_OPEN:"ojPopupAfterOpen",POPUP_BEFORE_CLOSE:"ojPopupBeforeClose",POPUP_AFTER_CLOSE:"ojPopupAfterClose"},u.LAYER_LEVEL={TOP_LEVEL:"topLevel",NEAREST_ANCESTOR:"nearestAncestor"},u.OPTION={POPUP:"popup",EVENTS:"events",MODALITY:"modality",LAUNCHER:"launcher",POSITION:"position",LAYER_SELECTORS:"layerSelectors",LAYER_LEVEL:"layerLevel",CONTEXT:"context",CUSTOM_ELEMENT:"customElement"},t.__registerWidget("oj.ojSurrogate",o.oj.baseComponent,{version:"1.0.0",widgetEventPrefix:"oj",options:{beforeDestroy:null},_ComponentCreate:function(){this._super(),this.element.uniqueId()},_invokeBeforeDestroy:function(){var e=this.options.beforeDestroy;this.options.beforeDestroy=null,e&&e()},_destroy:function(){this._invokeBeforeDestroy(),this.element.removeUniqueId(),this._super()},_NotifyDetached:function(){this._invokeBeforeDestroy(),this._super()}});t.CustomElementBridge.register("oj-surrogate",{metadata:{properties:{beforeDestroy:{type:"function"}},extension:{_WIDGET_NAME:"ojSurrogate"}}}),t._registerLegacyNamespaceProp("PopupServiceImpl",_),t.Object.createSubclass(_,u,"oj.PopupServiceImpl"),_.prototype.open=function(e){t.Assert.assertObject(e);var s=e[u.OPTION.POPUP];t.Assert.assertPrototype(s,o);var a=E.getStatus(s);if(a===E.STATUS.UNKNOWN||a===E.STATUS.BEFORE_OPEN||a===E.STATUS.CLOSE){var l=e[u.OPTION.LAUNCHER];t.Assert.assertPrototype(l,o);var p=e[u.OPTION.POSITION];t.Assert.assertObjectOrNull(p);var c=e[u.OPTION.EVENTS];t.Assert.assertObject(c);var f=e[u.OPTION.MODALITY];(!f||u.MODALITY.MODELESS!==f&&u.MODALITY.MODAL!==f)&&(f=u.MODALITY.NONE);var h=e[u.OPTION.LAYER_SELECTORS];t.Assert.assertString(h);var d=e[u.OPTION.CUSTOM_ELEMENT],T=e[u.OPTION.LAYER_LEVEL];(!T||u.LAYER_LEVEL.TOP_LEVEL!==T&&u.LAYER_LEVEL.NEAREST_ANCESTOR!==T)&&(T=u.LAYER_LEVEL.NEAREST_ANCESTOR);var v=c[u.EVENT.POPUP_BEFORE_OPEN];v&&o.isFunction(v)||(v=_._defaultBeforeOpenCallback);var O=c[u.EVENT.POPUP_AFTER_OPEN];E.setStatus(s,E.STATUS.OPENING),n.setLogicalParent(s,l),E.addToAncestorLayer(s,l,f,h,T,d);var g,S=function(){try{s.removeAttr("aria-hidden"),this._assertEventSink(),i.subtreeShown(s[0])}catch(e){r.error("Error opening popup:\n%o",e)}finally{E.setStatus(s,E.STATUS.OPEN),O&&O(e);var n=E.getFirstAncestorLayer(s);if(t.Assert.assertPrototype(n,o),E.applyEvents(n,c),!E._getSurrogate(n)&&o.isFunction(c[u.EVENT.POPUP_REMOVE]))(0,c[u.EVENT.POPUP_REMOVE])()}};S=S.bind(this);try{g=v(e)}catch(e){r.error("Error before open popup:\n%o",e)}finally{g&&g instanceof Promise?g.then(S):S()}}else this._assertEventSink()},_._defaultBeforeOpenCallback=function(e){var i=e[u.OPTION.POPUP];t.Assert.assertPrototype(i,o);var r=e[u.OPTION.POSITION];i.show(),r&&i.position(r)},_.prototype.close=function(e){t.Assert.assertObject(e);var s=e[u.OPTION.POPUP];t.Assert.assertPrototype(s,o);var a=E.getOpenPopupLayer(s);t.Assert.assertPrototype(a,o);var l=e[u.OPTION.EVENTS];l?l=o.extend(E.getEvents(a),l):(l=E.getEvents(a),e[u.OPTION.EVENTS]=l);var p=E.getStatus(s);if(p!==E.STATUS.OPEN&&p!==E.STATUS.BEFORE_CLOSE||!l)this._assertEventSink();else{var c=l[u.EVENT.POPUP_BEFORE_CLOSE];c&&o.isFunction(c)||(c=_._defaultBeforeCloseCallback);var f=l[u.EVENT.POPUP_AFTER_CLOSE];E.setStatus(s,E.STATUS.CLOSING),E.applyEvents(a,{}),s.attr("aria-hidden","true");var h,d=function(){try{s.hide(),s.css({top:"auto",bottom:"auto",left:"auto",right:"auto"}),E.removeFromAncestorLayer(s),n.setLogicalParent(s,null),this._assertEventSink(),i.subtreeHidden(s[0])}catch(e){r.error("Error closing popup:\n%o",e)}finally{E.setStatus(s,E.STATUS.CLOSE),f&&o.isFunction(f)&&f(e)}};d=d.bind(this);try{h=c(e)}catch(e){r.error("Error before close popup:\n%o",e)}finally{h&&h instanceof Promise?h.then(d):d()}}},_._defaultBeforeCloseCallback=function(e){var i=e[u.OPTION.POPUP];t.Assert.assertPrototype(i,o),i.hide()},_.prototype.changeOptions=function(e){t.Assert.assertObject(e);var i=e[u.OPTION.POPUP];if(t.Assert.assertPrototype(i,o),E.getStatus(i)===E.STATUS.OPEN){var r=E.getOpenPopupLayer(i);t.Assert.assertPrototype(r,o);var n=e[u.OPTION.EVENTS];n&&E.applyEvents(r,n);var s=e[u.OPTION.MODALITY];s&&E.applyModality(r,s);var a=e[u.OPTION.LAYER_SELECTORS];t.StringUtils.isEmptyOrUndefined(a)||r.attr("class",a)}},_.prototype.triggerOnDescendents=function(e,t,o){if(E.isPopupOpen(e)){var i={};i.event=t,i.argsArray=o;var r=E.getFirstAncestorLayer(e);E.postOrderVisit(r,this._triggerOnDescendentsVisitCallback,i)}},_.prototype._triggerOnDescendentsVisitCallback=function(e,t){var i=t.event,r=t.argsArray,n=E.getEvents(e);return n&&o.isFunction(n[i])&&n[i].apply(this,r),E.VISIT_RESULT.ACCEPT},_.prototype._assertEventSink=function(){var e,t,o,i=E.hasPopupsOpen(),r=this._callbackEventFilter;if(!i&&r){for(window.removeEventListener("resize",_._refreshCallback,!0),window.removeEventListener("scroll",_._refreshCallback,!0),(t=document.documentElement).removeEventListener("mousewheel",_._refreshCallback,{passive:!0,capture:!0}),t.removeEventListener("DOMMouseScroll",_._refreshCallback,!0),this._callbackEventFilter=null,e=0;e<_._REDISTRIBUTE_EVENTS.length;e++)o=_._REDISTRIBUTE_EVENTS[e],t.removeEventListener(o,r,!0);var s=this._simpleTapRecognizer;s&&(s.destroy(),this._simpleTapRecognizer=null)}else if(i&&!r){for(window.addEventListener("resize",_._refreshCallback,!0),window.addEventListener("scroll",_._refreshCallback,!0),(t=document.documentElement).addEventListener("mousewheel",_._refreshCallback,{passive:!0,capture:!0}),t.addEventListener("DOMMouseScroll",_._refreshCallback,!0),r=this._eventFilterCallback.bind(this),this._callbackEventFilter=r,e=0;e<_._REDISTRIBUTE_EVENTS.length;e++)o=_._REDISTRIBUTE_EVENTS[e],t.addEventListener(o,r,!0);n.isTouchSupported()&&(this._simpleTapRecognizer=new c(r))}},_.prototype._eventFilterCallback=function(e){var t=o(e.target);if(E.hasPopupsOpen()){if(!n.isChromeEvent(e)&&("focus"!==e.type||t.is(":focusable"))){var i=E.getDefaultLayer();if("keydown"!==e.type||!E.hasModalDialogOpen()||n.isAncestor(i[0],t[0])){var r=E.getFirstAncestorLayer(t),s=i.find("."+_._FOCUS_WITHIN_SELECTOR).first();if(i[0]!==r[0]?r.hasClass(_._FOCUS_WITHIN_SELECTOR)||(s.length&&s.removeClass(_._FOCUS_WITHIN_SELECTOR),r.addClass(_._FOCUS_WITHIN_SELECTOR)):s.length&&s.removeClass(_._FOCUS_WITHIN_SELECTOR),"focus"!==e.type||"-1"!==t.attr("tabindex")){for(var a={},l=_._COPY_SAFE_EVENT_PROPERTIES,p={},c=0;c<l.length;c++){var u=l[c],f=e[u];void 0===f||o.isFunction(f)||(p[u]=f)}a.event=o.Event(e,p),E.postOrderVisit(i,_._redistributeVisitCallback,a)}}else E.eatEvent(e)}}else this._assertEventSink()},_._redistributeVisitCallback=function(e,t){var i=E.getEvents(e),r=t.event;return i&&o.isFunction(i[u.EVENT.POPUP_AUTODISMISS])&&i[u.EVENT.POPUP_AUTODISMISS](r),E.VISIT_RESULT.ACCEPT},_._refreshCallback=function(e){isNaN(_._refreshTimerId)&&(_._refreshTimerId=window.setTimeout(function(){_._refreshTimerId=Number.NaN;var e=E.getDefaultLayer();o.isFunction(window.requestAnimationFrame)?_._afRequestId=window.requestAnimationFrame(function(){_._afRequestId=null,E.postOrderVisit(e,_._refreshVisitCallback)}):E.postOrderVisit(e,_._refreshVisitCallback)},_._REFRESH_DELAY))},_._refreshVisitCallback=function(e,t){if(t.level>0)return E.VISIT_RESULT.REJECT;var i=E.getEvents(e);return i&&o.isFunction(i[u.EVENT.POPUP_REFRESH])&&i[u.EVENT.POPUP_REFRESH](),E.VISIT_RESULT.ACCEPT},_.prototype.destroy=function(){_.superclass.destroy.call(this)},_._FOCUS_WITHIN_SELECTOR="oj-focus-within",_._REDISTRIBUTE_EVENTS=["focus","mousedown","keydown"],_._COPY_SAFE_EVENT_PROPERTIES=["altKey","bubbles","cancelable","ctrlKey","currentTarget","eventPhase","metaKey","relatedTarget","shiftKey","target","timeStamp","view","which","button","buttons","clientX","clientY","offsetX","offsetY","pageX","pageY","screenX","screenY","toElement","char","charCode","key","keyCode"],_._REFRESH_DELAY=10,t._registerLegacyNamespaceProp("ZOrderUtils",E),E.STATUS={UNKNOWN:0,BEFORE_OPEN:.5,OPENING:1,OPEN:2,BEFORE_CLOSE:2.5,CLOSING:3,CLOSE:4},E._STATUS_DATA="oj-popup-status",E.getStatus=function(e){e instanceof Element&&(e=o(e));var t=e.data(E._STATUS_DATA);return isNaN(t)?E.STATUS.UNKNOWN:t},E.setStatus=function(e,t){e instanceof Element&&(e=o(e)),t>E.STATUS.UNKNOWN&&t<=E.STATUS.CLOSE&&e.data(E._STATUS_DATA,t)},E.getFirstAncestorLayer=function(e){if(!e)return E.getDefaultLayer();for(var t=e;t&&t.length>0&&t.attr(E._SURROGATE_ATTR)!==E._DEFAULT_LAYER_ID;){if(E._hasSurrogate(t[0]))return t;t=t.parent()}return E.getDefaultLayer()},E.getDefaultLayer=function(){var e=o(document.getElementById(E._DEFAULT_LAYER_ID));return e.length>0||((e=o("<div>")).attr("role","presentation"),e.attr("id",E._DEFAULT_LAYER_ID),e.prependTo(o(document.body))),e},E.addToAncestorLayer=function(e,r,n,s,a,l){var p=e[0];if(E._hasSurrogate(p.parentNode))throw new Error("JET Popup is already open - id: "+p.getAttribute("id"));var c=E.getFirstAncestorLayer(a===u.LAYER_LEVEL.TOP_LEVEL?null:r),_=o("<div>"),f=e.attr("id");t.StringUtils.isEmptyOrUndefined(f)?_.uniqueId():_.attr("id",[f,"layer"].join("_")),_.attr("role","presentation"),_.addClass(s),e.after(_);const h=E._createSurrogate(_,l);i.subtreeDetached(p),e.appendTo(_),e.data(E._LAYER_ID_DATA,_.attr("id")),_.appendTo(c),i.subtreeAttached(p),E._applyVDomPatch(h[0],p),E.applyModality(_,n)},E._applyVDomPatch=function(e,t){e[s.OJ_POPUP]=t,s.patchPopupParent(e.parentElement)},E._getSurrogate=function(e){var t=e.attr(E._SURROGATE_ATTR);if(t)return document.getElementById(t)},E.applyEvents=function(e,t,r){r||(r=o(E._getSurrogate(e))),e.data(E._EVENTS_DATA,t),r.length>0&&t&&o.isFunction(t[u.EVENT.POPUP_REMOVE])&&i.setComponentOption(r[0],"beforeDestroy",t[u.EVENT.POPUP_REMOVE])},E.getEvents=function(e){return e.data(E._EVENTS_DATA)},E._createSurrogate=function(e,i){var r="script";i&&(r="oj-surrogate");var n=o(document.createElement(r)),s=e.attr("id");t.StringUtils.isEmptyOrUndefined(s)||n.attr("id",[s,"surrogate"].join("_")),i&&n.attr("data-oj-binding-provider","none"),n.insertBefore(e),i||n.ojSurrogate();var a=n.attr("id");return e.attr(E._SURROGATE_ATTR,a),n},E._removeSurrogate=function(e){var t=e.attr(E._SURROGATE_ATTR);e.removeAttr(E._SURROGATE_ATTR);var r=o(document.getElementById(t)),n=r.length>0;return n&&(e.insertAfter(r),i.setComponentOption(r[0],"beforeDestroy",null),r.remove()),n},E.getOpenPopupLayer=function(e){var t=e.parent();if(!t||0===t.length){var i=e.data(E._LAYER_ID_DATA);t=o(document.getElementById(i))}return t},E.removeFromAncestorLayer=function(e){var t=E.getOpenPopupLayer(e);E.preOrderVisit(t,E._closeDescendantPopupsCallback),E._removeOverlayFromAncestorLayer(t),t.removeData(E._EVENTS_DATA),t.removeData(E._MODALITY_DATA),e.removeData(E._LAYER_ID_DATA);var o=e[0];i.subtreeDetached(o),E._removeSurrogate(t)&&o&&o.parentElement?(n.unwrap(e,t),i.subtreeAttached(o)):t.remove()},E._closeDescendantPopupsCallback=function(e,t){if(t.level>0)return E.VISIT_RESULT.REJECT;var i=e.data(E._EVENTS_DATA);return i&&o.isFunction(i[u.EVENT.POPUP_CLOSE])&&i[u.EVENT.POPUP_CLOSE](),E.VISIT_RESULT.ACCEPT},E.applyModality=function(e,o){var i=e.data(E._MODALITY_DATA);e.data(E._MODALITY_DATA,o),t.StringUtils.isEmptyOrUndefined(i)?u.MODALITY.MODAL===o?E._addOverlayToAncestorLayer(e):E._removeOverlayFromAncestorLayer(e):i!==o&&(o!==i&&o===u.MODALITY.MODAL?E._addOverlayToAncestorLayer(e):E._removeOverlayFromAncestorLayer(e)),o===u.MODALITY.MODAL?e.attr("aria-modal","true"):e.removeAttr("aria-modal")},E.hasModalDialogOpen=function(){for(var e=E.getDefaultLayer().children(),t=e.length-1;t>-1;t--){if(o(e[t]).hasClass(E._OVERLAY_SELECTOR))return!0}return!1},E._addOverlayToAncestorLayer=function(e){var i=o("<div>");i.addClass(E._OVERLAY_SELECTOR),i.addClass(e[0].className),i.attr("role","presentation");var r=e.attr("id");t.StringUtils.isEmptyOrUndefined(r)?i.uniqueId():i.attr("id",[r,"overlay"].join("_")),e.before(i);var n=i.attr("id");e.attr(E._OVERLAY_ATTR,n)},E._removeOverlayFromAncestorLayer=function(e){var i=e.attr(E._OVERLAY_ATTR);t.StringUtils.isEmptyOrUndefined(i)||(e.removeAttr(E._OVERLAY_ATTR),o(document.getElementById(i)).remove())},E.VISIT_RESULT={ACCEPT:0,REJECT:1,COMPLETE:2},E._VISIT_TRAVERSAL={PRE_ORDER:0,POST_ORDER:1},E.postOrderVisit=function(e,t,o){var i=o;o||(i={}),i.level=0,i.type=E._VISIT_TRAVERSAL.POST_ORDER,E._visitTree(e,t,i)},E.preOrderVisit=function(e,t,o){var i=o;o||(i={}),i.level=0,i.type=E._VISIT_TRAVERSAL.PRE_ORDER,E._visitTree(e,t,i)},E._visitTree=function(e,t,i){for(var r=i.level,n=e.children(),s=n.length-1;s>-1;s--){var a=o(n[s]);if(E._hasSurrogate(a[0])){var l;if(i.type===E._VISIT_TRAVERSAL.PRE_ORDER){if((l=t(a,i))===E.VISIT_RESULT.COMPLETE)return l;if(l===E.VISIT_RESULT.REJECT)break}if(i.level=r+1,l=E._visitTree(a,t,i),i.level=r,l===E.VISIT_RESULT.COMPLETE)return l;if(i.type===E._VISIT_TRAVERSAL.POST_ORDER){if((l=t(a,i))===E.VISIT_RESULT.COMPLETE)return l;if(l===E.VISIT_RESULT.REJECT)break}}}return E.VISIT_RESULT.ACCEPT},E._hasSurrogate=function(e){return!(!e||1!==e.nodeType||!e.hasAttribute(E._SURROGATE_ATTR))},E.hasPopupsOpen=function(){return E.getDefaultLayer().children().length>0},E.getOpenPopupCount=function(){var e={popupCount:0},t=E.getDefaultLayer();return E.preOrderVisit(t,E._openPopupCountCallback,e),e.popupCount},E._openPopupCountCallback=function(e,t){return t.popupCount+=1,E.VISIT_RESULT.ACCEPT},E.findOpenPopups=function(){var e={},t=[];e.popups=t;var i=E.getDefaultLayer();return E.preOrderVisit(i,E._openPopupsCallback,e),t=e.popups,o(t)},E._openPopupsCallback=function(e,t){return t.popups.push(e[0]),E.VISIT_RESULT.ACCEPT},E.isAboveTopModalLayer=function(e){if(!e||!E.hasPopupsOpen())return!0;var t=function(){var e={topLayer:null},t=E.getDefaultLayer();if(E.preOrderVisit(t,function(e,t){if(t.level>0)return E.VISIT_RESULT.REJECT;var i=t.topLayer;return i?E.compareStackingContexts(o(e),o(i))>0&&(t.topLayer=e):t.topLayer=e,E.VISIT_RESULT.ACCEPT},e),e.topLayer)return e.topLayer[0]}();if(!t)return!0;var i=function(e){var t={topModalPopup:null};if(e.hasAttribute(E._OVERLAY_ATTR)&&(t.topModalPopup=o(e)),E.postOrderVisit(o(e),function(e,t){return e[0].hasAttribute(E._OVERLAY_ATTR)?(t.topModalPopup=e,E.VISIT_RESULT.COMPLETE):E.VISIT_RESULT.ACCEPT},t),t.topModalPopup)return t.topModalPopup[0]}(t);return!i||(n.isAncestorOrSelf(i,e)||E.compareStackingContexts(o(i),o(e))<0)},E.compareStackingContexts=function(e,i){function r(e,t){var i,r=["absolute","relative","fixed"],s=e.parents(),a=[];for(i=s.length-1;i>-1;i--)a.push(o(s[i]));(s=a).push(e);var l=[],p=0;for(i=0;i<s.length;i++){var c=s[i],u=c.css("position"),_=n.getCSSLengthAsFloat(c.css("opacity")),E=n.getCSSLengthAsInt(c.css("z-index")),f=o.inArray(c[0],c.parent().children());o.inArray(u,r)>-1&&E>0?(l.push({weight:[p,E,f],order:[f]}),p+=1):_<1?(l.push({weight:[p,1,f],order:[f]}),p+=1):t&&l.push({weight:[0,0,f],order:[f]})}return l}function s(e,t){for(var o=Math.max(e.length,t.length),i=0;i<o;i++){var r=i<e.length?e[i]:0,n=i<t.length?t[i]:0;if(r!==n)return r<n?-1:1}return 0}t.Assert.assertPrototype(e,o),t.Assert.assertPrototype(i,o);var a,l,p=r(e,!1),c=r(i,!1),u=Math.max(p.length,c.length);for(a=0;a<u;a++)if(0!==(l=s(a<p.length?p[a].weight:[-1],a<c.length?c[a].weight:[-1])))return l;for(p=r(e,!0),c=r(i,!0),u=Math.max(p.length,c.length),a=0;a<u;a++)if(0!==(l=s(a<p.length?p[a].order:[-1],a<c.length?c[a].order:[-1])))return l;return 0},E.eatEvent=function(e){e.stopPropagation(),e.preventDefault()},E.isPopupOpen=function(e){var t=e.parent();return!(!t||1!==t.length||!E._hasSurrogate(t[0]))},E._EVENTS_DATA="oj-popup-events",E._MODALITY_DATA="oj-popup-modality",E._DEFAULT_LAYER_ID="__oj_zorder_container",E._SURROGATE_ATTR="data-oj-surrogate-id",E._LAYER_ID_DATA="oj-popup-layer-id",E._OVERLAY_ATTR="data-oj-overlayid",E._OVERLAY_SELECTOR="oj-component-overlay";const f={};t._registerLegacyNamespaceProp("PositionUtils",f),f.normalizeHorizontalAlignment=function(e,i){for(var r=o.extend({},e),n=0;n<f._ALIGN_RULE_PROPERTIES.length;n++){var s=f._ALIGN_RULE_PROPERTIES[n],a=r[s];if(a)if(t.StringUtils.isString(a))r[s]=a.replace("start",i?"right":"left").replace("end",i?"left":"right").replace("<",i?"+":"-").replace(">",i?"-":"+");else for(var l=0;l<f._SUB_ALIGN_RULE_PROPERTIES.length;l++){var p=f._SUB_ALIGN_RULE_PROPERTIES[l],c=a[p];t.StringUtils.isString(c)&&(a[p]=c.replace("start",i?"right":"left").replace("end",i?"left":"right").replace("<",i?"+":"-").replace(">",i?"-":"+"))}}return r},f.normalizePositionOf=function(e,t,o){return"event"===e?o:null==e||"launcher"===e?t:e},f._normalizeEventForPosition=function(e){o.each(["pageX","pageY"],function(t,o){if(e&&void 0===e[o]&&e.originalEvent){var i,r=e.originalEvent,n=r.type;if(i="touchstart"===n||"touchmove"===n?"touches":"touchend"===n?"changedTouches":null){var s=r[i][0];s&&(e[o]=s[o])}}})},f._ALIGN_RULE_PROPERTIES=["my","at"],f._SUB_ALIGN_RULE_PROPERTIES=["vertical","horizontal"],f.isAligningPositionClipped=function(e){if(e.target&&e.target.height>0&&e.target.width>0){var t=e.target.element;return!f.isWithinViewport(t)}return!1},f.isWithinViewport=function(e){function t(e,t){var o;if(["hidden","scroll","auto"].indexOf(t.overflowY)>-1){if(e.bottom-t.top<-1)return!1;if(o="auto"===t.overflowX&&t.scrollWidth>t.innerWidth||"scroll"===t.overflowX?n.getScrollBarWidth():0,t.bottom-o-e.top<1)return!1}return!(["hidden","scroll","auto"].indexOf(t.overflowX)>-1&&(o="auto"===t.overflowY&&t.scrollHeight>t.innerHeight||"scroll"===t.overflowY?n.getScrollBarWidth():0,e.right-(t.left+("rtl"===n.getReadingDirection()?o:0))<-1||e.left-(t.right-("ltr"===n.getReadingDirection()?o:0))>-1))}function i(e){var t=e[0];if(1===t.nodeType){var i=o.extend({},t.getBoundingClientRect());return i.overflowX=e.css("overflow-x"),i.overflowY=e.css("overflow-y"),i.innerHeight=e.innerHeight(),i.innerWidth=e.innerWidth(),i.scrollHeight=t.scrollHeight,i.scrollWidth=t.scrollWidth,i}return{height:0,width:0}}function r(e){return["fixed","absolute","relative","sticky"].indexOf(e.css("position"))>-1&&(!isNaN(parseInt(e.css("top"),10))||!isNaN(parseInt(e.css("bottom"),10))||!isNaN(parseInt(e.css("left"),10))||!isNaN(parseInt(e.css("right"),10)))}if(!e)return!1;if(o.isWindow(e[0])||r(e))return!0;for(var s,a=i(e),l=!0,p=e.parent();l&&p&&p.length>0&&"BODY"!==p[0].nodeName&&1===p[0].nodeType&&!r(p);){if("visible"!==(s=p).css("overflow-x")||"visible"!==s.css("overflow-y")){var c=i(p);c.height>0&&c.width>0&&(l=t(a,c))}p=p.parent()}return l},f._ANIMATION_TRANSFORM_ORIGIN_RULES={"right-top":"right top","right-middle":"right center","right-bottom":"right bottom","left-top":"left top","left-middle":"left center","left-bottom":"left bottom","center-top":"center top","center-middle":"center center","center-bottom":"center bottom"},f._ALIGN_MNEMONIC_DATA="oj-popup-align-mnemonic",f.captureTransformOriginAnimationEffectsOption=function(e,t){var o=[t.horizontal,t.vertical].join("-");e.data(f._ALIGN_MNEMONIC_DATA,o)},f.addTransformOriginAnimationEffectsOption=function(e,o){var i,r;t.StringUtils.isString(o)?(r=!0,i=o):(r=!1,i=JSON.stringify(o));var n=/#myPosition/g;if(i.match(n)){var s=e.data(f._ALIGN_MNEMONIC_DATA);t.StringUtils.isEmptyOrUndefined(s)&&(s="center-middle");var a=f._ANIMATION_TRANSFORM_ORIGIN_RULES[s];i=i.replace(n,a),o=r?i:JSON.parse(i)}return o},f._JQUI_MNEMONIC_GRP_REGX=/^(\w+)(\+|-)?(\d+)?/,f._VERTICAL_ENUM_TST_REGX=/^top$|^center$|^bottom$/,f._HORIZONTAL_ENUM_TST_REGX=/^start$|^left$|^center$|^end$|^right$/,f._COLLISION_ENUM_TST_REGX=/^none$|^flip$|^flipfit$|^fit$|^flipcenter$/,f._parsePositionNmnemonic=function(e,t){var o=[null,Number.NaN],i=f._JQUI_MNEMONIC_GRP_REGX.exec(e);if(i[1]&&t.test(i[1])&&(o[0]=i[1],i[2])){var r=parseInt(i[3],10);isNaN(r)||(r*="-"===i[2]?-1:1,o[1]=r)}return o},f._parseJSON=function(e){if(t.StringUtils.isString(e)&&/^{/.test(e)&&/}$/.test(e))try{return JSON.parse(e)}catch(e){}return null},f._coerceMyAtToJet=function(e,i,r,s){var a=f._parseJSON(i);a&&(i=a),(a=f._parseJSON(r))&&(r=a),s||(s={});var l,p=o.extend({},s),c={x:0,y:0};if(r&&"x"in r&&"y"in r&&(c.x=n.getCSSLengthAsInt(r.x),c.y=n.getCSSLengthAsInt(r.y)),t.StringUtils.isString(i)){var u=i.split(/\s/);u.length>0&&!t.StringUtils.isEmpty(u[0])&&(l=f._parsePositionNmnemonic(u[0],f._HORIZONTAL_ENUM_TST_REGX))[0]&&(p.horizontal=l[0],isNaN(l[1])||(c.x=l[1])),u.length>1&&!t.StringUtils.isEmpty(u[1])&&(l=f._parsePositionNmnemonic(u[1],f._VERTICAL_ENUM_TST_REGX))[0]&&(p.vertical=l[0],isNaN(l[1])||(c.y=l[1]))}else i&&("horizontal"in i&&(l=f._parsePositionNmnemonic(i.horizontal,f._HORIZONTAL_ENUM_TST_REGX))[0]&&(p.horizontal=l[0],isNaN(l[1])||(c.x=l[1])),"vertical"in i&&(l=f._parsePositionNmnemonic(i.vertical,f._VERTICAL_ENUM_TST_REGX))[0]&&(p.vertical=l[0],isNaN(l[1])||(c.y=l[1])));var _={};return _[e]=p,_.offset=c,_},f._coerceCollisionToJet=function(e,t){var o=t;return f._COLLISION_ENUM_TST_REGX.test(e)&&(o=e),{collision:o}},f._coerceOfToJet=function(e,i){var r=f._parseJSON(e);r&&(e=r);var s=i;if(t.StringUtils.isString(e))s=e;else if(o.isWindow(e))s="window";else if(e instanceof Element||e instanceof o){(e=o(e)).uniqueId(),s="#"+function(e){for(var t=[],o=/\w|_|-/,i=0;i<e.length;i++){var r=e.substring(i,i+1);o.test(r)?t.push(r):t.push("\\"+r)}return t.join("")}(e.attr("id"))}else e instanceof Event||e instanceof o.Event?("pageX"in e||"pageY"in e)&&((s={}).x=n.getCSSLengthAsFloat(e.pageX),s.y=n.getCSSLengthAsFloat(e.pageY)):e&&("x"in e||"y"in e)&&((s={}).x=n.getCSSLengthAsFloat(e.x),s.y=n.getCSSLengthAsFloat(e.y));return{of:s}},f.coerceToJet=function(e,t){e||(e={});var i=f._parseJSON(e);i&&(e=i),t||(t={});var r=t.my,n=t.at,s=t.collision,a=t.of,l=f._coerceMyAtToJet("my",e.my,e.offset,r),p=f._coerceMyAtToJet("at",e.at,null,n),c={offset:{x:l.offset.x+p.offset.x,y:l.offset.y+p.offset.y}};return delete l.offset,delete p.offset,o.extend({},l,p,c,f._coerceCollisionToJet(e.collision,s),f._coerceOfToJet(e.of,a),function(e,t){return{using:o.isFunction(e)?e:t}}(e.using,void 0))},f.coerceToJqUi=function(e){function i(t,o){var i=[];if(e[t][o]?i.push(e[t][o]):i.push("center"),"my"===t&&e.offset){var r="horizontal"===o?"x":"y",n=e.offset[r];isNaN(n)||0===n||(i.push(n>0?"+":""),i.push(Math.floor(n).toString()))}return i.join("")}var r={};["my","at"].forEach(function(t){if(e[t]){var o=[];o.push(i(t,"horizontal")),o.push(" "),o.push(i(t,"vertical")),r[t]=o.join("")}});var n=e.of;if(t.StringUtils.isString(n))r.of="window"===n?window:n;else if(n&&!t.StringUtils.isString(n)&&"x"in n&&"y"in n){var s=n.x,a=n.y,l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,1,s,a,s,a,!1,!1,!1,!1,0,null),r.of=o.Event(l,{pageX:s,pageY:a})}else r.of=n;return e.collision&&(r.collision=e.collision),e.using&&(r.using=e.using),r},f.calcAvailablePopupSize=function(e,t,i){var r,s,a,l,p=o.position.getWithinInfo(i||window),c=o.position.getScrollInfo(p),u="rtl"===n.getReadingDirection(),_=u?c.width:0,E=u?0:c.width,f=t.element,h=t.target,d=p.isWindow?p.scrollLeft:0,T=p.isWindow?p.scrollTop:0,v=f.left,O=f.left+f.width,g=f.top,S=f.top+f.height,P=h.left,A=h.left+h.width,m=h.top,y=h.top+h.height,R=p.offset.left+d+_,L=p.offset.left+p.width+d-E,I=p.offset.top+T,N=p.offset.top+p.height+T-c.height;return v<P?(r=R,s=O<=P?P:O<=A?Math.min(A,L):L):v===P?P-R>L-A?(r=R,s=A):(r=P,s=L):v<A?(r=P,s=O<=A?A:L):(r=A,s=L),g<m?(a=I,l=S<=m?m:S<=y?Math.min(y,N):N):g===m?(a=m,l=N):g<y?(a=m,l=S<=y?y:N):(a=y,l=N),{width:s-r,height:l-a}},o.ui.position.flipcenter={left:function(e,t){var i=e.left;o.ui.position.flip.left.call(this,e,t);var r=t.within,s=r.isWindow?r.scrollLeft:r.offset.left,a=r.width,l=e.left-t.collisionPosition.marginLeft,p=s-l,c=l+t.collisionWidth-a-s;(p>0||c>0)&&("right"===t.at[0]?i-=t.targetWidth/2:"left"===t.at[0]&&(i+=t.targetWidth/2),i-=("rtl"===n.getReadingDirection()?-1:1)*(t.elemWidth/2),e.left=Math.max(0,i))},top:function(e,t){var i=e.top;o.ui.position.flip.top.call(this,e,t);var r=t.within,n=r.isWindow?r.scrollTop:r.offset.top,s=t.within.height,a=e.top-t.collisionPosition.marginTop,l=n-a,p=a+t.collisionHeight-s-n;(l>0||p>0)&&("top"===t.at[1]?i+=t.targetHeight/2:"bottom"===t.at[1]&&(i-=t.targetHeight/2),i+=t.elemHeight/2,e.top=Math.max(0,i))}};var h,d=o.ui.position.flip.left;o.ui.position.flip={left:d.bind(null),top:function(e,t){var o,i,r=t.within,n=r.offset.top+r.scrollTop,s=r.height,a=r.isWindow?r.scrollTop:r.offset.top,l=e.top-t.collisionPosition.marginTop,p=l-a,c=l+t.collisionHeight-s-a;o="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,i="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0;var u,_,E=-2*t.offset[1];p<0?((u=e.top+o+i+E+t.collisionHeight-s-n)<0||u<Math.abs(p))&&c<0&&p>c&&(e.top+=o+i+E):c>0&&((_=e.top-t.collisionPosition.marginTop+o+i+E-a)>0||Math.abs(_)<c)&&(e.top+=o+i+E)}},o.ui.position.fit={left:function(e,t){var o,i=t.within,r=i.isWindow?i.scrollLeft:i.offset.left,n=i.width,s=e.left-t.collisionPosition.marginLeft,a=r-s,l=s+t.collisionWidth-n-r;t.collisionWidth>n?a>0&&l<=0?(o=e.left+a+t.collisionWidth-n-r,e.left+=a-o):e.left=l>0&&a<=0?r:a>l?r+n-t.collisionWidth:r:a>0?e.left+=a:l>0?e.left-=l:e.left=Math.max(e.left-s,e.left),e.left<0&&(e.left=0)},top:function(e,t){var o,i=t.within,r=i.isWindow?i.scrollTop:i.offset.top,n=t.within.height,s=e.top-t.collisionPosition.marginTop,a=r-s,l=s+t.collisionHeight-n-r;t.collisionHeight>n?a>0&&l<=0?(o=e.top+a+t.collisionHeight-n-r,e.top+=a-o):e.top=l>0&&a<=0?r:a>l?r+n-t.collisionHeight:r:a>0?e.top+=a:l>0?e.top-=l:e.top=Math.max(e.top-s,e.top),e.top<0&&(e.top=0)}};var T=o.position.getWithinInfo;o.position={getWithinInfo:T.bind(null),scrollbarWidth:function(){if(void 0!==h)return h;var e,t,i=document.createElement("div");i.style.display="block",i.style.position="absolute",i.style.width="50px",i.style.height="50px",i.style.overflow="hidden";var r=document.createElement("div");return r.style.height="100px",r.style.width="auto",i.appendChild(r),o("body").append(o(i)),e=r.offsetWidth,i.style.overflow="scroll",e===(t=r.offsetWidth)&&(t=i.clientWidth),o(i).remove(),h=e-t},getScrollInfo:function(e){var t=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),i=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),r="scroll"===t||"auto"===t&&e.width<e.element[0].scrollWidth;return{width:"scroll"===i||"auto"===i&&e.height<e.element[0].scrollHeight?o.position.scrollbarWidth():0,height:r?o.position.scrollbarWidth():0}}};const v=function(){this.Init()};t._registerLegacyNamespaceProp("PopupLiveRegion",v),t.Object.createSubclass(v,t.Object,"oj.PopupLiveRegion"),v.prototype.Init=function(){v.superclass.Init.call(this),isNaN(v._refCounter)?v._refCounter=1:v._refCounter+=1},v.prototype.destroy=function(){if(!isNaN(v._refCounter)&&(v._refCounter-=1)<1){var e=o(document.getElementById(v._POPUP_LIVE_REGION_ID));e.length>0&&e.remove()}},v.prototype.announce=function(e){if(!t.StringUtils.isEmpty(e)){var i=v._getLiveRegion();i.children().remove(),setTimeout(function(){o("<div>").text(e).appendTo(i)},20)}},v._getLiveRegion=function(){var e=o(document.getElementById(v._POPUP_LIVE_REGION_ID));return 0===e.length&&((e=o("<div>")).attr({id:v._POPUP_LIVE_REGION_ID,role:"log","aria-live":"polite","aria-relevant":"additions"}),e.addClass("oj-helper-hidden-accessible"),e.appendTo(document.body)),e},v._POPUP_LIVE_REGION_ID="__oj_popup_arialiveregion";const O=function(e,i,r,n,s){t.Assert.assertPrototype(e,o),t.Assert.assertString(i),t.Assert.assertFunction(r),t.Assert.assertStringOrNull(n),this._options={insertBefore:!1,preventKeyEvents:!0},s&&(this._options=Object.assign({},this._options,s)),this._sibling=e,this._message=i,this._callback=r,this._id=n,this.Init()};t._registerLegacyNamespaceProp("PopupSkipLink",O),t.Object.createSubclass(O,t.Object,"oj.PopupSkipLink"),O.prototype.Init=function(){O.superclass.Init.call(this);var e=this._sibling,t=this._callback,i=this._message,r=this._options.insertBefore,n=this._options.preventKeyEvents;this._message=null;var s=this._id;this._id=null;var a=o(document.getElementById(s));a.length<1&&(a=o("<a>").attr({tabindex:"-1",href:"#",role:"link"})),a.attr("id",s),a.addClass("oj-helper-hidden-accessible"),a.text(i),r?a.insertBefore(e):a.insertAfter(e),a.on("click",O._activateHandler.bind(this,t)),n&&a.on("keydown keyup keypress",O._keyHandler),e.data(O._SKIPLINK_ATTR,a)},O._activateHandler=function(e,t){E.eatEvent(t),window.setImmediate(e)},O._keyHandler=function(e){e.keyCode===o.ui.keyCode.ENTER&&E.eatEvent(e)},O.prototype.destroy=function(){var e=this._sibling;if(delete this._sibling,delete this._callback,e){var t=e.data(O._SKIPLINK_ATTR);e.removeData(O._SKIPLINK_ATTR),t&&(t.off("click keydown keyup keypress"),t.remove())}},O.prototype.getLink=function(){var e,t=this._sibling;return t&&(e=t.data(O._SKIPLINK_ATTR)),e},O._SKIPLINK_ATTR="oj-skiplink";const g=function(e,t,o,i){this._element=e,this._operation=t,this._widgetName=o,this._isCustomElement=!!i,this.Init()};t._registerLegacyNamespaceProp("PopupWhenReadyMediator",g),t.Object.createSubclass(g,t.Object,"oj.PopupWhenReadyMediator"),g.prototype.Init=function(){g.superclass.Init.call(this),this._resolvedQueue=[],this._callback=this._eventHandler.bind(this);var e=this._operation,t=["oj"];this._isCustomElement?(t.push(e.charAt(0).toUpperCase()),t.push(e.slice(1))):t.push(e);var o=t.join("");this._eventType=o,this._element.on(o,this._callback);var i=l.getContext(this._element[0]).getBusyContext(),r={description:this._getBusyStateDescription.bind(this,this._element,this._operation,this._widgetName)},n=i.addBusyState(r);this.AddPromiseExecutor(n),this._whenReadyPromise=new Promise(this.AddPromiseExecutor.bind(this))},g.prototype._getBusyStateDescription=function(e,t,o){return o+" identified by '"+e.attr("id")+"' is busy animating on the '"+t+"' operation."},g.prototype._deliverResolved=function(e){var t=this._resolvedQueue;this._resolvedQueue=null;var o=e||this._operation;this._operation=null;for(var i=0;i<t.length;i++)try{t[i](o)}catch(e){r.error("Error resolving whenReady promises:\n%o",e)}this._whenReadyPromise=Promise.resolve("none")},g.prototype.destroy=function(){if(this._resolvedQueue&&this._deliverResolved("none"),this._callback){var e=this._eventType;this._element.off(e,this._callback)}this._callback=null,this._element=null,this._operation=null,this._whenReadyPromise=null,this._widgetName=null,this._eventType=null},g.prototype.getWhenReadyPromise=function(){return this._whenReadyPromise},g.prototype._eventHandler=function(e){e.target===this._element[0]&&(this._element.off(e.type,this._callback),this._deliverResolved(),this._callback=null)},g.prototype._getPendingOperation=function(){return this._operation?this._operation:"none"},g.prototype.AddPromiseExecutor=function(e,t){this._resolvedQueue&&this._resolvedQueue.push(e)},g.prototype.isOperationPending=function(e,t,o,i){var n=!1,s=this._widgetName,a=this._getPendingOperation();if(t===a)r.info("An %s instance invoked a '%s' operation while pending animation of the same type of operation.  The second request will be ignored.",s,t),n=!0;else if("none"!==a){r.info("An %s instance invoked a '%s' operation while pending animation of a '%s' operation. The second request will be invoked after the pending operation completes.",s,t,a),new Promise(this.AddPromiseExecutor.bind(this)).then(function(){this[o].apply(this,i)}.bind(e)),n=!0}return n};class S extends p.Component{constructor(){super(...arguments),this._setRootRef=e=>{this._rootRef=e}}render(e){return p.h("div",{style:{display:"none"},ref:this._setRootRef},e.children)}componentDidMount(){this._popup=o(this._rootRef.firstChild);const e={[u.OPTION.POPUP]:this._popup,[u.OPTION.EVENTS]:{[u.EVENT.POPUP_AUTODISMISS]:this.props.autoDismiss,[u.EVENT.POPUP_REFRESH]:function(){this._popup.position(this._getPosition())}.bind(this)},[u.OPTION.LAYER_SELECTORS]:this.props.layerSelectors,[u.OPTION.CUSTOM_ELEMENT]:!0,[u.OPTION.LAUNCHER]:o(this._rootRef),[u.OPTION.POSITION]:this._getPosition()};u.getInstance().open(e)}componentWillUnmount(){u.getInstance().close({[u.OPTION.POPUP]:this._popup})}componentDidUpdate(){this._popup.position(this._getPosition())}_getPosition(){return f.normalizeHorizontalAlignment(this.props.position,"rtl"===n.getReadingDirection())}}S.defaultProps={autoDismiss:null,layerSelectors:"",position:{}},e.PopupLiveRegion=v,e.PopupService=u,e.PopupSkipLink=O,e.PopupWhenReadyMediator=g,e.PositionUtils=f,e.VPopup=S,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojpopupcore.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojoffcanvas',["exports","ojs/ojcore-base","jquery","hammerjs","ojs/ojcontext","ojs/ojthemeutils","ojs/ojcomponentcore","ojs/ojlogger","ojs/ojdomutils","ojs/ojfocusutils","ojs/ojjquery-hammer","ojs/ojpopupcore"],function(e,t,a,r,n,o,s,_,i,E,l,u){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,E=E&&Object.prototype.hasOwnProperty.call(E,"default")?E.default:E;const T={};t._registerLegacyNamespaceProp("OffcanvasUtils",T),T._DATA_EDGE_KEY="oj-offcanvasEdge",T._DATA_OFFCANVAS_KEY="oj-offcanvas",T._DATA_MEDIA_QUERY_KEY="oj-mediaQueryListener",T._DATA_HAMMER_KEY="oj-offcanvasHammer",T.SELECTOR_KEY="selector",T.CONTENT_KEY="content",T.EDGE_START="start",T.EDGE_END="end",T.EDGE_TOP="top",T.EDGE_BOTTOM="bottom",T.DISPLAY_MODE_KEY="displayMode",T.DISPLAY_MODE_PUSH="push",T.DISPLAY_MODE_OVERLAY="overlay",T.DISPLAY_MODE_REFLOW="reflow",T.MODALITY_KEY="modality",T.MODALITY_NONE="none",T.MODALITY_MODAL="modal",T.DISMISS_HANDLER_KEY="_dismissHandler",T.OPEN_PROMISE_KEY="_openPromise",T.CLOSE_PROMISE_KEY="_closePromise",T.GLASS_PANE_KEY="_glassPane",T.SURROGATE_KEY="_surrogate",T.ANIMATE_WRAPPER_KEY="_animateWrapper",T.ANIMATE_KEY="_animate",T.SURROGATE_ATTR="data-oj-offcanvas-surrogate-id",T.OUTER_WRAPPER_SELECTOR="oj-offcanvas-outer-wrapper",T.OPEN_SELECTOR="oj-offcanvas-open",T.TRANSITION_SELECTOR="oj-offcanvas-transition",T.REFLOW_WRAPPER_SELECTOR="oj-offcanvas-pin",T.REFLOW_TRANSITION_SELECTOR="oj-offcanvas-pin-transition",T.GLASSPANE_SELECTOR="oj-offcanvas-glasspane",T.GLASSPANE_DIM_SELECTOR="oj-offcanvas-glasspane-dim",T.VETO_BEFOREOPEN_MSG="ojbeforeopen veto",T.VETO_BEFORECLOSE_MSG="ojbeforeclose veto",T._shiftSelector={start:"oj-offcanvas-shift-start",end:"oj-offcanvas-shift-end",top:"oj-offcanvas-shift-down",bottom:"oj-offcanvas-shift-up"},T._drawerSelector={start:"oj-offcanvas-start",end:"oj-offcanvas-end",top:"oj-offcanvas-top",bottom:"oj-offcanvas-bottom"},T._getDisplayMode=function(e){var t=e[T.DISPLAY_MODE_KEY];return t!==T.DISPLAY_MODE_OVERLAY&&t!==T.DISPLAY_MODE_PUSH&&t!==T.DISPLAY_MODE_REFLOW&&(t=o.getCachedCSSVarValues(["--oj-private-off-canvas-global-display-mode-default"])[0]),t},T._getDrawer=function(e){return a(e[T.SELECTOR_KEY])},T._isModal=function(e){return e[T.MODALITY_KEY]===T.MODALITY_MODAL},T._isOpen=function(e){return e.hasClass(T.OPEN_SELECTOR)},T._getOuterWrapper=function(e){return e.closest("."+T.OUTER_WRAPPER_SELECTOR)},T._getAnimateWrapper=function(e){var t=T._getDrawer(e);return T._noInnerWrapper(e)||e[T.DISPLAY_MODE_KEY]===T.DISPLAY_MODE_OVERLAY?t:e[T.ANIMATE_WRAPPER_KEY]?t.closest("."+e[T.ANIMATE_WRAPPER_KEY]):t.parent()},T._getShiftSelector=function(e){var t=T._shiftSelector[e];if(!t)throw new Error("Invalid edge: "+e);return t},T._isRTL=function(){return"rtl"===i.getReadingDirection()},T._setTransform=function(e,t){e.css({"-webkit-transform":t,transform:t})},T._getTranslationX=function(e,t,a){var r=e===T.EDGE_END;return(T._isRTL()||a)&&(r=!r),"translate3d("+(r?"-":"")+t+", 0, 0)"},T._setTranslationX=function(e,t,a){T._setTransform(e,T._getTranslationX(t,a,!1))},T._getTranslationY=function(e,t){return"translate3d(0, "+(e===T.EDGE_BOTTOM?"-":"")+t+", 0)"},T._setTranslationY=function(e,t,a){T._setTransform(e,T._getTranslationY(t,a))},T._getTranslationY2=function(e,t){return"translate3d(0, "+(t?"-":"")+e+", 0)"},T._setAnimateClass=function(e,t,a,r,n){t.addClass(T.TRANSITION_SELECTOR),T._setTransform(t,r),a.addClass(T.TRANSITION_SELECTOR),T._setTransform(a,n)},T._saveEdge=function(e){var t=e.edge,r=T._getDrawer(e);return t&&t.length||(t=r.hasClass("oj-offcanvas-start")?T.EDGE_START:r.hasClass("oj-offcanvas-end")?T.EDGE_END:r.hasClass("oj-offcanvas-top")?T.EDGE_TOP:r.hasClass("oj-offcanvas-bottom")?T.EDGE_BOTTOM:T.EDGE_START),a.data(r[0],T._DATA_EDGE_KEY,t),t},T._getEdge=function(e){return a.data(e[0],T._DATA_EDGE_KEY)},T._toggleClass=function(e,t,a){var r=e[T.DISPLAY_MODE_KEY],n=T._getDrawer(e),o=T.OPEN_SELECTOR,s=r===T.DISPLAY_MODE_OVERLAY?T.TRANSITION_SELECTOR+" oj-offcanvas-overlay":T.TRANSITION_SELECTOR;if(a)n.addClass(o),void 0===e[T.ANIMATE_KEY]&&t.addClass(s);else{e.makeFocusable&&i.makeFocusable({element:n,remove:!0});var _=e.tabindex;void 0===_?n.removeAttr("tabindex"):n.attr("tabindex",_),n.removeClass(o),t.removeClass(s)}},T._setFocus=function(e){var t,a=e,r=T._getDrawer(a),n=r.find("[autofocus]");if(0===n.length&&(n=r.find(":tabbable")),0===n.length){var o=r.attr("tabindex");void 0!==o&&(a.tabindex=o),r.attr("tabindex","-1"),t=r,i.makeFocusable({element:r,applyHighlight:!0}),a.makeFocusable=!0}else t=n[0];E.focusElement(t)},T._isAutoDismiss=function(e){return"none"!==e.autoDismiss},T._calcTransitionTime=function(e){for(var t=e.css("transitionProperty").split(","),a=e.css("transitionDelay").split(","),r=e.css("transitionDuration").split(","),n=0,o=0;o<t.length;o++){var s=r[o%r.length],_=s.indexOf("ms")>-1?parseFloat(s):1e3*parseFloat(s);if(_>0){var i=a[o%a.length],E=i.indexOf("ms")>-1?parseFloat(i):1e3*parseFloat(i);n=Math.max(n,E+_)}}return n+100},T._onTransitionEnd=function(e,t){var a,r="transitionend.oc webkitTransitionEnd.oc",n=function(){a&&(clearTimeout(a),a=null),e.off(r,n),t(e)};e.on(r,n),a=setTimeout(n,T._calcTransitionTime(e))},T._closeWithCatch=function(e){T.close(e).catch(function(e){_.warn("Offcancas close failed: "+e)})},T._registerCloseHandler=function(e){var r=e;if(T._unregisterCloseHandler(r),T._isAutoDismiss(r)){var n=T._getDrawer(r),o=function(e){var o=e.target;i.isChromeEvent(e)||"focus"===e.type&&!a(o).is(":focusable")||(null!=a.data(n[0],T._DATA_OFFCANVAS_KEY)?t.ZOrderUtils.hasModalDialogOpen()||i.isLogicalAncestorOrSelf(n[0],o)||T._closeWithCatch(r):T._unregisterCloseHandler(r))};r[T.DISMISS_HANDLER_KEY]=o;var s=document.documentElement;i.isTouchSupported()&&s.addEventListener("touchstart",o,{passive:!0,capture:!0}),s.addEventListener("mousedown",o,!0),s.addEventListener("focus",o,!0)}T._registerSwipeHandler(r)},T._unregisterCloseHandler=function(e){var t=e,a=t[T.DISMISS_HANDLER_KEY];if(a){var r=document.documentElement;i.isTouchSupported()&&r.removeEventListener("touchstart",a,{passive:!0,capture:!0}),r.removeEventListener("mousedown",a,!0),r.removeEventListener("focus",a,!0),delete t[T.DISMISS_HANDLER_KEY],t[T.DISMISS_HANDLER_KEY]=null}T._unregisterSwipeHandler(t)},T._registerSwipeHandler=function(e){if(i.isTouchSupported()){var t,n,o,s=e,_=s[T.SELECTOR_KEY],E=a(_),l=T._getEdge(E);l===T.EDGE_START&&!T._isRTL()||l===T.EDGE_END&&T._isRTL()?(n={recognizers:[[r.Swipe,{direction:r.DIRECTION_LEFT}]]},t="swipeleft"):l===T.EDGE_START&&T._isRTL()||l===T.EDGE_END&&!T._isRTL()?(n={recognizers:[[r.Swipe,{direction:r.DIRECTION_RIGHT}]]},t="swiperight"):l===T.EDGE_TOP?(n={recognizers:[[r.Swipe,{direction:r.DIRECTION_UP}]]},t="swipeup"):l===T.EDGE_BOTTOM&&(n={recognizers:[[r.Swipe,{direction:r.DIRECTION_DOWN}]]},t="swipedown"),o=E.ojHammer(n).on(t,function(e){e.target===E[0]&&(e.preventDefault(),T._closeWithCatch(s))}),a.data(a(_)[0],T._DATA_HAMMER_KEY,{event:t,hammer:o})}},T._unregisterSwipeHandler=function(e){var t=T._getDrawer(e);if(t.length>0){var r=a.data(t[0],T._DATA_HAMMER_KEY);r&&r.hammer.off(r.event)}},T._isFixed=function(e){return T._getOuterWrapper(e).hasClass("oj-offcanvas-page")},T._isReflow=function(e){return e[T.DISPLAY_MODE_KEY]===T.DISPLAY_MODE_REFLOW},T._noInnerWrapper=function(e){return e[T.CONTENT_KEY]||T._isFixed(T._getDrawer(e))||T._isReflow(e)},T._toggleOuterWrapper=function(e,r,n){var o=T._getEdge(r),s=T._getShiftSelector(o),_=T._getOuterWrapper(r);t.Assert.assertPrototype(_,a);var i=_.hasClass(s);return n||_.toggleClass(s,!i),i},T._afterCloseHandler=function(e){var t=T._getAnimateWrapper(e);if(""===t.get(0).style.transform){T._unregisterCloseHandler(e);var r=T._getDrawer(e),n=T._isReflow(e),o=null;try{o=a.data(r[0],T._DATA_OFFCANVAS_KEY)}catch(e){}o===e&&(n?r.removeClass(T.OPEN_SELECTOR+" "+T.REFLOW_TRANSITION_SELECTOR):T._toggleClass(e,t,!1),T._removeModality(e),n&&T._getOuterWrapper(r).removeClass(T.REFLOW_WRAPPER_SELECTOR),r.trigger("ojclose",e),a.removeData(r[0],T._DATA_OFFCANVAS_KEY))}},T._setVisible=function(e,t,r){var n=a(e),o=!!t;o&&T._isOpen(n)&&T._close(e,!1),n.toggleClass(T._drawerSelector[r],!o)},T.setupResponsive=function(e){var t=e.query;if(null!==t){var r=e[T.SELECTOR_KEY],n=window.matchMedia(t),o=T._saveEdge(e),s=function(e){T._setVisible(r,e.matches,o)};n.addListener(s),T._setVisible(r,n.matches,o),a.data(a(r)[0],T._DATA_MEDIA_QUERY_KEY,{mqList:n,mqListener:s})}},T.tearDownResponsive=function(e){var t=T._getDrawer(e),r=a.data(t[0],T._DATA_MEDIA_QUERY_KEY);r&&(r.mqList.removeListener(r.mqListener),a.removeData(t[0],T._DATA_MEDIA_QUERY_KEY))},T._openPush=function(e,r,n,o){var s=T._getDrawer(e),_=a(e[T.CONTENT_KEY]);t.Assert.assertPrototype(_,a);var i,E=!0,l=e.size,u=function(t){t.removeClass(T.TRANSITION_SELECTOR),E?E=!1:(o!==T.EDGE_END&&o!==T.EDGE_BOTTOM||T._setFocus(e),s.trigger("ojopen",e),T._registerCloseHandler(e),r(!0))};s.addClass(T.OPEN_SELECTOR),window.setTimeout(function(){o===T.EDGE_START||o===T.EDGE_END?(void 0===l&&(l=s.outerWidth(!0)+"px"),i=T._getTranslationX(o,l,!1)):(void 0===l&&(l=s.outerHeight(!0)+"px"),T._setTransform(s,T._getTranslationY2(l,o===T.EDGE_TOP)),i=T._getTranslationY2(l,o!==T.EDGE_TOP)),window.setTimeout(function(){T._setAnimateClass(e,s,_,"translate3d(0, 0, 0)",i),T._toggleOuterWrapper(e,s,!1),T._onTransitionEnd(_,u),T._onTransitionEnd(s,u)},0)},0),T._applyModality(e,s),o!==T.EDGE_START&&o!==T.EDGE_TOP||T._setFocus(e)},T._openOverlay=function(e,t,a,r){var n=T._getDrawer(e);T._toggleClass(e,n,!0);var o=e.size;o&&(r===T.EDGE_START||r===T.EDGE_END?T._setTransform(n,T._getTranslationX(r,o,!0)):T._setTransform(n,T._getTranslationY(r,o))),window.setTimeout(function(){T._toggleOuterWrapper(e,n,!1)},20),T._applyModality(e,n),r!==T.EDGE_START&&r!==T.EDGE_TOP||T._setFocus(e),T._onTransitionEnd(n,function(){n.removeClass(T.TRANSITION_SELECTOR),r!==T.EDGE_END&&r!==T.EDGE_BOTTOM||T._setFocus(e),n.trigger("ojopen",e),T._registerCloseHandler(e),t(!0)})},T._closePush=function(e,t,r,n,o){var s=a(e[T.CONTENT_KEY]),_=!0,i=function(){_||(s.removeClass(T.TRANSITION_SELECTOR),T._setTransform(s,""),T._afterCloseHandler(e),t(!0)),_=!1};T._setTransform(n,""),T._setTransform(s,""),T._toggleOuterWrapper(e,n,!1),T._isModal(e)&&e[T.GLASS_PANE_KEY].removeClass(T.GLASSPANE_DIM_SELECTOR),o?(s.addClass(T.TRANSITION_SELECTOR),n.addClass(T.TRANSITION_SELECTOR),T._onTransitionEnd(n,i),T._onTransitionEnd(s,i)):(_=!1,i())},T._closeOverlay=function(e,t,a,r,n){var o=function(){T._afterCloseHandler(e),t(!0)};T._toggleOuterWrapper(e,r,!1),T._isModal(e)&&e[T.GLASS_PANE_KEY].removeClass(T.GLASSPANE_DIM_SELECTOR),n?(r.addClass(T.TRANSITION_SELECTOR),T._onTransitionEnd(r,o)):o()},T._openOldDrawer=function(e,r,n,o,s){var _,i=T._getDrawer(e),E=T._getAnimateWrapper(e);t.Assert.assertPrototype(E,a),T._toggleClass(e,E,!0),o===T.EDGE_START||o===T.EDGE_END?(_=i.outerWidth(!0)+"px",s===T.DISPLAY_MODE_PUSH&&T._setTranslationX(E,o,_)):(_=i.outerHeight(!0)+"px",s===T.DISPLAY_MODE_PUSH&&T._setTranslationY(E,o,_)),window.setTimeout(function(){T._toggleOuterWrapper(e,i,!1)},10),T._applyModality(e,i),o!==T.EDGE_START&&o!==T.EDGE_TOP||T._setFocus(e),T._onTransitionEnd(E,function(){E.removeClass(T.TRANSITION_SELECTOR),o!==T.EDGE_END&&o!==T.EDGE_BOTTOM||T._setFocus(e),i.trigger("ojopen",e),T._registerCloseHandler(e),r(!0)})},T._closeOldDrawer=function(e,t,a,r,n){var o=e[T.DISPLAY_MODE_KEY],s=T._getAnimateWrapper(e),_=function(){T._afterCloseHandler(e),t(!0)};o===T.DISPLAY_MODE_PUSH&&T._setTransform(s,""),T._toggleOuterWrapper(e,r,!1),T._isModal(e)&&e[T.GLASS_PANE_KEY].removeClass(T.GLASSPANE_DIM_SELECTOR),n?(s.addClass(T.TRANSITION_SELECTOR),T._onTransitionEnd(s,_)):_()},T.open=function(e){var r,o=T._getDrawer(e),_=a.data(o[0],T._DATA_OFFCANVAS_KEY);if(_){if(_[T.CLOSE_PROMISE_KEY])return _[T.CLOSE_PROMISE_KEY];if(_[T.OPEN_PROMISE_KEY])return _[T.OPEN_PROMISE_KEY]}var i=!1,E=new Promise(function(s,_){t.Assert.assertPrototype(o,a);var E=T._saveEdge(e),l=a.Event("ojbeforeopen");if(o.trigger(l,e),!1===l.result)return _(T.VETO_BEFOREOPEN_MSG),void(i=!0);var u=T._getDisplayMode(e),d=T._isReflow(e);!d||E!==T.EDGE_TOP&&E!==T.EDGE_BOTTOM||(u=T.DISPLAY_MODE_PUSH);var c=a.extend({},e);if(c[T.DISPLAY_MODE_KEY]=u,a.data(o[0],T._DATA_OFFCANVAS_KEY,c),e[T.CONTENT_KEY]){if(!T._noInnerWrapper(e))throw new Error("Error: Both main content selector and the inner wrapper <div class='oj-offcanvas-inner-wrapper'> are provided. Please remove the inner wrapper.");var f=n.getContext(o[0]).getBusyContext();r=f.addBusyState({description:"The offcanvas selector ='"+e[T.SELECTOR_KEY]+"' doing the open animation."}),d||(u===T.DISPLAY_MODE_PUSH?T._openPush(c,s,_,E):T._openOverlay(c,s,_,E))}else T._openOldDrawer(c,s,_,E,u)});if(E=E.then(function(e){return r&&r(),e},function(e){throw r&&r(),e}),!i){var l=a.data(o[0],T._DATA_OFFCANVAS_KEY);l&&(l[T.OPEN_PROMISE_KEY]=E,s.subtreeShown(o[0]))}return E},T.close=function(e){return T._close(e[T.SELECTOR_KEY],void 0===e[T.ANIMATE_KEY])},T._close=function(e,r){var o=a(e);t.Assert.assertPrototype(o,a);var _,i=a.data(o[0],T._DATA_OFFCANVAS_KEY);if(i&&i[T.CLOSE_PROMISE_KEY])return i[T.CLOSE_PROMISE_KEY];var E=!1,l=new Promise(function(t,s){if(T._isOpen(o)){e!==i[T.SELECTOR_KEY]&&t(!0),T._toggleOuterWrapper(i,o,!0)||t(!0);var l=a.Event("ojbeforeclose");if(o.trigger(l,i),!1===l.result)return s(T.VETO_BEFORECLOSE_MSG),void(E=!0);if(r){var u=n.getContext(o[0]).getBusyContext();_=u.addBusyState({description:"The offcanvas selector ='"+i[T.SELECTOR_KEY]+"' doing the close animation."})}var d=i[T.DISPLAY_MODE_KEY];i[T.CONTENT_KEY]?d===T.DISPLAY_MODE_PUSH?T._closePush(i,t,s,o,r):T._closeOverlay(i,t,s,o,r):T._closeOldDrawer(i,t,s,o,r)}else t(!0)});return l=l.then(function(e){return _&&_(),e},function(e){throw _&&_(),e}),E||(i=a.data(o[0],T._DATA_OFFCANVAS_KEY))&&(i[T.CLOSE_PROMISE_KEY]=l,s.subtreeHidden(o[0])),l},T.toggle=function(e){var r=T._getDrawer(e);return t.Assert.assertPrototype(r,a),T._isOpen(r)?T.close(e):T.open(e)},T._addGlassPane=function(e){var t=a("<div>");return t.addClass(T.GLASSPANE_SELECTOR),t.attr("role","presentation"),t.attr("aria-hidden","true"),t.appendTo(e.parent()),t.on("keydown keyup keypress mousedown mouseup mouseover mouseout click focusin focus",function(e){e.stopPropagation(),e.preventDefault()}),t},T._createSurrogate=function(e){var t,r=a("<span></span>").css("display","none").attr("aria-hidden","true"),n=e.attr("id");return n?(t=[n,"surrogate"].join("_"),r.attr("id",t)):t=r.uniqueId(),r.insertBefore(e),e.attr(T.SURROGATE_ATTR,t),r},T._swapOrder=function(e,t){e[T.SURROGATE_KEY]=T._createSurrogate(t),t.appendTo(t.parent())},T._restoreOrder=function(e){var t=T._getDrawer(e),a=e[T.SURROGATE_KEY];t&&a&&t.attr(T.SURROGATE_ATTR)===a.attr("id")&&(t.insertAfter(a),t.removeAttr(T.SURROGATE_ATTR),a.remove())},T._applyModality=function(e,t){var r=e;T._isModal(r)&&(r[T.GLASS_PANE_KEY]=T._addGlassPane(t),T._swapOrder(r,t),a(r[T.CONTENT_KEY]).attr("aria-hidden","true"),window.setTimeout(function(){r[T.GLASS_PANE_KEY].addClass(T.GLASSPANE_DIM_SELECTOR)},0))},T._removeModality=function(e){T._isModal(e)&&(e[T.GLASS_PANE_KEY].remove(),T._restoreOrder(e),a(e[T.CONTENT_KEY]).removeAttr("aria-hidden"))},T.setupPanToReveal=function(e){var o,s,_,i,E,l,u,d,c,f,O,p,A,S,g=e;null==a(g).attr("oj-data-pansetup")&&(a(g).attr("oj-data-pansetup","true"),g.displayMode="push",o=T._getDrawer(g),_=T._getOuterWrapper(o),E={recognizers:[[r.Pan,{direction:r.DIRECTION_HORIZONTAL}]]},t.AgentUtils.getAgentInfo().os===t.AgentUtils.OS.IOS&&(E.inputClass=r.TouchInput),l=!1,null==(O=g.edge)&&(O=o.hasClass("oj-offcanvas-start")?"start":"end"),S=T._isRTL(),a(_).ojHammer(E).on("panstart",function(e){switch(u=null,e.gesture.direction){case r.DIRECTION_LEFT:Math.abs(e.gesture.deltaY)<Math.abs(e.gesture.deltaX)&&(u=S?"end":"start");break;case r.DIRECTION_RIGHT:Math.abs(e.gesture.deltaY)<Math.abs(e.gesture.deltaX)&&(u=S?"start":"end")}null!==u&&(e.gesture.angle<0&&(e.gesture.deltaX<-100||e.gesture.deltaY<-100)||(d={direction:u,distance:Math.abs(e.gesture.deltaX)},c=a.Event("ojpanstart"),o.trigger(c,d),c.isDefaultPrevented()||(n.getContext(_.get(0)).getBusyContext().whenReady().then(function(){null==(s=g.size)&&(s=o.outerWidth(),g.size=s),l=!0}),g._closePromise=null,(i=T._getAnimateWrapper(g)).off(".oc"),T._toggleClass(g,i,!0),e.gesture.srcEvent.stopPropagation(),e.gesture.srcEvent.preventDefault(),e.stopPropagation())))}).on("panmove",function(e){l&&(f=e.gesture.deltaX,"start"===u&&f>0&&!S||"start"===u&&f<0&&S||"end"===u&&f<0&&!S||"end"===u&&f>0&&S?T._setTranslationX(i,O,"0px"):(f=Math.abs(f),o.css("width",f),i.removeClass(T.TRANSITION_SELECTOR),T._setTranslationX(i,O,f+"px"),d={direction:u,distance:f},c=a.Event("ojpanmove"),o.trigger(c,d),e.gesture.srcEvent.stopPropagation(),e.stopPropagation()))}).on("panend",function(e){if(l){if(l=!1,f=Math.abs(e.gesture.deltaX),d={distance:f},c=a.Event("ojpanend"),o.trigger(c,d),e.stopPropagation(),!c.isDefaultPrevented())return T._animateWrapperAndDrawer(i,o,O,s,g),a.data(o[0],T._DATA_OFFCANVAS_KEY,g),a.data(o[0],T._DATA_EDGE_KEY,O),void T._registerCloseHandler(g);if("translate3d(0px, 0px, 0px)"===i[0].style.transform)return T._toggleClass(g,i,!1),i.removeClass(T.TRANSITION_SELECTOR),void o.trigger("ojclose",g);p="transitionend webkitTransitionEnd otransitionend oTransitionEnd",A=function(){T._toggleClass(g,i,!1),i.removeClass(T.TRANSITION_SELECTOR),i.off(p,A),o.trigger("ojclose",g)},i.on(p,A),i.addClass(T.TRANSITION_SELECTOR),T._setTranslationX(i,"start","0px")}}))},T._animateWrapperAndDrawer=function(e,a,r,n,o){var s,_,i,E,l,u,d,c,f,O,p,A;if(e.removeClass(T.TRANSITION_SELECTOR),s=Math.round(1e3/60),"none"!==(_=e.css("transform"))){i=_.split("(")[1].split(")")[0].split(",");var S=t.AgentUtils.getAgentInfo(),g="ie"===S.browser&&11===S.browserVersion?12:4;E=parseInt(i[g],10),l=E,u="end"===r?0-n:n,T._isRTL()&&(u=0-u),c=Math.max(1,Math.abs(u-E)/(400/s)),f=(new Date).getTime(),O=function(){l===E||""!==e.get(0).style.transform?(p=(new Date).getTime(),A=Math.max(c,c*Math.max((p-f)/s)),f=p,E<u?E=Math.min(u,E+A):E>u&&(E=Math.max(u,E-A)),T._setTranslationX(e,r,Math.abs(E)+"px"),a.css("width",Math.abs(E)+"px"),E===u?(window.cancelAnimationFrame(d),e.addClass(T.TRANSITION_SELECTOR),a.trigger("ojopen",o)):d=window.requestAnimationFrame(O)):window.cancelAnimationFrame(d)},d=window.requestAnimationFrame(O)}},T.tearDownPanToReveal=function(e){var t=T._getDrawer(e),r=T._getOuterWrapper(t);a(r).off("panstart panmove panend")};const d=T.close,c=T.open,f=T.setupResponsive,O=T.setupPanToReveal,p=T.tearDownResponsive,A=T.tearDownPanToReveal,S=T.toggle,g=T._getOuterWrapper;e._getOuterWrapper=g,e.close=d,e.open=c,e.setupPanToReveal=O,e.setupResponsive=f,e.tearDownPanToReveal=A,e.tearDownResponsive=p,e.toggle=S,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojoffcanvas.js.map;
/**
 * Licenced under the MIT License
 *
 * Copyright (c) 2010 Seznam.cz, a.s.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * @license
 */
/*
 * Internet explorer generates pointer events by default for all input types like mouse, pen or touch (finger).
 * Touchr is generating touch events only for touch type by default but it can be overwritten by
 * window.Touchr_ALLOWED_POINTER_TYPE bitmask property. It can have values:
 * 1 for touch
 * 2 for mouse
 * 4 for pen
 * and their combinations.
 */

(function(window) {
	var IE_10		= !!window.navigator.msPointerEnabled,
		// Check below can mark as IE11+ also other browsers which implements pointer events in future
		// that is not issue, because touch capability is tested in IF statement bellow.
		// Note since Edge 16/Windows 10 1709 the property 'window.navigator.pointerEnabled' is undefined.
		IE_11_PLUS	= (!!window.navigator.pointerEnabled || !!window.PointerEvent);

	// Only pointer enabled browsers without touch capability.
	if (!!window.navigator.maxTouchPoints > 0 && (IE_10 || (IE_11_PLUS && !window.TouchEvent))) {
		var document = window.document,
			POINTER_DOWN		= IE_11_PLUS ? "pointerdown"	: "MSPointerDown",
			POINTER_UP 			= IE_11_PLUS ? "pointerup"		: "MSPointerUp",
			POINTER_MOVE		= IE_11_PLUS ? "pointermove"	: "MSPointerMove",
			POINTER_CANCEL		= IE_11_PLUS ? "pointercancel"	: "MSPointerCancel",
			POINTER_TYPE_TOUCH 	= IE_11_PLUS ? "touch"	: MSPointerEvent.MSPOINTER_TYPE_TOUCH,
			POINTER_TYPE_MOUSE 	= IE_11_PLUS ? "mouse"	: MSPointerEvent.MSPOINTER_TYPE_MOUSE,
			POINTER_TYPE_PEN 	= IE_11_PLUS ? "pen"	: MSPointerEvent.MSPOINTER_TYPE_PEN, //IE11+ has also unknown type which Touchr doesn't support
			GESTURE_START		= "MSGestureStart",
			GESTURE_CHANGE		= "MSGestureChange",
			GESTURE_END			= "MSGestureEnd",
			TOUCH_ACTION		= IE_11_PLUS ? "touchAction" : "msTouchAction",
			_180_OVER_PI		= 180/Math.PI,
			// Which pointer types will be used for generating touch events: 1 - touch, 2 - mouse, 4 - pen or their combination
			ALLOWED_POINTER_TYPE = window.Touchr_ALLOWED_POINTER_TYPE || 1,
			createEvent = function (eventName, target, params) {
				var k,
					event = document.createEvent("Event");

				event.initEvent(eventName, true, true);
				for (k in params) {
					event[k] = params[k];
				}
				target.dispatchEvent(event);
			},
			/**
			 * ECMAScript 5 accessors to the rescue
			 * @see http://perfectionkills.com/how-ecmascript-5-still-does-not-allow-to-subclass-an-array/
			 */
			makeSubArray = (function() {
				var MAX_SIGNED_INT_VALUE = Math.pow(2, 32) - 1,
					hasOwnProperty = Object.prototype.hasOwnProperty;

				function ToUint32(value) {
					return value >>> 0;
				}

				function getMaxIndexProperty(object) {
					var maxIndex = -1,
						isValidProperty,
						prop;

					for (prop in object) {

						isValidProperty = (
							String(ToUint32(prop)) === prop &&
								ToUint32(prop) !== MAX_SIGNED_INT_VALUE &&
								hasOwnProperty.call(object, prop));

						if (isValidProperty && prop > maxIndex) {
							maxIndex = prop;
						}
					}
					return maxIndex;
				}

				return function(methods) {
					var length = 0;
					methods = methods || { };

					methods.length = {
						get: function() {
							var maxIndexProperty = +getMaxIndexProperty(this);
							return Math.max(length, maxIndexProperty + 1);
						},
						set: function(value) {
							var constrainedValue = ToUint32(value);
							if (constrainedValue !== +value) {
								throw new RangeError();
							}
							for (var i = constrainedValue, len = this.length; i < len; i++) {
								delete this[i];
							}
							length = constrainedValue;
						}
					};
					methods.toString = {
						value: Array.prototype.join
					};
					return Object.create(Array.prototype, methods);
				};
			})(),
			// methods passed to TouchList closure method to extend Array
			touchListMethods = {
				/**
				 * Returns touch by id. This method fulfill the TouchList interface.
				 * @param {Number} id
				 * @returns {Touch}
				 */
				identifiedTouch: {
					value: function (id) {
						var length = this.length;
						while (length--) {
							if (this[length].identifier === id) return this[length];
						}
						return undefined;
					}
				},
				/**
				 * Returns touch by index. This method fulfill the TouchList interface.
				 * @param {Number} index
				 * @returns {Touch}
				 */
				item: {
					value: function (index) {
						return this[index];
					}
				},
				/**
				 * Returns touch index
				 * @param {Touch} touch
				 * @returns {Number}
				 */
				_touchIndex: {
					value: function (touch) {
						var length = this.length;
						while (length--) {
							if (this[length].pointerId == touch.pointerId) return length;
						}
						return -1;
					}
				},

				/**
				 * Add all events and convert them to touches
				 * @param {Event[]} events
				 */
				_addAll: {
					value: function(events) {
						var i = 0,
							length = events.length;

						for (; i < length; i++) {
							this._add(events[i]);
						}
					}
				},

				/**
				 * Add and MSPointer event and convert it to Touch like object
				 * @param {Event} event
				 */
				_add: {
					value: function(event) {
						var index = this._touchIndex(event);

						index = index < 0 ? this.length : index;

						//normalizing Pointer to Touch
						event.type = POINTER_MOVE;
						event.identifier = event.pointerId;
						//in DOC is mentioned that it is 0..255 but actually it returns 0..1 value
						//returns 0.5 for mouse down buttons in IE11, should it be issue?
						event.force = event.pressure;
						//default values for Touch which we cannot obtain from Pointer
						event.radiusX = event.radiusY = 1;
						event.rotationAngle = 0;

						this[index] = event;
					}
				},

				/**
				 * Removes an event from this touch list.
				 * @param {Event} event
				 */
				_remove: {
					value: function(event) {
						var index = this._touchIndex(event);

						if (index >= 0) {
							this.splice(index,1);
						}
					}
				}
			},

			/**
			 * This class store touches in an list which can be also accessible as array which is
			 * little bit bad because TouchList have to extend Array. Because we are aiming on
			 * IE10+ we can use ECMAScript5 solution.
			 * @extends Array
			 * @see http://www.w3.org/TR/2011/WD-touch-events-20110913/#touchlist-interface
			 * @see https://developer.mozilla.org/en-US/docs/DOM/TouchList
			 */
			TouchList = (function(methods) {
				return function() {
					var arr = makeSubArray(methods);
					if (arguments.length === 1) {
						arr.length = arguments[0];
					}
					else {
						arr.push.apply(arr, arguments);
					}
					return arr;
				};
			})(touchListMethods),

			/**
			 * list of all touches running during life cycle
			 * @type TouchList
			 */
			generalTouchesHolder,

			/**
			 * Storage of link between pointer {id} and original target
			 * @type Object
			 */
			pointerToTarget = {},

			/**
			 * General gesture object which fires MSGesture events whenever any associated MSPointer event changed.
			 */
			gesture = window.MSGesture ? new MSGesture() : null,

			gestureScale = 1,
			gestureRotation = 0,

			/**
			 * Storage of targets and anonymous MSPointerStart handlers for later
			 * unregistering
			 * @type Array
			 */
			attachedPointerStartMethods = [],

			/**
			 * Checks if node is some of parent children or sub-children
			 * @param {HTMLElement|Document} parent
			 * @param {HTMLElement} node
			 * @returns {Boolean}
			 */
			checkSameTarget = function (parent, node) {
				if (node) {
					if (parent === node) {
						return true;
					} else {
						return checkSameTarget(parent, node.parentNode);
					}
				} else {
					return false;
				}
			},

			/**
			 * Returns bitmask type of pointer to compare with allowed pointer types
			 * @param {Number|String} pointerType
			 * @returns {Number}
			 */
			pointerTypeToBitmask = function (pointerType) {
				if (pointerType == POINTER_TYPE_TOUCH) {
					return 1;
				} else if (pointerType == POINTER_TYPE_MOUSE) {
					return 2;
				} else {
					return 4;
				}
			},

			/**
			 * Main function which is rewriting the MSPointer event to touch event
			 * and preparing all the necessary lists of touches.
			 * @param {Event} evt
			 */
			pointerListener = function (evt) {
				var type,
					i,
					target = evt.target,
					originalTarget,
					changedTouches,
					targetTouches;

				// Skip pointers which are not allowed by users:
				if (!(pointerTypeToBitmask(evt.pointerType) & ALLOWED_POINTER_TYPE)) {
					return;
				}

				if (evt.type === POINTER_DOWN) {
					generalTouchesHolder._add(evt);
					pointerToTarget[evt.pointerId] = evt.target;

					type = "touchstart";

					// Fires MSGesture event when we have at least two pointers in our holder
					// (adding pointers to gesture object immediately fires Gesture event)
					if (gesture && generalTouchesHolder.length > 1) {
						gesture.target = evt.target;
						for (i = 0; i < generalTouchesHolder.length; i++) {
							// Adds to gesture only touches
							// It is not necessary to create separate gesture for mouse or pen pointers
							// because they cannot be present more than by 1 pointer.
							if (generalTouchesHolder[i].pointerType === POINTER_TYPE_TOUCH) {
								gesture.addPointer(generalTouchesHolder[i].pointerId);
							}
						}
					}
				}

				if (evt.type === POINTER_MOVE && generalTouchesHolder.identifiedTouch(evt.pointerId)) {
					generalTouchesHolder._add(evt);

					type = "touchmove";
				}

				//Preparation of touch lists have to be done before pointerup/MSPointerUp where we delete some information

				//Which touch fired this event, because we know that MSPointer event is fired for every
				//changed pointer than we create a list only with actual pointer
				changedTouches = document.createTouchList(evt);
				//Target touches is list of touches which started on (touchstart) on target element, they
				//are in this array even if these touches have coordinates outside target elements
				targetTouches = document.createTouchList();
				for (i = 0; i < generalTouchesHolder.length; i++) {
					//targetTouches._add(generalTouchesHolder[i]);
					//check if the pointerTarget is in the target
					if (checkSameTarget(target, pointerToTarget[generalTouchesHolder[i].identifier])) {
						targetTouches._add(generalTouchesHolder[i]);
					}
				}
				originalTarget = pointerToTarget[evt.pointerId];

				if (evt.type === POINTER_UP || evt.type === POINTER_CANCEL) {
					generalTouchesHolder._remove(evt);
					pointerToTarget[evt.pointerId] = null;

					delete pointerToTarget[evt.pointerId];
					type = "touchend";

					// Fires MSGestureEnd event when there is only one ore zero touches:
					if (gesture && generalTouchesHolder.length <= 1) {
						gesture.stop();
					}
				}

				//console.log("+", evt.type, evt.pointerType, generalTouchesHolder.length, evt.target.nodeName+"#"+evt.target.id);
				if (type && originalTarget) {
					createEvent(type, originalTarget, {touches: generalTouchesHolder, changedTouches: changedTouches, targetTouches: targetTouches});
				}
			},

			/**
			 * Main function which is rewriting the MSGesture event to gesture event.
			 * @param {Event} evt
			 */
			gestureListener = function (evt) {
				//TODO: check first, other than IE (FF?), browser which implements pointer events how to make gestures from pointers. Maybe it would be mix of pointer/gesture events.
				var type, scale, rotation;
				if (evt.type === GESTURE_START) {type = "gesturestart"}
				else if (evt.type === GESTURE_CHANGE) {type = "gesturechange"}
				else if (evt.type === GESTURE_END) {type = "gestureend"}

				// -------- SCALE ---------
				//MSGesture:
				//Scale values represent the difference in scale from the last MSGestureEvent that was fired.
				//Apple:
				//The distance between two fingers since the start of an event, as a multiplier of the initial distance. The initial value is 1.0.

				// ------- ROTATION -------
				//MSGesture:
				//Clockwise rotation of the cursor around its own major axis expressed as a value in radians from the last MSGestureEvent of the interaction.
				//Apple:
				//The delta rotation since the start of an event, in degrees, where clockwise is positive and counter-clockwise is negative. The initial value is 0.0
				if (evt.type === GESTURE_START) {
					scale = gestureScale = 1;
					rotation = gestureRotation = 0;
				} else {
					scale = gestureScale = gestureScale + (evt.scale - 1); //* evt.scale;
					rotation = gestureRotation = gestureRotation + evt.rotation * _180_OVER_PI;
				}

				createEvent(type, evt.target, {scale: scale, rotation: rotation, screenX: evt.screenX, screenY: evt.screenY});
			},

			/**
			 * This method augments event listener methods on given class to call
			 * our own method which attach/detach the MSPointer events handlers
			 * when user tries to attach touch events.
			 * @param {Function} elementClass Element class like HTMLElement or Document
			 */
			augmentEventListener = function(elementClass) {
				var customAddEventListener = attachTouchEvents,
					customRemoveEventListener = removeTouchEvents,
					oldAddEventListener = elementClass.prototype.addEventListener,
					oldRemoveEventListener = elementClass.prototype.removeEventListener;

				elementClass.prototype.addEventListener = function(type, listener, useCapture) {
					//"this" is HTML element
					if ((type.indexOf("gesture") === 0 || type.indexOf("touch") === 0)) {
						customAddEventListener.call(this, type, listener, useCapture);
					}
					oldAddEventListener.call(this, type, listener, useCapture);
				};

				elementClass.prototype.removeEventListener = function(type, listener, useCapture) {
					if ((type.indexOf("gesture") === 0 || type.indexOf("touch") === 0)) {
						customRemoveEventListener.call(this, type, listener, useCapture);
					}
					oldRemoveEventListener.call(this, type, listener, useCapture);
				};
			},
			/**
			 * This method attach event handler for MSPointer / MSGesture events when user
			 * tries to attach touch / gesture events.
			 * @param {String} type
			 * @param {Function} listener
			 * @param {Boolean} useCapture
			 */
			attachTouchEvents = function (type, listener, useCapture) {
				//element owner document or document itself
				var doc = this.nodeType == 9 ?  this : this.ownerDocument;

				// Because we are listening only on document, it is not necessary to
				// attach events on one document more times
				if (attachedPointerStartMethods.indexOf(doc) < 0) {
					//TODO: reference on node, listen on DOM removal to clean the ref?
					attachedPointerStartMethods.push(doc);
					doc.addEventListener(POINTER_DOWN, pointerListener, useCapture);
					doc.addEventListener(POINTER_MOVE, pointerListener, useCapture);
					doc.addEventListener(POINTER_UP, pointerListener, useCapture);
					doc.addEventListener(POINTER_CANCEL, pointerListener, useCapture);
					doc.addEventListener(GESTURE_START, gestureListener, useCapture);
					doc.addEventListener(GESTURE_CHANGE, gestureListener, useCapture);
					doc.addEventListener(GESTURE_END, gestureListener, useCapture);
				}

				// e.g. Document has no style
				// only touchmove event requires touch-action:none, don't set it unless it's neccessary
				// as it affects native behavior such as scrolling with pan gesture
				if (type === "touchmove" && this.style && (typeof this.style[TOUCH_ACTION] == "undefined" || !this.style[TOUCH_ACTION])) {
					this._touchActionUpdated = true;
					this.style[TOUCH_ACTION] = "none";
					// handle scrolling
					// if the element is draggable, don't scroll
					if (!this.hasAttribute("draggable")) {
						attachScrollHandler(this);
					}
				}
			},
			/**
			 * This method attach the scroll event handler.
			 * @param {Element} elem 
			 */
			attachScrollHandler = function(elem) {
				var last, scrollElem, findClosestScrollableElement, clearCachedHeight, visitedElems = [], pointerDownHandler, pointerMoveHandler, pointerUpHandler;

				/**
				 * Find the closest scrollable element from and including target
				 * @param {Element} target
				 * @return {Element}
				 */
				findClosestScrollableElement = function(target) {
					var clientHeight, scrollHeight;

					if (target == null) {
						return null;
					}

					// use cached clientHeight and scrollHeight, to minimize layout/reflow
					clientHeight = target._cachedClientHeight || target.clientHeight;
					scrollHeight = target._cachedScrollHeight || target.scrollHeight;

					target._cachedClientHeight = clientHeight;
					target._cachedScrollHeight = scrollHeight;

					// keep track of the elements visited so we could clear cached height later
					if (visitedElems.indexOf(target) === -1) {
						visitedElems.push(target);
					}

					if (!isNaN(clientHeight) && !isNaN(scrollHeight) && Math.abs(scrollHeight - clientHeight) > 1) {
						return target == document.documentElement ? document.body : target;
					}
					else {
						if (elem != target) {
							return findClosestScrollableElement(target.parentNode);
						}
						return null;
					}
				};

				/**
				 * Clear cached clientHeight and scrollHeight from visited elements
				 */
				clearCachedHeight = function() {
					for (var i=0; i<visitedElems.length; i++) {
						visitedElems[i]._cachedClientHeight = null;
						visitedElems[i]._cachedScrollHeight = null;
					}
					visitedElems.length = 0;
				};

				/**
				 * Handler for PointerDown event
				 */
				pointerDownHandler = function(event) {
					if (event.pointerType === "touch") {
						// should have been clear 
						clearCachedHeight();

						last = event.clientY;
						scrollElem = findClosestScrollableElement(event.target);
						if (scrollElem) {
							// prevent ancestors that have pointer event handler installed
							// to do any work
							event.stopPropagation();
						}
					}
				};

				/**
				 * Handler for PointerMove event
				 */
				pointerMoveHandler = function(Event) {
					var current, delta, nextScrollElem;

					if (event.pointerType === "touch") {
						if (last != undefined && scrollElem) {
							current = scrollElem.scrollTop;
							delta = last - event.clientY;
							scrollElem.scrollTop = current + delta;	

							// see if scroll min/max has been reached, scroll the next closest scrollable element
							// ignore if delta is < 1 (subpixel case)
							if (delta >= 1 && current == scrollElem.scrollTop) {
								nextScrollElem = findClosestScrollableElement(scrollElem.parentNode);								
								while (nextScrollElem) {
									current = nextScrollElem.scrollTop;
									nextScrollElem.scrollTop = current + delta;
									if (nextScrollElem === document.body || nextScrollElem.scrollTop != current) {
										break;
									}
									nextScrollElem = findClosestScrollableElement(nextScrollElem.parentNode);
								}
							}
						}
						last = event.clientY;
					}
				};

				/**
				 * Handler for PointerUp event
				 */
				pointerUpHandler = function(event) {
					clearCachedHeight();
					last = undefined;
				};

				elem.addEventListener(POINTER_DOWN, pointerDownHandler);
				elem.addEventListener(POINTER_MOVE, pointerMoveHandler); 
				elem.addEventListener(POINTER_UP, pointerUpHandler);
				elem._pointerHandlers = [pointerDownHandler, pointerMoveHandler, pointerUpHandler];
			},
			/**
			 * This method detach the scroll event handler.
			 * @param {Element} elem 
			 */
			detachScrollHandler = function(elem) {
				if (elem._pointerHandlers) {
					elem.removeEventListener(POINTER_DOWN, elem._pointerHandlers[0]);
					elem.removeEventListener(POINTER_MOVE, elem._pointerHandlers[1]);
					elem.removeEventListener(POINTER_UP, elem._pointerHandlers[2]);
					elem._pointerHandlers = undefined;
				}
			},
			/**
			 * This method detach event handler for MSPointer / MSGesture events when user
			 * tries to detach touch / gesture events.
			 * @param {String} type
			 * @param {Function} listener
			 * @param {Boolean} useCapture
			 */
			removeTouchEvents = function (type, listener, useCapture) {
				//todo: are we able to understand when all listeners are unregistered and shall be removed?
				if (type === "touchmove") {
					if (this._touchActionUpdated) {
						delete this.style[TOUCH_ACTION];
					}
					detachScrollHandler(this);
				}
			};


		/*
		 * Adding DocumentTouch interface
		 * @see http://www.w3.org/TR/2011/WD-touch-events-20110505/#idl-def-DocumentTouch
		 */

		/**
		 * Create touches list from array or touches or given touch
		 * @param {Touch[]|Touch} touches
		 * @returns {TouchList}
		 */
		document.createTouchList = function(touches) {
			var touchList = new TouchList();
			if (touches) {
				if (touches.length) {
					touchList._addAll(touches);
				} else {
					touchList._add(touches);
				}
			}
			return touchList;
		};

		/*******  Fakes which persuade other code to use touch events ********/

		/**
		 * AbstractView is class for document.defaultView === window
		 * @param {AbstractView} view
		 * @param {EventTarget} target
		 * @param {Number} identifier
		 * @param {Number} pageX
		 * @param {Number} pageY
		 * @param {Number} screenX
		 * @param {Number} screenY
		 * @return {Touch}
		 */
		document.createTouch = function(view, target, identifier, pageX, pageY, screenX, screenY) {
			return {
				identifier: identifier,
				screenX: screenX,
				screenY: screenY,
				//clientX: clientX,
				//clientY: clientY,
				pageX: pageX,
				pageY: pageY,
				target: target
			};
		};
		//Fake Modernizer touch test
		//http://modernizr.github.com/Modernizr/touch.html
		if (!window.ontouchstart) window.ontouchstart = 1;

		/*******  End of fakes ***********************************/

		generalTouchesHolder = document.createTouchList();

		// Overriding HTMLElement and HTMLDocument to hand over touch handler to MSPointer event handler
		augmentEventListener(HTMLElement);
		augmentEventListener(Document);
	}
}(window));
define("touchr", function(){});

/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojswipetoreveal',["exports","ojs/ojcore-base","jquery","ojs/ojcontext","ojs/ojoffcanvas","touchr"],function(e,t,o,n,a,s){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,o=o&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;const r={};t._registerLegacyNamespaceProp("SwipeToRevealUtils",r),r.setupSwipeActions=function(e,t){var s,r,i,l,c,p,u,d,h,f,v;(s=o(e)).hasClass("oj-swipetoreveal")||(s.addClass("oj-swipetoreveal"),r=s.hasClass("oj-offcanvas-start")?"end":"start",(i={}).selector=s,i._animateWrapperSelector="oj-offcanvas-inner-wrapper",a.setupPanToReveal(i),l=a._getOuterWrapper(s),u=!1,l.on("click.swipetoreveal",function(e){u&&(e.stopImmediatePropagation(),u=!1)}),l._touchStartListener=function(e){u=!1,s.hasClass("oj-offcanvas-open")&&s[0].offsetWidth>0&&!s[0].contains(e.target)&&e.preventDefault()},l[0].addEventListener("touchstart",l._touchStartListener,{passive:!1}),s.on("ojpanstart",function(e,o){o.direction!==r?e.preventDefault():(n.getContext(l.get(0)).getBusyContext().whenReady().then(function(){s.children().addClass("oj-swipetoreveal-action").css("min-width",""),f=s.children(".oj-swipetoreveal-default").get(0),null==p&&(null!=t&&(c=t.threshold),null!=c?(c=parseInt(c,10),/%$/.test(t.threshold)&&(c=c/100*l.outerWidth())):c=.55*l.outerWidth(),p=Math.min(.3*l.outerWidth(),s.outerWidth()))}),h=(new Date).getTime())}).on("ojpanmove",function(e,t){u||s.children().css("min-width",0),u=!0,null!=f&&(t.distance>c?s.children().each(function(){this!==f&&o(this).addClass("oj-swipetoreveal-hide-when-full")}):s.children().removeClass("oj-swipetoreveal-hide-when-full"))}).on("ojpanend",function(e,t){v=t.distance,null!=f&&v>c&&(d=o.Event("ojdefaultaction"),s.trigger(d,i),e.preventDefault()),v<p&&((new Date).getTime()-h>200||v<10)&&e.preventDefault()}))},r.tearDownSwipeActions=function(e){var t,n,s;(t=o(e)).removeClass("oj-swipetoreveal"),(n={}).selector=t,null!=(s=a._getOuterWrapper(t))&&s.off(".swipetoreveal"),a.tearDownPanToReveal(n),null!=s&&s.length>0&&(s[0].removeEventListener("touchstart",s._touchStartListener,{passive:!1}),delete s._touchStartListener)};const i=r.setupSwipeActions,l=r.tearDownSwipeActions;e.setupSwipeActions=i,e.tearDownSwipeActions=l,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojswipetoreveal.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojvcomponent',["require","exports","preact","ojs/ojmetadatautils","ojs/ojcustomelement-utils","ojs/ojcore-base","ojs/ojpreact-patch","ojs/ojtrace-event"],function(e,t,s,n,o,r,i,l){"use strict";r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;class a{parkNode(e){this._getLot().appendChild(e),r.Components&&r.Components.subtreeHidden(e)}disposeNodes(e,t){a._iterateSlots(e,e=>{const s=e.parentElement;this._lot===s?(t(e),this._lot.removeChild(e)):s||t(e)})}disconnectNodes(e){a._iterateSlots(e,e=>{this._lot===e.parentElement&&this._lot.removeChild(e)})}reconnectNodes(e){a._iterateSlots(e,e=>{e.parentElement||this._lot.appendChild(e)})}isParked(e){return(null==e?void 0:e.parentElement)===this._lot}_getLot(){if(!this._lot){const e=document.createElement("div");e.style.display="none",document.body.appendChild(e),this._lot=e}return this._lot}static _iterateSlots(e,t){Object.keys(e).forEach(s=>{e[s].forEach(e=>{t(e)})})}}const c=new a;function p(e,t,n,r,l){const a=`_${t}_${n}_`,c=function(e,t,s){let n,r=0;return l=>{if(null!=l){r++,n&&(n[i.OJ_SLOT]=null),n=e[i.OJ_REPLACER]=l;const s=l.parentElement;i.patchSlotParent(s),s.replaceChild(e,l),t(e),l[i.OJ_SLOT]=e}else{if(r--,r<0)throw new o.JetElementError(this,"Slot replacer count underflow");0===r&&(e.remove(),s(e))}}}(e,r,l);return s.h(()=>s.h("oj-slot-replacer",{ref:c,key:a}),null)}class d extends HTMLElement{connectedCallback(){const e=this[i.OJ_SLOT];e&&this.parentElement.replaceChild(e,this)}get parentNode(){const e=this[i.OJ_SLOT];return!e||c.isParked(e)?null:e.parentNode}get nextSibling(){const e=this[i.OJ_SLOT];if(!e||c.isParked(e))return null;const t=e.nextSibling;return(null==t?void 0:t[i.OJ_REPLACER])||t}}customElements.define("oj-slot-replacer",d);const h=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function u(e,t,s){"-"===t[0]?e.setProperty(t,s):null==s?e[t]="":"number"!=typeof s||h.test(t)?e[t]=s:e[t]=s+"px"}function _(e,t,s,n,o){let r;e:if("style"===t)if("string"==typeof s)e.style.cssText=s;else{if("string"==typeof n&&(e.style.cssText=n=""),n)for(t in n)s&&t in s||u(e.style,t,"");if(s)for(t in s)n&&s[t]===n[t]||u(e.style,t,s[t])}else if("o"===t[0]&&"n"===t[1])if(r=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e._listeners||(e._listeners={}),e._listeners[t+r]=s,s){if(!n){const s=r?v:m;e.addEventListener(t,s,r)}}else{const s=r?v:m;e.removeEventListener(t,s,r)}else if("dangerouslySetInnerHTML"!==t){if(o)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==s?"":s;break e}catch(e){}"function"==typeof s||(null!=s&&(!1!==s||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,s):e.removeAttribute(t))}}function m(e){this._listeners[e.type+!1](s.options.event?s.options.event(e):e)}function v(e){this._listeners[e.type+!0](s.options.event?s.options.event(e):e)}const f=Symbol(),y=Symbol(),g=new Set,P=Symbol(),b=Symbol();class C{constructor(e,t,n,r,i,l){this.ref=s.createRef(),this._isPatching=!1,this._props={ref:this.ref},this._verifyingState=E.Unset,this._earlySets=[],this._eventQueue=[],this._isRenderQueued=!1,this._state=o.CustomElementUtils.getElementState(e),this._element=e,this._metadata=n,this._component=t,this._controlledProps=(null==i?void 0:i.length)>0?new Set(i):g,this._controlledAttrs=(null==r?void 0:r.length)>0?new Set(r):g,this._defaultProps=l,this._rootPatchCallback=this._patchRootElement.bind(this)}connectedCallback(){this._verifyConnectDisconnect(E.Connect)}disconnectedCallback(){this._verifyConnectDisconnect(E.Disconnect)}attributeChangedCallback(e,t,s){if(!this._isPatching&&this._state.canHandleAttributes()){const n=o.AttributeUtils.attributeToPropertyName(e),r=n.split(".")[0];if(this._state.dirtyProps.has(r))this._state.dirtyProps.delete(r);else if(t===s)return;null===s&&(s=void 0),"knockout"===this._state.getBindingProviderType()&&(o.AttributeUtils.isGlobalOrData(n)||this._element.dispatchEvent(new CustomEvent("attribute-changed",{detail:{attribute:e,value:s,previousValue:t}})));const[i,l,a]=this._getPropValuePair(e,s);i&&this._updatePropsAndQueueRenderAsNeeded(i,l,a)}}getProperty(e){var t;if(n.getPropertyMetadata(e,null===(t=this._metadata)||void 0===t?void 0:t.properties)){let t=o.CustomElementUtils.getPropertyValue(this._props,e);return void 0===t&&this._defaultProps&&(t=o.CustomElementUtils.getPropertyValue(this._defaultProps,e)),t}return this._element[e]}setProperty(e,t){var s;if(this._isPatching)return;const r=n.getPropertyMetadata(e,null===(s=this._metadata)||void 0===s?void 0:s.properties);r?(t=o.CustomElementUtils.convertEmptyStringToUndefined(this._element,r,t),this._state.allowPropertySets()?this._updatePropsAndQueueRenderAsNeeded(e,t,r):this._earlySets.push({property:e,value:t})):this._element[e]=t}setProperties(e){this._isPatching||Object.keys(e).forEach(t=>{this.setProperty(t,e[t])})}getProps(){return this._props}isInitialized(){return!!this._vdom}appendChildHelper(e,t){return o.CustomElementUtils.canRelocateNode(e,t)?HTMLElement.prototype.appendChild.call(e,t):t}insertBeforeHelper(e,t,s){return o.CustomElementUtils.canRelocateNode(e,t)?HTMLElement.prototype.insertBefore.call(e,t,s):t}_render(){var e;if(!this._vdom){this._initializePropsFromDom();const t=this._metadata.events;t&&this._initializeActionCallbacks(t);const s=null===(e=this._metadata.extension)||void 0===e?void 0:e._WRITEBACK_PROPS;s&&this._initializeWritebackCallbacks(s),this._playbackEarlyPropertySets()}this._vdom=s.h(this._component,this._props,null),this._vdom.props[f]=this._element,this._vdom.props[y]=this._rootPatchCallback,this._isPatching=!0,s.render(this._vdom,this._element),this._isPatching=!1}_getPropValuePair(e,t){var s,r;if("knockout"!==this._state.getBindingProviderType()||!o.AttributeUtils.getExpressionInfo(t).expr){const i=o.AttributeUtils.attributeToPropertyName(e),l=n.getPropertyMetadata(i,null===(s=this._metadata)||void 0===s?void 0:s.properties);if(l)return l.readOnly?[null,null,null]:[i,o.AttributeUtils.attributeToPropertyValue(this._element,e,t,l),l];const a=o.AttributeUtils.getGlobalPropForAttr(e);if(this._controlledProps.has(a))return[a,null!==(r=this[a])&&void 0!==r?r:t,null]}return[null,null,null]}_updatePropsAndQueueRenderAsNeeded(e,t,s,n=!0){const i=this.getProperty(e);if(s&&o.ElementUtils.comparePropertyValues(s,t,i))return;const l=e.split("."),a=l[0],c=l.length>1;let p=this.getProperty(a);if(r.CollectionUtils.isPlainObject(p)&&(p=r.CollectionUtils.copyInto({},p,void 0,!0)),n&&this._verifyProps(e,t,s),this._updateProps(l,t),!n||this._state.allowPropertyChangedEvents()&&!o.AttributeUtils.isGlobalOrData(e)){this._state.dirtyProps.add(a);const s=n?"external":"internal",o={value:this.getProperty(a),previousValue:p,updatedFrom:s};c&&(o.subproperty={path:e,value:t,previousValue:i}),this._queueFireEventsTask(new CustomEvent(a+"Changed",{detail:o}))}const d=this._oldRootProps;d&&this._controlledProps.has(e)&&(d[e]=t),this._queueRender(this._vdom&&!(null==s?void 0:s.readOnly))}_queueRender(e){e&&!this._isRenderQueued&&(this._isRenderQueued=!0,window.queueMicrotask(()=>{try{this._render()}finally{this._isRenderQueued=!1}}))}_verifyProps(e,t,s){if(s){if(s.readOnly)throw new o.JetElementError(this._element,`Read-only property '${e}' cannot be set.`);try{n.checkEnumValues(this._element,e,t,s)}catch(e){throw new o.JetElementError(this._element,e.message)}}}_updateProps(e,t){var s,n;const o=e[0];let i=this._props;if(e.length>1){const e=null!==(s=this._props[o])&&void 0!==s?s:null===(n=this._defaultProps)||void 0===n?void 0:n[o];e&&r.CollectionUtils.isPlainObject(e)?i[o]=r.CollectionUtils.copyInto({},e,void 0,!0):i[o]={}}for(;e.length;){const s=e.shift();0===e.length?i[s]=t:i[s]||(i[s]={}),i=i[s]}}_queueFireEventsTask(e){return this._eventQueue.push(e),this._queuedEvents||(this._queuedEvents=new Promise(e=>{window.queueMicrotask(()=>{try{for(;this._eventQueue.length;)this._element.dispatchEvent(this._eventQueue.shift())}finally{e(),this._queuedEvents=null}})})),this._queuedEvents}_verifyConnectDisconnect(e){this._verifyingState===E.Unset&&window.queueMicrotask(()=>{this._verifyingState===e&&(this._verifyingState===E.Connect?this._verifiedConnect():this._verifiedDisconnect()),this._verifyingState=E.Unset}),this._verifyingState=e}_verifiedConnect(){if(this._state.isComplete())this._reconnectSlots();else if(this._state.startCreationCycle(),this._state.isCreating()){const e=()=>{this._element[o.CHILD_BINDING_PROVIDER]="preact";let e=this._state.getSlotMap();if(e)this._reconnectSlots();else{e=this._state.getSlotMap(!0);const t=this._removeAndConvertSlotsToProps(e);Object.assign(this._props,t)}this._render()};this._state.setCreateCallback(e),this._state.setBindingsDisposedCallback(()=>this._handleBindingsDisposed())}}_verifiedDisconnect(){this._state.isComplete()?(this._disconnectSlots(),this._state.resetCreationCycle(),s.render(null,this._element),this._applyRef(this._oldRootRef,null),this._oldRootRef=void 0,this._vdom=null):this._state.pauseCreationCycle()}_initializePropsFromDom(){const e=this._element.attributes;for(let t=0;t<e.length;t++){const{name:s,value:n}=e[t],[o,r,i]=this._getPropValuePair(s,n);o&&(this._verifyProps(o,r,i),this._updateProps(o.split("."),r))}}_playbackEarlyPropertySets(){for(;this._earlySets.length;){const e=this._earlySets.shift();this.setProperty(e.property,e.value)}}_patchRootElement(e){var t;const s=this._oldRootProps||this._getInitialRootProps(),n=e.props;!function(e,t,s,n,o,r){let i;for(i in s)"children"===i||"key"===i||i in t||r(e,i,null,s[i],n)||_(e,i,null,s[i],n);for(i in t)o&&"function"!=typeof t[i]||"children"===i||"key"===i||"value"===i||"checked"===i||s[i]===t[i]||r(e,i,t[i],s[i],n)||_(e,i,t[i],s[i],n)}(this._element,n,s,!1,!1,C._setPropertyOverrides);const o=e.ref;this._oldRootRef!==o&&(this._applyRef(o,this._element),o&&(null===(t=this._oldRootRef)||void 0===t||t.call(this,null))),this._oldRootProps=n,this._oldRootRef=o}_applyRef(e,t){e&&("function"==typeof e?e(t):e.current=t)}static _setPropertyOverrides(e,t,s,n){if("style"===t&&"string"==typeof s)throw new Error("CSS style must be an object. CSS text is not supported");if("class"===t||"className"===t){const t=null==n?g:o.CustomElementUtils.getClassSet(n),r=null==s?g:o.CustomElementUtils.getClassSet(s);for(const s of t.values())r.has(s)||e.classList.remove(s);for(const s of r.values())t.has(s)||e.classList.add(s);return!0}if("o"===t[0]&&"n"===t[1]){const o=t!==(t=t.replace(/Capture$/,"")),r=t.toLowerCase();r in e&&(t=r),t=t.slice(2),C._getRootListeners(e,o)[t]=s;const i=o?C._eventProxyCapture:C._eventProxy;return s?n||e.addEventListener(t,i,o):e.removeEventListener(t,i,o),!0}return!1}static _getRootListeners(e,t){const s=t?b:P;let n=e[s];return n||(n=e[s]={}),n}_getInitialRootProps(){const e={};for(const t of this._controlledProps.values())t in this._props&&(e[t]=this._props[t]);return e}_removeAndConvertSlotsToProps(e){var t,s;const o=null===(t=this._metadata.extension)||void 0===t?void 0:t._DYNAMIC_SLOT,r=null==o?void 0:o.prop,i=null===(s=this._metadata)||void 0===s?void 0:s.slots,l=Object.keys(e),a={};if(l.length>0&&l.forEach(t=>{const s=e[t];s.forEach(e=>{c.parkNode(e)});const l=n.getPropertyMetadata(t,i);if(l){const e=!!(null==l?void 0:l.data),n=e||""!==t?t:"children";this._assignSlotProperty(a,n,void 0,t,e,s)}else{if(!r)return;a[r]||(a[r]={});const e=o.isTemplate;this._assignSlotProperty(a,t,r,t,e,s)}}),"knockout"===this._state.getBindingProviderType()){let e;for(;e=this._element.firstChild;)this._state.getBindingProviderCleanNode()(e),e.remove()}return a}_assignSlotProperty(e,t,s,n,r,i){var l,a;const c=s?e[s]:e;if(r){if("TEMPLATE"!==(null===(l=i[0])||void 0===l?void 0:l.nodeName))throw new o.JetElementError(this._element,`Slot content for template slot ${n} must be a template element.`);{const e=i[0];c[t]=null!==(a=e.render)&&void 0!==a?a:this._getSlotRenderer(e,t,s)}}else{const e=i.map((e,t)=>p(e,n,t,C._handleSlotMount,this._handleSlotUnmount.bind(this)));c[t]=e}}_getSlotRenderer(e,t,s){const n=this._state.getBindingProvider(),r=n?()=>{(s?this._props[s]:this._props)[t]=this._getSlotRenderer(e,t,s),this._queueRender(!0)}:null;return t=>{const s=this._state.getTemplateEngine();if(!s)throw new o.JetElementError(this._element,"Unexpected call to render a template slot");return s.execute(this._element,e,t,n,r)}}_handleBindingsDisposed(){c.disposeNodes(this._state.getSlotMap(),this._state.getBindingProviderCleanNode()),this._state.disposeTemplateCache()}_disconnectSlots(){c.disconnectNodes(this._state.getSlotMap())}_reconnectSlots(){c.reconnectNodes(this._state.getSlotMap())}_handleSlotUnmount(e){this._state.isComplete()&&c.parkNode(e)}static _handleSlotMount(e){r.Components&&r.Components.subtreeShown(e)}static _eventProxy(e){this[P][e.type](s.options.event?s.options.event(e):e)}static _eventProxyCapture(e){this[b][e.type](s.options.event?s.options.event(e):e)}_initializeActionCallbacks(e){Object.keys(e).forEach(t=>{const s=e[t],n=o.AttributeUtils.eventTypeToEventListenerProperty(t);this._props[n]=e=>{const n=Object.assign({},e),o=!!s.cancelable,r=[];o&&(n.accept=e=>{r.push(e)});const i={detail:n,bubbles:!!s.bubbles,cancelable:o},l=new CustomEvent(t,i),a=this._queueFireEventsTask(l);if(o)return a.then(()=>l.defaultPrevented?Promise.reject():Promise.all(r).then(()=>Promise.resolve(),e=>Promise.reject(e)))}})}_initializeWritebackCallbacks(e){e.forEach(e=>{var t;const s=o.AttributeUtils.propertyNameToChangedCallback(e),r=n.getPropertyMetadata(e,null===(t=this._metadata)||void 0===t?void 0:t.properties);this._props[s]=t=>{this._updatePropsAndQueueRenderAsNeeded(e,t,r,!1)}})}}var E;!function(e){e[e.Connect=0]="Connect",e[e.Disconnect=1]="Disconnect",e[e.Unset=2]="Unset"}(E||(E={}));const S=new class{constructor(){this.appendChildHelper=(e,t)=>HTMLElement.prototype.appendChild.call(e,t),this.insertBeforeHelper=(e,t,s)=>HTMLElement.prototype.insertBefore.call(e,t,s)}connectedCallback(){}disconnectedCallback(){}attributeChangedCallback(e,t,s){}getProperty(e){}setProperty(e,t){}setProperties(e){}},T=l.traceDispatchEvent(HTMLElement.prototype.dispatchEvent);class O extends HTMLElement{constructor(){super(...arguments),this.dispatchEvent=T}static get observedAttributes(){let e=[];return this.metadata.properties&&(e=e.concat(n.getFlattenedAttributes(this.metadata.properties))),this.rootObservedAttributes&&(e=e.concat(this.rootObservedAttributes)),e}connectedCallback(){this._getHelper().connectedCallback()}disconnectedCallback(){var e;null===(e=this._helper)||void 0===e||e.disconnectedCallback()}attributeChangedCallback(e,t,s){var n;null===(n=this._helper)||void 0===n||n.attributeChangedCallback(e,t,s)}getProperty(e){return this._getHelper().getProperty(e)}setProperty(e,t){this._getHelper().setProperty(e,t)}setProperties(e){this._getHelper().setProperties(e)}appendChild(e){return this._getHelper().appendChildHelper(this,e)}insertBefore(e,t){return this._getHelper().insertBeforeHelper(this,e,t)}setAttribute(e,t){if("class"===e){const e=o.CustomElementUtils.getClassSet(t);o.CustomElementUtils.getElementState(this).setOuterClasses(e)}else HTMLElement.prototype.setAttribute.call(this,e,t)}removeAttribute(e){"class"===e?this.setAttribute("class",""):HTMLElement.prototype.removeAttribute.call(this,e)}_getHelper(){return this._helper||(this.hasAttribute("data-oj-jsx")?(this.removeAttribute("data-oj-jsx"),this.classList.add("oj-complete"),this._helper=S):this._helper=new C(this,this.constructor.component,this.constructor.metadata,this.constructor.rootObservedAttributes,this.constructor.rootObservedProperties,this.constructor.defaultProps)),this._helper}}class k extends o.ElementState{getTemplateEngine(){return k._cachedTemplateEngine}getTrackChildrenOption(){return"immediate"}allowPropertyChangedEvents(){return super.allowPropertyChangedEvents()&&(e=>{var t;const s=e._getHelper();return!!(null===(t=s.isInitialized)||void 0===t?void 0:t.call(s))})(this.Element)}disposeTemplateCache(){var e;const t=this.getSlotMap(),s=Object.keys(t),r=o.CustomElementUtils.getElementDescriptor(this.Element.tagName).metadata,i=null===(e=null==r?void 0:r.extension)||void 0===e?void 0:e._DYNAMIC_SLOT,l=!!(null==i?void 0:i.isTemplate);s.filter(e=>{const t=n.getPropertyMetadata(e,null==r?void 0:r.slots);if(t){if(t.data)return!0}else if(l)return!0;return!1}).forEach(e=>{var s;const n=t[e];"TEMPLATE"===(null===(s=n[0])||void 0===s?void 0:s.nodeName)&&this.getTemplateEngine().cleanupTemplateCache(n[0])})}GetPreCreatedPromise(){const e=super.GetPreCreatedPromise();return!k._cachedTemplateEngine&&this._hasDirectTemplateChildren()?e.then(()=>this._getTemplateEnginePromise()):e}IsTransferAttribute(e){return this.Element.constructor.rootObservedAttrSet.has(e)}GetDescriptiveTransferAttributeValue(e){return((e,t)=>{var s;const n=e.getAttribute(t);if(n)return n;const o=e._getHelper();return((null===(s=o.getProps)||void 0===s?void 0:s.call(o))||{})[t]})(this.Element,e)}_getTemplateEnginePromise(){return new Promise(function(t,s){e(["ojs/ojvcomponent-template"],function(e){t(function(e){if(e&&e.__esModule)return e;var t={};return e&&Object.keys(e).forEach(function(s){var n=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(t,s,n.get?n:{enumerable:!0,get:function(){return e[s]}})}),t.default=e,t}(e))},s)}).then(e=>{k._cachedTemplateEngine=e})}_hasDirectTemplateChildren(){const e=this.Element.childNodes;for(let t=0;t<e.length;t++){if("template"===e[t].localName)return!0}return!1}}const w=()=>{throw new Error("The Root component should only be used as the top-level return from a VComponent render function.  It will be rewritten by VComponent code so Preact will never actually render it unless it appears in an invalid location.")};function A(e,t){return"className"===e||o.AttributeUtils.isGlobalOrData(e)||function(e,t){var s,n;if(null===(s=null==t?void 0:t.properties)||void 0===s?void 0:s[e])return!1;const o=e.match(R);if(o){const e=o[1].toLowerCase()+o[2];return!(null===(n=null==t?void 0:t.events)||void 0===n?void 0:n[e])}return!1}(e,t)}const R=/^on(?!.*Changed$)([A-Za-z])([A-Za-z]*)$/;"undefined"!=typeof window&&(HTMLTemplateElement.prototype.hasOwnProperty("render")||Object.defineProperty(HTMLTemplateElement.prototype,"render",{value:null,writable:!0}));const j=o.ElementUtils.getUniqueId.bind(null,null);t.Root=w,t.customElement=function(e){return function(t){var r;const i=t.metadata,l=(null===(r=null==i?void 0:i.extension)||void 0===r?void 0:r._OBSERVED_GLOBAL_PROPS)||[],a=l.map(e=>o.AttributeUtils.getGlobalAttrForProp(e));!function(e,t,n,r){const i=t.prototype.render;t.prototype.render=function(t,l,a){var c;const p=null===(c=null==n?void 0:n.extension)||void 0===c?void 0:c._READ_ONLY_PROPS;p&&p.forEach(e=>delete t[e]);const d=t[f],h=!!d;h&&o.CustomElementUtils.getElementState(d).disposeTemplateCache();let u=i.call(this,t,l,a);if(u.type===w&&(u=s.cloneElement(u),u.type=e),u.type!==e){const r={};return h?u:(r.ref=function(e){e&&(e[o.CustomElementUtils.VCOMP_INSTANCE]={props:t})},r["data-oj-jsx"]="",Object.keys(t).forEach(e=>{A(e,n)&&(r[e]=t[e])}),s.h(e,r,u))}if(!h){const e=u.props;t.style&&e.style&&(e.style=Object.assign({},t.style,e.style));const s=t.className||t.class;if(s){const t="className"in e?"className":"class",n=e[t]||"";e[t]=`${s} ${n}`}return e["data-oj-jsx"]="",Object.keys(t).forEach(s=>{s in e||r.has(s)||!A(s,n)||(e[s]=t[s])}),u}return t[y](u),s.h(s.Fragment,{},u.props.children)}}(e,t,i,new Set(l)),function(e,t,s,r,i){class l extends O{}l.metadata=t||{},l.component=s,l.rootObservedAttributes=i,l.rootObservedAttrSet=new Set(i),l.rootObservedProperties=r,l.defaultProps=s.defaultProps?n.deepFreeze(s.defaultProps):null,function(e,t){if(!t)return;for(let s in t)Object.defineProperty(e,s,{get(){return this.getProperty(s)},set(e){this.setProperty(s,e)}})}(l.prototype,null==t?void 0:t.properties),function(e,t){if(!t)return;for(let s in t)e[s]=function(){if(this._helper===S)throw new o.JetElementError(this,"Cannot access element methods when rendered as a value based element.");const e=this._helper.ref.current;if(!e)throw new o.JetElementError(this,"Cannot access methods before element is upgraded.");return e[s].apply(e,arguments)}}(l.prototype,null==t?void 0:t.methods),o.CustomElementUtils.registerElement(e,{descriptor:{metadata:t},stateClass:k,vcomp:!0},l)}(e,i,t,l,a)}},t.getUniqueId=j,t.method=function(e,t,s){},Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ojvcomponent.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojprogress-circle',["exports","ojs/ojvcomponent","preact","ojs/ojtranslation"],function(e,r,t,a){"use strict";var s=function(e,r,t,a){var s,l=arguments.length,n=l<3?r:null===a?a=Object.getOwnPropertyDescriptor(r,t):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,r,t,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(l<3?s(n):l>3?s(r,t,n):s(r,t))||n);return l>3&&n&&Object.defineProperty(r,t,n),n};e.ProgressCircle=class extends t.Component{render(e){return-1===e.value?this._renderIndeterminateCircle(e):this._renderDeterminateCircle(e)}_renderIndeterminateCircle(e){return t.h(r.Root,{class:"oj-progress-circle oj-progress-circle-"+e.size,role:"progressbar","aria-valuetext":a.getTranslatedString("oj-ojProgressbar.ariaIndeterminateProgressText")},t.h("div",{class:"oj-progress-circle-indeterminate"},t.h("div",{class:"oj-progress-circle-indeterminate-inner"})))}_renderDeterminateCircle(e){let a=e.max,s=e.value;a<0&&(a=0),s<0&&-1!==s&&(s=0);const l=0===a?0:s>a?1:s/a,n=this._getClipPath(l);return t.h(r.Root,{class:"oj-progress-circle oj-progress-circle-"+e.size,role:"progressbar","aria-valuemin":"0","aria-valuemax":a,"aria-valuenow":s},t.h("div",{class:"oj-progress-circle-tracker"}),t.h("div",{class:"oj-progress-circle-value",style:{clipPath:n}}))}_getClipPath(e){let r;return e<.125?(r=this._calculateTangent(e)+50,`polygon(50% 0, ${r}% 0, 50% 50%)`):e<.375?(r=e<.25?50-this._calculateTangent(.25-e):this._calculateTangent(e-.25)+50,`polygon(50% 0, 100% 0, 100% ${r}%, 50% 50%)`):e<.625?(r=e<.5?50+this._calculateTangent(.5-e):50-this._calculateTangent(e-.5),`polygon(50% 0, 100% 0, 100% 100%, ${r}% 100%, 50% 50%)`):e<.875?(r=e<.75?50+this._calculateTangent(.75-e):50-this._calculateTangent(e-.75),`polygon(50% 0, 100% 0, 100% 100%, 0% 100%, 0% ${r}%, 50% 50%)`):(r=50-this._calculateTangent(1-e),`polygon(50% 0, 100% 0, 100% 100%, 0% 100%, 0% 0%, ${r}% 0%, 50% 50%)`)}_calculateTangent(e){return 50*Math.tan(2*e*Math.PI)}},e.ProgressCircle.defaultProps={max:100,value:0,size:"md"},e.ProgressCircle.metadata={properties:{max:{type:"number"},value:{type:"number"},size:{type:"string",enumValues:["sm","md","lg"]}}},e.ProgressCircle=s([r.customElement("oj-progress-circle")],e.ProgressCircle),Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojprogress-circle.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojpulltorefresh',["exports","ojs/ojcore-base","jquery","ojs/ojcontext","ojs/ojdomutils","ojs/ojtranslation","hammerjs","ojs/ojthemeutils","ojs/ojjquery-hammer","ojs/ojcomponentcore","touchr","ojs/ojprogress-circle"],function(e,t,a,r,l,o,s,n,i,d,u,c){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;const h={};t._registerLegacyNamespaceProp("PullToRefreshUtils",h),h.setupPullToRefresh=function(e,t,r){var i,d,u,c,p,f,g,j,v,m,_,T,y,E,R,C,b,x,P=(n.parseJSONFromFontFamily("oj-refresher-option-defaults")||{}).loadingIcon;r&&r.refresherElement&&a.data(a(e)[0],"data-pulltorefresh-refresher",r.refresherElement),b=l.isTouchSupported(),h.tearDownPullToRefresh(e),i=a(document.createElement("div")).addClass("oj-pulltorefresh-outer"),h._renderAccessibleLink(e,i,t,r),d=a(document.createElement("div")).addClass("oj-pulltorefresh-panel"),i.append(d),(u=a(e)).prepend(i),b?x="touch":(x="pan",C={recognizers:[[s.Pan,{direction:s.DIRECTION_VERTICAL}]]},u.ojHammer(C)),u.on(x+"start.pulltorefresh",function(e){null==a.data(d[0],"data-pullstart")&&0===u[0].scrollTop&&(h._handlePull(e,d,r),(v=d.find(".oj-pulltorefresh-icon")).length>0&&("progresscircle"===P&&v[0].setAttribute("value","0"),m=v.parent().outerHeight(!0)),r&&!isNaN(r.threshold)&&(p=parseInt(r.threshold,10)),p=isNaN(p)?d.outerHeight(!0):Math.max(0,Math.min(p,d.outerHeight(!0))),d.css("height",0),d.removeClass("oj-pulltorefresh-transition"),b?(a.data(d[0],"data-pullstart",e.originalEvent.touches[0].clientY),a.data(d[0],"data-pullstart-horiz",e.originalEvent.touches[0].clientX)):a.data(d[0],"data-pullstart",0),c=!0,u[0].classList.add("oj-pulltorefresh-action"))}).on(x+"move.pulltorefresh",function(e){if(null!=(f=a.data(d[0],"data-pullstart"))&&!((g=b?e.originalEvent.touches[0].clientY-parseInt(f,10):e.gesture.deltaY)<0)&&(e.preventDefault(),null==a.data(d[0],"data-closing")))if(null==a.data(d[0],"data-loading")){if(c){if(j=b?e.originalEvent.touches[0].clientX-parseInt(a.data(d[0],"data-pullstart-horiz"),10):e.gesture.deltaX,Math.abs(j)>g)return;c=!1}d.css("height",g),h._fireEvent(e,"pull",d,g),null!=v&&v.length>0&&(y=p>0?g/p:100,(isNaN(y)||y<0)&&(y=0),(E=10*Math.round(10*y))>=100?(R="oj-pulltorefresh-icon-full",T=o.getTranslatedString("oj-pullToRefresh.titleIconFull")):(R="oj-pulltorefresh-icon-"+E+"-percent",T=o.getTranslatedString("oj-pullToRefresh.titleIcon"+E+"percent")),"progresscircle"===P?(E=Math.min(Math.round(100*y),100),v[0].setAttribute("value",E)):(null!=(_=a.data(d[0],"data-lasticonclass"))&&v.removeClass(_),v.addClass(R)),a.data(d[0],"data-lasticonclass",R),v.attr("title",T),h._showHideDefaultText(d,g>m))}else d.css("height",Math.max(g,p))}).on(x+"cancel.pulltorefresh",function(){h._cleanup(d),u[0].classList.remove("oj-pulltorefresh-action")}).on(x+"end.pulltorefresh",function(r){if(null!=(f=a.data(d[0],"data-pullstart"))&&null==a.data(d[0],"data-closing")){if(null!=a.data(d[0],"data-loading"))return g=a.data(d[0],"data-panelheight"),void d.css("height",g);d.outerHeight()<p?(d.addClass("oj-pulltorefresh-transition").css("height",0),h._cleanup(d)):h._handleRelease(r,e,d,t),u[0].classList.remove("oj-pulltorefresh-action")}})},h._handlePull=function(e,t,r){var l,o;h._fireEvent(e,"pull",t,0),0===t.children().length&&(r&&(l=r.primaryText,o=r.secondaryText),h._createDefaultContent(t,l,o)),t.prev().text(h._getTranslatedString("oj-pullToRefresh.ariaRefreshingLink")),t.css("height","auto"),a.data(t[0],"data-panelheight",t.outerHeight())},h._handleRelease=function(e,t,l,o){var s,i,d,u,c,p=(n.parseJSONFromFontFamily("oj-refresher-option-defaults")||{}).loadingIcon;s=a.data(l[0],"data-panelheight"),l.addClass("oj-pulltorefresh-transition").css("height",s),h._fireEvent(e,"release",l,s),a.data(l[0],"data-loading",!0),(i=l.find(".oj-pulltorefresh-icon")).length>0&&("progresscircle"===p?i[0].setAttribute("value","-1"):(null!=(d=a.data(l[0],"data-lasticonclass"))&&i.removeClass(d),i.addClass("oj-pulltorefresh-icon-full")));var f=a.data(a(t)[0],"data-pulltorefresh-refresher")?a.data(a(t)[0],"data-pulltorefresh-refresher"):t;u=r.getContext(f).getBusyContext().addBusyState({description:"PullToRefresh:handleRelease"}),a.data(a(f)[0],"data-pulltorefresh-busystate",u),o().then(function(){c=function(){h._fireEvent(e,"complete",l,s),h._cleanup(l),l.off("transitionend",c),l.prev().text(""),h._resolveBusyState(t)},l.prev().text(h._getTranslatedString("oj-pullToRefresh.ariaRefreshCompleteLink")),l.prev().prev().css("position",""),a.data(l[0],"data-closing",!0),l.on("transitionend",c),l.css("height",0)},function(){c=function(){h._cleanup(l),l.off("transitionend",c),l.prev().text(""),h._resolveBusyState(t)},l.prev().prev().css("position",""),a.data(l[0],"data-closing",!0),l.on("transitionend",c),l.css("height",0)})},h.tearDownPullToRefresh=function(e){a(e).children(".oj-pulltorefresh-outer").remove(),a(e).off(".pulltorefresh"),e.classList.remove("oj-pulltorefresh-action"),h._resolveBusyState(e)},h._resolveBusyState=function(e){var t,r,l=a.data(e,"data-pulltorefresh-refresher")?a.data(e,"data-pulltorefresh-refresher"):e;t=a(l)[0],(r=a.data(t,"data-pulltorefresh-busystate"))&&(r(null),a.removeData(t,"data-pulltorefresh-busystate"))},h._fireEvent=function(e,t,r,l){var o=a.Event("oj"+t);o.originalEvent=e,r.trigger(o,{content:r,distance:l})},h._createDefaultContent=function(e,t,r){var l,o,s,i,d=(n.parseJSONFromFontFamily("oj-refresher-option-defaults")||{}).loadingIcon;e.addClass("oj-pulltorefresh-content").attr("aria-hidden","true"),"progresscircle"===d?((l=document.createElement("oj-progress-circle")).classList.add("oj-pulltorefresh-icon"),l.setAttribute("value","0"),l.setAttribute("size","sm"),l.setAttribute("data-oj-binding-provider","none")):(l=a(document.createElement("div"))).addClass("oj-icon oj-pulltorefresh-icon oj-pulltorefresh-icon-initial"),(o=a(document.createElement("div"))).addClass("oj-pulltorefresh-icon-container"),o.append(l),a.data(e[0],"data-lasticonclass","oj-pulltorefresh-icon-initial"),e.append(o),null!=t&&(s=a(document.createElement("div")).addClass("oj-pulltorefresh-primary-text").text(t),e.append(s),null!=r&&(i=a(document.createElement("div")).addClass("oj-pulltorefresh-secondary-text").text(r),e.append(i)))},h._showHideDefaultText=function(e,t){var a,r;a=e.find(".oj-pulltorefresh-primary-text"),r=e.find(".oj-pulltorefresh-secondary-text"),t?(a&&a.show(),r&&r.show()):(a&&a.hide(),r&&r.hide())},h._renderAccessibleLink=function(e,t,r,l){var o,s,n;(o=a(document.createElement("a"))).text(h._getTranslatedString("oj-pullToRefresh.ariaRefreshLink")),o.addClass("oj-helper-hidden-accessible").attr("href","#").focus(function(){o.css("position","static")}).blur(function(e){null!=e.relatedTarget&&o.css("position","")}).click(function(a){s=t.children().last(),h._handlePull(a,s,l),h._handleRelease(a,e,s,r)}),(n=a(document.createElement("div"))).addClass("oj-helper-hidden-accessible").attr("aria-live","polite"),t.append(o),t.append(n)},h._getTranslatedString=function(e){var t=o.getTranslatedString(e);if(t===e){var a="oj-ojRefresher."+e.split(".")[1];t=o.getTranslatedString(a)}return t},h._cleanup=function(e){a.removeData(e[0],"data-pullstart"),a.removeData(e[0],"data-pullstart-horiz"),a.removeData(e[0],"data-loading"),a.removeData(e[0],"data-closing"),e.find(".oj-pulltorefresh-icon").length>0&&e.empty()};const p=h.setupPullToRefresh,f=h.tearDownPullToRefresh;e.setupPullToRefresh=p,e.tearDownPullToRefresh=f,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojpulltorefresh.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojanimation',["exports","ojs/ojcore-base","jquery","ojs/ojdomutils","ojs/ojthemeutils","ojs/ojlogger"],function(e,t,n,i,a,o){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;const r={};t._registerLegacyNamespaceProp("AnimationUtils",r),r._getName=function(e,t){if(!r._nameMap){r._nameMap={};var n=r._nameMap,i=e.style;n.backfaceVisibility=void 0!==i.webkitBackfaceVisibility?"webkitBackfaceVisibility":"backfaceVisibility",n.transform=void 0!==i.webkitTransform?"webkitTransform":"transform",n.transformOrigin=void 0!==i.webkitTransformOrigin?"webkitTransformOrigin":"transformOrigin",n.transition=void 0!==i.webkitTransition?"webkitTransition":"transition",n.transitionend=void 0!==i.webkitTransition?"webkitTransitionEnd":"transitionend"}return r._nameMap[t]||t},r._getElementStyle=function(e,t){return e.style[r._getName(e,t)]},r._setElementStyle=function(e,t,n){e.style[r._getName(e,t)]=n},r._animate=function(e,t,i,a,o,s){var l=[].concat(o),f=function(n,f){var c=function(e){var t=0===e.propertyName.indexOf("-webkit-")?e.propertyName.substr(8):e.propertyName;t=r._getCamelCasePropName(t);var n=l.indexOf(t);n>-1&&(l.length>1?l.splice(n,1):u())},d=0,m=!1;function u(){m||(d&&(window.cancelAnimationFrame(d),d=0),e.removeEventListener(r._getName(e,"transitionend"),c),n&&n(!0),m=!0)}null==i&&(i={}),null==i.css&&(i.css={}),i.css.transition=r._createTransitionValue(e,o,a);var p=r._saveStyle(e,t,i,a,s||o);r._applyState(e,t,p>1),e.addEventListener(r._getName(e,"transitionend"),c);var g=a.duration,h=a.delay,v=a._skipPromise;function _(){d=0,r._applyState(e,i,p>1)}null==t?_():(a._noReflow||(r._x=e.offsetWidth),d=window.requestAnimationFrame(_));var y=r._getTotalTiming(g,h);v||setTimeout(u,y+100)};return a._skipPromise?(f(null),null):new Promise(f).then(function(){t&&t.addClass&&n(e).removeClass(t.addClass),i&&i.addClass&&n(e).removeClass(i.addClass),r._restoreStyle(e)})},r._saveCssValues=function(e,t,n,i){for(var a=Object.keys(t),o=Object.prototype.hasOwnProperty,s=0;s<a.length;s++){var l=a[s];o.call(n,l)||i&&-1!==i.indexOf(l)||(n[l]=r._getElementStyle(e,l))}},r._saveStyle=function(e,t,n,i,a){var o=e._ojSavedStyle||{},s=t&&t.css?t.css:{},l=n&&n.css?n.css:{},f=a;i&&"all"===i.persist||(f=null),r._saveCssValues(e,s,o,f),r._saveCssValues(e,l,o,f),e._ojSavedStyle=o;var c=e._ojEffectCount||0;return c+=1,e._ojEffectCount=c,c},r._restoreStyle=function(e){var t=e,n=t._ojEffectCount;if(n>1)t._ojEffectCount=n-1;else{var i=t._ojSavedStyle;if(i){for(var a=Object.keys(i),o=0;o<a.length;o++){var s=a[o];r._setElementStyle(t,s,i[s])}delete t._ojSavedStyle,delete t._ojEffectCount}}},r._getCamelCasePropName=function(e){if(e.indexOf("-")>=0){for(var t="",n=e.split("-"),i=0;i<n.length;i++){var a=n[i];a&&(t?t+=a.charAt(0).toUpperCase()+a.slice(1):t=a)}return t}return e},r._getHyphenatedPropName=function(e){var t=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return 0===t.indexOf("webkit")&&(t="-"+t),t},r._concatMultiValue=function(e,t,n,i,a){if(t.css[n]){var o=r._getElementStyle(e,n);o&&0!==o.indexOf(i)&&(t.css[n]=o+a+t.css[n])}},r._splitTransform=function(e){var t=[];if(e&&"none"!==e)for(var n=e,i=n.indexOf(")");i>0;){var a=n.substr(0,i+1);t.push(a.trim()),i=(n=n.slice(i+1)).indexOf(")")}return t},r._getTransformFuncName=function(e){var t=e.indexOf("(");return t>=1?e.substr(0,t):e},r._applyTransform=function(e,t){for(var n=r._getElementStyle(e,"transform"),i=r._splitTransform(n),a=r._splitTransform(t),o=[],s=0;s<a.length;s++){var l=r._getTransformFuncName(a[s]),f=!1;if(l)for(var c=0;c<i.length;c++)0===i[c].indexOf(l+"(")&&(i[c]=a[s],f=!0);f||o.push(a[s])}return(i=i.concat(o)).join(" ")},r._applyState=function(e,t,i){if(t){if(t.css){i&&r._concatMultiValue(e,t,"transition","all",", "),t.css.transform&&(t.css.transform=r._applyTransform(e,t.css.transform));for(var a=t.css,o=Object.keys(a),s=0;s<o.length;s++){var l=o[s];r._setElementStyle(e,l,a[l])}}t.addClass&&n(e).addClass(t.addClass),t.removeClass&&n(e).removeClass(t.removeClass)}},r._getTimingValue=function(e){var t=parseFloat(e);return isNaN(t)?0:e.indexOf("ms")>-1?t:1e3*t},r._getTotalTiming=function(e,t){var n=r._getTimingValue(e);return n>0?n+(t?r._getTimingValue(t):0):0},r._calcCssTime=function(e,t,n){for(var i=e.split(","),a=t.split(","),o=n.split(","),s=i.length,l=a.length,f=o.length,c=0,d=0;d<s;d++){var m=o[d%f],u=a[d%l],p=r._getTotalTiming(m,u);c=Math.max(c,p)}return c},r._calcEffectTime=function(e){var t,n,i,a=window.getComputedStyle(e);t=a.animationName||a.webkitAnimationName,n=a.animationDelay||a.webkitAnimationDelay,i=a.animationDuration||a.webkitAnimationDuration;var o=r._calcCssTime(t,n,i);t=a.transitionProperty||a.webkitTransitionProperty,n=a.transitionDelay||a.webkitTransitionDelay,i=a.transitionDuration||a.webkitTransitionDuration;var s=r._calcCssTime(t,n,i);return Math.max(o,s)},r._fillEmptyOptions=function(e,t){e.delay=e.delay||t.delay,e.duration=e.duration||t.duration,e.timingFunction=e.timingFunction||t.timingFunction,e.persist=e.persist||t.persist},r._triggerEvent=function(e,t,n,i){var a;if(i&&i._trigger)a=!i._trigger(t,null,n);else{var o="oj"+t.substr(0,1).toUpperCase()+t.substr(1),r=new CustomEvent(o,{detail:n,bubbles:!0,cancelable:!0}),s=i||e;s.dispatchEvent&&s.dispatchEvent(r),a=r.defaultPrevented}return a},r.startAnimation=function(e,t,i,a){return e=n(e)[0],new Promise(function(o,s){var l=n(e),f="oj-animate-"+t,c=f+"-active",d=!1,m=!1,u=function(){if(d&&m){l.removeClass(f),l.removeClass(c),r._restoreStyle(e),o(!0);var n={action:t,element:e};r._triggerEvent(e,"animateEnd",n,a)}},p=function(){d=!0,u()},g=function(){m=!0,u()};r._saveStyle(e,null,null,null,null);var h={action:t,element:e,endCallback:p};if(!r._triggerEvent(e,"animateStart",h,a)){for(var v=[].concat(i),_=[],y={},x=0;x<v.length;x++){var b,C=v[x],O="";null!=C&&"none"!==C&&("string"==typeof C?(O=C,b={}):"object"==typeof C&&(O=C.effect,b=n.extend({},C)),r._fillEmptyOptions(b,y),y=n.extend({},b)),O&&r[O]&&_.push(r[O](e,b))}_.length?Promise.all(_).then(p):p()}l.addClass(f);var w=window.requestAnimationFrame(function(){w=0,l.addClass(c);var t=r._calcEffectTime(e);t>0?setTimeout(g,t+100):g()});setTimeout(function(){w&&(window.cancelAnimationFrame(w),w=0,g())},1e3)})},r._mergeOptions=function(e,t){return null==r._defaultOptions&&(r._defaultOptions=a.parseJSONFromFontFamily("oj-animation-effect-default-options")),n.extend({duration:"400ms"},r._defaultOptions?r._defaultOptions[e]:null,t)},r._createTransitionValue=function(e,t,n){var i="";if(t)for(var a=0;a<t.length;a++){var o=r._getName(e,t[a]);i+=(a>0?", ":"")+r._getHyphenatedPropName(o)+" "+n.duration,n.timingFunction&&(i+=" "+n.timingFunction),n.delay&&(i+=" "+n.delay)}return i},r._fade=function(e,t,n,i,a){var o=r._mergeOptions(n,t),s={css:{opacity:i}},l={css:{opacity:a}};return o&&(o.startOpacity&&(s.css.opacity=o.startOpacity),o.endOpacity&&(l.css.opacity=o.endOpacity)),r._animate(e,s,l,o,["opacity"])},r.fadeIn=function(e,t){return r._fade(e,t,"fadeIn",0,1)},r.fadeOut=function(e,t){return r._fade(e,t,"fadeOut",1,0)},r.expand=function(e,t){return r._expandCollapse(e,t,!0)},r.collapse=function(e,t){return r._expandCollapse(e,t,!1)},r._wrapRowContent=function(e,t){var n,i,a=[],o=e.children,r=[],s=[];for(e._ojSavedHeight=e.style.height,i=0;i<o.length;i++){n=o[i];var l=window.getComputedStyle(n);r.push(l.padding),s.push(l.textAlign),n._ojSavedPadding=n.style.padding}for(i=0;i<o.length;i++){n=o[i];var f=document.createElement("div");f.style.overflow="hidden;";var c=document.createElement("div");for(c.style.display="table-cell",c.style.verticalAlign="middle",c.style.boxSizing="border-box",c.style.height=t,c.style.padding=r[i],c.style.textAlign=s[i],f.appendChild(c);n.firstChild;)c.appendChild(n.firstChild);n.appendChild(f),n.style.padding="0",a.push(f)}return e.style.height="0",a},r._unwrapRowContent=function(e){for(var t=e.children,n=0;n<t.length;n++){var i=t[n],a=i.children[0];if(a){var o=a.children[0];if(o)for(;o.firstChild;)i.appendChild(o.firstChild);i.removeChild(a)}i.style.padding=i._ojSavedPadding,delete i._ojSavedPadding}e.style.height=e._ojSavedHeight,delete e._ojSavedHeight},r._expandCollapseRow=function(e,t,i){var a=Promise.resolve(),o=e.offsetHeight+"px",s=r._wrapRowContent(e,o),l=n.extend({},t);if(i?l.endMaxHeight||(l.endMaxHeight=o):l.startMaxHeight||(l.startMaxHeight=o),l.persist="all",l._noReflow=!0,s.length)for(var f=0;f<s.length;f++)0===f?(l._skipPromise=!1,a=r._expandCollapse(s[f],l,i)):(l._skipPromise=!0,r._expandCollapse(s[f],l,i));return a.then(function(){null!=t&&"all"===t.persist||r._unwrapRowContent(e)})},r._getSizeLimit=function(e,t,n,i,a){var o=n;if(!o)if(i)o="0";else{var r=a?t.maxWidth:t.maxHeight;o="none"!==r?r:(a?e.offsetWidth:e.offsetHeight)+"px"}return o},r._expandCollapse=function(e,t,n){if(e&&"TR"===e.tagName)return r._expandCollapseRow(e,t,n);var i=r._mergeOptions(n?"expand":"collapse",t),a={css:{}},o={css:{}},s=i.direction||"height",l=a.css,f=o.css,c=window.getComputedStyle(e),d=[];if("both"===s||"height"===s){var m=r._getSizeLimit(e,c,i.startMaxHeight,n,!1),u=r._getSizeLimit(e,c,i.endMaxHeight,!n,!1);l.maxHeight=m,f.maxHeight=u,d.push("maxHeight")}if("both"===s||"width"===s){var p=r._getSizeLimit(e,c,i.startMaxWidth,n,!0),g=r._getSizeLimit(e,c,i.endMaxWidth,!n,!0);l.maxWidth=p,f.maxWidth=g,d.push("maxWidth")}l.overflow=i.overflow?i.overflow:"hidden";var h=[].concat(d);return h.push("overflow"),r._animate(e,a,o,i,d,h)},r.zoomIn=function(e,t){return r._zoom(e,t,!0)},r.zoomOut=function(e,t){return r._zoom(e,t,!1)},r._zoom=function(e,t,n){var i,a=r._mergeOptions(n?"zoomIn":"zoomOut",t),o={css:{}},s={css:{}},l=a.axis||"both";i="both"===l?"scale":"x"===l?"scaleX":"scaleY";var f=o.css,c=s.css;return f.transform=i+"("+(n?0:1)+") translateZ(0)",c.transform=i+"("+(n?1:0)+") translateZ(0)",f.transformOrigin=a.transformOrigin||"center",r._animate(e,o,s,a,["transform"])},r.slideIn=function(e,t){return r._slide(e,t,!0)},r.slideOut=function(e,t){return r._slide(e,t,!1)},r._slide=function(e,t,n){var a=r._mergeOptions(n?"slideIn":"slideOut",t),o={css:{}},s={css:{}},l=a.direction||"start",f="0",c="0",d=o.css,m=s.css;if(a.offsetX||a.offsetY)a.offsetX&&(f=a.offsetX),a.offsetY&&(c=a.offsetY);else{var u="rtl"===i.getReadingDirection();switch(l){case"left":f=(n?e.offsetWidth:-e.offsetWidth)+"px";break;case"right":f=(n?-e.offsetWidth:e.offsetWidth)+"px";break;case"top":c=(n?e.offsetHeight:-e.offsetHeight)+"px";break;case"bottom":c=(n?-e.offsetHeight:e.offsetHeight)+"px";break;case"end":f=(n?-e.offsetWidth:e.offsetWidth)*(u?-1:1)+"px";break;default:f=(n?e.offsetWidth:-e.offsetWidth)*(u?-1:1)+"px"}}return n?(d.transform="translate("+f+","+c+") translateZ(0)",m.transform="translate(0,0) translateZ(0)"):(d.transform="translate(0,0) translateZ(0)",m.transform="translate("+f+","+c+") translateZ(0)"),r._animate(e,o,s,a,["transform"])},r.ripple=function(e,t){var i=r._mergeOptions("ripple",t),a={css:{}},o={css:{}},s=e.offsetWidth,l=e.offsetHeight,f=n("<div>").css({position:"absolute",overflow:"hidden"}),c=n("<div class='oj-animation-effect-ripple oj-animation-rippler'>"),d="static"===window.getComputedStyle(e).position?{left:e.offsetLeft,top:e.offsetTop}:{left:0,top:0};e.insertBefore(f[0],e.firstChild),f.css({left:d.left+"px",top:d.top+"px",width:s+"px",height:l+"px"}),f.prepend(c);var m=a.css,u=o.css;return r._setRippleOptions(m,c,f,i),m.transform="scale(0) translateZ(0)",m.opacity=i.startOpacity||c.css("opacity"),u.transform="scale(1) translateZ(0)",u.opacity=i.endOpacity||0,i.persist="all",r._animate(c[0],a,o,i,["transform","opacity"]).then(function(){f.remove()})},r._setRippleOptions=function(e,t,n,i){var a=e,o=t.width(),s=n.width(),l=n.height();if(i.diameter){var f=i.diameter,c=parseInt(f,10);isNaN(c)||(o="%"===f.charAt(f.length-1)?Math.floor(Math.min(s,l)*(c/100)):c,a.width=o+"px",a.height=o+"px")}var d,m="static"===n.css("position")?n.position():{left:0,top:0};null!=(d=r._calcRippleOffset(i.offsetX,o,s,m.left))&&(a.left=d+"px"),null!=(d=r._calcRippleOffset(i.offsetY,o,l,m.top))&&(a.top=d+"px"),i.color&&(a.backgroundColor=i.color)},r._calcRippleOffset=function(e,t,n,i){var a,o=e||"50%",r=parseInt(o,10);return isNaN(r)||(a="%"===o.charAt(o.length-1)?n*(r/100)-t/2:r-t/2,a=Math.floor(a+i)),a},r._removeRipple=function(e,t){var i=t||{},a=i.removeEffect||"fadeOut",s=n(".oj-animation-rippler",e);if(0!==s.length)return a in{fadeOut:1,collapse:1,zoomOut:1,slideOut:1}?r[a](s,i).then(function(){s.remove()}):s.remove();o.warn("No rippler so returning")},r._calcBackfaceAngle=function(e){var t,n=e.match(/^([+-]?\d*\.?\d*)(.*)$/),i=parseFloat(n[1]),a=n[2];switch(a){case"deg":t=i-180+a;break;case"grad":t=i-200+a;break;case"rad":t=i-3.1416+a;break;case"turn":t=i-.5+a;break;default:o.error("Unknown angle unit in flip animation: "+a)}return t},r._flip=function(e,t,i,a,o){if(t&&"children"===t.flipTarget){var s,l=[],f=n(e).children(),c=n.extend({},t);delete c.flipTarget;var d=n.extend({},c);d.startAngle=r._calcBackfaceAngle(t.startAngle||a),d.endAngle=r._calcBackfaceAngle(t.endAngle||o);for(var m=0;m<f.length;m++)s=n(f[m]).hasClass("oj-animation-backface")?d:c,l.push(r._flip(f[m],s,i,a,o));return Promise.all(l)}var u,p={},g={},h={css:p},v={css:g},_="rotateY(",y="2000px",x="hidden",b="center";(t=r._mergeOptions(i,t))&&("x"===t.axis&&(_="rotateX("),t.startAngle&&(a=t.startAngle),t.endAngle&&(o=t.endAngle),t.perspective&&(y=t.perspective),t.backfaceVisibility&&(x=t.backfaceVisibility),t.transformOrigin&&(b=t.transformOrigin)),u="perspective("+y+") "+_;return p.transform=u+a+")",p.backfaceVisibility=x,p.transformOrigin=b,g.transform=u+o+")",r._animate(e,h,v,t,["transform"],["transform","backfaceVisibility","transformOrigin"])},r.flipIn=function(e,t){return r._flip(e,t,"flipIn","-180deg","0deg")},r.flipOut=function(e,t){return r._flip(e,t,"flipOut","0deg","180deg")},r.addTransition=function(e,t){var n=r._mergeOptions("addTransition",t);return r._animate(e,null,null,n,n.transitionProperties)},r._createHeroParent=function(){var e=document.createElement("div"),t=document.body;t.appendChild(e),e.style.position="absolute",e.style.height=t.offsetHeight+"px",e.style.width=t.offsetWidth+"px",e.style.left=t.offsetLeft+"px",e.style.top=t.offsetTop+"px",e.style.zIndex=2e3,e.className="oj-animation-host-viewport";var n=document.createElement("div");return n.className="oj-animation-host",e.appendChild(n),n},r._removeHeroParent=function(e){if(e){var t=e.parentNode;t&&t.parentNode&&t.parentNode.removeChild(t)}},r._defaultHeroCreateClonedElement=function(e){return e.fromElement.cloneNode(!0)},r._defaultHeroHideFromAndToElements=function(e){var t=e.fromElement,n=e.toElement;t.style.visibility="hidden",n.style.visibility="hidden"},r._defaultHeroAnimateClonedElement=function(e){return new Promise(function(t){var n=e.clonedElement.style;n.transformOrigin="left top",n.transform="translate(0, 0) scale(1, 1)",requestAnimationFrame(function(){n.transitionDelay=e.delay,n.transitionDuration=e.duration,n.transitionTimingFunction=e.timingFunction,n.transitionProperty="transform";var i="translate("+e.translateX+"px,"+e.translateY+"px)";i+=" scale("+e.scaleX.toFixed(2)+","+e.scaleY.toFixed(2)+")",n.transform=i;var a=r._getTimingValue(e.delay)+r._getTimingValue(e.duration);setTimeout(function(){t()},a)})})},r._defaultHeroShowToElement=function(e){e.toElement.style.visibility="visible"},r._doAnimateHero=function(e,t,n,i,a,o){var s=document.querySelector(t);if(null!=s){var l=e.getBoundingClientRect(),f=s.getBoundingClientRect(),c=f.left-l.left,d=f.top-l.top,m=f.width/l.width,u=f.height/l.height,p={fromElement:e,toElement:s,clonedElement:null,translateX:c,translateY:d,scaleX:m,scaleY:u,toElementElapsedTime:i,delay:n.delay,duration:n.duration,timingFunction:n.timingFunction},g=n.createClonedElement(p);p.clonedElement=g;var h=r._createHeroParent(),v=h.getBoundingClientRect();h.appendChild(g),g.style.position="absolute",g.style.left=l.left-v.left+"px",g.style.top=l.top-v.top+"px",n.hideFromAndToElements(p),g.style.visibility="visible",n.animateClonedElement(p).then(function(){_(),a()}).catch(function(e){_(),o(e)})}else{i+100>n.toElementWaitTime?o("toElement not found in DOM after toElementWaitTime has expired"):setTimeout(function(){r._doAnimateHero(e,t,n,i+100,a,o)},100)}function _(){n.showToElement(p),r._removeHeroParent(h)}},r.animateHero=function(e,t){var n=e,i={toElementWaitTime:5e3,createClonedElement:r._defaultHeroCreateClonedElement,hideFromAndToElements:r._defaultHeroHideFromAndToElements,animateClonedElement:r._defaultHeroAnimateClonedElement,showToElement:r._defaultHeroShowToElement,delay:"0s",duration:"400ms",timingFunction:"ease"};return Object.assign(i,t),new Promise(function(e,a){n?t.toElementSelector?r._doAnimateHero(n,t.toElementSelector,i,0,e,a):a("No options.toElementSelector specified"):a("No element specified")})};const s=r.startAnimation,l=r.fadeIn,f=r.fadeOut,c=r.expand,d=r.collapse,m=r.zoomIn,u=r.zoomOut,p=r.slideIn,g=r.slideOut,h=r.ripple,v=r.flipIn,_=r.flipOut,y=r.addTransition,x=r.animateHero;e.addTransition=y,e.animateHero=x,e.collapse=d,e.expand=c,e.fadeIn=l,e.fadeOut=f,e.flipIn=v,e.flipOut=_,e.ripple=h,e.slideIn=p,e.slideOut=g,e.startAnimation=s,e.zoomIn=m,e.zoomOut=u,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojanimation.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojdatacollection-common',["exports","jquery","ojs/ojcore-base","ojs/ojdomutils"],function(e,t,n,l){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;const r=function(){};r._TAB_INDEX="tabIndex",r._DATA_OJ_TABMOD="data-oj-tabmod",r._FOCUSABLE_ELEMENTS_QUERY="input, select, button, a[href], textarea, object, [tabIndex]:not([tabIndex='-1'])",r._FOCUSABLE_ELEMENTS_TAG=["input","select","button","a","textarea","object"],r.CHECKVIEWPORT_THRESHOLD=3,r.getFocusableElementsInNode=function(e,t){var l=[],E=n.AgentUtils.getAgentInfo(),i=!0;if(n.AgentUtils.BROWSER.IE===E.browser&&null==e.parentNode&&(i=!1),i)for(var s=e.querySelectorAll(r._FOCUSABLE_ELEMENTS_QUERY),o=s.length,a=0;a<o;a++){var u=s[a];if(!u.disabled&&(t||"none"!==u.style.display)){var _=parseInt(u.getAttribute(r._TAB_INDEX),10);(isNaN(_)||_>=0)&&l.push(u)}}return l},r.disableElement=function(e){var t=parseInt(e.getAttribute(r._TAB_INDEX),10);e.setAttribute(r._DATA_OJ_TABMOD,t),e.setAttribute(r._TAB_INDEX,-1)},r.disableAllFocusableElements=function(e,t,n){for(var l=[],E=r.getFocusableElementsInNode(e,t),i=0;i<E.length;i++)n&&E[i]===document.activeElement||(r.disableElement(E[i]),l.push(E[i]));return l},r.enableAllFocusableElements=function(e){for(var t=e.querySelectorAll("["+r._DATA_OJ_TABMOD+"]"),n=0;n<t.length;n++){var l=parseInt(t[n].getAttribute(r._DATA_OJ_TABMOD),10);t[n].removeAttribute(r._DATA_OJ_TABMOD),isNaN(l)?t[n].removeAttribute(r._TAB_INDEX):t[n].setAttribute(r._TAB_INDEX,l)}return t},r.isFromDefaultSelector=function(e){return e.target.classList.contains("oj-selectorbox")},r.getFocusableElementsIncludingDisabled=function(e){var t=[];let n=e.querySelectorAll(r._FOCUSABLE_ELEMENTS_QUERY+",["+r._DATA_OJ_TABMOD+"]");for(var l=0;l<n.length;l++){var E=n[l];E.disabled||"none"===E.style.display||t.push(E)}return t},r.isElementOrAncestorFocusable=function(e,t){return!(null==e||t&&t(e))&&(!!e.hasAttribute(r._DATA_OJ_TABMOD)||(parseInt(e.getAttribute(r._TAB_INDEX),10)>=0||(r._FOCUSABLE_ELEMENTS_TAG.indexOf(e.tagName.toLowerCase())>-1||r.isElementOrAncestorFocusable(e.parentElement,t))))},r.handleActionableTab=function(e,t){var n=r.getFocusableElementsInNode(t);return n.length>0&&e.target===n[n.length-1]&&(n[0].focus(),!0)},r.handleActionablePrevTab=function(e,t){var n=r.getFocusableElementsInNode(t);return n.length>0&&e.target===n[0]&&(n[n.length-1].focus(),!0)},r.isEventClickthroughDisabled=function(e,t){for(var n=e.target;null!=n&&n!==t;){if(r.isClickthroughDisabled(n))return!0;n=n.parentNode}return!1},r.isClickthroughDisabled=function(e){return"disabled"===e.dataset.ojClickthrough},r.getDefaultScrollBarWidth=function(e){var t;if(e&&e.style){var n=e.style.visibility,l=e.style.position,r=e.style.overflowY,E=e.style.height,i=e.style.width;e.style.visibility="hidden",e.style.position="absolute",e.style.overflowY="hidden",e.style.height="50px",e.style.width="50px";var s=e.offsetWidth-e.clientWidth;e.style.overflowY="scroll",t=e.offsetWidth-e.clientWidth-s,e.style.width=i,e.style.height=E,e.style.overflowY=r,e.style.position=l,e.style.visibility=n}return t},r.disableDefaultBrowserStyling=function(e){e.setAttribute("x-ms-format-detection","none")},r.applyMergedInlineStyles=function(e,t,n){var l=r.convertStringToStyleObj(n),E=r.convertStringToStyleObj(t),i=Object.assign({},l,E);r.applyStyleObj(e,i)},r.convertStringToStyleObj=function(e){var t={};if(e.split)for(var n=e.split(";"),l=0;l<n.length;l++){var r=n[l];if(""!==r){var E=r.split(":");2===E.length&&(t[E[0].trim()]=E[1].trim())}}return t},r.applyStyleObj=function(e,t){for(var n=Object.keys(t),l=Object.values(t),r=0;r<n.length;r++)e.style[n[r]]=l[r]},r.isMobileTouchDevice=function(){var e=n.AgentUtils.getAgentInfo();return e.os===n.AgentUtils.OS.IOS||e.os===n.AgentUtils.OS.ANDROID||e.os===n.AgentUtils.OS.WINDOWSPHONE},r.getNoJQFocusHandlers=function(e,t){return l.getNoJQFocusHandlers(e,t)},r.areKeySetsEqual=function(e,t){if(e===t)return!0;var l,r,E=e.isAddAll();if(E!==t.isAddAll())return!1;if(E?(l=e.deletedValues(),r=t.deletedValues()):(l=e.values(),r=t.values()),l.size!==r.size)return!1;for(var i=l.values(),s=r.values(),o=i.next(),a=s.next();!o.done;){if(!n.KeyUtils.equals(o.value,a.value))return!1;o=i.next(),a=s.next()}return!0},r.KEYBOARD_KEYS={_SPACEBAR:" ",_SPACEBAR_IE:"SpaceBar",_SPACEBAR_CODE:32,_ENTER:"Enter",_ENTER_CODE:13,_UP:"ArrowUp",_UP_IE:"Up",_UP_CODE:38,_DOWN:"ArrowDown",_DOWN_IE:"Down",_DOWN_CODE:40,_LEFT:"ArrowLeft",_LEFT_IE:"Left",_LEFT_CODE:37,_RIGHT:"ArrowRight",_RIGHT_IE:"Right",_RIGHT_CODE:39,_HOME:"Home",_HOME_CODE:36,_END:"End",_END_CODE:35,_TAB:"Tab",_TAB_CODE:9,_ESCAPE:"Escape",_ESCAPE_IE:"Esc",_ESCAPE_CODE:27,_F2:"F2",_F2_CODE:113,_NUM5_KEY:"5",_NUM5_KEY_CODE:53,_LETTER_A:"a",_LETTER_A_UPPERCASE:"A",_LETTER_A_CODE:65},r.isEnterKeyEvent=function(e){return e===r.KEYBOARD_KEYS._ENTER||e===r.KEYBOARD_KEYS._ENTER_CODE},r.isSpaceBarKeyEvent=function(e){return e===r.KEYBOARD_KEYS._SPACEBAR||e===r.KEYBOARD_KEYS._SPACEBAR_IE||e===r.KEYBOARD_KEYS._SPACEBAR_CODE},r.isEscapeKeyEvent=function(e){return e===r.KEYBOARD_KEYS._ESCAPE||e===r.KEYBOARD_KEYS._ESCAPE_IE||e===r.KEYBOARD_KEYS._ESCAPE_CODE},r.isTabKeyEvent=function(e){return e===r.KEYBOARD_KEYS._TAB||e===r.KEYBOARD_KEYS._TAB_CODE},r.isF2KeyEvent=function(e){return e===r.KEYBOARD_KEYS._F2||e===r.KEYBOARD_KEYS._F2_CODE},r.isHomeKeyEvent=function(e){return e===r.KEYBOARD_KEYS._HOME||e===r.KEYBOARD_KEYS._HOME_CODE},r.isEndKeyEvent=function(e){return e===r.KEYBOARD_KEYS._END||e===r.KEYBOARD_KEYS._END_CODE},r.isArrowUpKeyEvent=function(e){return e===r.KEYBOARD_KEYS._UP||e===r.KEYBOARD_KEYS._UP_IE||e===r.KEYBOARD_KEYS._UP_CODE},r.isArrowDownKeyEvent=function(e){return e===r.KEYBOARD_KEYS._DOWN||e===r.KEYBOARD_KEYS._DOWN_IE||e===r.KEYBOARD_KEYS._DOWN_CODE},r.isArrowLeftKeyEvent=function(e){return e===r.KEYBOARD_KEYS._LEFT||e===r.KEYBOARD_KEYS._LEFT_IE||e===r.KEYBOARD_KEYS._LEFT_CODE},r.isArrowRightKeyEvent=function(e){return e===r.KEYBOARD_KEYS._RIGHT||e===r.KEYBOARD_KEYS._RIGHT_IE||e===r.KEYBOARD_KEYS._RIGHT_CODE},r.isNumberFiveKeyEvent=function(e){return e===r.KEYBOARD_KEYS._NUM5_KEY||e===r.KEYBOARD_KEYS._NUM5_KEY_CODE},r.isLetterAKeyEvent=function(e){return e===r.KEYBOARD_KEYS._LETTER_A||e===r.KEYBOARD_KEYS._LETTER_A_UPPERCASE||e===r.KEYBOARD_KEYS._LETTER_A_CODE},r.getAddEventKeysResult=function(e,t,n){var l,E,i,s,o;function a(e,t){return{key:e,index:t}}var u=[...e],_=[];t.keys.forEach(function(e){_.push(e)});var c=[],A=t.addBeforeKeys?t.addBeforeKeys:t.afterKeys;null!=A&&A.forEach(function(e){c.push(e)});var K=t.indexes;if(c.length===_.length)for(var O=0;_.length!==O;)for(O=_.length,l=_.length-1;l>=0;l--)i=_[l],r.containsKey(u,i)||(null!=(E=c[l])?-1!==(o=r._indexOfKey(u,E))&&(u.splice(o,0,i),c.splice(l,1),_.splice(l,1)):n&&(u.push(i),c.splice(l,1),_.splice(l,1)));else if(null!=K&&K.length===_.length){var f=[];for(l=0;l<_.length;l++)if(i=_[l],!r.containsKey(u,i))if(null!=(s=K[l])){for(var d=!1,D=0;D<f.length;D++)if(f[D].index>s){f.splice(D,0,a(i,s)),d=!0;break}d||f.push(a(i,s))}else n&&u.push(i);for(l=0;l<f.length;l++){var v=f[l];v.index<u.length?u.splice(v.index,0,v.key):v.index===u.length&&n&&u.push(v.key)}}else n&&_.forEach(function(e){u.push(e)});return u},r.containsKey=function(e,t){for(var l=0;l<e.length;l++)if(n.KeyUtils.equals(e[l],t))return!0;return!1},r._indexOfKey=function(e,t){for(var l=0;l<e.length;l++)if(n.KeyUtils.equals(e[l],t))return l;return-1},r.calculateOffsetTop=function(e,t){for(var n=0,l=t;l&&l!==e&&e.contains(l);)n+=l.offsetTop,l=l.offsetParent;return n};const E=r.applyMergedInlineStyles,i=r.applyStyleObj,s=r.areKeySetsEqual,o=r.containsKey,a=r.convertStringToStyleObj,u=r.disableElement,_=r.disableAllFocusableElements,c=r.disableDefaultBrowserStyling,A=r.enableAllFocusableElements,K=r.getAddEventKeysResult,O=r.getDefaultScrollBarWidth,f=r.getFocusableElementsIncludingDisabled,d=r.isElementOrAncestorFocusable,D=r.getFocusableElementsInNode,v=r.getLogicalChildPopup=function(e){for(var r=n.ZOrderUtils.findOpenPopups(),E=0;E<r.length;E++){var i=r[E].firstElementChild,s=l.getLogicalParent(t(i));if(null!=s&&t(e).has(s.get(0)).length>0&&n.ZOrderUtils.getStatus(i)===n.ZOrderUtils.STATUS.OPEN)return i}return null},y=r.getNoJQFocusHandlers,b=r.handleActionablePrevTab,S=r.handleActionableTab,g=r.isArrowDownKeyEvent,h=r.isArrowLeftKeyEvent,T=r.isArrowRightKeyEvent,p=r.isArrowUpKeyEvent,Y=r.isClickthroughDisabled,B=r.isEndKeyEvent,R=r.isEnterKeyEvent,C=r.isEscapeKeyEvent,m=r.isEventClickthroughDisabled,I=r.isFromDefaultSelector,N=r.isF2KeyEvent,F=r.isHomeKeyEvent,L=r.isMobileTouchDevice,P=r.isSpaceBarKeyEvent,U=r.isTabKeyEvent,w=r.isNumberFiveKeyEvent,H=r.isLetterAKeyEvent,M=r.KEYBOARD_KEYS,j=r.CHECKVIEWPORT_THRESHOLD,x=r.calculateOffsetTop,W=r.isElementInScrollerBounds=function(e,t){var n,l;if(t===document.documentElement)n=0,l=document.documentElement.clientHeight;else{var r=t.getBoundingClientRect();n=r.top,l=r.bottom}var E=e.getBoundingClientRect();return E.top>=n&&E.bottom<=l};e.CHECKVIEWPORT_THRESHOLD=j,e.KEYBOARD_KEYS=M,e.applyMergedInlineStyles=E,e.applyStyleObj=i,e.areKeySetsEqual=s,e.calculateOffsetTop=x,e.containsKey=o,e.convertStringToStyleObj=a,e.disableAllFocusableElements=_,e.disableDefaultBrowserStyling=c,e.disableElement=u,e.enableAllFocusableElements=A,e.getAddEventKeysResult=K,e.getDefaultScrollBarWidth=O,e.getFocusableElementsInNode=D,e.getFocusableElementsIncludingDisabled=f,e.getLogicalChildPopup=v,e.getNoJQFocusHandlers=y,e.handleActionablePrevTab=b,e.handleActionableTab=S,e.isArrowDownKeyEvent=g,e.isArrowLeftKeyEvent=h,e.isArrowRightKeyEvent=T,e.isArrowUpKeyEvent=p,e.isClickthroughDisabled=Y,e.isElementInScrollerBounds=W,e.isElementOrAncestorFocusable=d,e.isEndKeyEvent=B,e.isEnterKeyEvent=R,e.isEscapeKeyEvent=C,e.isEventClickthroughDisabled=m,e.isF2KeyEvent=N,e.isFromDefaultSelector=I,e.isHomeKeyEvent=F,e.isLetterAKeyEvent=H,e.isMobileTouchDevice=L,e.isNumberFiveKeyEvent=w,e.isSpaceBarKeyEvent=P,e.isTabKeyEvent=U,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojdatacollection-common.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojdomscroller',["ojs/ojcore-base","jquery","ojs/ojdatacollection-common","ojs/ojlogger"],function(e,t,r,i){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;const s=function(e,r,i){i=i||{},this._data=r,this._asyncIterator=i.asyncIterator,this._element=t(e)[0],this._contentElement=i.contentElement,this._fetchSize=i.fetchSize,this._fetchSize=this._fetchSize>0?this._fetchSize:25,this._maxCount=i.maxCount,this._maxCount=this._maxCount>0?this._maxCount:500,this._rowCount=i.initialRowCount>0?i.initialRowCount:0,this._successCallback=i.success,this._requestCallback=i.request,this._errorCallback=i.error,this._isOverflowCallback=i.isOverflow,this._beforeFetchCallback=i.beforeFetch,this._beforeScrollCallback=i.beforeScroll,this._localKeyValidator=i.localKeyValidator,this._registerDataSourceEventListeners(),this._fetchTrigger=i.fetchTrigger,(null==this._fetchTrigger||isNaN(this._fetchTrigger))&&(this._fetchTrigger=0),this._initialScrollTop=this._element.scrollTop,this._lastFetchTrigger=0,this._isScrollTriggeredByMouseWheel=!1,this._checkViewportCount=0,this._fetchThreshold=.25;var s=this._getScrollEventElement();this._scrollEventListener=function(){this._beforeScrollCallback&&this._beforeScrollCallback();var e=this._element.scrollTop,t=this._element.clientHeight,r=this._element.scrollHeight-t;r>0&&(this._contentElement?this._handleExternalScrollerScrollTop(e,t):this._handleScrollerScrollTop(e,r))}.bind(this),s.addEventListener("scroll",this._scrollEventListener),this._wheelEventListener=function(){this._isScrollTriggeredByMouseWheel=!0}.bind(this),s.addEventListener("wheel",this._wheelEventListener,{passive:!0}),this._mouseDownEventListener=function(){this._isScrollTriggeredByMouseWheel=!1}.bind(this),s.addEventListener("mousedown",this._mouseDownEventListener)};return s.prototype.setAsyncIterator=function(e){this._asyncIterator=e},s.prototype.setFetchTrigger=function(e){null!=e&&!isNaN(e)&&e>=0&&(this._fetchTrigger=e)},s.prototype._getScrollEventElement=function(){return this._element===document.body||this._element===document.documentElement?window:this._element},s.prototype.destroy=function(){this._unregisterDataSourceEventListeners();var e=this._getScrollEventElement();e&&(e.removeEventListener("scroll",this._scrollEventListener),e.removeEventListener("wheel",this._wheelEventListener,{passive:!0}),e.removeEventListener("mousedown",this._mouseDownEventListener))},s.prototype.checkViewport=function(e){return this._asyncIterator&&this._element.clientHeight>0&&(e||!this.isOverflow()||this._isEndReached())&&(this._checkViewportCount+=1,this._checkViewportCount===r.CHECKVIEWPORT_THRESHOLD&&i.warn("Viewport not satisfied after multiple fetch, make sure the component is height constrained or specify a scroller."),this._beforeFetchCallback(this._element.scrollTop,!0))?this._fetchMoreRows():(this._checkViewportCount=0,Promise.resolve(null))},s.prototype._doFetch=function(e){var t=this;if(this._beforeFetchCallback(e-this._fetchTrigger,!1)){this._lastFetchTrigger=e;var r=t._isScrollTriggeredByMouseWheel;this._fetchPromise=this._fetchMoreRows().then(function(e){t._successCallback&&(e.isMouseWheel=r,t._successCallback(e),t._fetchPromise=null,t._nextFetchTrigger=void 0)},function(e){t._errorCallback&&(t._errorCallback(e),t._fetchPromise=null,t._nextFetchTrigger=void 0)})}else this._nextFetchTrigger=void 0},s.prototype._handleExternalScrollerScrollTop=function(e,t){if(!this._fetchPromise&&this._asyncIterator){var r=this._contentElement.getBoundingClientRect();r.bottom-this._fetchTrigger-r.height*this._fetchThreshold<=t&&this._doFetch(e)}},s.prototype._handleScrollerScrollTop=function(e,t){!this._fetchPromise&&this._asyncIterator&&(t!==this._lastMaxScrollTop&&(this._nextFetchTrigger=Math.max(0,(t-this._fetchTrigger-e)/2),this._lastMaxScrollTop=t),null!=this._nextFetchTrigger&&e-this._lastFetchTrigger>this._nextFetchTrigger)?this._doFetch(e):t-e<1&&e>this._fetchTrigger&&(this._fetchPromise?this._asyncIterator?null!=this._requestCallback&&this._requestCallback():null!=this._errorCallback&&this._errorCallback():this._asyncIterator&&this._doFetch(e))},s.prototype.isOverflow=function(){if(this._isOverflowCallback)return this._isOverflowCallback();var t=(this._contentElement?this._contentElement.scrollHeight:this._element.scrollHeight)-(this._element.clientHeight+this._fetchTrigger);return 1===t&&e.AgentUtils.getAgentInfo().browser===e.AgentUtils.BROWSER.EDGE&&(t=0),t>0},s.prototype._isEndReached=function(){return this._element.scrollHeight-this._element.clientHeight-this._element.scrollTop<Math.max(1,this._fetchTrigger)},s.prototype._fetchMoreRows=function(){if(!this._fetchPromise){var e=this._maxCount-this._rowCount;if(e>0){var t=this;if(this._asyncIterator)return this._fetchPromise=this._asyncIterator.next().then(function(r){var i=r;return t._fetchPromise=null,null!=i&&null!=i.value&&(i.value.data.length>0&&(t._rowCount+=i.value.data.length,e<t._fetchSize&&(i.maxCount=t._maxCount,i.maxCountLimit=!0,i.value.data.length>e&&(i.value.data=i.value.data.slice(0,e),i.value.metadata=i.value.metadata.slice(0,e),null!=i.value.fetchParameters&&(i.value.fetchParameters.size=e)))),(i.done||i.maxCountLimit)&&(t._asyncIterator=null)),Promise.resolve(i)}),this._fetchPromise}return this._asyncIterator=null,Promise.resolve({maxCount:this._maxCount,maxCountLimit:!0})}return this._fetchPromise},s.prototype._handleDataRowMutateEvent=function(e){if(null!=this._asyncIterator){var t,r,i,s=this;null!=e.detail.add&&(null!=(t=e.detail.add).indexes?r=t.indexes:null!=t.addBeforeKeys?i=t.addBeforeKeys:null!=t.afterKeys&&(i=t.afterKeys),this._handleDataRowAddedOrRemoved(i,r,function(){s._rowCount+=1})),null!=e.detail.remove&&(null!=(t=e.detail.remove).indexes?r=t.indexes:null!=t.keys&&(i=t.keys),this._handleDataRowAddedOrRemoved(i,r,function(){s._rowCount-=1}))}},s.prototype._handleDataRowAddedOrRemoved=function(e,t,r){if(t)for(var i=0;i<t.length;i++){var s=t[i];void 0!==s&&this._rowCount>0&&s<=this._rowCount&&r()}else if(e){var n=this._localKeyValidator;null!=n&&e.forEach(function(e){n(e)&&r()})}},s.prototype._registerDataSourceEventListeners=function(){var e,t,r=this._data;if(null!=r)for(this._unregisterDataSourceEventListeners(),this._dataProviderEventHandlers=[],this._dataProviderEventHandlers.push({eventType:"mutate",eventHandler:this._handleDataRowMutateEvent.bind(this)}),e=0;e<this._dataProviderEventHandlers.length;e++)(t=r.addEventListener(this._dataProviderEventHandlers[e].eventType,this._dataProviderEventHandlers[e].eventHandler))&&(this._dataProviderEventHandlers[e].eventHandler=t)},s.prototype._unregisterDataSourceEventListeners=function(){var e,t=this._data;if(null!=this._dataProviderEventHandlers&&null!=t)for(e=0;e<this._dataProviderEventHandlers.length;e++)t.removeEventListener(this._dataProviderEventHandlers[e].eventType,this._dataProviderEventHandlers[e].eventHandler)},s});
//# sourceMappingURL=ojdomscroller.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojkeysetimpl',["ojs/ojcore-base"],function(t){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;return function(e){this.NOT_A_KEY={},this.has=function(t){return this.get(t)!==this.NOT_A_KEY},this.get=function(e){var i,s,n=this.NOT_A_KEY,o=this;if(this._keys.has(e))return e;if(e!==Object(e))return this.NOT_A_KEY;if("function"==typeof Symbol&&"function"==typeof Set.prototype[Symbol.iterator])for(s=(i=this._keys[Symbol.iterator]()).next();!s.done;){if(t.KeyUtils.equals(s.value,e))return s.value;s=i.next()}else this._keys.forEach(function(i){n===o.NOT_A_KEY&&t.KeyUtils.equals(i,e)&&(n=i)});return n},this.InitializeWithKeys=function(t){this._keys=new Set(t)},this.InitializeWithKeys(e)}});
//# sourceMappingURL=ojkeysetimpl.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojset',["ojs/ojkeysetimpl"],function(t){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;class e{constructor(e){this.initialKeys=e;const s=this;this._set=new Set,this._keyset=new t,e&&e.forEach(function(t){s.add(t)}),Object.defineProperty(this,"size",{get(){return this._set.size}}),this[Symbol.iterator]=function(){return this._set[Symbol.iterator]()}}clear(){this._set.clear(),this._keyset._keys.clear()}delete(t){const e=this._keyset.get(t);return e!==this._keyset.NOT_A_KEY&&(this._keyset._keys.delete(e),this._set.delete(e))}forEach(t,e){this._set.forEach(t,e)}keys(){return this._set.keys()}values(){return this._set.values()}entries(){return this._set.entries()}has(t){return this._keyset.has(t)}add(t){return this._keyset.get(t)===this._keyset.NOT_A_KEY&&(this._keyset._keys.add(t),this._set.add(t)),this}get[Symbol.toStringTag](){return Set[Symbol.toStringTag]()}}return e});
//# sourceMappingURL=ojset.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojmap',["ojs/ojkeysetimpl"],function(e){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;var t=function(t){t?(this._map=t,this._keyset=new e(Array.from(this._map.keys()))):(this._map=new Map,this._keyset=new e)},s=t.prototype;return Object.defineProperty(s,"size",{get:function(){return this._map.size}}),s.clear=function(){this._map.clear(),this._keyset._keys.clear()},s.delete=function(e){var t=this._keyset.get(e);return t!==this._keyset.NOT_A_KEY&&(this._keyset._keys.delete(t),this._map.delete(t))},s.forEach=function(e){this._map.forEach(e)},s.entries=function(){return this._map.entries()},s.keys=function(){return this._map.keys()},s.values=function(){return this._map.values()},s.get=function(e){var t=this._keyset.get(e);return this._map.get(t)},s.has=function(e){return this._keyset.has(e)},s.set=function(e,t){var s=this._keyset.get(e);return s===this._keyset.NOT_A_KEY?(this._keyset._keys.add(e),this._map.set(e,t)):this._map.set(s,t),this},t});
//# sourceMappingURL=ojmap.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojdataproviderscroller',["exports","ojs/ojcore-base","jquery","ojs/ojcontext","ojs/ojconfig","ojs/ojanimation","ojs/ojlogger","ojs/ojdatacollection-common","ojs/ojdomscroller","ojs/ojset","ojs/ojmap"],function(t,e,i,n,o,r,s,l,a,d,h){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a,d=d&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d,h=h&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h;var m=function(t,e,i){this.m_root=e,this.m_widget=t,this.m_fetching=!1,this.setDataProvider(i),this.Init()};e.Object.createSubclass(m,e.Object,"DataProviderContentHandler"),m.prototype.Init=function(){m.superclass.Init.call(this)},m.prototype.notifyShown=function(){},m.prototype.notifyAttached=function(){},m.prototype.cleanItems=function(t,e){if(void 0===t&&(t=this.getTemplateEngine()),void 0===e&&(e=this.m_root),t&&e)for(var i=e.childNodes,n=0;n<i.length;n++)t.clean(i[n])},m.prototype.Destroy=function(t){null!=this.m_superRoot&&(this.m_root=this.m_superRoot),this.cleanItems(),t&&i(this.m_root).empty(),this.m_widget=null,this.m_root=null,this.m_superRoot=null},m.prototype.IsReady=function(){return!this.m_fetching},m.prototype.setRootAriaProperties=function(){this.shouldUseGridRole()?this.m_root.setAttribute("role","grid"):this.IsHierarchical()?this.m_root.setAttribute("role","tree"):this.m_root.setAttribute("role","listbox")},m.prototype.RenderContent=function(){this.signalTaskStart("rendering content"),this.setRootAriaProperties(),this.fetchRows(!1),this.signalTaskEnd()},m.prototype.GetKey=function(t){return t.key},m.prototype.FindElementByKey=function(t){for(var n=i(this.m_root).find("."+this.m_widget.getItemElementStyleClass()),o=0;o<n.length;o++){var r=n[o];if((t==this.GetKey(r)||e.Object.compareValues(t,this.GetKey(r)))&&!r.classList.contains("oj-listview-item-remove")&&!r.classList.contains("oj-drop"))return r}return null},m.prototype.getDataProvider=function(){return this.m_dataProvider},m.prototype.setDataProvider=function(t){this._removeDataSourceEventListeners(),null!=t&&(this.m_handleModelMutateEventListener=this.handleModelMutateEvent.bind(this),this.m_handleModelRefreshEventListener=this.handleModelRefreshEvent.bind(this),t.addEventListener("mutate",this.m_handleModelMutateEventListener),t.addEventListener("refresh",this.m_handleModelRefreshEventListener)),this.m_dataProvider=t},m.prototype._removeDataSourceEventListeners=function(){var t=this.getDataProvider();null!=t&&(t.removeEventListener("mutate",this.m_handleModelMutateEventListener),t.removeEventListener("refresh",this.m_handleModelRefreshEventListener),e.TableDataSourceAdapter&&t instanceof e.TableDataSourceAdapter&&t.destroy())},m.prototype.loadTemplateEngine=function(){var t=this;return null!=this.m_widget.getItemTemplate()&&null==this.m_widget._getItemRenderer()?new Promise(function(e){o.__getTemplateEngine().then(function(i){t.m_engine=i,e(i)},function(t){throw new Error("Error loading template engine: "+t)})}):Promise.resolve(null)},m.prototype.getTemplateEngine=function(){return this.m_engine},m.prototype.fetchRows=function(t){this.m_widget.showStatusText()},m.prototype.GetChildElementTagName=function(){return"LI"},m.prototype.GetReferenceNode=function(t,e){if(-1===e)return null;var n=i(t).children("."+this.m_widget.getItemElementStyleClass()+", ."+this.m_widget.getEmptyTextStyleClass()+", .oj-listview-temp-item");return e===n.length?null:n[e]},m.prototype.addItem=function(t,e,n,o,r,s,l){var a=document.createElement(this.GetChildElementTagName());i(a).uniqueId();var d=this.GetReferenceNode(t,e);this.m_widget.BeforeInsertItem&&this.m_widget.BeforeInsertItem(),t.insertBefore(a,d);var h=i(t).children().index(a);return this._addOrReplaceItem(a,h,t,e,n,o,r,s,!1,l)},m.prototype.replaceItem=function(t,e,n,o,r,s,l){this.signalTaskStart("replace item");var a=t.parentNode,d=i(a).children().index(t),h=document.createElement(this.GetChildElementTagName());return r&&r.clean(t),i(t).replaceWith(h),this._addOrReplaceItem(h,d,a,e,n,o,r,s,l)},m.prototype._addOrReplaceItem=function(t,e,n,o,r,s,l,a,d,h){null==a&&(a=this.afterRenderItem.bind(this));var m,c=this.createContext(e,r,s,t,h),u=this.m_widget._getItemRenderer(),p=this.m_widget.getItemTemplate(),g=!1;if(null!=u){var _=u.call(this,c);null!=_&&(null===_.parentNode||_.parentNode instanceof DocumentFragment?t.appendChild(_):null!=_.parentNode||_.toString&&((m=document.createElement("span")).appendChild(document.createTextNode(_.toString())),t.appendChild(m)))}else if(null!=p&&null!=l)for(var f=this.m_widget.GetRootElement()[0],v=this.GetBindingContext(c),y=this.m_widget.getAs?this.m_widget.getAs():null,w=l.execute(f,p,v,y),S=this.GetChildElementTagName(),E=0;E<w.length;E++){if(w[E].tagName===S){n.replaceChild(w[E],t),g=!0;break}t.appendChild(w[E])}else(m=document.createElement("span")).appendChild(document.createTextNode(null==r?"":r.toString())),t.appendChild(m);var I=n.children?n.children[e]:this._getItemFromDocumentFragment(n,e);return c.parentElement=I,i.data(I,"data",r),i.data(I,"metadata",h),a(I,c,g,d)},m.prototype._getItemFromDocumentFragment=function(t,e){for(var i=0,n=t.childNodes,o=0;o<n.length;o++){var r=n[o];if(!r)break;if(1===r.nodeType){if(i===e)return r;i+=1}}return null},m.prototype.GetBindingContext=function(t){var e={};return e.data=t.data,e.index=t.index,e.key=t.key,e.componentElement=t.componentElement,e.item={data:t.data,metadata:t.metadata},e},m.prototype.afterRenderItem=function(t,e){t.key=e.key;var n=i(t);n.uniqueId();var o=this.m_widget.getSingleFocusableElement(n);if(this.shouldUseGridRole())if(null==e.leaf||e.leaf)if(this.isCardLayout())o.attr("role","gridcell");else if(n.attr("role","row"),o!==n)o.attr("role","gridcell");else{if(0===o.children().length)o.get(0).innerHTML="<div role='gridcell' class='oj-listview-cell-element'></div>";else{var r=document.createElement("div");for(r.setAttribute("role","gridcell"),r.className="oj-listview-cell-element";o[0].firstChild;)r.appendChild(o[0].firstChild);o[0].appendChild(r)}}else n.attr("role","presentation");else o.attr("role",this.IsHierarchical()?"treeitem":"option"),o!==n&&n.attr("role","presentation");return o.addClass(this.m_widget.getFocusedElementStyleClass()),this.isFocusable(e)||n.addClass("oj-skipfocus"),n.addClass(this.m_widget.getItemElementStyleClass()),Promise.resolve(!0)},m.prototype.getMetadata=function(t,e,i,n){var o=i.context;return null==o&&(o={}),null==o.index&&(o.index=t),null==o.key&&(o.key=e),o},m.prototype.handleModelMutateEvent=function(t){null!=this.m_root&&this.m_widget.isAvailable()&&(null!=t.detail.remove&&this.handleModelRemoveEvent(t),null!=t.detail.add&&this.handleModelAddEvent(t),null!=t.detail.update&&this.handleModelChangeEvent(t))},m.prototype.handleModelRefreshEvent=function(t){},m.prototype._pushToEventQueue=function(t){null==this.m_eventQueue&&(this.m_eventQueue=[]),this.m_eventQueue.push(t)},m.prototype._processEventQueue=function(){var t;if(null!=this.m_eventQueue&&this.m_eventQueue.length>0){for(var e=0;e<this.m_eventQueue.length;e++)if("refresh"===(t=this.m_eventQueue[e]).type)return void this.handleModelRefreshEvent(t.event);"mutate"===(t=this.m_eventQueue.shift()).type&&this.handleModelMutateEvent(t.event)}},m.prototype._clearEventQueue=function(){null!=this.m_eventQueue&&(this.m_eventQueue.length=0)},m.prototype.addItemsForModelInsert=function(t,e,i,n,o){},m.prototype.getIndex=function(t,e){if(null==t||0===t.length||e>=t.length)return-1;var n=t[e],o=this.FindElementByKey(n);return null!=o?i(o.parentNode).children().index(o):-1},m.prototype.handleModelAddEvent=function(t){if(this.IsReady()){this.signalTaskStart("handling model add event"),this.m_superRoot&&0===this.m_root.childNodes.length&&this.m_superRoot.appendChild(this.m_root.parentNode);var e,i,n=t.detail.add,o=n.data,r=[];n.keys.forEach(function(t){r.push(t)});var s=!0;void 0!==n.addBeforeKeys?i=n.addBeforeKeys:void 0!==n.afterKeys&&(i=n.afterKeys,s=!1),i&&(e=[],i.forEach(function(t){e.push(t)}));var l=n.parentKeys,a=n.indexes,d=n.metadata;null!=o&&null!=r&&r.length>0&&o.length>0&&r.length===o.length&&(null==a||a.length===o.length)&&this.addItemsForModelInsert(o,a,r,l,s,e,d),this.signalTaskEnd()}else this._pushToEventQueue({type:t.type,event:t})},m.prototype.afterRenderItemForInsertEvent=function(t,e,o){this.signalTaskStart("after render item from model insert event"),t.setAttribute("data-oj-context",""),this.afterRenderItem(t,e,o);var r=i(t),s=t.className;t._className=s,t.className="oj-listview-temp-item oj-listview-item-add-remove-transition";var l=this.isCardLayout();l&&(t.className=t.className+" oj-listview-card-animated "+this.m_widget.getItemStyleClass()),this.shouldUseGridRole()||r.children().wrapAll("<div></div>");var a=r.children().first();if(l||(a[0].className=s),a[0].key=t.key,this.shouldUseGridRole()){if(!l){var d=a[0].firstElementChild;d&&d.classList.add("oj-listview-cell-element")}}else a.attr("role",t.getAttribute("role")),r[0].hasAttribute("aria-selected")&&a.attr("aria-selected",t.getAttribute("aria-selected"));var h=this;return t.style.opacity=0,new Promise(function(i){n.getContext(t).getBusyContext().whenReady().then(function(){if(null!=h.m_widget){h.signalTaskStart("kick off animation for insert item");var n=t.className;t.style.opacity="",h.m_widget.StartAnimation(t,"add").then(function(){t.removeAttribute("data-oj-context"),h._handleAddTransitionEnd(e,t,n),i(!0)}),h.signalTaskEnd()}else i(!0)})})},m.prototype._handleAddTransitionEnd=function(t,e,n){if(null!=this.m_widget&&null!=e.parentNode){var o=n.split(" "),r=e.className.split(" "),s=e.classList.contains("oj-focus")&&e.classList.contains("oj-focus-highlight"),l=e.classList.contains("oj-listview-card-animated");if(e.className=e._className,s&&(e.classList.add("oj-focus"),e.classList.add("oj-focus-highlight")),l&&e.classList.add("oj-listview-card-animated"),r.forEach(function(t){-1===o.indexOf(t)&&e.classList.add(t)}),this.shouldUseGridRole()){if(!this.isCardLayout()){var a=e.firstElementChild;if(a){e._className.split(" ").forEach(function(t){a.classList.remove(t)}),a.classList.add("oj-listview-cell-element");var d=a.firstElementChild;d&&d.classList.remove("oj-listview-cell-element")}}}else i(e).children().children().unwrap();this.m_widget.itemInsertComplete(e,t),this.signalTaskEnd()}else this.signalTaskEnd()},m.prototype.handleModelRemoveEvent=function(t){var e=this,i=t.detail.remove.keys;if(null==i||0===i.size)return!1;if(!this.IsReady())return this._pushToEventQueue({type:t.type,event:t}),!1;this.signalTaskStart("handling model remove event");var n=null!=t.detail.add?t.detail.add.keys:new Set,o=[],r=[];if(i.forEach(function(t){n.has(t)||o.push(t);var i=e.FindElementByKey(t);null!=i?(e.signalTaskStart("handling model remove event for item: "+t),i.classList.add("oj-listview-item-remove"),i.parentNode.classList.contains("oj-listview-temp-item")&&(i=i.parentNode),r.push(e.removeItem(i)),e.signalTaskEnd()):s.log("handleModelRemoveEvent: cannot find item with key "+t)}),this.isSelectionEnabled()){if(o.length>0){var l=this.m_widget.options.selected,a=l.delete(o);if(l!==a){var d=[];a.values&&a.values().forEach(function(t){d.push(e.FindElementByKey(t))}),this.m_widget._setSelectionOption(a,null,d)}}n.size>0&&this.m_widget.resetInitialSelectionStateValidated()}return this.m_widget.ClearCache(),this.handleRemoveItemsPromises(r),this.signalTaskEnd(),!0},m.prototype.handleRemoveItemsPromises=function(t){},m.prototype.removeItem=function(t){var e=this;this.signalTaskStart("removing an item");var n=document.activeElement,o=t.contains(n),r=i(t).get(0),s=r.className;i(r).children().wrapAll("<div class='"+s+"'></div>"),r.className="oj-listview-item-add-remove-transition oj-listview-item-remove",r.children[0].key=t.key,this.signalTaskStart("kick off animation to remove an item"),this.m_widget.disableResizeListener();var l=this.m_widget.StartAnimation(r,"remove");return l.then(function(){e.handleRemoveTransitionEnd(t,o),e.m_widget&&e.m_widget.enableResizeListener()},function(){e.m_widget&&e.m_widget.enableResizeListener()}),this.signalTaskEnd(),l},m.prototype.handleRemoveTransitionEnd=function(t,e){if(null!=this.m_widget){var n=i(t),o=n.parent();if(0!==o.length){var r=this.m_widget.itemRemoveComplete(n.get(0),e),s=this.getTemplateEngine();s&&s.clean(n.get(0)),n.remove(),0===o.get(0).childElementCount&&this.m_widget.renderComplete(!0),this.isSelectionEnabled()&&this.m_widget.enforceSelectionRequired(),r&&e&&!this.m_root.contains(document.activeElement)&&this.m_root.focus(),this.signalTaskEnd()}else this.signalTaskEnd()}else this.signalTaskEnd()},m.prototype.handleModelChangeEvent=function(t){this.signalTaskStart("handling model update event");var e=t.detail.update,i=e.data,n=[];e.keys.forEach(function(t){n.push(t)});for(var o,r=this.getTemplateEngine(),s=e.indexes,l=0;l<n.length;l++){this.m_widget.updateSelectedKeyData(n[l],i[l]);var a=this.FindElementByKey(n[l]);if(null!=a){void 0===o&&a.contains(document.activeElement)&&(o=a),this.signalTaskStart("handling model update event for item: "+n[l]);var d=null==s?-1:s[l];this.replaceItem(a,d,i[l],this.getMetadata(d,n[l],i[l],a.parentNode),r,this.afterRenderItemForChangeEvent.bind(this),null!=o),this.signalTaskEnd(),null!=o&&(o=null)}}this.m_widget.ClearCache(),this.signalTaskEnd()},m.prototype.afterRenderItemForChangeEvent=function(t,e,i,n){var o=this;this.signalTaskStart("after render item for model change event"),this.afterRenderItem(t,e,i),this.m_widget.StartAnimation(t,"update").then(function(){o._handleReplaceTransitionEnd(t,n)}),this.signalTaskEnd()},m.prototype._handleReplaceTransitionEnd=function(t,e){null!=this.m_widget?(i(t).removeClass("oj-listview-item-add-remove-transition"),e&&this.m_widget.restoreCurrentItemFocus(t),this.signalTaskEnd()):this.signalTaskEnd()},m.prototype.createContext=function(t,e,i,n,o){var r={};r.parentElement=n,r.index=t,r.data=e,r.component=this.m_widget.getWidgetConstructor(),r.datasource=this.getDataProvider(),(r=this.m_widget._FixRendererContext(r)).metadata=o;for(var s=Object.keys(i),l=0;l<s.length;l++){var a=s[l];r[a]=i[a]}return r},m.prototype.isSelectionEnabled=function(){return this.m_widget._isSelectionEnabled()},m.prototype.isFocusable=function(t){return this.m_widget.getItemFocusable(t)},m.prototype.isSelectable=function(t){return this.m_widget.getItemSelectable(t)},m.prototype.isCardLayout=function(){return this.m_widget.isCardLayout()},m.prototype.shouldUseGridRole=function(){return this.m_widget.ShouldUseGridRole()},m.prototype.isAsyncRendering=function(){return!1},m.prototype.signalTaskStart=function(t){this.m_widget&&this.m_widget.signalTaskStart("DataSource ContentHandler "+t)},m.prototype.signalTaskEnd=function(){this.m_widget&&this.m_widget.signalTaskEnd()},m.prototype.isSkeletonSupport=function(){return this.m_widget.isSkeletonSupport()},m.prototype.getRootElementHeight=function(){return isNaN(this.m_height)&&(this.m_height=this.m_widget.GetRootElement()[0].offsetHeight),this.m_height},m.prototype.getDefaultSkeletonDimension=function(){if(null==this.m_defaultSkeletonDim){var t=this.m_widget.GetRootElement()[0],e=this.createSkeleton(!0);e.style.display="block",e.style.visibility="hidden",t.appendChild(e);var i={width:e.offsetWidth,height:e.offsetHeight};return t.removeChild(e),i.height>0&&i.width>0&&(this.m_defaultSkeletonDim=i),i}return this.m_defaultSkeletonDim},m.prototype.createSkeleton=function(t){return this.createSkeletonItem()},m.prototype.createSkeletonItem=function(){var t=document.createElement("li");t.setAttribute("role","presentation");var e=document.createElement("div");return t.className="oj-listview-item oj-listview-item-layout",this.m_widget._isGridlinesVisible()||t.classList.add("gridline-hidden"),e.className="oj-listview-cell-element oj-listview-skeleton oj-listview-skeleton-line-height oj-animation-skeleton",t.appendChild(e),t},m.prototype.animateShowContent=function(t,e,o){return new Promise(function(s,l){var a=null!=this.m_superRoot?this.m_superRoot:this.m_root,d=a.querySelector(".oj-listview-skeleton-container");if(null!=d){t.appendChild(e);var h=Array.from(t.children),m=[];h.forEach(function(t){if(t!==d.parentNode){t.style.opacity=0,t.setAttribute("data-oj-context","");var e=n.getContext(t).getBusyContext().whenReady();m.push(e)}}),Promise.all(m).then(function(){null!=this.m_widget?r.fadeOut(d,{duration:"100ms"}).then(function(){if(null!=this.m_widget){var e=d.parentNode;e.classList.contains("oj-listview-initial-skeletons")?a.removeChild(e):d.querySelectorAll(".oj-listview-skeleton").forEach(function(t){var e=t.parentNode;e&&d===e.parentNode&&d.removeChild(e)}),t.style.opacity=0,h.forEach(function(t){t!==d.parentNode&&(t.style.opacity=1,t.removeAttribute("data-oj-context"))}),window.requestAnimationFrame(function(){r.fadeIn(t,{duration:"150ms",persist:"all"})}),s(!1)}else s(!1)}.bind(this)):s(!1)}.bind(this))}else o&&i(t).empty(),t.appendChild(e),s(!1)}.bind(this))};var c=function(t,e,i){c.superclass.constructor.call(this,t,e,i)};e.Object.createSubclass(c,m,"IteratingDataProviderContentHandler"),c.prototype.Init=function(){c.superclass.Init.call(this),this.m_currentEvents=[]},c.prototype.IsHierarchical=function(){return!1},c.prototype.IsReady=function(){return!this.m_fetching&&null==this.m_idleCallback},c.prototype._hasPendingInsertKeys=function(){return null!=this.m_insertOutOfRangeKeys&&this.m_insertOutOfRangeKeys.size>0},c.prototype._destroyDomScroller=function(){null!=this.m_domScroller&&(this.m_domScroller.destroy(),this.m_domScroller=null),this._removeLoadingIndicator(),this.m_widget&&this.m_widget.unmergeScrollListener()},c.prototype.Destroy=function(t){c.superclass.Destroy.call(this,t),this._removeDataSourceEventListeners(),this._destroyDomScroller(),this._cancelIdleCallback(),this.m_loadingIndicator=null,this.m_viewportCheckPromise=null,this.m_checkViewportPromise=null},c.prototype._cancelIdleCallback=function(){null!=this.m_idleCallback&&(window.requestIdleCallback&&window.cancelIdleCallback?(window.cancelIdleCallback(this.m_idleCallback),window.cancelAnimationFrame(this.m_idleCallback)):window.cancelAnimationFrame(this.m_idleCallback),this.m_idleCallback=null)},c.prototype.shouldHandleResize=function(){return this._isLoadMoreOnScroll()},c.prototype.HandleResize=function(t,e){if(this._isLoadMoreOnScroll()&&null==this.m_animationPromise){var i=this.m_width,n=this.m_height;this.m_height=e,this.m_width=t,this.m_colCount=void 0;var o=this.isCardLayout();if(o&&this.isSkeletonSupport()&&i!==t)if(null!=this.m_loadingIndicator)this._adjustLoadMoreSkeletons(this._getRootElementWidth(!0));else null!=this.m_root.querySelector(".oj-listview-skeleton-container")&&this.renderInitialSkeletons();(e>n||o&&t>i)&&this.checkViewport()}},c.prototype.notifyShown=function(){this._isLoadMoreOnScroll()&&this.checkViewport()},c.prototype.notifyAttached=function(){if(null!=this.m_domScroller){var t=this._getFetchTrigger();if(null!=t){var e=this._getFetchTrigger();t!==e&&this.m_domScroller.setFetchTrigger(e),this.checkViewport()}}},c.prototype.setRootAriaProperties=function(){c.superclass.setRootAriaProperties.call(this);var t=this;this.shouldUseGridRole()&&this._isLoadMoreOnScroll()&&this.getDataProvider().getTotalSize().then(function(e){t.m_root&&t.m_root.setAttribute("aria-rowcount",-1===e?t._getMaxCount():e)})},c.prototype.unsetRootAriaProperties=function(){c.superclass.unsetRootAriaProperties.call(this),this.m_root.removeAttribute("aria-rowcount")},c.prototype._isLoadMoreOnScroll=function(){return this.m_widget.isLoadMoreOnScroll()},c.prototype._getFetchSize=function(){return Math.max(0,this.m_widget.options.scrollPolicyOptions.fetchSize)},c.prototype._getScroller=function(){return this.m_widget._getScroller()},c.prototype._getScrollerOffsetTop=function(){if(void 0===this._scrollerOffsetTop){var t=this._getScroller();t===this.m_widget.GetRootElement()[0]?this._scrollerOffsetTop=0:this._scrollerOffsetTop=l.calculateOffsetTop(t,this.m_root)}return this._scrollerOffsetTop},c.prototype._getFetchTrigger=function(){return void 0===this._fetchTrigger&&(this._fetchTrigger=this._getLoadingIndicatorHeight()),this._fetchTrigger},c.prototype._getLoadingIndicatorHeight=function(){var t;if(this.isSkeletonSupport()){var e=this.getDefaultSkeletonDimension().height;if(this.isCardLayout()){var n=this._getCardDimension();t=null!=n?n.height:e}else t=c.LOAD_MORE_SKELETONS_ROW_COUNT*e}else{var o=i(document.createElement("div"));o.addClass(this.m_widget.getItemStyleClass()).css({visibility:"hidden",overflow:"hidden",position:"absolute"});var r=i(document.createElement("div"));r.addClass("oj-icon oj-listview-loading-icon"),o.append(r),i(this.m_widget.GetRootElement()).append(o),t=o.get(0).offsetHeight,o.remove()}return t},c.prototype._getMaxCount=function(){return this.m_widget.options.scrollPolicyOptions.maxCount},c.prototype._adjustSkeletonCardContent=function(t,e,i){t.style.width=e+"px",t.style.height=i+"px"},c.prototype._createSkeletonCard=function(){var t=document.createElement("li");t.setAttribute("role","presentation");var e=document.createElement("div");return t.className="oj-listview-skeleton-card",e.className="oj-listview-skeleton oj-listview-skeleton-card-content oj-animation-skeleton",t.appendChild(e),t},c.prototype.createSkeleton=function(t){var e;if(this.isCardLayout())if(t)void 0===this.m_defaultItemSkeleton&&(this.m_defaultItemSkeleton=this._createSkeletonCard()),e=this.m_defaultItemSkeleton;else{if(void 0===this.m_defaultLoadMoreSkeleton){var i=this._createSkeletonCard(),n=this._getCardDimension();n&&this._adjustSkeletonCardContent(i,n.width,n.height),this.m_defaultLoadMoreSkeleton=i}e=this.m_defaultLoadMoreSkeleton}else void 0===this.m_defaultItemSkeleton&&(this.m_defaultItemSkeleton=this.createSkeletonItem()),e=this.m_defaultItemSkeleton;return e.cloneNode(!0)},c.prototype._getScrollbarWidth=function(){if(isNaN(this.m_scrollbarWidth)){var t=this.m_widget.GetRootElement()[0],e=document.createElement("div");t.appendChild(e),this.m_scrollbarWidth=Math.max(0,l.getDefaultScrollBarWidth(e)),t.removeChild(e)}return this.m_scrollbarWidth},c.prototype._getRootElementWidth=function(t){return isNaN(this.m_width)&&(this.m_width=this.m_widget.GetRootElement()[0].offsetWidth),t?this.m_width-this._getScrollbarWidth():this.m_width},c.prototype.renderInitialSkeletons=function(){this.m_superRoot&&(this.m_root=this.m_superRoot,this.m_superRoot=null),i(this.m_root).empty();var t=this.getRootElementHeight(),e=0,n=this.getDefaultSkeletonDimension();if(n.width>0&&n.height>0)if(this.isCardLayout()){var o=this.getMargin(),r=this._getRootElementWidth(),s=Math.max(1,Math.floor(r/(n.width+o)));e=Math.max(1,Math.floor(t/(n.height+o)))*s}else e=Math.max(1,Math.floor(t/n.height));var l=document.createElement("li");l.setAttribute("role","presentation"),l.classList.add("oj-listview-initial-skeletons");var a=document.createElement("ul");a.setAttribute("role","presentation"),a.className=this.m_widget.getGroupStyleClass()+" oj-listview-skeleton-container";for(var d=0;d<e;d++)a.appendChild(this.createSkeleton(!0));l.appendChild(a),this.m_root.appendChild(l)},c.LOAD_MORE_SKELETONS_ROW_COUNT=3,c.prototype._adjustLoadMoreSkeletons=function(t,e){var i=this._getCardDimension();if(null!=i&&0!==i.width){if(!e){var n=this.getMargin();if(0===Math.floor(t/(i.width+n))-this.m_loadingIndicator.get(0).firstElementChild.childElementCount)return}this.m_loadingIndicator.get(0).parentNode.removeChild(this.m_loadingIndicator.get(0)),null!=this.m_fillerSkeletons&&this.m_fillerSkeletons.parentNode.removeChild(this.m_fillerSkeletons),this.m_loadingIndicator=null,this.m_fillerSkeletons=null,this.m_defaultLoadMoreSkeleton=void 0,this._appendLoadingIndicator()}},c.prototype.getMargin=function(){if(void 0===this.m_margin){var t=document.createElement("li");t.className=this.m_widget.getItemStyleClass(),this.m_root.appendChild(t);var e=window.getComputedStyle(t);this.m_margin=parseInt(e.marginRight,10),this.m_root.removeChild(t)}return this.m_margin},c.prototype._getCardDimension=function(){if(void 0===this.m_cardDim){var t=this.m_root.querySelector("."+this.m_widget.getItemElementStyleClass());if(t){var e={width:t.offsetWidth,height:t.offsetHeight};return e.width>0&&e.height>0&&(this.m_cardDim=e),e}}return this.m_cardDim},c.prototype._renderSkeletons=function(t){var e=this.createLoadingIndicator();e.setAttribute("role","presentation"),e.classList.add("oj-listview-skeleton-container");var i=document.createElement("ul");i.setAttribute("role","presentation"),i.className=this.isCardLayout()?"oj-listview-skeleton-card-group":"oj-listview-group",e.appendChild(i);for(var n=0;n<t;n++)i.appendChild(this.createSkeleton(!1));return e},c.prototype._fillEmptySpaceWithSkeletons=function(){var t=this._getCardDimension();if(null!=t&&0!==t.width){var e=this.m_root.lastElementChild,i=t.width+this.getMargin(),n=this._getRootElementWidth(!0),o=Math.floor((n-e.offsetLeft-i)/i);if(o>0){var r=this._renderSkeletons(o);r.style.visibility="hidden",this.m_root.appendChild(r),this.m_fillerSkeletons=r}}},c.prototype._createLoadMoreSkeletons=function(){var t;if(this.isCardLayout()){var e=this._getRootElementWidth(!0),i=this._getCardDimension(),n=void 0===i?this.getDefaultSkeletonDimension().width:i.width;t=0===n?0:Math.floor(e/(n+this.getMargin()))}else t=c.LOAD_MORE_SKELETONS_ROW_COUNT;return this._renderSkeletons(t)},c.prototype._createLoadMoreIcon=function(){var t=i(this.createLoadingIndicator());t.uniqueId().attr("role","presentation").addClass(this.m_widget.getItemStyleClass()).addClass("oj-listview-loading-icon-container");var e=i(document.createElement("div"));return e.addClass("oj-icon oj-listview-loading-icon"),t.append(e),t.get(0)},c.prototype.createLoadingIndicator=function(){return document.createElement("li")},c.prototype._appendLoadingIndicator=function(){if(null==this.m_loadingIndicator)if(this.m_appendLoadingindicator=!0,this.isSkeletonSupport()&&this.isCardLayout()&&null!=this._getCardDimension()&&0===this._getCardDimension().width){var t=this;n.getContext(this.m_root).getBusyContext().whenReady().then(function(){t.m_appendLoadingindicator&&t._doAppendLoadingIndicator()})}else this._doAppendLoadingIndicator()},c.prototype._doAppendLoadingIndicator=function(){this.isSkeletonSupport()&&this.isCardLayout()&&this._fillEmptySpaceWithSkeletons();var t=this.isSkeletonSupport()?this._createLoadMoreSkeletons():this._createLoadMoreIcon();t.style.visibility="hidden",this.m_root.appendChild(t),this.m_loadingIndicator=i(t),this.m_appendLoadingindicator=!1},c.prototype._removeLoadingIndicator=function(){null!=this.m_loadingIndicator&&this.m_loadingIndicator.remove(),this.m_loadingIndicator=null,null!=this.m_fillerSkeletons&&this.m_fillerSkeletons.remove(),this.m_fillerSkeletons=null,this.m_appendLoadingindicator=!1},c.prototype.hasMoreToFetch=function(){return null!=this.m_loadingIndicator},c.prototype.getLoadingIndicator=function(){return null!=this.m_loadingIndicator?this.m_loadingIndicator.get(0):null},c.prototype.afterRenderItem=function(t,e,n){c.superclass.afterRenderItem.call(this,t,e,n),i(t).addClass(this.m_widget.getItemStyleClass()),!n&&this.m_widget.getItemLayoutStyleClass&&t.classList.add(this.m_widget.getItemLayoutStyleClass()),this.isSelectionEnabled()&&this.isSelectable(e)&&this.m_widget.getFocusItem(i(t)).attr("aria-selected",!1),this._isLoadMoreOnScroll()&&!this.isCardLayout()&&i(t).attr("aria-rowindex",e.index+1),this.m_widget.itemRenderComplete(t,e)},c.prototype._handleScrollerMaxRowCount=function(){s.error("max count reached")},c.prototype._prepareRootElement=function(){this.m_superRoot?(i(this.m_superRoot).empty(),this.m_root=this.m_superRoot,this.m_superRoot=null):null==this.m_root.querySelector(".oj-listview-skeleton-container")&&i(this.m_root).empty();if(this.shouldUseGridRole()&&this.isCardLayout()){var t=document.createElement("li");t.classList.add("oj-listview-group-container");var e=document.createElement("ul");t.appendChild(e),i(t).attr("role","presentation").css("width","100%"),i(e).attr("role","row").addClass(this.m_widget.getGroupStyleClass()),this.m_root.appendChild(t),this.m_superRoot=this.m_root,this.m_root=e}},c.prototype._setFetching=function(t){(null==this.m_superRoot?this.m_root:this.m_superRoot).setAttribute("aria-busy",t),this.m_fetching=t},c.prototype._containsKey=function(t,i){for(var n=0;n<i.length;n++)if(e.KeyUtils.equals(i[n].key,t))return!0;return!1},c.prototype.fetchRows=function(t){var i=0;if(this.signalTaskStart("fetching rows"),this.IsReady()){var n=this;this._setFetching(!0),c.superclass.fetchRows.call(this,t);var o=this.m_widget.getScrollToKey(),r=this.loadTemplateEngine();this.signalTaskStart("first fetch"),this._clientId=this._clientId||Symbol();var s={clientId:this._clientId};s.size=this._isLoadMoreOnScroll()?this._getFetchSize():-1,this.m_dataProviderAsyncIterator=this.getDataProvider().fetchFirst(s)[Symbol.asyncIterator]();var l=this.m_dataProviderAsyncIterator.next();n.fetchSize=s.size;var a=function(t,e,i){var o=i;return(null==i||n._containsKey(i,e))&&(o=null),t[0].done||null==o&&(-1!==n.fetchSize||"function"==typeof n.getDataProvider().getPageCount)?t:n.m_dataProviderAsyncIterator.next().then(function(e){return t[0].done=e.done,t[0].value.data=t[0].value.data.concat(e.value.data),t[0].value.metadata=t[0].value.metadata.concat(e.value.metadata),a(t,e.value.metadata,o)},function(t){n._handleFetchError(t),n.signalTaskEnd()})};return Promise.all([l,r,o]).then(function(t){return a(t,t[0].value.metadata,t[2])},function(t){return n._handleFetchError(t),n.signalTaskEnd(),Promise.reject(t)}).then(function(t){if(t){if(null==n.m_widget)return;var o=t[0],r=t[1],s=n.getDataProvider();e.TableDataSourceAdapter&&s instanceof e.TableDataSourceAdapter&&(i=s.offset),0===i&&(r&&n.cleanItems(r),n.isSkeletonSupport()&&n.m_widget.hideStatusText(),n._prepareRootElement()),n._handleFetchedData(o,r,0===i)}},function(){}),void this.signalTaskEnd()}this.signalTaskEnd()},c.prototype._handleFetchError=function(t){if(s.error(t),this._setFetching(!1),null!=this.m_widget){var e=this.m_root.querySelector(".oj-listview-initial-skeletons");null!=e&&e.parentNode.removeChild(e),this._isLoadMoreOnScroll()&&this._removeLoadingIndicator(),this.m_widget.renderComplete(!0)}else s.info("handleFetchError: widget has already been destroyed")},c.prototype._renderItemsWhenIdle=function(t,i,n,o,r,s){var l,a=this;0!==t.length&&0!==i.length?window.requestIdleCallback&&window.cancelIdleCallback?(r&&e.AgentUtils.getAgentInfo().engine===e.AgentUtils.ENGINE.BLINK&&(l={timeout:100}),this.m_idleCallback=window.requestIdleCallback(function(e){for(var r=e.timeRemaining(),l=0,h=document.createDocumentFragment();(r>l||e.didTimeout)&&0!==t.length&&0!==i.length;){var m=t.shift(),c=null!=s?s.shift():null,u=i.shift();a.addItem(h,-1,m,a.getMetadata(n,u,m),o,null,c),n+=1,l=r-e.timeRemaining(),r=e.timeRemaining()}d(h)},l)):this.m_idleCallback=window.requestAnimationFrame(function(){var e=document.createDocumentFragment(),r=t.shift(),l=null!=s?s.shift():null,h=i.shift();a.addItem(e,-1,r,a.getMetadata(n,h,r),o,null,l),n+=1,d(e)}):window.requestAnimationFrame(function(){a.m_idleCallback&&(a._appendLoadingIndicator(),a.afterItemsInserted(!1,!0),a.signalTaskEnd()),a.m_idleCallback=null});function d(e){window.requestAnimationFrame(function(){null!=a.m_widget&&(a.m_root.appendChild(e),a._renderItemsWhenIdle(t,i,n,o,r,s))})}},c.prototype._isOverflow=function(){return this._getScroller()!==this.m_widget.getListContainer()[0]?this._isOverflowCheckForCustomScroller():this._isOverflowCheckForDefaultScroller()},c.prototype._isOverflowCheckForDefaultScroller=function(){if(this._isLoadMoreOnScroll()){var t=this._getScroller(),i=null==this.m_loadingIndicator?0:this._getLoadingIndicatorHeight(),n=t.scrollHeight-(t.clientHeight+i);return 1===n&&e.AgentUtils.getAgentInfo().browser===e.AgentUtils.BROWSER.EDGE&&(n=0),n>0}return!1},c.prototype._isOverflowCheckForCustomScroller=function(){var t=this._getScroller();if(t!==document.documentElement){var e=null==this.m_loadingIndicator?0:this._getLoadingIndicatorHeight();return this.m_root.clientHeight+this._getScrollerOffsetTop()-e>t.clientHeight}return this._isLastItemNotInViewport()},c.prototype._isLastItemNotInViewport=function(){for(var t,e=this.m_root.children,i=this.m_widget.getItemElementStyleClass(),n=e.length-1;n>=0;n--)if(e[n].classList.contains(i)){t=e[n];break}return!!t&&!l.isElementInScrollerBounds(t,this._getScroller())},c.prototype._removeDuplicateItems=function(t){if(this._hasPendingInsertKeys()){var e=this,i=new Map;this.m_root.querySelectorAll("."+this.m_widget.getItemElementStyleClass()).forEach(function(t){"LI"!==t.tagName&&(t=t.parentNode);var n=e.GetKey(t);null!=n&&i.set(n,t)});var n=new h(i);t.forEach(function(t){var e=n.get(t);e&&e.parentNode&&e.parentNode.removeChild(e)})}},c.prototype._handleFetchSuccess=function(t,e,i,n,o,r,s){if(null==this.m_widget)return Promise.resolve(!0);this._removeDuplicateItems(e);var l=this.m_root.querySelectorAll("."+this.m_widget.getItemElementStyleClass()).length;if(l>0&&!i&&this._isLastItemNotInViewport()&&null==this.m_widget.m_scrollPosition){this.signalTaskStart("render items during idle time");var a=null!=r?r.slice(0):null;return this._renderItemsWhenIdle(t.slice(0),e.slice(0),l,n,o,a),Promise.resolve(!0)}for(var d=document.createDocumentFragment(),h=0;h<t.length;h++){var m=t[h],c=e[h],u=this._isFetchFromInsert(c)?this.afterRenderItemForInsertEvent.bind(this):null;this.addItem(d,-1,m,this.getMetadata(l,c,m),n,u,null!=r?r[h]:null),l+=1}return this.animateShowContent(this.m_root,d,s)},c.prototype.handleDomScrollerFetchedData=function(t){null!=t?(this.signalTaskStart("handle results from DomScroller"),this._removeLoadingIndicator(),this.IsReady()&&this.signalTaskStart("dummy task"),this.isCardLayout()&&this.m_superRoot&&0===this.m_root.childNodes.length&&this.m_root.parentNode&&this.m_superRoot.appendChild(this.m_root.parentNode),this._handleFetchedData(t,this.getTemplateEngine(),!1),t.value&&t.value.data?this.m_widget.updateStatusFetchEnd(t.value.data.length):t.maxCountLimit&&(this._handleScrollerMaxRowCount(),this.signalTaskEnd()),this.m_widget.m_scrollHeight=null,this.signalTaskEnd()):this._removeLoadingIndicator()},c.prototype._registerDomScroller=function(){var t=this,e={fetchSize:this._getFetchSize(),fetchTrigger:this._getFetchTrigger(),maxCount:this._getMaxCount(),asyncIterator:this.m_dataProviderAsyncIterator,initialRowCount:this.m_root.childElementCount,success:function(e){t.signalTaskEnd(),t.handleDomScrollerFetchedData(e),null!=t.m_root&&null!=e.value||(t.signalTaskEnd(),null!=t.m_root&&t.m_widget.renderComplete(!0))},error:function(){t.signalTaskEnd(),t.signalTaskEnd()},localKeyValidator:function(e){return!!t.m_widget&&null!=t.m_widget.FindElementByKey(e)},beforeFetch:function(e,i){return t.handleBeforeFetch(),t.m_viewportCheckPromise=null,null==t.m_idleCallback&&(t.m_widget.updateStatusFetchStart(),i||t.signalTaskStart("starts high-water mark scrolling"),!0)},beforeScroll:this.m_widget.mergeScrollListener()},i=this._getScroller();i!==this.m_widget.getListContainer()[0]&&(e.contentElement=this.m_root,i===document.documentElement&&(e.isOverflow=this._isLastItemNotInViewport.bind(this))),this.m_domScroller=new a(i,this.getDataProvider(),e)},c.prototype.handleBeforeFetch=function(){this.m_loadingIndicator&&(this.m_loadingIndicator.get(0).style.visibility="visible"),this.m_fillerSkeletons&&(this.m_fillerSkeletons.style.visibility="visible")},c.prototype._clearEventQueue=function(){null!=this.m_eventQueue&&(this.m_eventQueue.length=0)},c.prototype.handleModelMutateEvent=function(t){void 0!==this.m_dataProviderAsyncIterator&&c.superclass.handleModelMutateEvent.call(this,t)},c.prototype.handleModelAddEvent=function(t){this.m_currentEvents.push(t);var e=c.superclass.handleModelAddEvent.call(this,t);return e||this.m_currentEvents.pop(),e},c.prototype.GetReferenceNode=function(t,e){var i=c.superclass.GetReferenceNode.call(this,t,e);return null==i&&null!=this.m_loadingIndicator?this.m_loadingIndicator.get(0):i},c.prototype._isIterateAfterDoneNotAllowed=function(){var t=this.getDataProvider();if(t&&t.getCapability){var e=t.getCapability("fetchFirst");if(e&&"notAllowed"===e.iterateAfterDone)return!0}return!1},c.prototype._getMaxIndexForInsert=function(){var t=Number.MAX_VALUE;if(this._isIterateAfterDoneNotAllowed()&&!this.hasMoreToFetch())return t;if(this._isLoadMoreOnScroll()){t=i(this.m_root).children("li."+this.m_widget.getItemElementStyleClass()).length;var e=this.m_root.querySelectorAll(".oj-listview-temp-item"),n=this.m_root.querySelectorAll(".oj-listview-temp-item.oj-listview-item-remove");t=Math.max(0,t+e.length-n.length)}return t},c.prototype.addItemsForModelInsert=function(t,e,i,n,o,r,s){for(var l=this._getMaxIndexForInsert(),a=this.getTemplateEngine(),h=[],m=0;m<t.length;m++)if(null==this.FindElementByKey(i[m])){var c;if(this.signalTaskStart("handling model add event for item: "+i[m]),null!=e?c=e[m]:(c=this.getIndex(r,m))>-1?c=o?c:c+1:this._isLoadMoreOnScroll()&&(this._isIterateAfterDoneNotAllowed()&&!this.hasMoreToFetch()||(c=l)),c<l){var u=this.addItem(this.m_root,c,t[m],this.getMetadata(c,i[m],t[m]),a,this.afterRenderItemForInsertEvent.bind(this),null!=s?s[m]:null);u&&h.push(u),l+=1}else null==this.m_insertOutOfRangeKeys&&(this.m_dataProvider.createOptimizedKeySet?this.m_insertOutOfRangeKeys=this.m_dataProvider.createOptimizedKeySet():this.m_insertOutOfRangeKeys=new d),this.m_insertOutOfRangeKeys.add(i[m]);this.signalTaskEnd()}if(h.length<t.length&&(null==this.m_domScroller?this._registerDomScroller():this.m_domScroller.setAsyncIterator(this.m_dataProviderAsyncIterator)),0===h.length)this.m_currentEvents.pop(),0===this.m_currentEvents.length&&this.afterItemsInserted(!0,!0);else{var p=this;Promise.all(h).then(function(){p.m_widget&&(p.m_currentEvents.pop(),0===p.m_currentEvents.length&&p.afterItemsInserted(!0,!0))})}},c.prototype._isFetchFromInsert=function(t){return null!=this.m_insertOutOfRangeKeys&&this.m_insertOutOfRangeKeys.has(t)},c.prototype.handleModelRemoveEvent=function(t){this.m_currentEvents.push(t);var e=c.superclass.handleModelRemoveEvent.call(this,t);e?null==this.m_root.querySelector("li."+this.m_widget.getItemElementStyleClass())&&this.m_loadingIndicator&&(this.m_loadingIndicator.get(0).style.display="none"):this.m_currentEvents.pop();return e},c.prototype.handleRemoveItemsPromises=function(t){if(0===t.length)this.m_currentEvents.pop();else{var e=this;Promise.all(t).then(function(){e.m_widget&&(e.m_currentEvents.pop(),0===e.m_currentEvents.length&&e.checkViewport())})}},c.prototype.handleModelRefreshEvent=function(t){null!=this.m_root&&(this._cancelIdleCallback(),this.IsReady()?(this.signalTaskStart("handling model reset event"),this._clearEventQueue(),this.m_widget.ClearCache(!0),this._destroyDomScroller(),this.m_widget.adjustScrollPositionValueOnFetch(),this.m_widget.resetFocusBeforeRefresh(),this.fetchRows(!0),this.signalTaskEnd()):this._pushToEventQueue({type:t.type,event:t}))},c.prototype._handleFetchedData=function(t,e,i){if(null!=this.m_root&&null!=t.value){var n=t.value.data,o=t.value.metadata.map(function(t){return t.key}),r=t.value.metadata;n.length===o.length&&this._handleFetchSuccess(n,o,t.done||t.maxCountLimit,e,t.isMouseWheel,r,i).then(function(e){if(null!=this.m_widget){var n=null!=o&&0===o.length;this._isLoadMoreOnScroll()&&(t.done?this.m_domScroller&&this._destroyDomScroller():(n&&s.info("handleFetchedData: zero data returned while done flag is false"),e||t.maxCountLimit||(null==this.m_domScroller&&(this._registerDomScroller(),this.getRootElementHeight()),n&&!this.m_domScroller.isOverflow()||this._appendLoadingIndicator()))),t.maxCountLimit&&this._handleScrollerMaxRowCount(),this.fetchEnd(e,!n||!t.done,i),n||this.disableAllTabbableElements()}}.bind(this))}},c.prototype.disableAllTabbableElements=function(){var t=this.m_root.childElementCount;this.m_root.lastElementChild&&"presentation"===this.m_root.lastElementChild.getAttribute("role")&&(t-=1);var e=this;n.getContext(this.m_root).getBusyContext().whenReady().then(function(){if(null!=e.m_root)for(var i=e.m_root.children,n=t;n<i.length;n++)e.m_widget.disableAllTabbableElements(i[n])})},c.prototype.afterItemsInserted=function(t,e){if(this.m_widget){var i=this,o=this.m_widget.renderComplete(e);if(o&&o.then(function(){i.m_animationPromise=null}),this.m_animationPromise=o,this._processEventQueue(),t)if(this.m_widget.ojContext._IsCustomElement()){var r=n.getContext(i.m_root).getBusyContext().whenReady();r.then(function(){null!=i.m_widget&&(i.isCardLayout()&&void 0===i.m_cardDim&&null!=i.m_loadingIndicator&&i._adjustLoadMoreSkeletons(i._getRootElementWidth(!0),!0),null!=i.m_viewportCheckPromise&&null==i.checkViewport(o)&&i._clearInsertOutOfRangeKeys())}),i.m_viewportCheckPromise=r}else null==this.checkViewport()&&this._clearInsertOutOfRangeKeys()}},c.prototype.fetchEnd=function(t,e,i){this._setFetching(!1),t||this.afterItemsInserted(e,!i),this.signalTaskEnd()},c.prototype._checkHorizontalViewport=function(){if(this.isCardLayout()){for(var t,e=this.m_root.children,i=this.m_widget.getItemElementStyleClass(),n=e.length-1;n>=0;n--)if(e[n].classList.contains(i)){t=e[n];break}if(t){var o=this._getScroller(),r=o===this.m_root?this.getRootElementHeight():o.clientHeight;if(o===document.documentElement){var s=t.getBoundingClientRect();if(s.top<=r&&s.top+s.height>=0)return this.handleBeforeFetch(),this.m_domScroller._fetchMoreRows()}else{var l=o.scrollTop,a=t.offsetTop,d=o===this.m_root?0:this._getScrollerOffsetTop();if(a>l&&a<l+r-d)return this.handleBeforeFetch(),this.m_domScroller._fetchMoreRows()}}}return null},c.prototype._clearInsertOutOfRangeKeys=function(){null!=this.m_insertOutOfRangeKeys&&this.m_insertOutOfRangeKeys.clear()},c.prototype.checkViewport=function(t){var e,i=this;return this.m_checkViewportPromise?null:(this.signalTaskStart("checking viewport"),null!=this.m_domScroller&&this.IsReady()&&(null!=(e=this.m_domScroller.checkViewport())?(this.signalTaskStart("got promise from checking viewport"),e.then(function(n){if(null!=i.m_widget){if(null!=n)i.m_checkViewportPromise=null,i.handleDomScrollerFetchedData(n);else{var o=function(){null!=(e=i._checkHorizontalViewport())?(i.signalTaskStart("got promise from checking horizontal viewport"),e.then(function(t){i.m_checkViewportPromise=null,null!=i.m_widget&&null!=t&&i.handleDomScrollerFetchedData(t),i.signalTaskEnd()},null)):i.m_checkViewportPromise=null};t?(i.signalTaskStart("wait for animation to complete"),t.then(function(){i.signalTaskEnd(),null!=i.m_widget&&null!=i.m_domScroller&&o()})):o()}i.signalTaskEnd()}i._clearInsertOutOfRangeKeys()},null)):this._clearInsertOutOfRangeKeys(),this.m_checkViewportPromise=e),this.signalTaskEnd(),e)},t.DataProviderContentHandler=m,t.IteratingDataProviderContentHandler=c,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ojdataproviderscroller.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojkeyset',["exports","ojs/ojcore-base","ojs/ojkeysetimpl"],function(e,t,n){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;var r=function(){};t._registerLegacyNamespaceProp("KeySet",r),t.Object.createSubclass(r,t.Object,"KeySet"),r.prototype.SetInternal=function(e){this._keys=e},r.prototype.AddOrDeleteInternal=function(e,t){var n,r;return null==(n=e?this._add(t):this._remove(t))?this:((r=Object.create(Object.getPrototypeOf(this))).SetInternal(n),r)},r.prototype._add=function(e){var t=this,n=null;return e.forEach(function(e){e!==t.NOT_A_KEY&&t.get(e)===t.NOT_A_KEY&&(null==n&&(n=t.Clone()),n.add(e))}),n},r.prototype._remove=function(e){var t,n=this,r=null;return 0===this._keys.size?null:(e.forEach(function(e){(t=n.get(e))!==n.NOT_A_KEY&&(null==r&&(r=n.Clone()),r.delete(t))}),r)},r.prototype.GetInternalSize=function(){return this._keys.size},r.prototype.Clone=function(){return new Set(this._keys)},n.call(r.prototype);var o=function(e){this.InitializeWithKeys(e)};t._registerLegacyNamespaceProp("ExpandedKeySet",o),t.Object.createSubclass(o,r,"ExpandedKeySet"),o.prototype.add=function(e){return this.AddOrDeleteInternal(!0,e)},o.prototype.addAll=function(){return new i},o.prototype.isAddAll=function(){return!1},o.prototype.delete=function(e){return this.AddOrDeleteInternal(!1,e)},o.prototype.clear=function(){return 0===this.GetInternalSize()?this:new o},o.prototype.has=function(e){return this.get(e)!==this.NOT_A_KEY},o.prototype.values=function(){return this.Clone()};var i=function(){this.InitializeWithKeys(null)};t._registerLegacyNamespaceProp("ExpandAllKeySet",i),t.Object.createSubclass(i,r,"ExpandAllKeySet"),i.prototype.add=function(e){return this.AddOrDeleteInternal(!1,e)},i.prototype.addAll=function(){return 0===this.GetInternalSize()?this:new i},i.prototype.isAddAll=function(){return!0},i.prototype.delete=function(e){return this.AddOrDeleteInternal(!0,e)},i.prototype.clear=function(){return new o},i.prototype.has=function(e){return this.get(e)===this.NOT_A_KEY},i.prototype.deletedValues=function(){return this.Clone()};var l=function(e){this.InitializeWithKeys(e)};t._registerLegacyNamespaceProp("KeySetImpl",l),t.Object.createSubclass(l,r,"KeySetImpl"),l.prototype.add=function(e){return this.AddOrDeleteInternal(!0,e)},l.prototype.addAll=function(){return new u},l.prototype.isAddAll=function(){return!1},l.prototype.delete=function(e){return this.AddOrDeleteInternal(!1,e)},l.prototype.clear=function(){return 0===this.GetInternalSize()?this:new l},l.prototype.has=function(e){return this.get(e)!==this.NOT_A_KEY},l.prototype.values=function(){return this.Clone()};var u=function(){this.InitializeWithKeys(null)};t._registerLegacyNamespaceProp("AllKeySetImpl",u),t.Object.createSubclass(u,r,"AllKeySetImpl"),u.prototype.add=function(e){return this.AddOrDeleteInternal(!1,e)},u.prototype.addAll=function(){return 0===this.GetInternalSize()?this:new u},u.prototype.isAddAll=function(){return!0},u.prototype.delete=function(e){return this.AddOrDeleteInternal(!0,e)},u.prototype.clear=function(){return new l},u.prototype.has=function(e){return this.get(e)===this.NOT_A_KEY},u.prototype.deletedValues=function(){return this.Clone()};var a={toArray:function(e){var t,n=e.isAddAll()?e.deletedValues():e.values();return Array.from?t=Array.from(n):(t=[],n.forEach(function(e){t.push(e)})),t.inverted=e.isAddAll(),t},toKeySet:function(e){return e.inverted?(new u).delete(e):(new l).add(e)}};e.AllKeySetImpl=u,e.ExpandAllKeySet=i,e.ExpandedKeySet=o,e.KeySet=r,e.KeySetImpl=l,e.KeySetUtils=a,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojkeyset.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojeventtarget',["exports","ojs/ojcore-base"],function(e,t){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;
/**
     * @preserve Copyright 2013 jQuery Foundation and other contributors
     * Released under the MIT license.
     * http://jquery.org/license
     */
class s{constructor(e,t){this.type=e,this.options=t,null!=t&&(this.detail=t.detail)}}t._registerLegacyNamespaceProp("GenericEvent",s);class r{addEventListener(e,t){this._eventListeners||(this._eventListeners=[]),this._eventListeners.push({type:e.toLowerCase(),listener:t})}removeEventListener(e,t){if(this._eventListeners){let s;for(s=this._eventListeners.length-1;s>=0;s--)this._eventListeners[s].type==e&&this._eventListeners[s].listener==t&&this._eventListeners.splice(s,1)}}dispatchEvent(e){if(this._eventListeners){var t,s=this._eventListeners.slice(0);for(t=0;t<s.length;t++){var r=s[t];if(e&&e.type&&r.type==e.type.toLowerCase()&&!1===r.listener.apply(this,[e]))return!1}}return!0}static applyMixin(e){[r].forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(s=>{"constructor"!==s&&(e.prototype[s]=t.prototype[s])})})}}t._registerLegacyNamespaceProp("EventTargetMixin",r),e.EventTargetMixin=r,e.GenericEvent=s,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojeventtarget.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojdataprovider',["exports","ojs/ojcore-base","ojs/ojeventtarget"],function(t,e,r){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,
/**
     * @preserve Copyright 2013 jQuery Foundation and other contributors
     * Released under the MIT license.
     * http://jquery.org/license
     */
oj.DataProvider=function(){},function(t){let e;!function(t){t.$co="$co",t.$eq="$eq",t.$ew="$ew",t.$pr="$pr",t.$gt="$gt",t.$ge="$ge",t.$lt="$lt",t.$le="$le",t.$ne="$ne",t.$regex="$regex",t.$sw="$sw"}(e=t.AttributeOperator||(t.AttributeOperator={}))}(t.AttributeFilterOperator||(t.AttributeFilterOperator={})),e._registerLegacyNamespaceProp("AttributeFilterOperator",t.AttributeFilterOperator),function(t){let e;!function(t){t.$and="$and",t.$or="$or"}(e=t.CompoundOperator||(t.CompoundOperator={}))}(t.CompoundFilterOperator||(t.CompoundFilterOperator={})),e._registerLegacyNamespaceProp("CompoundFilterOperator",t.CompoundFilterOperator);class i{constructor(){this._handleMutationAdd=function(t){var r;const s=t[i._BEFOREKEYS],n=t[i._KEYS],o=[];n.forEach(t=>{o.push(t)});const a=t[i._DATA],c=t[i._METADATA],l=t[i._INDEXES];if(o&&o.length>0)if(l)o.forEach((t,e)=>{this._items.splice(l[e],0,new this.Item(c[e],a[e]))});else if(s){const n=Object.assign([],s),l=Object.assign(new Set,t[i._KEYS]),f=Object.assign([],t[i._DATA]),u=Object.assign([],t[i._METADATA]),h=[];let p,_,y;for(const t of s){if(p=t,y=!0,null!=p){for(const t of o)if(e.Object.compareValues(t,p)){y=!1;break}if(y)for(const t of this._items)if(e.Object.compareValues(null===(r=null==t?void 0:t.metadata)||void 0===r?void 0:r.key,p)){y=!1;break}}else y=!1;y&&h.push(p)}let m=s.length;for(;m>0;){for(const t of s)if(_=t,h.indexOf(_)>=0){h.push(_);break}m--}for(let t=n.length-1;t>=0;t--)h.indexOf(n[t])>=0&&(delete n[t],l.delete(n[t]),delete f[t],delete u[t]);n.forEach((t,r)=>{var i,s;if(null===t)this._items.push(new this.Item(c[r],a[r]));else for(let n=0;n<this._items.length;n++)if(e.Object.compareValues(null===(s=null===(i=this._items[n])||void 0===i?void 0:i.metadata)||void 0===s?void 0:s.key,t)){this._items.splice(n,0,new this.Item(c[r],a[r]));break}})}else if(this._fetchParams&&null!=this._fetchParams.sortCriteria){const t=this._fetchParams.sortCriteria;if(t){const e=this._getSortComparator(t);let r,i,s;const n=[];a.forEach((t,o)=>{for(r=0;r<this._items.length;r++)if(i=this._items[r].data,s=e(t,i),s<0){this._items.splice(r,0,new this.Item(c[o],a[o])),n.push(o);break}}),a.forEach((t,e)=>{n.indexOf(e)<0&&this._items.push(new this.Item(c[e],a[e]))})}}else a.forEach((t,e)=>{this._items.push(new this.Item(c[e],a[e]))})},this._handleMutationRemove=function(t){const r=t[i._KEYS];if(r&&r.size>0){let t;r.forEach(r=>{for(t=this._items.length-1;t>=0;t--)if(e.Object.compareValues(this._items[t].metadata.key,r)){this._items.splice(t,1);break}})}},this._handleMutationUpdate=function(t){const r=t[i._KEYS],s=t[i._DATA],n=t[i._METADATA];if(s&&s.length>0){let t,i=0;r.forEach(r=>{for(t=this._items.length-1;t>=0;t--)if(e.Object.compareValues(this._items[t].metadata.key,r)){this._items.splice(t,1,new this.Item(n[i],s[i]));break}i++})}},this.Item=class{constructor(t,e){this.metadata=t,this.data=e,this[i._METADATA]=t,this[i._DATA]=e}},this.FetchByKeysResults=class{constructor(t,e){this.fetchParameters=t,this.results=e,this[i._FETCHPARAMETERS]=t,this[i._RESULTS]=e}},this.FetchByOffsetResults=class{constructor(t,e,r){this.fetchParameters=t,this.results=e,this.done=r,this[i._FETCHPARAMETERS]=t,this[i._RESULTS]=e,this[i._DONE]=r}},this._items=[]}addListResult(t){const e=[];t.value.data.forEach((r,i)=>{e.push(new this.Item(t.value.metadata[i],r))}),this._items=this._items.concat(e),this._done=t.done}getDataList(t,e){this._fetchParams=t;let r=25;null!=t.size&&(r=-1===t.size?this.getSize():t.size);const i=this._items.slice(e,e+r),s=[],n=[];return i.forEach(t=>{s.push(t.data),n.push(t.metadata)}),{fetchParameters:t,data:s,metadata:n}}getDataByKeys(t){const e=new Map;return t&&t.keys&&t.keys.forEach(t=>{for(const r of this._items)if(r.metadata.key===t){e.set(t,r);break}}),new this.FetchByKeysResults(t,e)}getDataByOffset(t){let e=[];return t&&(e=this._items.slice(t.offset,t.offset+t.size)),new this.FetchByOffsetResults(t,e,!0)}processMutations(t){null!=t.remove&&this._handleMutationRemove(t.remove),null!=t.add&&this._handleMutationAdd(t.add),null!=t.update&&this._handleMutationUpdate(t.update)}reset(){this._items=[],this._done=!1}getSize(){return this._items.length}isDone(){return this._done}_getSortComparator(t){return(e,r)=>{let s,n,o,a;for(const c of t){s=c[i._DIRECTION],n=c[i._ATTRIBUTE],o=this._getVal(e,n),a=this._getVal(r,n);let t=0;const l="string"==typeof o?o:String(o).toString(),f="string"==typeof a?a:String(a).toString();if(t="ascending"===s?l.localeCompare(f,void 0,{numeric:!0,sensitivity:"base"}):f.localeCompare(l,void 0,{numeric:!0,sensitivity:"base"}),0!==t)return t}return 0}}_getVal(t,e){if("string"==typeof e){const r=e.indexOf(".");if(r>0){const i=e.substring(0,r),s=e.substring(r+1),n=t[i];if(n)return this._getVal(n,s)}}return"function"==typeof t[e]?t[e]():t[e]}}i._DATA="data",i._METADATA="metadata",i._ITEMS="items",i._BEFOREKEYS="addBeforeKeys",i._KEYS="keys",i._INDEXES="indexes",i._FROM="from",i._OFFSET="offset",i._REFRESH="refresh",i._MUTATE="mutate",i._SIZE="size",i._FETCHPARAMETERS="fetchParameters",i._SORTCRITERIA="sortCriteria",i._DIRECTION="direction",i._ATTRIBUTE="attribute",i._VALUE="value",i._DONE="done",i._RESULTS="results",i._CONTAINSPARAMETERS="containsParameters",i._DEFAULT_SIZE=25,i._CONTAINSKEYS="containsKeys",i._FETCHBYKEYS="fetchByKeys",i._FETCHBYOFFSET="fetchByOffset",i._FETCHFIRST="fetchFirst",i._FETCHATTRIBUTES="attributes",e._registerLegacyNamespaceProp("DataCache",i);class s extends r.GenericEvent{constructor(t){const e={};e[s._DETAIL]=t,super("mutate",e)}}s._DETAIL="detail",e._registerLegacyNamespaceProp("DataProviderMutationEvent",s);class n extends r.GenericEvent{constructor(t){const e={};e.detail=t,super("refresh",e)}}e._registerLegacyNamespaceProp("DataProviderRefreshEvent",n);class o{fetchByKeys(t){let e=0;const r=this.getIterationLimit?this.getIterationLimit():-1,i={size:25},s=new Map,n=this.fetchFirst(i)[Symbol.asyncIterator]();return function t(i,s,n){return s.next().then(function(o){const a=o.value,c=a.data,l=a.metadata,f=l.map(function(t){return t.key});let u=!0;return i.keys.forEach(function(t){n.has(t)||f.map(function(e,r){e===t&&n.set(e,{metadata:l[r],data:c[r]})}),n.has(t)||(u=!1)}),e+=c.length,u||o.done||-1!=r&&e>=r?n:t(i,s,n)})}(t,n,s).then(function(e){const r=new Map;return e.forEach(function(t,e){const i=[t];r.set(e,i[0])}),{fetchParameters:t,results:r}})}containsKeys(t){return this.fetchByKeys(t).then(function(e){const r=new Set;return t.keys.forEach(function(t){null!=e.results.get(t)&&r.add(t)}),Promise.resolve({containsParameters:t,results:r})})}getCapability(t){if("fetchByKeys"===t)return{implementation:"iteration"};let e=null;if(!0!==this._ojSkipLastCapability){this._ojSkipLastCapability=!0;let r=1;for(;this["_ojLastGetCapability"+r];)++r;for(--r;r>0&&(e=this["_ojLastGetCapability"+r](t),!e);r--);delete this._ojSkipLastCapability}return e}static applyMixin(t){const e=t.prototype.getCapability;if([o].forEach(e=>{Object.getOwnPropertyNames(e.prototype).forEach(r=>{"constructor"!==r&&(t.prototype[r]=e.prototype[r])})}),e){let r=1;for(;t.prototype["_ojLastGetCapability"+r];)++r;t.prototype["_ojLastGetCapability"+r]=e}}}e._registerLegacyNamespaceProp("FetchByKeysMixin",o);class a{fetchByOffset(t){const e=t&&t.size>0?t.size:25,r=t?t.sortCriteria:null,i=t&&t.offset>0?t.offset:0;let s=0;const n=this.getIterationLimit?this.getIterationLimit():-1;let o=!1;const a={};a.size=e,a.sortCriteria=r;const c=new Array,l=this.fetchFirst(a)[Symbol.asyncIterator]();return function t(r,a,c){return a.next().then(function(l){o=l.done;const f=l.value,u=f.data,h=f.metadata,p=u.length;if(i<s+p){for(let t=i<=s?0:i-s;t<p&&c.length!==e;t++)c.push({metadata:h[t],data:u[t]})}return s+=p,c.length<e&&!o?-1!==n&&s>=n?c:t(r,a,c):c})}(t,l,c).then(function(e){return{fetchParameters:t,results:e,done:o}})}getCapability(t){if("fetchByOffset"===t)return{implementation:"iteration"};let e=null;if(!0!==this._ojSkipLastCapability){this._ojSkipLastCapability=!0;let r=1;for(;this["_ojLastGetCapability"+r];)++r;for(--r;r>0&&(e=this["_ojLastGetCapability"+r](t),!e);r--);delete this._ojSkipLastCapability}return e}static applyMixin(t){const e=t.prototype.getCapability;if([a].forEach(e=>{Object.getOwnPropertyNames(e.prototype).forEach(r=>{"constructor"!==r&&(t.prototype[r]=e.prototype[r])})}),e){let r=1;for(;t.prototype["_ojLastGetCapability"+r];)++r;t.prototype["_ojLastGetCapability"+r]=e}}}var c;e._registerLegacyNamespaceProp("FetchByOffsetMixin",a),function(t){function e(t,e){let r=!1;for(const i in e)if(e.hasOwnProperty(i)){const n=e[i];if(r||!s(i))throw new Error("parsing error "+e);t.operator=i,t.right=n,r=!0}}function r(t,e,r){if("$lt"===t){const t=o(r,e);return(r=t[0])<(e=t[1])}if("$gt"===t){const t=o(r,e);return(r=t[0])>(e=t[1])}if("$lte"===t){const t=o(r,e);return(r=t[0])<=(e=t[1])}if("$gte"===t){const t=o(r,e);return(r=t[0])>=(e=t[1])}if("$eq"===t)return r===e;if("$ne"===t)return r!==e;if("$regex"===t){if(r){if("string"!=typeof r&&!(r instanceof String))if(r instanceof Object){if("[object Object]"==(r=r.toString()))return!1}else r=new String(r);return null!==r.match(e)}return!1}if("$exists"===t)return e?null!=r:null==r;throw new Error("not a valid operator! "+t)}function i(t){return"$and"===t||"$or"===t}function s(t){return"$lt"===t||"$gt"===t||"$lte"===t||"$gte"===t||"$eq"===t||"$ne"===t||"$regex"===t||"$exists"===t}function n(t){return null!=t&&(t instanceof String||"string"==typeof t)}function o(t,e){return n(t)&&null==e?e="":n(e)&&null==t&&(t=""),[t,e]}function a(t,e){const r=t.split(".");let i=e;for(const t of r)i=i[t];return i}t.satisfy=function(t,n){if(t){return function t(e,n){const o=e.operator;if(i(o)){if(!e.left&&e.array instanceof Array){let r;const i=e.array;for(const e of i){const i=t(e,n);if("$or"===o&&!0===i)return!0;if("$and"===o&&!1===i)return!1;r=i}return r}throw new Error("invalid expression tree!"+e)}if(s(o)){const t=e.right;let i;if("*"!=e.left)return i=a(e.left,n),r(o,t,i);{const e=Object.keys(n);for(const s of e)if(i=a(s,n),r(o,t,i))return!0;return!1}}throw new Error("not a valid expression!"+e)}(function t(r){let n;const o=[];for(const a in r)if(r.hasOwnProperty(a)){const c=r[a];if(0===a.indexOf("$")){if(i(a)){if(!(c instanceof Array))throw new Error("not a valid expression: "+r);n={operator:a,array:[]};for(const e of c){const r=t(e);n.array.push(r)}}else if(s(a))throw new Error("not a valid expression: "+r)}else if("object"!=typeof c)o.push({left:a,right:c,operator:"$eq"});else{const t={left:a};e(t,c),o.push(t)}}o.length>1?n={operator:"$and",array:o}:1===o.length&&(n=o[0]);return n}(t),n)}return!0}}(c||(c={}));class l{constructor(t){t=t||{},this._textFilterAttributes=t.filterOptions?t.filterOptions.textFilterAttributes:null;const e=t.filterDef;e&&(e.op?(this.op=e.op,e.value?(this.value=e.value,e.attribute&&(this.attribute=e.attribute)):e.criteria&&(this.criteria=e.criteria)):e.text&&(this.text=e.text))}filter(t,e,r){return c.satisfy(l._transformFilter(this),t)}static _transformFilter(t){let e;if(t){let r,i=t.op;if(t.text?i="$regex":"$le"===i?i="$lte":"$ge"===i?i="$gte":"$pr"===i&&(i="$exists"),"$and"!==i&&"$or"!==i){r=t.text?new RegExp(t.text.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),"i"):t.value,e={};const s=t.attribute;if(s){const t={};"$sw"!==i&&"$ew"!==i&&"$co"!==i||(i="$regex",r=l._fixStringExpr(i,r)),t[i]=r,e[s]=t}else if(t.text){const s={};if(s[i]=r,t._textFilterAttributes&&t._textFilterAttributes.length>0){const r=[];t._textFilterAttributes.forEach(function(t){const e={};e[t]=s,r.push(e)}),e.$or=r}else e["*"]=s}else{const t=[];l._transformObjectExpr(r,i,null,t),e.$and=t}}else{const r=[];t.criteria.forEach(function(e){e&&e.text&&t._textFilterAttributes&&(e._textFilterAttributes=t._textFilterAttributes),r.push(l._transformFilter(e))}),e={},e[i]=r}}return e}static _transformObjectExpr(t,e,r,i){if(Object.keys(t).length>0)Object.keys(t).forEach(function(s){let n=t[s];const o=r?r+"."+s:s;if(n instanceof Object)l._transformObjectExpr(n,e,o,i);else{const t={};"$sw"!==e&&"$ew"!==e&&"$co"!==e||(e="$regex",n=l._fixStringExpr(e,n)),t[e]=n;const r={};r[o]=t,i.push(r)}});else{const s={};s[e]=t;const n={};n[r]=s,i.push(n)}}static _fixStringExpr(t,e){return("string"==typeof e||e instanceof String)&&("$sw"===t?e="^"+e:"$ew"===t&&(e+="$")),e}}class f{static getFilter(t){return new l(t)}}e._registerLegacyNamespaceProp("FilterFactory",f),t.DataCache=i,t.DataProviderMutationEvent=s,t.DataProviderRefreshEvent=n,t.FetchByKeysMixin=o,t.FetchByOffsetMixin=a,t.FilterFactory=f,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ojdataprovider.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojmodel',["exports","ojs/ojcore-base","ojs/ojlogger","jquery","ojs/ojconfig"],function(t,e,r,n,o){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;const i={on:function(t,e,r){return this.OnInternal(t,e,r,!1,!1)},off:function(t,e,r){return this._offInternal(t,e,r,!1)},trigger:function(t){var e=Array.prototype.slice.call(arguments);return e.unshift(!1),i.TriggerInternal.apply(this,e)},once:function(t,e,r){return this._onceInternal(t,e,r,!1,null)},listenTo:function(t,e,r){var n,o,s,a,l,u,c,h={};for(c in e.constructor===String?h[e]=r:h=e,h)if(h.hasOwnProperty(c))for(n=i._getEvents(c),o=0;o<n.length;o+=1)u={event:s=n[o].event,attribute:a=n[o].attribute,object:t,callback:h[c]},l=a?s+":"+a:s,void 0===this._listeningTo&&(this._listeningTo=[]),this._listeningTo.push(u),t.OnInternal(l,h[c],null,!0,!1);return this},listenToOnce:function(t,e,r){var n,o,s,a,l,u,c,h={};for(c in e.constructor===String?h[e]=r:h=e,h)if(h.hasOwnProperty(c))for(n=i._getEvents(c),o=0;o<n.length;o+=1)u={event:s=n[o].event,attribute:a=n[o].attribute,object:t,callback:h[c]},l=a?s+":"+a:s,void 0===this._listeningTo&&(this._listeningTo=[]),this._listeningTo.push(u),t._onceInternal(l,h[c],null,!0,this);return this},stopListening:function(t,e,r){var n,o,s,a,l,u,c,h,p,f,d,_,g,y={};if(null==arguments||arguments.length<=1){for(_=this._listeningTo?this._listeningTo.length:0,d=0;d<_;d++)u=this._listeningTo[d],(c=!t||t===u.object)&&u.object._offInternal.apply(u.object,[u.event,u.callback,u.context,!0]);return this._listeningTo=[],this}for(g in o=e,t&&t.constructor===String&&(o=t),o.constructor===String?y[o]=r:y=o,y)if(y.hasOwnProperty(g))for(n=i._getEvents(g),s=0;s<n.length;s+=1)for(a=n[s].event,l=n[s].attribute,d=(_=this._listeningTo?this._listeningTo.length:0)-1;d>=0;d-=1)u=this._listeningTo[d],c=!t||t===u.object,h=!a||a===u.event,p=!r||y[g]===u.callback,f=!l||l===u.attribute,c&&h&&p&&f&&(this._listeningTo[d].object._offInternal.apply(this._listeningTo[d].object,[this._listeningTo[d].event,this._listeningTo[d].callback,this._listeningTo[d].context,!0]),this._listeningTo.splice(d,1));return this},EventType:{ADD:"add",ALLADDED:"alladded",REMOVE:"remove",RESET:"reset",REFRESH:"refresh",SORT:"sort",CHANGE:"change",DESTROY:"destroy",ALLREMOVED:"allremoved",REQUEST:"request",SYNC:"sync",ERROR:"error",INVALID:"invalid",READY:"ready",ALL:"all"}};i.bind=i.on,i.unbind=i.off,i.Mixin=function(t,e){var r,n=e||this;for(r in n)"function"==typeof n[r]&&(t[r]=n[r]);t.eventHandlers={},t._listeningTo=[]},i._onceInternal=function(t,e,r,n,o){var i,s,a,l,u,c,h;c=this._getEventMap(t,e,r),u=c.map,h=c.context;var p=this;return Object.keys(u||{}).forEach(function(t){if(Object.prototype.hasOwnProperty.call(u,t))for(i=p._getEvents(t),s=0;s<i.length;s+=1)a=i[s].event,l=i[s].attribute,void 0===p.eventHandlers&&(p.eventHandlers=[]),void 0===p.eventHandlers[a]&&(p.eventHandlers[a]=[]),p.eventHandlers[a].push({callback:u[t],context:h,attribute:l,once:!0,fired:!1,listen:n,otherObj:o})}),this},i._shouldFire=function(t){return!t.once||!t.fired&&(t.fired=!0,!0)},i._getContext=function(t,e){return e.context||e.otherObj||t},i.TriggerInternal=function(t,e){var r,n,o,s,a,l,u,c,h,p=this._getEvents(e);for(s=[],r=0;r<p.length;r+=1)n=p[r].event,o=p[r].attribute,s.push({event:n,attribute:o});for(r=0;r<s.length;r+=1){for(c=this._getHandlers(this.eventHandlers,i.EventType.ALL),a=i._getHandlers(this.eventHandlers,s[r].event,!1),l=0;l<(a?a.length:0);l+=1)a[l].attribute===s[r].attribute&&a[l].callback&&(u=Array.prototype.slice.call(arguments),a&&a[l]&&a[l].once&&(this._removeHandler(i._getHandlers(this.eventHandlers,s[r].event,!0),a[l]),a[l].otherObj&&a[l].otherObj.stopListening(this,e,a[l].callback)),a&&a[l]&&this._shouldFire(a[l])&&(h=a[l].callback,t&&!a[l].ignoreSilent||h.apply(i._getContext(this,a[l]),u.slice(2))));for(l=0;l<(c?c.length:0);l+=1)(u=Array.prototype.slice.call(arguments)).length>0&&(s[r].attribute?u[1]=s[r].event+":"+s[r].attribute:u[1]=s[r].event),c&&c[l]&&c[l].callback&&this._shouldFire(c[l])&&(h=c[l].callback,t&&!c[l].ignoreSilent||h.apply(i._getContext(this,c[l]),u.slice(1))),c&&c[l]&&c[l].once&&(this._removeHandler(this._getHandlers(this.eventHandlers,i.EventType.ALL,!0),c[l]),c[l].otherObj&&c[l].otherObj.stopListening(this,i.EventType.ALL,c[l].callback))}return this},i.OnInternal=function(t,e,r,n,o){var s,a,l,u,c,h,p,f,d=this._getEventMap(t,e,r);for(f in s=d.map,p=d.context,s)if(s.hasOwnProperty(f))for(a=this._getEvents(f),l=0;l<a.length;l+=1)u=a[l].event,c=a[l].attribute,void 0===this.eventHandlers&&(this.eventHandlers=[]),void 0===this.eventHandlers[u]&&(this.eventHandlers[u]=[]),h={callback:s[f],context:p,attribute:c,listen:n,ignoreSilent:o},-1===this._checkForHandler(this.eventHandlers[u],h,i._handlersIdentical)&&this.eventHandlers[u].push(h);return this},i._offInternal=function(t,e,r,n){var o,i,s,a;if(null==arguments||0===arguments.length)return this.eventHandlers={},this;if(null==t)return this._removeEvent(t,e,r,n),this;for(a in o=(i=this._getEventMap(t,e,r)).map,s=i.context,o)o.hasOwnProperty(a)&&this._removeEvent(a,o[a],s,n);return this},i._getEventMap=function(t,e,r){var n={};return t.constructor!==String?{map:n=t,context:e}:(n[t]=e,{map:n,context:r})},i._removeEvent=function(t,e,r,n){var o,s,a,l,u,c,h,p,f,d=[];if(t)d=i._getEvents(t);else if(void 0!==this.eventHandlers){var _=this;Object.keys(this.eventHandlers||{}).forEach(function(t){Object.prototype.hasOwnProperty.call(_.eventHandlers,t)&&d.push({event:t})})}for(o=0;o<d.length;o+=1)if(s=d[o].event,l=d[o].attribute,void 0!==this.eventHandlers&&this.eventHandlers[s]instanceof Array){for(a=(u=this.eventHandlers[s]).length-1;a>=0;a-=1)c=null==e||u[a].callback===e,h=null==r||u[a].context===r,p=null==l||u[a].attribute===l,f=null==n||u[a].listen===n,c&&h&&p&&f&&u.splice(a,1);0===u.length&&delete this.eventHandlers[s]}},i._removeHandler=function(t,e){var r,n,o,i,s,a;if(t)for(r=t.length-1;r>=0;r-=1)n=void 0===e.callback||null===e.callback||t[r].callback===e.callback,o=void 0===e.context||null===e.context||t[r].context===e.context,i=void 0===e.attribute||null===e.attribute||t[r].attribute===e.attribute,s=void 0===e.listen||null===e.listen||t[r].listen===e.listen,a=void 0===e.once||null===e.once||t[r].once===e.once,n&&o&&i&&s&&a&&t.splice(r,1)},i._getEvents=function(t){var e,r,n,o,i=t?t.split(" "):[],s=[];for(e=0;e<i.length;e+=1)n=(r=i[e].split(":"))[0],o=r.length>1?r[1]:null,s.push({event:n,attribute:o});return s},i._handlersIdentical=function(t,e){return t.callback===e.callback&&t.attribute===e.attribute&&t.context===e.context&&t.listen===e.listen&&t.once===e.once},i._listenersIdentical=function(t,e){return t.event===e.event&&t.attribute===e.attribute&&t.context===e.context&&t.object===e.object},i._checkForHandler=function(t,e,r){var n;if(void 0===t)return-1;for(n=0;n<t.length;n+=1)if(r(t[n],e))return n;return-1},i._getHandlers=function(t,e,r){if(t&&t[e]instanceof Array){if(r)return t[e];var n,o=[];for(n=0;n<t[e].length;n++)o.push(t[e][n]);return o}return null},e._registerLegacyNamespaceProp("Events",i);const s=function(){this.name="URLError",this.message="No URL defined"};e._registerLegacyNamespaceProp("URLError",s),s.prototype=new Error,s.constructor=s;const a=function(t,e){this.rootURL=t,this.model=e,this.customURL=e.customURL,n.support.cors=!0};e._registerLegacyNamespaceProp("RestImpl",a),a._HEADER_PROP="headers",a.addOptions=function(t,e,r){var o=n.extend(!0,t,r),i=e||{};return Object.keys(i).forEach(function(t){Object.prototype.hasOwnProperty.call(i,t)&&"oauthHeader"!==t&&(Object.prototype.hasOwnProperty.call(o,t)||(o[t]=i[t]),t===a._HEADER_PROP&&(o[t]=n.extend(!0,o[t],i[t])))}),e&&e.oauthHeader&&(o[a._HEADER_PROP]||(o[a._HEADER_PROP]={}),Object.keys(e.oauthHeader||{}).forEach(function(t){Object.prototype.hasOwnProperty.call(e.oauthHeader,t)&&(Object.prototype.hasOwnProperty.call(o[a._HEADER_PROP],t)||(o[a._HEADER_PROP][t]=e.oauthHeader[t]))})),o},a.prototype.getRecords=function(t,e,r,n){var o=r||{},i="jsonp"===o.dataType,s=this._getURL("read",this.rootURL,this.customURL,null,n,o),l={crossDomain:o.crossDomain||!i,dataType:this._getDataType(o),jsonpCallback:o.jsonpCallback,context:null!==n?n:this,success:t,error:e};return l=this._addHeaderProp(l),l=a.addOptions(l,o,s),o.xhr=this.ajax(l,n),o.xhr},a.prototype._addHeaderProp=function(t){var e=t||{};return this.model&&this.model.omitLanguageHeader||(e[a._HEADER_PROP]={"Accept-Language":this.getLocale()}),e},a.prototype.getRecord=function(t,e,r,n,o){var i=n||{},s="jsonp"===i.dataType,l=this._getURL("read",this.rootURL,this.customURL,r,o,i),u={crossDomain:i.crossDomain||!s,dataType:this._getDataType(i),jsonpCallback:i.jsonpCallback,context:null!==o?o:this,success:t,error:e};return u=this._addHeaderProp(u),u=a.addOptions(u,i,l),i.xhr=this.ajax(u,o),i.xhr},a.prototype.updateRecord=function(t,e,r,n,o,i,s){var l=o||{},u="jsonp"===l.dataType,c=this._getURL(s?"patch":"update",this.rootURL,this.customURL,e,i,l),h=a._emulateHTTP(l),p={crossDomain:l.crossDomain||!u,contentType:this._getContentType(l),dataType:this._getDataType(l),jsonpCallback:l.jsonpCallback,data:this._getData(JSON.stringify(r),l,c),emulateHTTP:h,emulateJSON:a._emulateJSON(l),success:t,error:n,context:null!==i?i:this};return p=this._addHeaderProp(p),p=a.addOptions(p,l,c),p=a._beforeSendMod(h,p),l.xhr=this.ajax(p,i),l.xhr},a._beforeSendMod=function(t,e){var r=e||{};if(t){var n=r.beforeSend;r.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",r._method),n?n.apply(this,arguments):null}}return r},a.prototype._getData=function(t,e,r){if(a._emulateJSON(e)){var n={_method:r._method?r._method:r.type};return t&&(n.model=t),n}return t},a.prototype._getHTTPMethod=function(t,e){if(e.type)return{method:e.type};var r=null;return"create"===t&&(r="POST"),"delete"===t&&(r="DELETE"),"patch"===t&&(r="PATCH"),"update"===t&&(r="PUT"),a._emulateHTTP(e)?{method:"POST",_method:r}:(null===r&&(r="GET"),{method:r})},a._emulateHTTP=function(t){return t.emulateHTTP||e.emulateHTTP},a._emulateJSON=function(t){return t.emulateJSON||e.emulateJSON},a.prototype._getURL=function(t,r,o,i,s,l){var u=this._getHTTPMethod(t,l);if(n.isFunction(o)){var c=o.call(this,t,s,a.SetCustomURLOptions(i,s,l));if(e.StringUtils.isString(c)){var h={url:c,type:u.method};return u._method&&(h._method=u._method),h}if(c)return c.url=Object.prototype.hasOwnProperty.call(c,"url")?c.url:r,Object.prototype.hasOwnProperty.call(c,"type")||(c.type=u.method),Object.prototype.hasOwnProperty.call(c,"data")||u._method&&(c._method=u._method),c}var p={url:a.GetPropValue(null,r),type:u.method};return u._method&&(p._method=u._method),p},a.prototype.deleteRecord=function(t,e,r,n){var o=r||{},i="jsonp"===o.dataType,s=this._getURL("delete",this.rootURL,this.customURL,t,n,o),l=a._emulateHTTP(o),u=a._emulateJSON(o),c={crossDomain:o.crossDomain||!i,success:o.success,error:e,context:null!==n?n:this,emulateHTTP:l,emulateJSON:u},h=this._getData(null,o,s);return h&&(c.data=h),c=a.addOptions(c,o,s),c=a._beforeSendMod(l,c),o.xhr=this.ajax(c,n),o.xhr},a.prototype.addRecord=function(t,e,r,n){var o=r||{},i=JSON.stringify(t),s="jsonp"===o.dataType,l=this._getURL("create",this.rootURL,this.customURL,null,n,o),u=a._emulateHTTP(o),c={crossDomain:o.crossDomain||!s,contentType:o.contentType||"application/json",dataType:this._getDataType(o),jsonpCallback:o.jsonpCallback,data:this._getData(i,o,l),success:o.success,error:e,emulateHTTP:u,emulateJSON:a._emulateJSON(o),context:null!==n?n:this};return c=this._addHeaderProp(c),c=a.addOptions(c,o,l),o.xhr=this.ajax(c,n),o.xhr},a.prototype._getDataType=function(t){return a._emulateJSON(t)&&!a._emulateHTTP(t)?"application/x-www-form-urlencoded":t.dataType||"json"},a.prototype._getContentType=function(t){return a._emulateJSON(t)&&!a._emulateHTTP(t)?"application/x-www-form-urlencoded":t.contentType||"application/json"},a.prototype.getLocale=function(){return o.getLocale()},a.prototype.ajax=function(t,r){if(null===t.url||void 0===t.url)throw new s;var n=e.ajax(t);return r._addxhr&&r._addxhr(n),n},a.SetCustomURLOptions=function(t,r,n){var o=r instanceof e.Collection?r.ModifyOptionsForCustomURL(n):{};return t&&(o.recordID=t),o},a.GetPropValue=function(t,e){return t?n.isFunction(t[e])?t[e]():t[e]:n.isFunction(e)?e():e};const l=function(t,e){l._init(this,t,e,null)};e._registerLegacyNamespaceProp("Model",l),e.Object.createSubclass(l,e.Object,"oj.Model"),l.prototype.Init=function(){l.superclass.Init.call(this)},l.prototype.attributes={},l.prototype.defaults={},l.prototype.id=null,l.prototype.idAttribute="id",l.prototype.urlRoot=null,l.prototype.customURL=null,l.prototype.validate=null,l.prototype.validationError=null,l.prototype.omitLanguageHeader=!1,l._idCount=0,l._init=function(t,e,r,o){var s,a,u;if(!l._justExtending){t.Init(),i.Mixin(t),t._clearChanged(),t.previousAttrs={},t.nestedSet=!1,t.index=-1;var c=r||{};for(u in t.attributes={},t.defaults&&!c.ignoreDefaults&&(t.attributes=l._cloneAttributes(n.isFunction(t.defaults)?t.defaults():t.defaults,null)),o)Object.prototype.hasOwnProperty.call(o,u)&&(t[u]=o[u]);if(e)if(s=c.parse,n.isFunction(s)&&(t.parse=s),a=l._cloneAttributes(e,t.attributes),t.attributes=a,null==(a=s?t.parse(a):a)||void 0===a)t.attributes={};else for(u in a)Object.prototype.hasOwnProperty.call(a,u)&&t._setProp(u,a[u],!1,!1,c,!0);t.SetCid(),t.SetCollection(c.collection),c.customURL&&(t.customURL=c.customURL),c.url&&(t.url=c.url),c.urlRoot&&(t.urlRoot=c.urlRoot),t.initialize&&t.initialize(e,c),t.SetupId()}},l.extend=function(t,e){var r;l._justExtending=!0,r=new l,l._justExtending=!1,n.extend(r,this.prototype);var o,s=t||{};return Object.keys(s).forEach(function(t){Object.prototype.hasOwnProperty.call(s,t)&&(r[t]=s[t])}),o=s&&s.constructor&&Object.prototype.hasOwnProperty.call(s,"constructor")?s.constructor:function(t,e){l._init(this,t,e,s)},n.extend(o,this),o.prototype=r,o.extend=l.extend,o.prototype.constructor=o,i.Mixin(o,this),e&&Object.keys(e).forEach(function(t){Object.prototype.hasOwnProperty.call(e,t)&&(o[t]=e[t])}),o},l.prototype.TriggerInternal=function(t,e,r,n,o){},l.prototype.SetCid=function(){this.GetCid()||(this.cid="id"+l._idCount,l._idCount+=1)},l.prototype.GetCid=function(){return this.cid},l.prototype.SetIndex=function(t){this.index=t},l.prototype.GetIndex=function(){return this.index},l.prototype.SetNext=function(t){var e=this.nextModel;return this.nextModel=t,e},l.prototype.GetNext=function(){return this.nextModel},l.prototype.SetPrevious=function(t){var e=this.previousModel;return this.previousModel=t,e},l.prototype.GetPrevious=function(){return this.previousModel},l.prototype.Merge=function(t,r,n){var o,i=!1,s=e.StringUtils.isString(r),a=!1,l=this;return Object.keys(t.attributes||{}).forEach(function(e){Object.prototype.hasOwnProperty.call(t.attributes,e)&&(o=l.attributes[e]!==t.attributes[e],s?e===r&&o&&(i=!0):o&&(i=!0),o&&(a=!0,l.attributes[e]=t.attributes[e],l._addChange(e,t.attributes[e]),l._fireAttrChange(e,l.attributes[e],null,n)))}),this.SetupId(),a&&this._fireChange(null,n),i},l._hasProperties=function(t){var e;if(t&&t instanceof Object)for(e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!0;return!1},l.prototype.SetCollection=function(t){null!=t?(this.collection=t,this.SetupId()):delete this.collection},l.prototype.GetCollection=function(){return this.collection},l.prototype._fireAttrChange=function(t,e,r,n){null!=t&&this.TriggerInternal(n,i.EventType.CHANGE+":"+t,this,e,r)},l.prototype._fireChange=function(t,e){this.TriggerInternal(e,i.EventType.CHANGE,this,t,null)},l.prototype.SetupId=function(){var t=null;if(this.collection&&this.collection.modelId){var e=this.collection.modelId;t=n.isFunction(e)?e.call(this.collection,this.attributes):e}if(!t){var r=this._getIdAttr();t=null!=this.attributes?this.attributes[r]:null}this.id=t},l.prototype._setPropInternal=function(t,r,n){var o=e.Object.__innerEquals(this.attributes[t],r);return!(!n&&o)&&(this.attributes[t]=r,this.SetupId(),!o)},l.prototype._clearChanged=function(){this.changed={}},l.prototype._addChange=function(t,e){this.changed[t]=e},l.prototype._setProp=function(t,e,r,n,o,i){if(null==t)return!0;var s,a={},u=this.nestedSet;if(n?Object.keys(t).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])}):a[t]=e,s=o||{},!this._checkValid(a,{validate:s.validate},!1))return!1;u||(this._clearChanged(),this.changes=[]),this.nestedSet||i||(this.previousAttrs=l._cloneAttributes(this.attributes,null)),this.nestedSet=!0;var c=this;Object.keys(a).forEach(function(t){Object.prototype.hasOwnProperty.call(a,t)&&(c._setPropInternal(t,a[t],r)?(c._addChange(t,a[t]),c.changes.push(t)):delete a[t])});var h=s.silent;if(Object.keys(a).forEach(function(t){Object.prototype.hasOwnProperty.call(a,t)&&(!h&&(c.changes.length>0||u&&-1===c.changes.indexOf(t))&&(c.pendingChanges=!0,c.pendingOpts=s),c._fireAttrChange(t,a[t],s,h))}),u)return!0;if(!h&&!u)for(;this.pendingChanges;)this.pendingChanges=!1,this._fireChange(this.pendingOpts,h);return this.nestedSet=!1,!0},l.prototype.clear=function(t){var e,r,n={silent:!0},o=t||{};e=o.silent,n.validate=o.validate,this._clearChanged();for(r in this.attributes)if(Object.prototype.hasOwnProperty.call(this.attributes,r)){if(!this._unsetInternal(r,n,!0))return!1;this.TriggerInternal(e,i.EventType.CHANGE+":"+r,this,void 0,null)}return this.attributes={},this.SetupId(),this._fireAttrChange(null,null,null,e),this._fireChange(null,e),this},l._cloneAttributes=function(t,r){var o,i,s=r||{},a=!0;if(("object"==typeof s?Object.keys(s):[]).length>0){for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&Object.prototype.hasOwnProperty.call(t,o)&&void 0===t[o]&&delete t[o];return e.CollectionUtils.copyInto(s,t,void 0,!0,1e4),s}for(o in t)if("function"===(i=n.type(t[o]))||"undefined"===i||"date"===i||"array"===i||"object"===i){a=!1;break}return a?s=JSON.parse(JSON.stringify(t)):"object"==typeof t&&e.CollectionUtils.copyInto(s,t,void 0,!0,1e4),s},l.prototype.clone=function(){var t,e=new this.constructor;for(t in this)Object.prototype.hasOwnProperty.call(this,t)&&this[t]!==this.attributes&&(e[t]=this[t]);return e.attributes=l._cloneAttributes(this.attributes,null),delete e.cid,e.SetCid(),e.SetupId(),e},l.prototype.Match=function(t,e){var r,n=this.GetId();return void 0!==n&&n==t||void 0!==(r=this.cid)&&r==e},l.prototype.set=function(t,r,n){var o,i=n||{},s=!0;if(arguments&&arguments.length>0)if(e.StringUtils.isString(t))i.unset?this._unsetInternal(t,null,!1):this._setProp(t,r,!1,!1,i,!1)||(s=!1);else if((i=r||{}).unset)for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&this._unsetInternal(o,null,!1);else this._setProp(t,null,!0,!0,i,!1)||(s=!1);return!!s&&this},l.prototype.unset=function(t,e){return this._unsetInternal(t,e,!1)},l.prototype._unsetInternal=function(t,e,r){var n=e||{},o=n.silent;if(this.has(t)){if(!this._checkValid({},n,!1))return!1;r||this._clearChanged(),delete this.attributes[t],this._addChange(t,void 0),this._fireAttrChange(t,null,null,o),this._fireChange(null,o)}return this.SetupId(),!0},l.prototype.get=function(t){return this.attributes[t]},l.prototype.has=function(t){return e.Collection._defined(this.attributes[t])},l.prototype.fetch=function(t){var e,r=t||{},o=r.success,i=r.error,s=this;return(e=l._copyOptions(r)).error=function(e,n,o){l._triggerError(s,!1,r,n,o,e),i&&i.apply(s,[s,o,t,e,n])},e.success=function(t){e.xhr&&(r.xhr=e.xhr),l._fireSyncEvent(s,t,e,!1),n.isFunction(s.parse)&&s.set(s.parse(t),e),o&&o.call(l.GetContext(e,s),s,t,r)},l._internalSync("read",this,e)},l.prototype._parseImpl=function(t){return t},l.prototype.parse=l.prototype._parseImpl,l.prototype.url=function(){var t,e,r=this._getUrlRoot(),n=this.GetId();if(r)return n?r+"/"+encodeURIComponent(n):r;if(t=this.collection)return e=a.GetPropValue(t,"url"),n&&e?e+("/"===l._getLastChar(e)?"":"/")+encodeURIComponent(this.GetId()):e;throw new s},l.prototype.keys=function(){var t=[],e=this;return Object.keys(e.attributes||{}).forEach(function(r){Object.prototype.hasOwnProperty.call(e.attributes,r)&&t.push(r)}),t},l.prototype.values=function(){var t=[],e=this;return Object.keys(e.attributes||{}).forEach(function(r){Object.prototype.hasOwnProperty.call(e.attributes,r)&&t.push(e.get(r))}),t},l.prototype.pairs=function(){var t,e=[],r=this;return Object.keys(r.attributes||{}).forEach(function(n){Object.prototype.hasOwnProperty.call(r.attributes,n)&&((t=[]).push(n),t.push(r.get(n)),e.push(t))}),e},l.prototype.omit=function(t){var e,r=[],n={};if(t instanceof Array)r=t;else for(e=0;e<arguments.length;e++)r.push(arguments[e]);var o=this;return Object.keys(o.attributes||{}).forEach(function(t){Object.prototype.hasOwnProperty.call(o.attributes,t)&&-1===r.indexOf(t)&&(n[t]=o.get(t))}),n},l.prototype.pick=function(t){var e,r=[],n={};if(t instanceof Array)r=t;else for(e=0;e<arguments.length;e++)r.push(arguments[e]);for(e=0;e<r.length;e++)Object.prototype.hasOwnProperty.call(this.attributes,r[e])&&(n[r[e]]=this.get(r[e]));return n},l.prototype.invert=function(){var t,e={},r=this;return Object.keys(r.attributes||{}).forEach(function(n){Object.prototype.hasOwnProperty.call(r.attributes,n)&&(t=r.get(n),e[t]=n)}),e},l._getLastChar=function(t){return t.charAt(t.length-1)},l.prototype._saveUrl=function(){var t=this._getUrlRoot();return t||(this.GetCollection()?this.GetCollection().url:null)},l.prototype._getUrlRoot=function(){return a.GetPropValue(this,"urlRoot")},l.prototype._parseSaveImpl=function(t){return t},l.prototype.parseSave=l.prototype._parseSaveImpl,l.prototype.isValid=function(){var t={validate:this.validate};return this._checkValid(this.attributes,t,!1)},l._isValidateSet=function(t,e){var r=t||{};return void 0!==r.validate&&null!==r.validate?r.validate:e},l.prototype._checkValid=function(t,e,r){var n=e||{},o=this.validate;return!(o&&l._isValidateSet(n,r)&&(this.validationError=o.call(this,t,n),this.validationError))||(this.TriggerInternal(!1,i.EventType.INVALID,this,this.validationError,n),!1)},l._processArgs=function(t){var r,n=!1,o={},i={};if(t&&t.length>0){if(t.length>1&&t[t.length-1]&&l._hasProperties(t[t.length-1])&&(n=!0,o=t[t.length-1]||{}),null==t[0])return{attributes:null,options:o};if(l._hasProperties(t[0])||e.Object.isEmpty(t[0]))Object.keys(t[0]).forEach(function(e){Object.prototype.hasOwnProperty.call(t[0],e)&&(i[e]=t[0][e])});else for(r=0;r<t.length;r+=2)(void 0!==t[r]||r<t.length-1||!n&&r===t.length-1)&&(i[t[r]]=t[r+1])}return{attributes:i,options:o}},l._copyOptions=function(t){var e={},r=t||{};return Object.keys(r).forEach(function(t){Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}),e},l._triggerError=function(t,e,r,n,o,s){var a=r||{};a.textStatus=n,a.errorThrown=o,t.TriggerInternal(e,i.EventType.ERROR,t,s,a)},l.prototype.save=function(t,r){var o,i,s,a,u,c,h,p,f,d=l._processArgs(arguments);f=void 0===t?void 0:d.attributes;var _=r||{};h=l._copyOptions(d.options);var g=n.extend(!0,{},this.attributes,f);return!!this._checkValid(g,h,!0)&&(h.wait||this.set(f),o=void 0!==h.forceNew&&h.forceNew,a=this,u=h.error,c=h.patch,h.error=function(t,e,n){l._triggerError(a,!1,_,e,n,t),u&&u.apply(a,[a,n,r,t,e])},h.saveAttrs=h.wait?this._attrUnion(f):this.attributes,p=this.attributes,this.attributes=h.saveAttrs,h.saveAttrs=this.toJSON(),this.attributes=p,o||this.isNew()?(s=l._getSuccess(h),h.success=function(t){var r;if(h.xhr&&(_.xhr=h.xhr),t&&!e.Object.isEmpty(t)){if(r=n.isFunction(a.parse)?a.parse(t):t,!a._checkValid(r,h,!0))return;a.attributes=n.extend(!0,a.attributes,r),h.wait&&Object.keys(f||{}).forEach(function(t){Object.prototype.hasOwnProperty.call(r,t)&&(f[t]=r[t])}),a.SetupId()}l._fireSyncEvent(a,t,h,!1),h.wait&&a.set(f),s&&s.call(l.GetContext(h,a),a,t,_),a._clearChanged()},h.attrs||(h.attrs=h.saveAttrs),h.parse=!0,c&&(h.saveAttrs=h.attrs),l._internalSync("create",this,h)):(i=h.success,h.success=function(t){var r;h.xhr&&(_.xhr=h.xhr),t&&!e.Object.isEmpty(t)&&(r=n.isFunction(a.parse)?a.parse(t):t,a.attributes=n.extend(!0,a.attributes,r),h.wait&&Object.keys(f||{}).forEach(function(t){Object.prototype.hasOwnProperty.call(r,t)&&(f[t]=r[t])}),a.SetupId()),l._fireSyncEvent(a,t,h,!1),h.wait&&a.set(f),i&&i.call(l.GetContext(h,a),a,t,_),a._clearChanged()},h.attrs||(h.attrs=void 0===f?void 0:c?f:h.saveAttrs),l._internalSync(c?"patch":"update",this,h)))},l.prototype._attrUnion=function(t){var e={},r=this;return Object.keys(r.attributes||{}).forEach(function(t){Object.prototype.hasOwnProperty.call(r.attributes,t)&&(e[t]=r.attributes[t])}),Object.keys(t||{}).forEach(function(r){Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}),e},l.IsComplexValue=function(t){return t&&Object.prototype.hasOwnProperty.call(t,"value")&&Object.prototype.hasOwnProperty.call(t,"comparator")},l.prototype._hasAttrs=function(t){var r;for(r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(!Object.prototype.hasOwnProperty.call(this.attributes,r))return!1;for(var n=Array.isArray(t[r])?t[r]:[t[r]],o=0;o<n.length;o++)if(l.IsComplexValue(n[o])){var i=n[o].comparator,s=n[o].value;if(e.StringUtils.isString(i))throw new Error("String comparator invalid for local where/findWhere");if(!i(this,r,s))return!1}else if(t[r]!==this.attributes[r])return!1}return!0},l.prototype.matches=function(t){return function(e){for(var r in t)if(e.get(r)!==t[r])return!1;return!0}(this)},l.prototype.Contains=function(t){var e,r=t.constructor===Array?t:[t];for(e=0;e<r.length;e++)if(this._hasAttrs(r[e]))return!0;return!1},l._getSuccess=function(t){return null!=t&&t.success?t.success:null},l.GetContext=function(t,e){return void 0!==t&&void 0!==t.context?t.context:e},l.prototype.isNew=function(){return void 0===this.GetId()},l.prototype._getIdAttr=function(){return this.idAttribute||"id"},l.prototype.GetId=function(){return this.id},l.prototype.changedAttributes=function(t){if(t){var r={},n=this;return Object.keys(t).forEach(function(o){Object.prototype.hasOwnProperty.call(t,o)&&(e.Object.__innerEquals(t[o],n.attributes[o])||(r[o]=t[o]))}),!e.Object.isEmpty(r)&&r}return!e.Object.isEmpty(this.changed)&&this.changed},l.prototype.hasChanged=function(t){return void 0!==t?l._hasProperties(this.changed)&&Object.prototype.hasOwnProperty.call(this.changed,t):l._hasProperties(this.changed)},l.prototype.destroy=function(t){var r,n,o,s=t||{},a=s.wait,u=s.error,c=this;o=l._copyOptions(s),r=l._getSuccess(o);var h=this.GetCollection();return o.success=function(t){if(o.xhr&&(s.xhr=o.xhr),h){var n=e.StringUtils.isString(t)&&!e.StringUtils.isEmpty(t)?JSON.parse(t):t;h._setPagingReturnValues(n,null,t,!0)}a&&c._fireDestroy(!1),l._fireSyncEvent(c,t,o,!1),r&&r.call(l.GetContext(o,c),c,t,s)},o.error=function(e,r,n){c.TriggerInternal(!1,i.EventType.ERROR,c,e,s),u&&u.apply(c,[c,n,t,e,r])},this.isNew()?(a||this._fireDestroy(!1),r&&r.call(l.GetContext(o,c),c,null,s),!1):(n=l._internalSync("delete",this,o),a||this._fireDestroy(!1),n)},l.prototype._fireRequest=function(t,e,r,n){this.TriggerInternal(n,i.EventType.REQUEST,t,e,r)},l.prototype._fireDestroy=function(t){this.TriggerInternal(t,i.EventType.DESTROY,this,this.collection,null)},l._fireSyncEvent=function(t,e,r,n){t.TriggerInternal(n,i.EventType.SYNC,t,e,r)},l.prototype.toJSON=function(){var t={},e=this;return Object.keys(e.attributes||{}).forEach(function(r){Object.prototype.hasOwnProperty.call(e.attributes,r)&&(Array.isArray(e.attributes[r])?t[r]=e.attributes[r].slice(0):t[r]=e.attributes[r])}),t},l.prototype.previous=function(t){return this.previousAttrs[t]},l.prototype.previousAttributes=function(){return this.previousAttrs},l.prototype.sync=function(t,r,n){return e.sync(t,r,n)},l._internalSync=function(t,e,r){var n=r||{};e.oauth&&(n.oauthHeader=e.oauth.getHeader()),!n.dataType&&e.dataType&&(n.dataType=e.dataType),!n.jsonpCallback&&e.jsonpCallback&&(n.jsonpCallback=e.jsonpCallback),"create"!==t&&"patch"!==t&&"update"!==t||(n.parsedData=e.parseSave.call(e,"patch"===t?n.attrs:n.saveAttrs));var o=null;e instanceof l&&(o=e.GetId());var i={};Object.keys(n).forEach(function(t){i[t]=n[t]});var s=a.SetCustomURLOptions(o,e,n);return Object.keys(s||{}).forEach(function(t){i[t]=s[t]}),n.xhr=e.sync(t,e,i),i.xhr&&(n.xhr=i.xhr),n.xhr};const u=function(t,e,r){var n,o=r||{};function i(t){return e._fireRequest(e,t,o,o.silent),t}var s,u=o.success,c=o.error;if("create"===t.valueOf())return s=(s=e._saveUrl())||a.GetPropValue(e,"url"),i((n=new a(s,e)).addRecord(o.parsedData,c,o,e));if("read"===t.valueOf())return e instanceof l?(s=o.url?o.url:a.GetPropValue(e,"url"),i((n=new a(s,e)).getRecord(u,c,e.GetId(),o,l.GetContext(o,e)))):(s=e.GetCollectionFetchUrl(o),i((n=new a(s,e)).getRecords(u,c,o,e)));n=new a(a.GetPropValue(e,"url"),e);var h=null;return e instanceof l&&(h=e.GetId()),"update"===t.valueOf()?i(n.updateRecord(u,h,o.parsedData,c,o,e,!1)):"patch"===t.valueOf()?i(n.updateRecord(u,h,o.parsedData,c,o,e,!0)):"delete"===t.valueOf()?i(n.deleteRecord(h,c,o,e)):null};e._registerLegacyNamespaceProp("sync",u),l._urlError=function(t){if(!t.url)throw new Error("The url property or function must be specified")};const c=function(t){return arguments&&arguments.length>0&&l._urlError(arguments[0]),n.ajax.apply(e,arguments)};e._registerLegacyNamespaceProp("ajax",c);const h=function(t,e){h._justExtending||h._init(this,t,e,null)};e._registerLegacyNamespaceProp("Collection",h),e.Object.createSubclass(h,e.Object,"oj.Collection"),h.prototype.model=null,h.prototype.modelId=function(t){var e=this.model;return e&&t?t[e.idAttribute||e.prototype.idAttribute||"id"]:null},h.prototype.length=null,h.prototype.models=null,h.prototype._modelIndices=[],h.prototype.url=null,h.prototype.changes=[],h.prototype.customURL=null,h.prototype.customPagingOptions=null,h.prototype.lastFetchSize=null,h.prototype.hasMore=!1,h.prototype.totalResults=null,h.prototype.lastFetchCount=null,h.prototype.modelLimit=-1,h.prototype.offset=null,h.prototype.fetchSize=-1,h.prototype.sortDirection=1,h.prototype.comparator=null,h.prototype.omitLanguageHeader=!1,h.prototype.Init=function(){h.superclass.Init.call(this)},h.extend=function(t,e){var r,o=null;return h._justExtending=!0,o=new h,h._justExtending=!1,n.extend(o,this.prototype),r=t&&t.constructor&&Object.prototype.hasOwnProperty.call(t,"constructor")?t.constructor:function(e,r){h._init(this,e,r,t)},e&&Object.keys(e).forEach(function(t){Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}),t&&Object.keys(t).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=t[e])}),n.extend(r,this),r.prototype=o,r.extend=h.extend,r.prototype.constructor=r,r},h._init=function(t,e,r,n){var o,s,a,l;if(t.Init(),i.Mixin(t),n)for(l in n)Object.prototype.hasOwnProperty.call(n,l)&&(t[l]=n[l]);var u=r||{};for(s=["comparator","customPagingOptions","customURL",h._FETCH_SIZE_PROP,"model","modelLimit","sortDirection","url"],o=0;o<s.length;o++)Object.prototype.hasOwnProperty.call(u,s[o])&&void 0!==u[s[o]]&&(t[s[o]]=u[s[o]]);void 0===t._getFetchSize(null)&&t.setFetchSize(-1),void 0===t.modelLimit&&t.setModelLimit(-1),t.hasMore=!1,t.lruCount=0,t._setModels([],!0);var c=e;u.parse&&(c=t.parse(e)),null!=c&&(u.noparse=!0,a=c instanceof Array?c:[c],t._addInternal(a,u,!0,!1)),t._setLength(),c||(t.totalResults=void 0),n&&n.initialize&&n.initialize.call(t,c,u)},h.prototype.on=function(t,e){},h.prototype.OnInternal=function(t,e,r,n,o){},h.prototype.TriggerInternal=function(t,e,r,n,o){},h.prototype._fireRequest=function(t,e,r,n){this.TriggerInternal(n,i.EventType.REQUEST,t,e,r)},h.prototype._resetChanges=function(){this.changes=[]},h.prototype._setChangeAt=function(t,e){for(var r=t;r<t+e;r++)-1===this.changes.indexOf(r)&&this.changes.push(r)},h.prototype._setModels=function(t,e){if(this.models=t,e)this._modelIndices=[],this._resetChanges();else for(var r=0;r<t.length;r++)t[r]&&this._modelIndices.push(r)},h.prototype._getModels=function(){return this.models},h.prototype._getModelsLength=function(){return this._getModels().length},h.prototype._overUpperLimit=function(t){return!(t<this._getModelsLength())&&!(this.IsVirtual()&&(!this._hasTotalResults()||0===this._getModelsLength()))},h.prototype._hasTotalResults=function(){return h._defined(this.totalResults)},h._defined=function(t){return null!=t},h.prototype._pushModel=function(t){this._getModels().push(t),this._modelIndices.push(this._getModelsLength()-1),this._setChangeAt(this._getModelsLength()-1,1)},h.prototype._pushModels=function(t){this._makeModelHead(t),this._pushModel(t),this.lruCount+=1,t.SetIndex(this._getModelsLength()-1)},h.prototype._reduceLRU=function(t){if(t)for(var e=0;e<t.length;e++)t[e]&&(this.lruCount-=1)},h.prototype._spliceModels=function(t,e,r){for(var n=t;n<t+e;n++)this._removePrevNext(this._getModel(n));void 0===r?(this._reduceLRU(this._getModels().splice(t,e)),this._spliceModelIndices(t,t+e-1)):(this._reduceLRU(this._getModels().splice(t,e,r)),this._spliceModelIndices(t,t+e-1),this._insertModelIndex(t),this._makeModelHead(r)),this._setChangeAt(t,e),this.lruCount<0&&(this.lruCount=0),this._realignModelIndices(t)},h.prototype._getModel=function(t){return this._getModels()[t]},h.prototype._realignModelIndices=function(t){for(var e,r=0;r<this._modelIndices.length;r++)(e=this._modelIndices[r])>=t&&this._getModel(e)&&this._getModel(e).SetIndex(e)},h.prototype._removePrevNext=function(t){if(t){var e=t.GetPrevious(),r=t.GetNext();e?e.SetNext(r):this.head=r,r?r.SetPrevious(e):this.tail=e}},h.prototype._makeModelHead=function(t){t.SetNext(this.head),this.head?this.head.SetPrevious(t):this.tail=t,t.SetPrevious(null),this.head=t},h.prototype._setModelIndex=function(t){-1===this._modelIndices.indexOf(t)&&this._modelIndices.push(t)},h.prototype._insertModelIndex=function(t){for(var e=0;e<this._modelIndices.length;e++)this._modelIndices[e]>=t&&(this._modelIndices[e]+=1);this._modelIndices.push(t)},h.prototype._spliceModelIndices=function(t,e){var r=void 0===e?t:e;this._clearModelIndices(t,r);for(var n=r-t+1,o=0;o<this._modelIndices.length;o++)this._modelIndices[o]>r&&(this._modelIndices[o]-=n)},h.prototype._clearModelIndices=function(t,e){for(var r=void 0===e?t:e,n=t;n<=r;n++){var o=this._modelIndices.indexOf(t);o>-1&&this._modelIndices.splice(o,1)}},h.prototype._setModel=function(t,e){var r=this._getModel(t);this._removePrevNext(r),r||(this.lruCount+=1),this._setChangeAt(t,1),this._getModels()[t]=e,e&&(this._setModelIndex(t),e.SetIndex(t),this._makeModelHead(e))},h.prototype._clearOutModels=function(t){var e,r,n=this.tail,o=0;for(this.tail=null;n&&o<t;)e=n.GetIndex(),(r=this._getModel(e))&&r.hasChanged()?(this.tail||(this.tail=n),n=n.GetPrevious()):(this.lruCount-=1,e>-1&&(this._setModel(e,void 0),this._clearModelIndices(e,e)),n.SetNext(null),n=n.SetPrevious(null),o+=1);this.tail||(this.tail=n),this.lruCount<0&&(this.lruCount=0),0===this.lruCount&&(this.head=null,this.tail=null)},h.prototype._resetLRU=function(){this.lruCount=0,this.head=null,this.tail=null},h.prototype._manageLRU=function(t){if(this.IsVirtual()){var e=this._getModelLimit();e>-1&&this.lruCount+t>e&&this._clearOutModels(this.lruCount+t-e)}},h.prototype.clone=function(){return this._cloneInternal(!0)},h.prototype._cloneInternal=function(t){var e,r,n=new this.constructor;if(this.IsVirtual()&&(n=this._copyFetchProperties(n))._resetModelsToFullLength(this.totalResults),n=this._copyProperties(n),t){var o,i=[];for(e=0;e<this._modelIndices.length;e++)i.push(this._modelIndices[e]);for(i.sort(function(t,e){return t-e}),e=0;e<i.length;e++)o=i[e],(r=this._atInternal(o,null,!0,!1))&&n._addInternal(r.clone(),{at:o},!0,!1)}return n},h.prototype._copyProperties=function(t){var e,r,n=["comparator","model","modelId"];for(r=0;r<n.length;r++)t[e=n[r]]=this[e];return t},h.prototype._copyFetchProperties=function(t){var e,r,n=["totalResults","hasMore",h._FETCH_SIZE_PROP];for(r=0;r<n.length;r++)t[e=n[r]]=this[e];return t},h.prototype._getLength=function(){return this.length},h.prototype._setLength=function(){var t=this._getModelsLength();this.length=t,this.IsVirtual()||(this.totalResults=t)},h._createModel=function(t,e,r){return t.model?n.isFunction(t.model)?new t.model(e,r):new t.model.constructor(e,r):null},h.prototype._newModel=function(t,e,r,n){var o,s=null,a=r||{};return a.ignoreDefaults=n,t instanceof l?s=t:this.model?s=h._createModel(this,t,a):(a.collection=this,s=new l(t,a)),a.validate&&s.validate&&(o=s.validate(s.attributes))?(a.validationError=o,this.TriggerInternal(!1,i.EventType.INVALID,s,o,a),null):s},h.prototype.add=function(t,e){this._manageLRU(1);var r=e||{};return this._handlePromise(this._addInternal(t,e,!1,r.deferred))},h.prototype._addInternal=function(t,n,o,s){var a,u,c,p=n||{},f=[],d=p.at,_=p.silent,g=p.force,y=p.merge||!1,v=p.sort,m=!0,I=!1,O=[],b=[];function E(t,n,s,a,l){var h,f=null;return!g&&y&&s?(m=s.Merge(n,t.comparator,_),f=s):(g||(h=o&&a.isNew()?void 0:t._getLocal(a))&&o&&d!==h.index&&r.warn("Duplicate ID fetched or added without merging, the id = "+h.GetId()),void 0===h?(!function(t,e){void 0===d?(t._pushModels(e),u=t._getModelsLength()-1,t._getModel(u).SetCid()):(u=d,t.IsVirtual()&&o?t._setModel(u,e):t._spliceModels(u,0,e),t._getModel(u).SetCid(),d+=1),void 0===e.GetCollection()&&e.SetCollection(t),t._setLength(),t._listenToModel(e),I=!0}(t,a),f=a):f=h),function(t,r,n,s,a){var l=p||{};o&&(l.fillIn=!0);var h=l.comparator||t._hasComparator();if((!o||o&&h)&&m&&void 0===r&&!v&&void 0===d&&t._getLength()>1){u>-1&&(c=t._getModel(u).cid);var f={};e.CollectionUtils.copyInto(f,l),f.add=!0,t.sort(f),u>-1&&(u=t.IsVirtual()?-1:t.indexOf(t.getByCid(c),a))}I&&(l.at&&(l.index=u),s?(s.TriggerInternal(_,i.EventType.ADD,s,t,l),O.push(s)):(n.TriggerInternal(_,i.EventType.ADD,n,t,l),O.push(n)))}(t,h,s,a,l),f}function P(t,e,r){I=!1;var n=t._newModel(e,!0,p,!1),i=null,s=null;if(null!=n){if(u=-1,n.SetupId(),i=e instanceof l?e:n,r)return g?new Promise(function(e){var o=E(t,i,void 0,n,r);b.push(o),e(o)}):t._getInternal(i,{silent:!0},r,!0).then(function(e){s=e.m;var o=E(t,i,s,n,r);b.push(o)});!g&&y&&(s=o?t._getLocal(i):t.get(i));var a=E(t,i,s,n,r);a&&b.push(a)}else b.push(!1);return Promise.resolve()}function T(t,e){return t.parse&&p.parse&&!p.noparse?t.parse(e):e}if(void 0!==d&&d<0&&(d+=this._getLength()+1),t instanceof Array?f=t:f.push(t),!o&&(this.IsVirtual()||s)){var R=this;return new Promise(function(t,e){var r=function(t){return new Promise(function(e,r){P(R,f[t],!0).then(function(){e(t+1)},r)})},n=Promise.resolve(0);for(f=T(R,f),a=0;a<f.length;a++)n=n.then(r);n.then(function(){O.length>0&&R.TriggerInternal(p.silent,i.EventType.ALLADDED,R,O,p),t(h._returnModels(b))},e)})}for(f=T(this,f),a=0;a<f.length;a++)P(this,f[a],!1);return O.length>0&&this.TriggerInternal(p.silent,i.EventType.ALLADDED,this,O,p),h._returnModels(b)},h._returnModels=function(t){return 1===t.length?t[0]:t},h.prototype._hasComparator=function(){return h._defined(this.comparator)},h.prototype.sort=function(t){var e,r,n=t||{},o=n.silent,s=this.comparator;if(!this._hasComparator())return null;if(this.IsVirtual()){var a=this.totalResults;this._hasTotalResults()?this._setModels(new Array(a),!0):(this._setModels([],!0),this._resetLRU(),this._setLength()),r=n.add?{add:!0}:null,this.TriggerInternal(o,i.EventType.SORT,this,r,null);var l=n.startIndex;return null!=l?this.setRangeLocal(l,this._getFetchSize(n)):null}return e=this,this._getModels().sort(function(t,r){return h.SortFunc(t,r,s,e,e)}),this._realignModelIndices(0),r=n.add?{add:!0}:null,this.TriggerInternal(o,i.EventType.SORT,this,r,null),null},h._getKey=function(t,e){return t instanceof l?t.get(e):a.GetPropValue(t,e)},h.SortFunc=function(t,r,o,i,s){var a,l,u,c;if(n.isFunction(o)){if(1===o.length){a=o.call(s,t),l=o.call(s,r);var p=e.StringUtils.isString(a)?a.split(","):[a],f=e.StringUtils.isString(l)?l.split(","):[l];for(u=0;u<p.length;u++)if(0!==(c=h._compareKeys(p[u],f[u],i.sortDirection)))return c}return o.call(s,t,r)}if(e.StringUtils.isString(o)){var d=o.split(",");for(u=0;u<d.length;u++)if(a=h._getKey(t,d[u]),l=h._getKey(r,d[u]),0!==(c=h._compareKeys(a,l,i.sortDirection)))return c}return 0},h.prototype.sortedIndex=function(t,r){var o,i,s=r||this.comparator;return s?(this._throwErrIfVirtual("sortedIndex"),o=this,i=function(t,r){var i,a;if(n.isFunction(s)){if(1===s.length){i=s.call(o,t),a=s.call(o,r);var l,u,c=e.StringUtils.isString(i)?i.split(","):[i],p=e.StringUtils.isString(a)?a.split(","):[a];for(u=0;u<c.length;u++)if(0!==(l=h._compareKeys(c[u],p[u],o.sortDirection)))return l}return s.call(o,t,r)}return e.StringUtils.isString(s)?(i=t.get(s),a=r.get(s),h._compareKeys(i,a,o.sortDirection)):0},h._find(this._getModels(),t,i)):-1},h._find=function(t,e,r){return function n(o,i){var s,a,l;return o>i?-1:(s=e.GetCid(),a=e.GetId(),t[o].Match(a,s)?o:t[i].Match(a,s)?i:(l=Math.floor((i+o)/2),-1===r(t[l],e)?n(o+1,l):1===r(t[l],e)?n(l,i-1):l))}(0,t.length-1)},h._compareKeys=function(t,e,r){if(-1===r){if(t<e)return 1;if(e<t)return-1}else{if(t>e)return 1;if(e>t)return-1}return 0},h.prototype.unshift=function(t,r){var n={};return e.CollectionUtils.copyInto(n,r||{}),n.at||(n.at=0),this._manageLRU(1),this._handlePromise(this._addInternal(t,n,!1,n.deferred))},h.prototype._handlePromise=function(t){return n.isFunction(t.then)?this._addPromise(function(){return t}):t},h.prototype.shift=function(t){var e,r=t||{},n=this._getDeferred(r);if(this.IsVirtual()||n){var o=this;return this._atInternal(0,r,!1,!0).then(function(t){return e=o._removeInternal(t,0,r),o.TriggerInternal(r.silent,i.EventType.ALLREMOVED,o,[e],r),e})}return e=this._removeInternal(this.at(0),0,r),this.TriggerInternal(r.silent,i.EventType.ALLREMOVED,this,[e],r),e},h.prototype.initial=function(t){var e=void 0===t?1:t;this._throwErrIfVirtual("initial");var r,n=[];for(r=0;r<this._getLength()-e;r+=1)n.push(this.at(r));return n},h.prototype._getDeferred=function(t){return(t||{}).deferred},h.prototype.last=function(t,e){var r,n=this._getDeferred(e),o=void 0===t?1:t;if(1===o)return 0===(r=this._getModelsLength())&&(r=o),r>0?this._atInternal(r-1,e,!1,n):null;var i,s=[];if(r=this._getLength(),n||this.IsVirtual()){var a=r-t;a<0&&(a=0),0===r&&(r=t);var l=this;return this._addPromise(function(){return l.IterativeAt(a,r)})}for(i=r-t;i<r;i+=1)s.push(this.at(i));return s},h.prototype.IterativeAt=function(t,e){var r,n=[],o=this;return new Promise(function(i,s){var a=function(t){return o.IsVirtual()&&o._hasTotalResults()&&t>=o.totalResults?Promise.resolve(t+1):new Promise(function(e,r){o._deferredAt(t,null).then(function(r){n.push(r),e(t+1)},r)})},l=Promise.resolve(t);for(r=t;r<e;r++)l=l.then(a);l.then(function(){i(n)},s)})},h.prototype._getDefaultFetchSize=function(t){return null==t?this[h._FETCH_SIZE_PROP]:t},h.prototype._calculateNextStart=function(){var t=this.lastFetchCount;return null==t&&(t=this[h._FETCH_SIZE_PROP]),void 0===this.offset||null===this.offset?t:this.offset+t},h.prototype.next=function(t,e){var r=e||{};r[h._FETCH_SIZE_PROP]=this._getDefaultFetchSize(t);var n=this._calculateNextStart(),o=this._getLength();if(0===o&&r[h._FETCH_SIZE_PROP]>0)n=0;else if(n>=o){return r.success&&r.success.call(l.GetContext(r,this),this,null,r),null}return r.startIndex=n,this.fetch(r)},h.prototype._calculatePrevStart=function(t){return void 0===this.offset||null===this.offset?0:this.offset-t},h.prototype.previous=function(t,e){var r=e||{};if(0===this.offset){return r.success&&this.lastFetchCount&&r.success.call(l.GetContext(r,this),this,null,r),null}r[h._FETCH_SIZE_PROP]=this._getDefaultFetchSize(t);var n=this._calculatePrevStart(r[h._FETCH_SIZE_PROP]);return n<0&&(r[h._FETCH_SIZE_PROP]=this.offset,n=0),r.startIndex=n,this.fetch(r)},h.prototype.setModelLimit=function(t){this.modelLimit=t,this._manageLRU(0)},h.prototype._getModelLimit=function(){return this.modelLimit},h.prototype.setFetchSize=function(t){this[h._FETCH_SIZE_PROP]=t},h.prototype.rest=function(t,e){var r,n=this._getDeferred(e),o=void 0===t?1:t,i=[];if(this.IsVirtual()||n){var s=this;return this._addPromise(function(){return s.IterativeAt(o,s._getLength())})}for(r=o;r<this._getLength();r+=1)i.push(this.at(r));return i},h.prototype.remove=function(t,e){var r,n=e||{},o=[];t instanceof Array?o=t:o.push(t);var s=[];for(r=o.length-1;r>=0;r-=1)s.unshift(this._removeInternal(o[r],-1,n));return this.TriggerInternal(n.silent,i.EventType.ALLREMOVED,this,o,n),h._returnModels(s)},h.prototype._removeInternal=function(t,r,n){var o=n||{},s=-1===r?this._getInternal(t):h._getModinfo(r,t),a=o.silent,l=s.index;if(l>-1){var u=s.m;void 0!==u&&u.GetCollection()===this&&u.SetCollection(null),this._spliceModels(l,1),this._setLength();var c={};e.CollectionUtils.copyInto(c,o),c.index=l,void 0!==u&&u.TriggerInternal(a,i.EventType.REMOVE,u,this,c),this._unlistenToModel(u)}return s.m},h.prototype._unlistenToModel=function(t){void 0!==t&&t.off(null,null,this)},h.prototype._listenToModel=function(t){t.OnInternal(i.EventType.ALL,this._modelEvent,this,!1,!0)},h.prototype._modelEvent=function(t,e,r,n){if(t===i.EventType.DESTROY&&this.remove(e),!(void 0!==r&&r instanceof h&&r!==this)){var o=n&&n.silent;this.TriggerInternal(o,t,e,r,n)}},h.prototype.refresh=function(t){var e,r=t||{},n=this;return this._addPromise(function(){return new Promise(function(t,o){if(!n.IsVirtual()){e=void 0!==r.silent&&r.silent;try{n.reset(null,{silent:!0});var a={};return Object.keys(r).forEach(function(t){Object.prototype.hasOwnProperty.call(r,t)&&(a[t]=r[t])}),a.success=function(r,o,s){n.TriggerInternal(e,i.EventType.REFRESH,n,s,null),t({collection:r,response:o,options:s})},a.error=function(t,e,i,s,a){o(h._createRejectionError(i,a,e,n,r,!1))},void n._fetchInternal(a,-1,!1)}catch(o){if(o instanceof s)return n.TriggerInternal(e,i.EventType.REFRESH,n,r,null),void t({collection:n,options:r});throw o}}var l=r.startIndex;n._setModels([],!0),n._resetLRU(),n.totalResults=void 0,n._setLength(),e=void 0!==r.silent&&r.silent,n.TriggerInternal(e,i.EventType.REFRESH,n,r,null),null==l&&(l=0),null!=l?n._setRangeLocalInternal(l,n._getFetchSize(r)).then(function(e){t(e)},function(t){o(t)}):t(void 0)})})},h.prototype.reset=function(t,r){var n,o,s={};e.CollectionUtils.copyInto(s,r||{}),s.previousModels=this._getModels();for(var a=0;a<this._modelIndices.length;a++)n=this._modelIndices[a],(o=this._getModel(n))&&(this._unlistenToModel(o),o.SetCollection(null));this._setModels([],!0),this._resetLRU();var l=void 0!==s.silent&&s.silent;if(!t)return this._setLength(),this.totalResults=void 0,this.TriggerInternal(l,i.EventType.RESET,this,s,null),null;var u,c=t;return s.parse&&(c=this.parse(t)),this._manageLRU(c instanceof Array?c.length:1),s.noparse=!0,u=this._addInternal(c,s,!0,!1),this._setLength(),this.TriggerInternal(l,i.EventType.RESET,this,s,null),this._handlePromise(u)},h.prototype.at=function(t,e){var r=this._getDeferred(e);return this._atInternal(t,e,!1,r)},h.prototype._atInternal=function(t,e,r,n){var o=t;if(o<0&&(o+=this._getLength()),o<0||this._overUpperLimit(o))return r||!this.IsVirtual()&&!n?null:this._addPromise(function(){return Promise.resolve(null)});var i=this;return r||!this.IsVirtual()&&!n?this._getModel(o):this._addPromise(function(){return i._deferredAt(o,e)})},h.prototype.whenReady=function(){return this._promises?this._promises:Promise.resolve()},h.prototype._addPromise=function(t){var e=this;return void 0===this._promises&&(this._promiseCount=0,this._promises=Promise.resolve()),this._promiseCount+=1,this._promises=this._promises.then(t.bind(e)).then(function(t){return e._promiseCount-=1,0===e._promiseCount&&(e._promises=void 0,e.TriggerInternal(!1,i.EventType.READY,e,null,null)),t},function(t){return e._promiseCount-=1,0===e._promiseCount&&(e._promises=void 0),Promise.reject(t)}),this._promises},h.prototype._addxhr=function(t){if(t&&t.abort){void 0===this._xhrs&&(this._xhrs=[]);var e=this;this._xhrs.push(t),t.done(function(){var r=e._xhrs?e._xhrs.indexOf(t):-1;r>-1&&e._xhrs.splice(r,1)})}},h.prototype.abort=function(){var t=this;function e(e,r){t._xhrs[e].then(function(n,o){"abort"===o&&(t._xhrs.splice(e,1),0===t._xhrs.length&&t.whenReady().then(function(){r(null)},function(){r(null)}))},function(){t._xhrs.splice(e,1),0===t._xhrs.length&&t.whenReady().then(function(){r(null)},function(){r(null)})})}return this._xhrs&&this._xhrs.length>0?new Promise(function(r){for(var n=t._xhrs.length-1;n>=0;n--)e(n,r),t._xhrs[n].abort()}):Promise.resolve()},h.prototype._deferredAt=function(t,r){var n=this,o=n._getModel(t);return new Promise(void 0===o?function(o,i){var s={};e.CollectionUtils.copyInto(s,r||{}),s.context=n,s.startIndex=t,s.error=function(t,e,o,s,a){i(h._createRejectionError(s,a,e,n,r,!1))},s.success=function(){o(n._getModel(t))},n._fetchInternal(s,-1,!1)}:function(t){t(o)})},h.prototype.getByCid=function(t){for(var e,r=this._getModels(),n=null,o=0;o<this._modelIndices.length;o++)if(r[e=this._modelIndices[o]]&&t===r[e].cid){n=r[e];break}if(n)return n;if(this.IsVirtual())throw new Error("Not found locally and not supported by server for virtual collections");return null},h.prototype.get=function(t,e){var r=this._getDeferred(e),o=this._getInternal(t,e,r);if(o){if(n.isFunction(o.then))return this._addPromise(function(){return new Promise(function(t,e){o.then(function(e){t(e.m)},function(t){e(t)})})});if(this.IsVirtual())return this._addPromise(function(){return new Promise(function(t){t(o.m)})});if(Object.prototype.hasOwnProperty.call(o,"m"))return o.m}return null},h.prototype._getLocal=function(t){var e=this._getLocalInternal(t);return e?e.m:null},h.prototype._getLocalInternal=function(t){var e=t,r=t;t instanceof l?(e=t.GetCid(),r=t.GetId()):h._defined(t)&&void 0!==t.id&&(r=t.id);for(var n,o,i=null,s=this._modelIndices.length,a=this._getModels(),u=0;u<s;u++)if(void 0!==(n=a[o=this._modelIndices[u]])&&n.Match(r,e)){i=h._getModinfo(o,n);break}return i||h._getModinfo(-1,void 0)},h.prototype._getInternal=function(t,r,n,o){var i=t,s=t,a=void 0!==o&&o;t instanceof l?(i=t.GetCid(),s=t.GetId()):h._defined(t)&&void 0!==t.id&&(s=t.id);for(var u,c=null,p=this._getModels(),f=0;f<this._modelIndices.length;f++)if(p[u=this._modelIndices[f]]&&p[u].Match(s,i)){var d=h._getModinfo(u,p[u]);c=d;break}if(c)return n?new Promise(function(t){t(c)}):c;if(this.IsVirtual()){if(void 0===s&&void 0!==i)return new Promise(function(t){t(h._getModinfo(-1,void 0))});var _=this;return new Promise(function(t,n){var o={};e.CollectionUtils.copyInto(o,r||{}),o.context=_,o.startID=s,o.error=function(t,e,o,i,s){n(h._createRejectionError(i,s,e,_,r,!1))},o.success=function(e,r){!function(e){if(null!=e){var r=_._getOffset(),n=_._getModel(r);void 0!==n&&n.Match(s,i)?t(h._getModinfo(r,n)):t(h._getModinfo(-1,void 0))}else t(h._getModinfo(-1,void 0))}(r)},_._fetchInternal(o,-1,a)})}var g=h._getModinfo(-1,void 0);return n?new Promise(function(t){t(g)}):g},h._getModinfo=function(t,e){return{index:t,m:e}},h.prototype._parseImpl=function(t){if(t instanceof Array)return t;if(!t)return t;var e;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&t[e]instanceof Array)return t[e];return t},h.prototype.parse=h.prototype._parseImpl,h.prototype._checkActual=function(t,e,r){return!!(this._hasTotalResults()&&r.start+r.count>=this.totalResults)||r.start===t&&r.count===e},h.prototype.setRangeLocal=function(t,e,r){var n=this;return this._addPromise(function(){return n._setRangeLocalInternal(t,e,r)})},h.prototype._setRangeLocalInternal=function(t,e,r){this.IsVirtual()&&this._resetModelsToFullLength(this.totalResults);var n=this._getLocalRange(t,e),o=this;if(this._checkActual(t,e,n))return new Promise(function(t){t(n)});var i=this._getModelLimit();return i>-1&&i<e&&(this.modelLimit=e),new Promise(function(n,i){o._setRangeLocalFetch(t,e,-1,{start:t,count:e},n,i,!0,r)})},h.prototype._setRangeLocalFetch=function(t,e,r,n,o,i,a,l){var u=this,c=t,p=c+e;this[h._FETCH_SIZE_PROP]&&this[h._FETCH_SIZE_PROP]>e&&(p=this[h._FETCH_SIZE_PROP]+c);var f=null;if(this.IsVirtual()){var d=this._getFirstMissingModel(c,p);d>c&&(p=(c=d)+e,this[h._FETCH_SIZE_PROP]&&this[h._FETCH_SIZE_PROP]>e&&(p=this[h._FETCH_SIZE_PROP]+c)),f={context:this,startIndex:c,fetchSize:p-c}}else f={context:this};f.error=function(t,e,r,n,o){i(h._createRejectionError(n,o,e,u,null,!1))},f.success=function(){!function(){var t=u._getLocalRange(n.start,n.count);if(a&&u._hasTotalResults()&&t.count<n.count){var r=t.start+t.count,s=c+(u.lastFetchCount?u.lastFetchCount:e);s<u.totalResults?u._setRangeLocalFetch(s,e,r,n,o,i,a,l):o(t)}else o(t)}()},l&&l.silent&&(f.silent=l.silent);try{this._fetchInternal(f,r,r>-1)}catch(t){if(t instanceof s){var _=u._getLocalRange(c,e);o(_)}}},h._createRejectionError=function(t,e,r,n,o,i){var s=!1;o&&o.silent&&(s=o.silent),i&&l._triggerError(n,s,o,e,r,t);var a=new Error(e);return a.xhr=t,a.error=r,a.collection=n,a.status=e,a},h.prototype._getMaxLength=function(t,e){var r=this._getModelsLength();return 0===r?t+e:t+e>r?r:t+e},h.prototype.isRangeLocal=function(t,e){var r=this._getLocalRange(t,e);return 0===this._getModelsLength()?0===e:t===r.start&&(e===r.count||t+e>this._getModelsLength())},h.prototype._getModelArray=function(t,e){for(var r=[],n=this._getModels(),o=t+e,i=t;i<o;i++)r.push(n[i]);return r},h.prototype._getLocalRange=function(t,e){if(!this.IsVirtual()){if(this._getModelsLength()>0){if(t+e>this._getModelsLength()){var r=this._getModelsLength()-t;return{start:t,count:r,models:this._getModelArray(t,r)}}return{start:t,count:e,models:this._getModelArray(t,e)}}return{start:t,count:0,models:[]}}var n=this._getMaxLength(t,e);if(!this._hasTotalResults()&&n<t+e)return{start:t,count:n-t,models:this._getModelArray(t,n-t)};if(0===n)return{start:t,count:0,models:[]};var o=this._getFirstMissingModel(t,n);if(o>-1)return{start:t,count:o-t,models:this._getModelArray(t,o-t)};var i=e;return t>n?i=0:t+i>n&&(i=n-t),{start:t,count:i,models:this._getModelArray(t,i)}},h.prototype._getFirstMissingModel=function(t,e){for(var r=t;r<e;r++)if(void 0===this._getModel(r))return r;return-1},h.prototype.fetch=function(t){var e=this._fetchInternal(t,-1,!1);return this._addPromise(function(){return Promise.resolve(e)}),e},h.prototype._fetchInternal=function(t,e,r){function n(t,e,r,n){t.IsVirtual()?r||t._resetModelsToFullLength(n):e.add||e.useset||t.reset(null,{silent:!0})}var o,s=t||{},a=s.success,u=s.error;return s.set&&(s.useset=!!s.set),void 0===s.parse&&(s.parse=!0),o=this,s.error=function(e,r,n){l._triggerError(o,!1,t,r,n,e),u&&u.call(l.GetContext(t,o),o,n,t,e,r)},s.success=function(u){var c,p;try{c=o.parse(u,t)}catch(e){return void h._reportError(o,e,s.error,t)}o._setPagingReturnValues(u,t,c,r)||(p=o.totalResults);var f=null,d=!1,_=e;if(s.add||o.model){n(o,s,r,p);try{-1===e&&(d=!0,_=o._getOffset()),f=o._fillInCollectionWithParsedData(c,_,d,s)}catch(e){return void h._reportError(o,e,s.error,t)}}else r||(o.IsVirtual()?(n(o,s,r,p),-1===e&&(d=!0,_=o._getOffset()),f=o._putDataIntoCollection(c,_,d)):s.useset?o._setInternal(c,!1,s,!1):o.reset(c,{silent:!0}));o.IsVirtual()&&f&&(o.lastFetchCount=f.length);var g=!!s.silent;o.TriggerInternal(g,i.EventType.SYNC,o,u,s),a&&a.call(l.GetContext(t,o),o,u,s)},this._fetchCall(s)},h.prototype._putDataIntoCollection=function(t,e,r){var n;if(t){n=t instanceof Array?t:[t];var o={};r&&this._manageLRU(n.length);for(var i=e,s=this.IsVirtual(),a=null,l=0;l<n.length;l+=1)s&&(o={at:i},a=this._atInternal(i,null,!0,!1)),o.silent=!0,this._addInternal(n[l],o,!0,!1),this._atInternal(i,null,!0,!1)!==a&&(i+=1)}return n},h.prototype._fillInCollectionWithParsedData=function(t,e,r,n){var o=n||{},i=o.parse,s=h._createModel(this),a=null;if(t){a=t instanceof Array?t:[t];var l,u={};r&&this._manageLRU(a.length);var c,p=this.IsVirtual();if(o.useset&&!p){for(c=0;c<a.length;c+=1)l=s&&i?s.parse(a[c]):a[c],a[c]=l;this._setInternal(a,!1,o,!1)}else{var f=null,d=e;for(c=0;c<a.length;c+=1)l=s&&i?s.parse(a[c]):a[c],p&&(u={at:d},f=this._atInternal(d,u,!0,!1)),u.silent=!0,this._addInternal(l,u,!0,!1),this._atInternal(d,null,!0,!1)!==f&&(d+=1)}}return a},h._reportError=function(t,e,n,o){r.error(e.toString()),n&&n.call(l.GetContext(o,t),t,e,o)},h.prototype._fetchOnly=function(t){var e,r,n=t||{},o=n.success;return void 0===n.parse&&(n.parse=!0),r=this,n.success=function(s){var a,u,c,p=null,f=[];try{c=r.parse(s,t)}catch(e){return void h._reportError(r,e,n.error,t)}if(n.add||r.model){if(u=h._createModel(r),c)for(p=c instanceof Array?c:[c],a=0;a<p.length;a+=1){if(u&&n.parse)try{e=u.parse(p[a])}catch(e){return void h._reportError(r,e,n.error,t)}else e=p[a];f.push(r._newModel(e))}}else p=c instanceof Array?c:[c];r.TriggerInternal(!1,i.EventType.SYNC,r,s,n),o&&o.call(l.GetContext(t,r),r,f,n)},this._fetchCall(n)},h.prototype._fetchCall=function(t){try{return l._internalSync("read",this,t)}catch(e){throw l._triggerError(this,!1,t,null,e,null),e}},h.prototype._resetModelsToFullLength=function(t){return void 0!==t&&this._getModelsLength()!==t&&(this._setModels(new Array(t),!0),this._resetLRU(),this._setLength(),!0)},h.prototype._getFetchSize=function(t){return(t||{})[h._FETCH_SIZE_PROP]||this[h._FETCH_SIZE_PROP]},h.prototype.IsVirtual=function(){return this._getFetchSize(null)>-1},h.prototype._getReturnProperty=function(t,e,r,n,o){var i=parseInt(h._getProp(t,e,r),10);return null==i||isNaN(i)?n||o:i},h.prototype._cleanTotalResults=function(t){if(-1!==t)return t},h.prototype._setPagingReturnValues=function(t,e,r,n){var o={};this.customPagingOptions&&((o=this.customPagingOptions.call(this,t))||(o={}));var i=e||{};this.lastFetchSize=this._getReturnProperty(o,t,"limit",i.fetchSize,this.fetchSize),this.offset=this._getReturnProperty(o,t,"offset",i.startIndex,0),this.lastFetchCount=this._getReturnProperty(o,t,"count",this.lastFetchCount,this.lastFetchCount),this.totalResults=this._cleanTotalResults(this._getReturnProperty(o,t,"totalResults",this.totalResults,this.totalResults)),this.hasMore=this._getHasMore(h._getProp(o,t,"hasMore"),this.offset,this.lastFetchSize,this.totalResults);var s=!1;if(!n){var a=this._cleanTotalResults(parseInt(h._getProp(o,t,"totalResults"),10)),l=parseInt(h._getProp(o,t,"count"),10);this.totalResults=this._adjustTotalResults(a,this.hasMore,this.offset,l,r&&Array.isArray(r)?r.length:0),s=void 0===a||isNaN(a)||null===a}return!this.IsVirtual()&&this.totalResults&&this.totalResults!==this.lastFetchCount&&this.lastFetchSize&&this.setFetchSize(this.lastFetchSize),s},h.prototype._adjustTotalResults=function(t,e,r,n,o){if(!e&&isNaN(t))return(isNaN(n)?o:n)+r;return this.totalResults},h.prototype._getHasMore=function(t,e,r,n){return h._defined(t)?t:null==n||!(e+r>n)},h._getProp=function(t,e,r){return Object.prototype.hasOwnProperty.call(t,r)?t[r]:e?e[r]:void 0},h.prototype._getOffset=function(){return h._defined(this.offset)?this.offset:0},h.prototype.create=function(t,e){var r=this,n=e||{},o=this._getDeferred(n);function i(e,r,n,o){return r.save(t instanceof l?null:t,o),r}function s(t,e){return n.wait?r.IsVirtual()||o?r._addPromise(function(){return Promise.resolve(void 0)}):null:r.add(t,e)}var a=this._newModel(t,!0,n,!1),u=n.success,c=n.context;n.validate;if(n.context=this,n.success=function(t,e,o){o.xhr&&(n.xhr=o.xhr),n.wait&&r.add(a,n),u&&u.call(null!=c?c:r,t,e,n)},null==a)return!1;n.forceNew=null!=a.GetId();var h=l._copyOptions(n);return a.SetCollection(this),o||this.IsVirtual()?new Promise(function(t){h.merge=!0,h.deferred=!0,s(a,h).then(function(){n.success=function(e,o,i){i.xhr&&(n.xhr=i.xhr),n.wait?(r.IsVirtual()&&(h.force=!0),r.add(a,h).then(function(){u&&u.call(null!=c?c:r,e,o,n),t(e)})):(u&&u.call(null!=c?c:r,e,o,n),t(e))};var e=i(0,a,0,n);e||t(e)})}):(h.merge=!0,s(a,h),i(0,a,0,n))},h.prototype.pluck=function(t){var e,r=[];for(this._throwErrIfVirtual("pluck"),e=0;e<this._getLength();e+=1)r.push(this.at(e).get(t));return r},h.prototype.where=function(t,e){return this._handlePromise(this._whereInternal(t,e))},h.prototype._whereInternal=function(t,e){var r=e||{},n=this._getDeferred(r),o=this;if(this.IsVirtual())return new Promise(function(e,n){var i={query:t,all:!0,success:function(t,r){e(r)},error:function(t,e,i){n(h._createRejectionError(t,e,i,o,r,!0))}};o._fetchOnly(i)});var i,s,a=[];for(i=0;i<this._getLength();i+=1)(s=this.at(i)).Contains(t)&&a.push(s);return n?new Promise(function(t){t(a)}):a},h.prototype.whereToCollection=function(t,e){var r=e||{},n=this._getDeferred(r),o=this;if(this.IsVirtual()||n)return o._addPromise(function(){return new Promise(function(e,n){return o._whereInternal(t,r).then(function(t){var r=o._makeNewCollection(t);e(r)},function(t){n(t)})})});var i=this._whereInternal(t,r),s=this._makeNewCollection(i);return s[h._FETCH_SIZE_PROP]=-1,s._setLength(),s},h.prototype._makeNewCollection=function(t){var e=this._cloneInternal(!1);return e._setModels(t,!1),e._resetLRU(),e._setLength(),e},h.prototype._throwErrIfVirtual=function(t){if(this.IsVirtual())throw new Error(t+" not valid on a virtual Collection")},h.prototype.map=function(t,e){var r,n=[];return this._throwErrIfVirtual("map"),this._getModels().forEach(function(o){r=t.call(e||this,o),n.push(r)}),n},h.prototype.each=function(t,e){this._throwErrIfVirtual("each"),this._getModels().forEach(t,e)},h.prototype.size=function(){return this._getLength()},h.prototype.sortBy=function(t,e){var r,o=[];return this._throwErrIfVirtual("sortBy"),this._getModels().forEach(function(t){o.push(t)}),r=this,o.sort(function(o,i){var s,a;return n.isFunction(t)?(s=t.call(e||r,o),a=t.call(e||r,i),h._compareKeys(s,a,r.sortDirection)):(s=o.get(t),a=i.get(t),h._compareKeys(s,a,r.sortDirection))}),o},h.prototype.groupBy=function(t,e){var r,o={};return this._throwErrIfVirtual("groupBy"),this._getModels().forEach(function(i){r=n.isFunction(t)?t.call(e||this,i):i.get(t),void 0===o[r]&&(o[r]=[]),o[r].push(i)},this),o},h.prototype.indexBy=function(t,e){var r,o={};return this._throwErrIfVirtual("indexBy"),this._getModels().forEach(function(i){r=n.isFunction(t)?t.call(e||this,i):i.get(t),o[r]=i},this),o},h.prototype.min=function(t,e){var r,n,o={};return this._throwErrIfVirtual("min"),0===this._getModelsLength()?null:(o=this._getModel(0),r=t.call(e||this,this._getModel(0)),this._getModels().forEach(function(i,s){s>=1&&(n=t.call(e||this,i))<r&&(o=i,r=n)},this),o)},h.prototype.max=function(t,e){var r,n,o={};return this._throwErrIfVirtual("max"),0===this._getModelsLength()?null:(o=this._getModel(0),r=t.call(e,this._getModel(0)),this._getModels().forEach(function(i,s){s>=1&&(n=t.call(e||this,i))>r&&(o=i,r=n)},this),o)},h.prototype.filter=function(t,e){var r=[];return this._throwErrIfVirtual("filter"),this._getModels().forEach(function(n){t.call(e||this,n)&&r.push(n)}),r},h.prototype.without=function(t){var e,r,n,o,i,s=[];this._throwErrIfVirtual("without");for(var a=0;a<this._getModels().length;a++){for(o=!0,i=this._getModel(a),e=0;e<arguments.length;e+=1)if(n=arguments[e].GetCid(),r=arguments[e].GetId(),i.Match(r,n)){o=!1;break}o&&s.push(i)}return s},h.prototype.difference=function(t){var e,r,n,o,i,s,a=[];this._throwErrIfVirtual("difference");for(var l=0;l<this._getModels().length;l++){for(i=!0,s=this._getModel(l),e=0;e<arguments.length;e+=1){for(r=0;r<arguments[e].length;r++)if(o=arguments[e][r].GetCid(),n=arguments[e][r].GetId(),s.Match(n,o)){i=!1;break}if(!i)break}i&&a.push(s)}return a},h.prototype.isEmpty=function(){return 0===this._getLength()},h.prototype.any=function(t,e){var r;this._throwErrIfVirtual("any");for(var n=0;n<this._getModelsLength();n+=1)if(r=this._getModel(n),t.call(e||this,r))return!0;return!1},h.prototype.findWhere=function(t,e){var r=this._getDeferred(e),n=this;if(this.IsVirtual()||r)return this._addPromise(function(){return new Promise(function(r){n._whereInternal(t,e).then(function(t){t&&t.length>0&&r(t[0]),r(null)})})});var o=this._whereInternal(t,e);return o.length>0?o[0]:null},h.prototype.slice=function(t,e,r){var n,o=this._getDeferred(r),i=[],s=e;if(void 0===s){if(this.IsVirtual()&&!this._hasTotalResults())throw new Error("End must be set for virtual collections with no totalResults");s=this._getModelsLength()}if(o||this.IsVirtual()){var a=this;return this._addPromise(function(){return a.IterativeAt(t,s)})}for(n=t;n<s;n+=1)i.push(this._getModel(n));return i},h.prototype.set=function(t,e){var r=this._getDeferred(e);return this._setInternal(t,!0,e,r||this.IsVirtual())},h._removeAfterSet=function(t,e,r,n,o){if(r)for(var i=e.length-1;i>=0;i-=1)-1===n.indexOf(i)&&t._removeInternal(e[i],i,o)},h.prototype._swapModels=function(t,e,r,n){if(this._hasComparator()||!r||!n)return{index:t,swapped:!1};var o=this._getModelsLength();if(t>=o||e>=o)return{index:t,swapped:!1};var i=this._getModel(t),s=this._getModel(e);return this._setModel(t,s),s.SetIndex(t),this._setModel(e,i),i.SetIndex(e),{index:e,swapped:e!==t}},h.prototype._setInternal=function(t,e,r,n){var o,s,a=r||{},l=void 0===a.add||a.add,u=void 0===a.remove||a.remove,c=void 0===a.merge||a.merge,p=[],f=null,d=e?this.parse(t):t;if(s=Array.isArray(d)?d:[d],n){var _=this;return this._addPromise(function(){return _._deferredSet(s,_._getModels(),a,u,l,c,e)})}var g=!1;for(o=0;o<s.length;o+=1)if(-1!==(f=this._updateModel(this._newModel(s[o],e,a,!0),l,c,n))){var y=this._swapModels(f,o,u,l),v=y.index;y.swapped&&(g=!0),-1===p.indexOf(v)&&p.push(v)}if(g){var m=a.add?{add:!0}:null;this.TriggerInternal(a.silent,i.EventType.SORT,this,m,null)}return h._removeAfterSet(this,this._getModels(),u,p,a),null},h.prototype._deferredSet=function(t,e,r,n,o,i,s){var a,l=[],u=this;return new Promise(function(c,p){var f=function(e){return new Promise(function(n,a){u._updateModel(u._newModel(t[e],s,r,!0),o,i,!0).then(function(t){-1!==t&&l.push(t),n(e+1)},a)})},d=Promise.resolve(0);for(a=0;a<t.length;a+=1)d=d.then(f);d.then(function(){h._removeAfterSet(u,e,n,l,r),c(void 0)},p)})},h.prototype._updateModel=function(t,e,r,n){function o(n,o,i){var s=o?o.index:-1,a=o?o.m:null,l={};if(a){if(r){if(l={merge:r},i)return new Promise(function(e){n._addInternal(t,l,!1,!0).then(function(){e(s)})});n.add(t,l)}}else if(e){if(i)return new Promise(function(e){n._addInternal(t,l,!1,!0).then(function(){e(n._getLength()-1)})});n.add(t),s=n._getLength()-1}return s}if(n||this.IsVirtual()){var i=this;return new Promise(function(e){i._getInternal(t,{silent:!0},n).then(function(t){o(i,t,!0).then(function(t){e(t)})})})}return o(this,this._getInternal(t),!1)},h.prototype.toJSON=function(){var t=[];return this._throwErrIfVirtual("toJSON"),this._getModels().forEach(function(e){t.push(e.toJSON())}),t},h.prototype.first=function(t,e){var r,n=this._getDeferred(e),o=this._getLength(),i=[],s=this,a=t;a?o=a:a=1;var l=this.IsVirtual()||n;if(1===a)return l?this._addPromise(function(){return s._deferredAt(0,null)}):this._getModelsLength()>0?this._getModel(0):null;if(o>this._getModelsLength()&&(this.IsVirtual()&&!this._hasTotalResults()||(o=this._getModelsLength())),l)return this._addPromise(function(){return s.IterativeAt(0,o)});for(r=0;r<o;r+=1)i.push(this._getModel(r));return i},h.prototype.indexOf=function(t,e){var r=this._getDeferred(e);if(this.IsVirtual()||r){var n=this;return this._addPromise(function(){return n._getInternal(t,null,!0).then(function(t){return t.index})})}return this._getInternal(t).index},h.prototype.contains=function(t,e){var r=this._getDeferred(e);if(this.IsVirtual()||r){var n=this;return this._addPromise(function(){return n._getInternal(t,null,!0).then(function(t){return t.index>-1})})}return this._getInternal(t).index>-1},h.prototype.include=h.prototype.contains,h.prototype._localIndexOf=function(t){var e=this._getLocalInternal(t);return void 0!==e?e.index:-1},h.prototype.pop=function(t){var e=this._getDeferred(t);if(this.IsVirtual()||e){var r=this;return this._atInternal(this._getLength()-1,t,!1,!0).then(function(e){return r.remove(e,t),e})}var n=this.at(this._getLength()-1);return this.remove(n,t),n},h.prototype.push=function(t,e){var r=this._getDeferred(e);return this._manageLRU(1),this._handlePromise(this._addInternal(t,e,!1,r))},h.prototype.lastIndexOf=function(t,r){var n,o=r;for(this._throwErrIfVirtual("lastIndexOf"),void 0===o&&(o=0),n=this._getLength()-1;n>=o;n-=1)if(e.Object.__innerEquals(t,this.at(n)))return n;return-1},h.prototype._getSortAttrs=function(t){return void 0===t?[]:t.split(",")},h._getQueryString=function(t){function e(t,e,r){return t+r+e}function r(t,r){var o,i=r;return Object.keys(t||{}).forEach(function(r){if(Object.prototype.hasOwnProperty.call(t,r))for(var s=Array.isArray(t[r])?t[r]:[t[r]],a=0;a<s.length;a++){if(l.IsComplexValue(s[a])){var u=s[a].value,c=null,h=s[a].comparator;c=n.isFunction(h)?h(null,r,u):h,o=e(r,u,c)}else o=e(r,t[r],"=");i+=o+"+"}}),i=i.substring(0,i.length-1)+","}var o,i=Array.isArray(t)?t:[t],s="";for(o=0;o<i.length;o++)s=r(i[o],s);return","===s.substring(s.length-1)?s.substring(0,s.length-1):s},h.prototype.ModifyOptionsForCustomURL=function(t){var r={};Object.keys(t||{}).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e])});var n=this.comparator;if(n&&e.StringUtils.isString(n)){for(var o=this._getSortAttrs(n),i=0;i<o.length;i++)0===i?r.sort=o[i]:r.sort+=","+o[i];r.sortDir=this._getSortDirStr()}return this.IsVirtual()&&(r[h._FETCH_SIZE_PROP]=this._getFetchSize(r)),r},h.prototype.IsUrlBased=function(t){var e=this.customURL;if(n.isFunction(e))return!0;var r=this.GetCollectionFetchUrl(t);return h._defined(r)},h.prototype.GetCollectionFetchUrl=function(t){var r=a.GetPropValue(this,"url");if(this.IsVirtual()){var n=t||{},o=n.all,i=null;if(o)i=this.totalResults||this._getFetchSize(n);else i=this._getFetchSize(n);if(r&&r.indexOf("?")>-1?r+="&":r+="?",r+="limit="+i,o||(h._defined(n.startIndex)&&(r+="&offset="+n.startIndex),n.startID&&(r+="&fromID="+n.startID),n.since&&(r+="&since="+n.since),n.until&&(r+="&until="+n.until)),n.query){var s=h._getQueryString(n.query);s&&s.length>0&&(r+="&q="+s)}var l=this.comparator;if(l&&e.StringUtils.isString(l)){var u,c=this._getSortAttrs(l),p=this._getSortDirStr();for(u=0;u<c.length;u++)r+=0===u?"&orderBy="+c[u]+":"+p:","+c[u]+":"+p}r+="&totalResults=true"}return r},h.prototype._getSortDirStr=function(){return-1===this.sortDirection?"desc":"asc"},h.prototype.sync=function(t,r,n){return e.sync(t,r,n)},h._FETCH_SIZE_PROP="fetchSize";const p=function(t,e){p._init(this,e||{},t||"Authorization")};e._registerLegacyNamespaceProp("OAuth",p),e.Object.createSubclass(p,e.Object,"oj.OAuth"),p.prototype.Init=function(){p.superclass.Init.call(this)},p.prototype.getHeader=function(){var t={};return this.accessTokenResponse.access_token||this.clientCredentialGrant(),t[this.accessTokenRequest.auth_header]="Bearer "+this.accessTokenResponse.access_token,t},p.prototype.isInitialized=function(){return!(!this.accessTokenResponse||!this.accessTokenResponse.access_token)},p.prototype.clientCredentialGrant=function(){var t={},e=this;t[e.accessTokenRequest.auth_header]="Basic "+p._base64_encode(e.accessTokenRequest.client_id+":"+e.accessTokenRequest.client_secret),n.ajax({type:"POST",async:!1,url:this.accessTokenRequest.bearer_url,data:"grant_type=client_credentials",headers:t,success:function(t){e.accessTokenResponse=p._initAccessToken(e.accessTokenResponse,t)},error:function(t){throw new Error(t.responseText)}})},p.prototype.setAccessTokenResponse=function(t){this.accessTokenResopnse=p._initAccessToken(this.accessTokenResponse,t)},p.prototype.getAccessTokenResponse=function(){return this.accessTokenResponse},p.prototype.cleanAccessTokenResponse=function(){p._cleanAccessToken(this.accessTokenResponse)},p.prototype.setAccessTokenRequest=function(t){this.accessTokenRequest=p._initAccessToken(this.accessTokenRequest,t)},p.prototype.getAccessTokenRequest=function(){return this.accessTokenRequest},p.prototype.cleanAccessTokenRequest=function(){p._cleanAccessToken(this.accessTokenRequest)},p._init=function(t,e,r){var n=t;n.Init(),n.accessTokenRequest={},n.accessTokenResponse={},e.access_token?n.accessTokenResponse=p._initAccessToken(n.accessTokenResponse,e):e.client_id&&e.client_secret&&e.bearer_url&&(n.accessTokenResponse=p._initAccessToken(n.accessTokenRequest,e)),n.accessTokenRequest.auth_header=r},p._initAccessToken=function(t,e){var r=e||{},n=t||{};return Object.keys(r).forEach(function(t){Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}),n},p._cleanAccessToken=function(t){var e=t||{};Object.keys(e).forEach(function(t){Object.prototype.hasOwnProperty.call(e,t)&&"auth_header"!==t&&(e[t]=null,delete e[t])})},p._base64_encode=function(t){var e,r,n,o,i=0,s=0,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=[];do{e=t.charCodeAt(i),i+=1,r=t.charCodeAt(i),i+=1,n=t.charCodeAt(i),i+=1,e=(o=e<<16|r<<8|n)>>18&63,r=o>>12&63,n=o>>6&63,o&=63,l[s]=a.charAt(e)+a.charAt(r)+a.charAt(n)+a.charAt(o),s+=1}while(i<t.length);return l=l.join(""),((e=t.length%3)?l.slice(0,e-3):l)+"===".slice(e||3)},t.Collection=h,t.Events=i,t.Model=l,t.OAuth=p,t.URLError=s,t.ajax=c,t.sync=u,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ojmodel.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojdataprovideradapter-base',["ojs/ojcore-base","ojs/ojeventtarget"],function(t,s){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;class e{constructor(t){this.dataSource=t,this.AsyncIterable=class{constructor(t){this._asyncIterator=t,this[Symbol.asyncIterator]=function(){return this._asyncIterator}}},this.AsyncIterator=class{constructor(t,s){this._nextFunc=t,this._params=s,this._fetchFirst=!0}next(){const t=this._fetchFirst;return this._fetchFirst=!1,this._nextFunc(this._params,t)}},this.AsyncIteratorYieldResult=class{constructor(t,s){this._parent=t,this.value=s,this[e._VALUE]=s,this[e._DONE]=!1}},this.AsyncIteratorReturnResult=class{constructor(t,s){this._parent=t,this.value=s,this[e._VALUE]=s,this[e._DONE]=!0}},this.FetchListResult=class{constructor(t,s,i,a){this._parent=t,this.fetchParameters=s,this.data=i,this.metadata=a,this[e._FETCHPARAMETERS]=s,this[e._DATA]=i,this[e._METADATA]=a}},this.ItemMetadata=class{constructor(t,s){this._parent=t,this.key=s,this[e._KEY]=s}},this.SortCriterion=class{constructor(t,s,i){this._parent=t,this.attribute=s,this.direction=i,this[e._ATTRIBUTE]=s,this[e._DIRECTION]=i}},this.DataProviderMutationEventDetail=class{constructor(t,s,i,a){this._parent=t,this.add=s,this.remove=i,this.update=a,this[e._ADD]=s,this[e._REMOVE]=i,this[e._UPDATE]=a}},this.DataProviderOperationEventDetail=class{constructor(t,s,i,a,r){this._parent=t,this.keys=s,this.metadata=i,this.data=a,this.indexes=r,this[e._KEYS]=s,this[e._METADATA]=i,this[e._DATA]=a,this[e._INDEXES]=r}},this.DataProviderAddOperationEventDetail=class{constructor(t,s,i,a,r,h,n,c){this._parent=t,this.keys=s,this.afterKeys=i,this.addBeforeKeys=a,this.parentKeys=r,this.metadata=h,this.data=n,this.indexes=c,this[e._KEYS]=s,this[e._AFTERKEYS]=i,this[e._ADDBEFOREKEYS]=a,this[e._METADATA]=h,this[e._DATA]=n,this[e._INDEXES]=c}}}getCapability(t){return t===e._SORT&&"full"===this.dataSource.getCapability(t)?{attributes:"multiple"}:"fetchByKeys"===t||"fetchByOffset"===t?{implementation:"lookup"}:null}addListener(t,s){this._eventHandlerFuncs[t]=s.bind(this),this.dataSource.on(t,this._eventHandlerFuncs[t])}removeListener(t){this.dataSource.off(t,this._eventHandlerFuncs[t])}removeAllListeners(){this._eventHandlerFuncs={}}}return e._SORT="sort",e._DATA="data",e._KEY="key",e._ATTRIBUTE="attribute",e._DIRECTION="direction",e._VALUE="value",e._DONE="done",e._FETCHPARAMETERS="fetchParameters",e._METADATA="metadata",e._KEYS="keys",e._INDEXES="indexes",e._ADD="add",e._REMOVE="remove",e._UPDATE="update",e._AFTERKEYS="afterKeys",e._ADDBEFOREKEYS="addBeforeKeys",s.EventTargetMixin.applyMixin(e),t._registerLegacyNamespaceProp("DataSourceAdapter",e),e});
//# sourceMappingURL=ojdataprovideradapter-base.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojdataprovideradapter',["ojs/ojcore-base","ojs/ojdataprovider","ojs/ojmodel","ojs/ojdataprovideradapter-base","ojs/ojeventtarget"],function(e,t,a,n,r){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;class s extends n{constructor(e){super(e),this.tableDataSource=e,this.FetchByKeysResults=class{constructor(e,t,a){this._parent=e,this.fetchParameters=t,this.results=a,this[s._FETCHPARAMETERS]=t,this[s._RESULTS]=a}},this.ContainsKeysResults=class{constructor(e,t,a){this._parent=e,this.containsParameters=t,this.results=a,this[s._CONTAINSPARAMETERS]=t,this[s._RESULTS]=a}},this.Item=class{constructor(e,t,a){this._parent=e,this.metadata=t,this.data=a,this[s._METADATA]=t,this[s._DATA]=a}},this.FetchByOffsetResults=class{constructor(e,t,a,n){this._parent=e,this.fetchParameters=t,this.results=a,this.done=n,this[s._FETCHPARAMETERS]=t,this[s._RESULTS]=a,this[s._DONE]=n}},this.FetchListParameters=class{constructor(e,t,a){this._parent=e,this.size=t,this.sortCriteria=a,this[s._SIZE]=t,this[s._SORTCRITERIA]=a}},this._addTableDataSourceEventListeners(),this[s._OFFSET]=0,this._ignoreDataSourceEvents=new Array}destroy(){this._removeTableDataSourceEventListeners()}containsKeys(e){const t=this,a=[];return e[s._KEYS].forEach(function(e){a.push(t.tableDataSource.get(e))}),Promise.all(a).then(function(a){const n=new Set;return a.forEach(e=>{null!=e&&n.add(e[s._KEY])}),Promise.resolve(new t.ContainsKeysResults(t,e,n))})}fetchByKeys(e){const t=this,a=[];return e[s._KEYS].forEach(function(e){a.push(t.tableDataSource.get(e))}),Promise.all(a).then(function(a){const n=new Map;for(let e=0;e<a.length;e++){const r=a[e];if(null!=r){const a=r[s._KEY],i=r[s._DATA],o=new t.ItemMetadata(t,a);t._extractMetaData(t.dataSource,e,o),n.set(a,new t.Item(t,o,i))}}return Promise.resolve(new t.FetchByKeysResults(t,e,n))})}fetchByOffset(e){const t=this,a=null!=e?e[s._SIZE]:-1,n=null!=e?e[s._SORTCRITERIA]:null,r=null!=e&&e[s._OFFSET]>0?e[s._OFFSET]:0,i=new this.FetchListParameters(this,a,n);return this._startIndex=0,this._getFetchFunc(i,r)(i,!0).then(function(a){const n=a[s._VALUE],r=a[s._DONE],i=n[s._DATA],o=n[s._METADATA].map(function(e){return e[s._KEY]}),l=new Array;i.map(function(e,a){l.push(new t.Item(t,new t.ItemMetadata(t,o[a]),i[a]))});for(let e=0;e<l.length;e++)t._extractMetaData(t.dataSource,e,l[e][s._METADATA]);return new t.FetchByOffsetResults(t,e,l,r)})}fetchFirst(e){return this._isPagingModelTableDataSource()||(this._startIndex=0),new this.AsyncIterable(new this.AsyncIterator(this._getFetchFunc(e),e))}getCapability(e){return e==s._SORT&&"full"==this.tableDataSource.getCapability(e)?{attributes:"multiple"}:"fetchByKeys"==e||"fetchByOffset"==e?{implementation:"lookup"}:null}getTotalSize(){return Promise.resolve(this.tableDataSource.totalSize())}isEmpty(){return this.tableDataSource.totalSize()>0?"no":"yes"}getPage(){return this._isPagingModelTableDataSource()?this.tableDataSource.getPage():-1}setPage(e,t){return this._isPagingModelTableDataSource()?this.tableDataSource.setPage(e,t):Promise.reject(null)}getStartItemIndex(){return this._isPagingModelTableDataSource()?this.tableDataSource.getStartItemIndex():-1}getEndItemIndex(){return this._isPagingModelTableDataSource()?this.tableDataSource.getEndItemIndex():-1}getPageCount(){return this._isPagingModelTableDataSource()?this.tableDataSource.getPageCount():-1}totalSize(){return this._isPagingModelTableDataSource()?this.tableDataSource.totalSize():-1}totalSizeConfidence(){return this._isPagingModelTableDataSource()?this.tableDataSource.totalSizeConfidence():null}_getFetchFunc(e,t){const a=this;if(null!=e&&null!=e[s._SORTCRITERIA]){const n=e[s._SORTCRITERIA][0][s._ATTRIBUTE],r=e[s._SORTCRITERIA][0][s._DIRECTION];return this._ignoreSortEvent=!0,this._isPagingModelTableDataSource()||(this._startIndex=0),function(e,n){return function(r,i){if(i){const i={};return i[s._KEY]=e,i[s._DIRECTION]=n,a[s._OFFSET]=0,a.tableDataSource.sort(i).then(function(){return a._ignoreSortEvent=!1,a._getTableDataSourceFetch(r,t)(r)})}return a._getTableDataSourceFetch(r,t)(r)}}(n,r)}return this._getTableDataSourceFetch(e,t)}_extractMetaData(e,t,a){let n=e;if(this._isPagingModelTableDataSource()&&(n=n.getWrappedDataSource()),n._getMetadata){const e=n._getMetadata(t);e&&Object.keys(e).forEach(function(t){a[t]=e[t]})}}_getTableDataSourceFetch(e,t){const a=this;return function(e,n){const r={};if(t=t>0?t:0,null!=a._startIndex&&(r[s._STARTINDEX]=a._startIndex+t),r[s._PAGESIZE]=null!=e&&e[s._SIZE]>0?e[s._SIZE]:null,!a._isPagingModelTableDataSource()&&e[s._SILENT]&&(r[s._SILENT]=e[s._SILENT]),null!=a.tableDataSource[s._SORTCRITERIA]&&null==e[s._SORTCRITERIA]){e[s._SORTCRITERIA]=[];const t=new a.SortCriterion(a,a.tableDataSource[s._SORTCRITERIA][s._KEY],a.tableDataSource[s._SORTCRITERIA][s._DIRECTION]);e[s._SORTCRITERIA].push(t)}return r[s._FETCHTYPE]=e[s._FETCHTYPE],a._isFetching=!0,new Promise(function(t,n){a._fetchResolveFunc=t,a._fetchRejectFunc=n,a._fetchParams=e,a._requestEventTriggered||(a._isPagingModelTableDataSource()||r[s._SILENT]||a._ignoreDataSourceEvents.push(!0),a.tableDataSource.fetch(r).then(function(n){if(a._isPagingModelTableDataSource()||r[s._SILENT]||a._ignoreDataSourceEvents.pop(),null!==n){a._isFetching=!1,void 0===n&&((n={})[s._KEYS]=[],n[s._DATA]=[]);let i=[];null!=n[s._KEYS]&&(i=n[s._KEYS].map(function(e){return new a.ItemMetadata(a,e)})),null==a._startIndex&&(a._startIndex=0);for(let e=0;e<i.length;e++)a._extractMetaData(a.dataSource,e,i[e]);let o=!1;a._startIndex=a._startIndex+n[s._DATA].length,("actual"==a.tableDataSource.totalSizeConfidence()&&a.tableDataSource.totalSize()>0&&n.startIndex+n[s._DATA].length>=a.tableDataSource.totalSize()||r[s._PAGESIZE]>0&&n[s._DATA].length<r[s._PAGESIZE]||0===n[s._DATA].length)&&(o=!0),a._fetchResolveFunc=null,a._fetchParams=null,t(o?new a.AsyncIteratorReturnResult(a,new a.FetchListResult(a,e,n[s._DATA],i)):new a.AsyncIteratorYieldResult(a,new a.FetchListResult(a,e,n[s._DATA],i)))}},function(e){a._isPagingModelTableDataSource()||r[s._SILENT]||a._ignoreDataSourceEvents.pop(),n(e)}))})}}_adjustIteratorOffset(e,t){let a=this._startIndex,n=0;e&&e.forEach(function(e){e<a&&++n}),a-=n,t&&t.forEach(function(e){e<a&&++a}),this._startIndex=a}_handleSync(e){const a=this;if(!(a._ignoreDataSourceEvents.length>0)){if(a._startIndex=null,e[s._STARTINDEX]>0&&(a._startIndex=e[s._STARTINDEX],a[s._OFFSET]=a._startIndex),a._fetchResolveFunc&&null!=e[s._KEYS]){a._isFetching=!1;const t=e[s._KEYS].map(function(e){return new a.ItemMetadata(a,e)});for(let e=0;e<t.length;e++)a._extractMetaData(a.dataSource,e,t[e]);let n=!1;"actual"==a.tableDataSource.totalSizeConfidence()&&a.tableDataSource.totalSize()>0&&a._startIndex+e[s._DATA].length>=a.tableDataSource.totalSize()&&(n=!0),n?a._fetchResolveFunc(new a.AsyncIteratorReturnResult(a,new a.FetchListResult(a,a._fetchParams,e[s._DATA],t))):a._fetchResolveFunc(new a.AsyncIteratorYieldResult(a,new a.FetchListResult(a,a._fetchParams,e[s._DATA],t))),a._fetchResolveFunc=null,a._fetchParams=null}else a._requestEventTriggered||a.dispatchEvent(new t.DataProviderRefreshEvent);a._requestEventTriggered=!1}}_handleAdd(e){var a;const n=this,r=e[s._KEYS].map(function(e){return new n.ItemMetadata(n,e)}),i=new Set;e[s._KEYS].map(function(e){i.add(e)});const o=new n.DataProviderAddOperationEventDetail(n,i,null,null,null,r,e[s._DATA],e[s._INDEXES]),l=new n.DataProviderMutationEventDetail(n,o,null,null);n.dispatchEvent(new t.DataProviderMutationEvent(l)),this._adjustIteratorOffset(null,null===(a=l.add)||void 0===a?void 0:a.indexes)}_handleRemove(e){var a;const n=this,r=e[s._KEYS].map(function(e){return new n.ItemMetadata(n,e)}),i=new Set;e[s._KEYS].map(function(e){i.add(e)});const o=new n.DataProviderOperationEventDetail(n,i,r,e[s._DATA],e[s._INDEXES]),l=new n.DataProviderMutationEventDetail(n,null,o,null);n.dispatchEvent(new t.DataProviderMutationEvent(l)),this._adjustIteratorOffset(null===(a=l.remove)||void 0===a?void 0:a.indexes,null)}_handleReset(e){const a=this;a._requestEventTriggered||a._isPagingModelTableDataSource()||(a._startIndex=0,a.dispatchEvent(new t.DataProviderRefreshEvent))}_handleSort(e){const a=this;a._ignoreSortEvent||(a._startIndex=null,a.dispatchEvent(new t.DataProviderRefreshEvent))}_handleChange(e){const a=this,n=e[s._KEYS].map(function(e){return new a.ItemMetadata(a,e)}),r=new Set;e[s._KEYS].map(function(e){r.add(e)});const i=new a.DataProviderOperationEventDetail(a,r,n,e[s._DATA],e[s._INDEXES]),o=new a.DataProviderMutationEventDetail(a,null,null,i);a.dispatchEvent(new t.DataProviderMutationEvent(o))}_handleRefresh(e){const a=this;a._isFetching||a._requestEventTriggered||(null!=e[s._OFFSET]?a._startIndex=e[s._OFFSET]:a._startIndex=null,a.dispatchEvent(new t.DataProviderRefreshEvent)),a._requestEventTriggered=!1}_handleRequest(e){const n=this;n._ignoreDataSourceEvents.length>0||void 0!==a.Model&&e instanceof a.Model||n._isFetching||(e[s._STARTINDEX]>0&&0===n.getStartItemIndex()&&(n._startIndex=e[s._STARTINDEX]),n._requestEventTriggered=!0,n.dispatchEvent(new t.DataProviderRefreshEvent))}_handleError(e){const t=this;t._fetchRejectFunc&&t._fetchRejectFunc(e),t._isFetching=!1,t._requestEventTriggered=!1}_handlePage(t){this._isFetching=!1,this._requestEventTriggered=!1;const a={};a.detail=t,this.dispatchEvent(new r.GenericEvent(e.PagingModel.EventType.PAGE,a))}_addTableDataSourceEventListeners(){this.removeAllListeners(),this.addListener("sync",this._handleSync),this.addListener("add",this._handleAdd),this.addListener("remove",this._handleRemove),this.addListener("reset",this._handleReset),this.addListener("sort",this._handleSort),this.addListener("change",this._handleChange),this.addListener("refresh",this._handleRefresh),this.addListener("request",this._handleRequest),this.addListener("error",this._handleError),this.addListener("page",this._handlePage)}_removeTableDataSourceEventListeners(){this.removeListener("sync"),this.removeListener("add"),this.removeListener("remove"),this.removeListener("reset"),this.removeListener("sort"),this.removeListener("change"),this.removeListener("refresh"),this.removeListener("request"),this.removeListener("error"),this.removeListener("page")}_isPagingModelTableDataSource(){return null!=this.tableDataSource.getStartItemIndex}}return s._STARTINDEX="startIndex",s._SILENT="silent",s._SORTCRITERIA="sortCriteria",s._PAGESIZE="pageSize",s._OFFSET="offset",s._SIZE="size",s._CONTAINSPARAMETERS="containsParameters",s._RESULTS="results",s._FETCHTYPE="fetchType",r.EventTargetMixin.applyMixin(s),e._registerLegacyNamespaceProp("TableDataSourceAdapter",s),s});
//# sourceMappingURL=ojdataprovideradapter.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojindexer',["exports","ojs/ojcore-base","ojs/ojtranslation","jquery","hammerjs","ojs/ojcontext","ojs/ojjquery-hammer","ojs/ojcomponentcore","ojs/ojdomutils"],function(e,t,n,r,i,s,a,o,l){"use strict";var u;t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r,s=s&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s,(u={properties:{data:{type:"object"},translations:{type:"object",value:{},properties:{ariaDisabledLabel:{type:"string"},ariaInBetweenText:{type:"string"},ariaKeyboardInstructionText:{type:"string"},ariaOthersLabel:{type:"string"},ariaTouchInstructionText:{type:"string"},indexerCharacters:{type:"string"},indexerOthers:{type:"string"}}}},methods:{getProperty:{},refresh:{},setProperties:{},setProperty:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}}).extension._WIDGET_NAME="ojIndexer",u.extension._INNER_ELEM="ul",u.extension._GLOBAL_TRANSFER_ATTRS=["aria-label","aria-labelledby"],t.CustomElementBridge.register("oj-indexer",{metadata:u});const d=function(){};t._registerLegacyNamespaceProp("IndexerModel",d),d.SECTION_OTHERS={id:"__others__",label:n.getTranslatedString("oj-ojIndexer.indexerOthers")},t.__registerWidget("oj.ojIndexer",r.oj.baseComponent,{defaultElement:"<ul>",version:"1.2",widgetEventPrefix:"oj",options:{data:null},_ComponentCreate:function(){this._super(),this._setup()},_AfterCreate:function(){this._super(),this._createIndexerContent(),this._setAriaProperties(),this._createInstructionText()},_destroy:function(){this._super();var e=this._getIndexerContainer();this._unregisterResizeListener(e),this._unregisterTouchHandler(e),this._unsetAriaProperties(),this.element.removeClass("oj-component-initnode"),l.unwrap(this.element,e)},_setOption:function(e,t){this._superApply(arguments),"data"===e&&this.refresh()},_SetupResources:function(){this._super();var e=this._getIndexerContainer()[0];this._registerResizeListener(e),this._registerTouchHandler(e)},_ReleaseResources:function(){this._super();var e=this._getIndexerContainer()[0];this._unregisterResizeListener(e),this._unregisterTouchHandler(e),this._resolveBusyState()},_resolveBusyState:function(){this.busyStateResolve&&(this.busyStateResolve(null),this.busyStateResolve=null)},widget:function(){return this._getIndexerContainer()},refresh:function(){this._super(),this.element.empty(),this._createIndexerContent(),this._setAriaProperties(),this.m_current=null},getNodeBySubId:function(e){if(null==e)return this.element?this.element[0]:null;if("oj-indexer-section"===e.subId)for(var t=e.section,n=this.element.children("li"),i=0;i<n.length;i++){var s=n.get(i);if(r(s).data("data-range")===t)return s;var a=r(s).data("data-includes");if(null!=a)for(var o=0;o<a.length;o++)if(a[o]===t)return s}return null},getSubIdByNode:function(e){if(null!=e){var t=r(e).data("data-range");if(null!=t)return{subId:"oj-indexer-section",section:t}}return null},_setAriaProperties:function(){this.element.attr("role","slider").attr("aria-orientation","vertical").attr("aria-describedby",this.element.prop("id")+":desc").attr("aria-valuemin",0).attr("aria-valuemax",Math.max(0,this.element.children().length-1))},_unsetAriaProperties:function(){this.element.removeAttr("role").removeAttr("aria-orientation").removeAttr("aria-describedby").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuetext")},_createInstructionText:function(){var e;e=l.isTouchSupported()?"ariaTouchInstructionText":"ariaKeyboardInstructionText";var t=r(document.createElement("div"));t.prop("id",this.element.prop("id")+":desc"),t.addClass("oj-helper-hidden-accessible").text(this.getTranslatedString(e)),this._getIndexerContainer().append(t)},_getIndexerContainer:function(){return null==this.m_container&&(this.m_container=this._createIndexerContainer()),this.m_container},_createIndexerContainer:function(){var e;return this.OuterWrapper?e=r(this.OuterWrapper):(e=r(document.createElement("div")),this.element.parent()[0].replaceChild(e[0],this.element[0])),e.addClass("oj-indexer oj-component"),e.prepend(this.element),e},_createIndexerContent:function(){var e=this._getIndexerModel();if(null!=e){var t,n=this.element,r=e.getIndexableSections();e.getMissingSections&&(t=e.getMissingSections());var i=this.getTranslatedString("indexerOthers"),s=this.widget().outerHeight(),a=this._createItem(r[0],t);n.append(a),this._getIndexerContainer().removeClass("oj-indexer-abbr"),null==this.m_itemHeight&&(this.m_itemHeight=a.outerHeight());var o=Math.max(1,this.m_itemHeight),l=Math.floor(s/o),u=Math.floor((r.length+1)/l)+1;u>1&&this._getIndexerContainer().addClass("oj-indexer-abbr");for(var d=1+u;d<r.length;d=d+u+1){if(u>1){var h=this._createSeparator(r,d-u,d-1);n.append(h)}else d-=1;var c=r[d],_=this._createItem(c,t);n.append(_)}var g=this._createItem(r[r.length-1],t);n.append(g);var p=this._createItem(i);p.attr("data-others","true"),n.append(p),null==this.m_height&&(this.m_height=s)}},_createItem:function(e,t){var n=e.label?e.label:e,i=r(document.createElement("li"));return i.data("data-range",e).text(n),null!=t&&t.indexOf(e)>-1&&i.addClass("oj-disabled"),i},_createSeparator:function(e,t,n){var i=[],s=r(document.createElement("li"));s.addClass("oj-indexer-ellipsis").data("data-range",e[t+Math.round((n-t)/2)]);for(var a=t;a<=n;a++)i.push(e[a]);return s.data("data-includes",i),s},_setup:function(){var e=this;this.element.uniqueId().addClass("oj-component-initnode").attr("tabIndex",0),this._on(this.element,{click:function(t){e._handleClick(t)},keydown:function(t){e._handleKeyDown(t)},focus:function(t){e._handleFocus(t)},blur:function(t){e._handleBlur(t)}}),this._focusable({applyHighlight:!0,setupHandlers:function(t,n){e._focusInHandler=t,e._focusOutHandler=n}})},_handleClick:function(e){var t;0===e.button&&(t=r(e.target),this._setCurrent(t))},_handleFocus:function(e){this._getIndexerContainer().addClass("oj-focus-ancestor"),null==this.m_current?this._setFocus(this.element.children("li").first()):this._setFocus(this.m_current)},_handleBlur:function(e){this._getIndexerContainer().removeClass("oj-focus-ancestor")},_handleKeyDown:function(e){var t,n=!1;switch(e.keyCode){case 38:t=this.m_current.prev();break;case 40:t=this.m_current.next();break;case 13:this._setCurrent(this.m_current),n=!0}null!=t&&t.length>0&&(n=!0,this._setFocus(t)),n&&e.preventDefault()},_setFocus:function(e){null!=this.m_current&&this._focusOutHandler(this.m_current),this._focusInHandler(e),this._updateAriaProperties(e),this.m_current=e},_getIndexerModel:function(){var e=this.option("data");if(null!=e&&(void 0===e.setSection||void 0===e.getIndexableSections))throw new Error("Invalid IndexerModel");return e},_setCurrent:function(e){var t=e.data("data-range");e.attr("data-others")&&(t=d.SECTION_OTHERS),this._setCurrentSection(t)},_setCurrentSection:function(e){var t=this,n=s.getContext(this.element[0]).getBusyContext();this.busyStateResolve=n.addBusyState({description:"setCurrentSection"}),this._getIndexerModel().setSection(e).then(function(e){if(null!=e){var n=t._findItem(e);null!=n&&t._setFocus(n)}t._resolveBusyState()},function(){t._resolveBusyState()})},_updateAriaProperties:function(e){var t=e.data("data-includes"),n="";if(null!=t){if(t.length>0){var r=t[0].label?t[0].label:t[0],i=t[t.length-1].label?t[t.length-1].label:t[t.length-1];n=this.getTranslatedString("ariaInBetweenText",{first:r,second:i})}}else{var s=e.data("data-range");n=s===d.SECTION_OTHERS?this.getTranslatedString("ariaOthersLabel"):s}e.hasClass("oj-disabled")&&(n=n+". "+this.getTranslatedString("ariaDisabledLabel")),this.element.attr("aria-valuetext",n),this.element.attr("aria-valuenow",e.index())},_findItem:function(e){for(var t=this.element.children(),n=0;n<t.length;n++){var i=t.get(n),s=r(i).data("data-range"),a=r(i).data("data-includes");if(null!=s&&s===e||null!=a&&a.indexOf(e)>-1)return r(i)}return null},_unregisterResizeListener:function(e){e&&this._resizeHandler&&l.removeResizeListener(e,this._resizeHandler)},_registerResizeListener:function(e){e&&(null==this._resizeHandler&&(this._resizeHandler=this._handleResize.bind(this)),l.addResizeListener(e,this._resizeHandler))},_unregisterTouchHandler:function(e){this.hammer&&(this.hammer.off("panstart panmove panend"),r(e).ojHammer("destroy")),this.hammer=null},_registerTouchHandler:function(e){var t,n,s,a,o,l=this,u={recognizers:[[i.Pan,{direction:i.DIRECTION_VERTICAL}]]};this.hammer=r(e).ojHammer(u).on("panstart",function(e){var i=e.gesture.target;t=l.element[0].getBoundingClientRect().left+5,n=i.getBoundingClientRect().top,l._setCurrent(r(i)),s=i,a=r(i).data("data-range"),o=n}).on("panmove",function(e){var i=o;o=n+e.gesture.deltaY;var u=document.elementFromPoint(t,o);if(null!=u){var d,h,c=o-i;if(s===u){if(null!=(d=r(u).data("data-includes"))){var _=d.indexOf(a);h=null,c>0&&_<d.length-1?h=d[_+1]:c<0&&_>0&&(h=d[_-1]),null!=h&&(a=h,l._setCurrentSection(h))}}else r(u).data("data-range")&&(h=null,null!=(d=r(u).data("data-includes"))&&(c>0&&u===s.nextElementSibling?h=d[0]:c<0&&u===s.previousElementSibling&&(h=d[d.length-1])),null==h&&(h=r(u).data("data-range")),s=u,a=h,l._setCurrentSection(a))}}).on("panend",function(){s=null,a=null,o=null})},_handleResize:function(e,t){t>0&&t!==this.m_height&&(this.refresh(),this.m_height=t)}});const h=function(e){this.listview=e,this.Init()};t._registerLegacyNamespaceProp("ListViewIndexerModel",h),t.Object.createSubclass(h,t.EventSource,"oj.ListViewIndexerModel"),h.prototype.getIndexableSections=function(){return this.listview.ojContext.getTranslatedString("indexerCharacters").split("|")},h.prototype.getMissingSections=function(){return null==this.missingSections&&(this.missingSections=this._getMissingSections()),this.missingSections},h.prototype._getMissingSections=function(){var e,t=[],n=this.listview._getGroupItemsCache(),i=this.getIndexableSections();for(e=0;e<i.length;e++){var s=i[e],a=!1;n.each(function(){var e=r(this).text();return!(e.length>0&&e.charAt(0)===s)||(a=!0,!1)}),a||t.push(s)}return t},h.prototype.setSection=function(e){return e===d.SECTION_OTHERS?this._setOtherSection():this._setSection(e)},h.prototype._setOtherSection=function(){var e=this.getIndexableSections(),t=this;return new Promise(function(n){var i=null;t.listview._getGroupItemsCache().each(function(){for(var t=r(this).text(),n=0;n<e.length;n++){var s=e[n];if(0===t.indexOf(s))return!0}return i=this,!1}),i?(t.listview._scrollToGroupHeader(i),n(d.SECTION_OTHERS)):n(null)})},h.prototype._setSection=function(e){var t=this.getIndexableSections(),n=t.indexOf(e),r=this;return new Promise(function(e){if(-1===n)e(null);else{for(var i=null;n<t.length;n++){var s=t[n],a=r._findGroupHeader(s);if(null!=a){r.listview._scrollToGroupHeader(a),i=s;break}}e(i)}})},h.prototype._findGroupHeader=function(e){var t;return this.listview._getGroupItemsCache().each(function(){return 0!==r(this).text().indexOf(e)||(t=this,!1)}),t},e.ListViewIndexerModel=h,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojindexer.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojlistview',["require","ojs/ojcore-base","jquery","ojs/ojcustomelement","ojs/ojdataproviderscroller","ojs/ojcontext","ojs/ojconfig","ojs/ojthemeutils","ojs/ojcomponentcore","ojs/ojdatacollection-common","ojs/ojanimation","ojs/ojlogger","ojs/ojkeyset","ojs/ojmap","ojs/ojdomutils","ojs/ojdataprovideradapter","ojs/ojcustomelement-utils","ojs/ojindexer"],function(t,e,i,s,n,l,o,r,a,h,c,u,d,m,p,g,_,f){"use strict";var v;e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i,l=l&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l,m=m&&Object.prototype.hasOwnProperty.call(m,"default")?m.default:m,(v={properties:{as:{type:"string",value:""},currentItem:{type:"any",writeback:!0},data:{type:"object",extension:{webelement:{exceptionStatus:[{type:"deprecated",since:"11.0.0",description:"Data sets from a DataProvider cannot be sent to WebDriverJS; use ViewModels or page variables instead."}]}}},display:{type:"string",enumValues:["card","list"],value:"list"},dnd:{type:"object",properties:{drag:{type:"object",properties:{items:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},drag:{type:"function"},dragEnd:{type:"function"},dragStart:{type:"function"}}}}},drop:{type:"object",properties:{items:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},dragEnter:{type:"function"},dragLeave:{type:"function"},dragOver:{type:"function"},drop:{type:"function"}}}}},reorder:{type:"object",properties:{items:{type:"string",enumValues:["disabled","enabled"],value:"disabled"}}}}},drillMode:{type:"string",enumValues:["collapsible","none"],value:"collapsible"},expanded:{type:"KeySet",writeback:!0},firstSelectedItem:{type:"object",writeback:!0,readOnly:!0,value:{key:null,data:null}},gridlines:{type:"object",properties:{item:{type:"string",enumValues:["hidden","visible","visibleExceptLast"],value:"visible"}}},groupHeaderPosition:{type:"string",enumValues:["static","sticky"],value:"sticky"},item:{type:"object",properties:{focusable:{type:"boolean|function",value:!0},renderer:{type:"function"},selectable:{type:"boolean|function",value:!0}}},scrollPolicy:{type:"string",enumValues:["auto","loadAll","loadMoreOnScroll"],value:"auto"},scrollPolicyOptions:{type:"Object<string, number>",properties:{fetchSize:{type:"number",value:25},maxCount:{type:"number",value:500},scroller:{type:"Element|string"}}},scrollPosition:{type:"object",writeback:!0,value:{x:0,y:0},properties:{index:{type:"number"},key:{type:"any"},offsetX:{type:"number"},offsetY:{type:"number"},parent:{type:"any"},x:{type:"number"},y:{type:"number"}}},scrollToKey:{type:"string",enumValues:["always","auto","capability","never"],value:"auto"},selected:{type:"KeySet",writeback:!0},selection:{type:"Array<any>",writeback:!0,value:[]},selectionMode:{type:"string",enumValues:["multiple","none","single"],value:"none"},selectionRequired:{type:"boolean",value:!1},translations:{type:"object",value:{},properties:{accessibleNavigateSkipItems:{type:"string"},accessibleReorderAfterItem:{type:"string"},accessibleReorderBeforeItem:{type:"string"},accessibleReorderInsideItem:{type:"string"},accessibleReorderTouchInstructionText:{type:"string"},indexerCharacters:{type:"string"},labelCopy:{type:"string"},labelCut:{type:"string"},labelPaste:{type:"string"},labelPasteAfter:{type:"string"},labelPasteBefore:{type:"string"},msgFetchingData:{type:"string"},msgItemsAppended:{type:"string"},msgNoData:{type:"string"}}}},methods:{getContextByNode:{},getDataForVisibleItem:{},getIndexerModel:{},getProperty:{},refresh:{},scrollToItem:{},setProperties:{},setProperty:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateEnd:{},ojAnimateStart:{},ojBeforeCollapse:{},ojBeforeCurrentItem:{},ojBeforeExpand:{},ojCollapse:{},ojCopy:{},ojCut:{},ojExpand:{},ojItemAction:{},ojPaste:{},ojReorder:{}},extension:{}}).extension._WIDGET_NAME="ojListView",v.extension._INNER_ELEM="ul",v.extension._GLOBAL_TRANSFER_ATTRS=["aria-label","aria-labelledby"],e.CustomElementBridge.register("oj-list-view",{metadata:v});const y=function(t,e){this.m_widget=t,this.m_root=e};e._registerLegacyNamespaceProp("StaticContentHandler",y),e.Object.createSubclass(y,e.Object,"oj.StaticContentHandler"),y.prototype.Init=function(){y.superclass.Init.call(this)},y.prototype.Destroy=function(){this.m_root.hasAttribute("role")&&(this.restoreContent(this.m_root,0),this.unsetRootAriaProperties())},y.prototype.IsReady=function(){return!0},y.prototype.notifyShown=function(){},y.prototype.notifyAttached=function(){},y.prototype.RenderContent=function(){var t=this.m_root;if(this.shouldUseGridRole()&&this.isCardLayout()&&!this.IsHierarchical()&&i(t).children("li").length>0){i(this.m_root).children().wrapAll("<li role='presentation'><ul role='row' class='"+this.m_widget.getGroupStyleClass()+"'></ul></li>");var e=i(this.m_root).children("li").first().get(0);e.style.width="100%",e.classList.add("oj-listview-group-container"),t=e.firstElementChild}this.modifyContent(t,0),this.setRootAriaProperties(),this.m_widget.renderComplete(!1);var s=this;l.getContext(t).getBusyContext().whenReady().then(function(){if(null!=t)for(var e=i(t).find("li."+s.m_widget.getItemElementStyleClass()),n=0;n<e.length;n++)s.m_widget.disableAllTabbableElements(e[n])})},y.prototype.Expand=function(t,e){var s="."+this.m_widget.getGroupStyleClass(),n=i(t).children(s)[0];i(n).css("display",""),e.call(null,n)},y.prototype.Collapse=function(t){},y.prototype.IsHierarchical=function(){return null==this.m_hier&&(this.m_hier=i(this.m_root).children("li").children("ul").length>0),this.m_hier},y.prototype.restoreContent=function(t,e){var s=this.m_widget.getGroupStyleClass(),n=this.m_widget.getGroupCollapseStyleClass(),l=this.m_widget.getGroupExpandStyleClass(),o=this.m_widget.getGroupItemStyleClass(),r=this.m_widget.getItemStyleClass(),a=this.m_widget.getItemElementStyleClass(),h=null;this.m_widget.getItemLayoutStyleClass&&(h=this.m_widget.getItemLayoutStyleClass());var c=t.firstElementChild;c&&c.classList.contains("oj-listview-group-container")&&i(c).children().unwrap().children().unwrap();for(var u=t.children,d=0;d<u.length;d++){var m=i(u[d]);if(m.hasClass(a)){this.unsetAriaProperties(m.get(0)),m.hasClass("oj-listview-card")&&(m.removeClass("oj-listview-card").removeClass("oj-listview-card-animated"),m[0].style.opacity="unset",m[0].style.transform="unset"),m.removeClass(a).removeClass(r).removeClass(h).removeClass(this.m_widget.getDepthStyleClass(e)).removeClass("gridline-hidden").removeClass("oj-listview-item").removeClass("oj-listview-item-element").removeClass("oj-skipfocus").removeClass("oj-focus").removeClass("oj-hover").removeClass("oj-expanded").removeClass("oj-collapsed").removeClass("oj-selected");var p=m.children("ul");if(p.length>0){m.children("."+o).children().unwrap(),this.shouldUseGridRole()&&this.unsetGroupAriaProperties(m),m.children(".oj-component-icon").remove();var g=i(p[0]);g.removeClass(s).removeClass(l).removeClass(n).removeAttr("role"),this.restoreContent(g[0],e+1)}}}},y.prototype.modifyContent=function(t,e){for(var s=this.m_widget.getItemStyleClass(),n=this.m_widget.getItemElementStyleClass(),l=this.m_widget.getGroupStyleClass(),o=this.m_widget.getGroupItemStyleClass(!0),r=this.m_widget.getGroupCollapseStyleClass(),a=this.m_widget.getCollapseIconStyleClass(),h=this.m_widget.getFocusedElementStyleClass(),c=t.children,u=this.m_widget.isExpandable(),d=0;d<c.length;d++){var m=i(c[d]),p=this.createContext(m);this.setAriaProperties(m,p),m.uniqueId().addClass(n),e>0&&m.addClass(this.m_widget.getDepthStyleClass(e)),this.isFocusable(p)||m.addClass("oj-skipfocus");var g=m.children("ul");if(g.length>0){this.m_hier=!0,m.children(":not(ul)").wrapAll("<div></div>");var _=m.children().first();_.addClass(o);var f=this.getItemsCount(g[0]);if(f>0){if(m.hasClass(h)?(m.removeClass(h),_.addClass(h).attr("aria-expanded","false")):(_.attr("role","presentation"),_.find("."+h).attr("aria-expanded","false")),u){m.addClass("oj-collapsed"),_.uniqueId();var v=document.createElement("a");i(v).attr("href","#").attr("role","button").attr("aria-labelledby",_.get(0).id).addClass("oj-component-icon oj-clickable-icon-nocontext").addClass(a),_.prepend(v)}}else _.addClass("oj-empty");this.shouldUseGridRole()&&this.setGroupAriaProperties(_,f);var y,S=i(g[0]);y=this.shouldUseGridRole()?this.isCardLayout()?"row":"presentation":"group",S.addClass(l).addClass(r).attr("role",y).css("display","none"),this.modifyContent(S[0],e+1)}else m.addClass(s);this.m_widget._isSelectionEnabled()&&this.isSelectable(p)&&this.m_widget.getFocusItem(m).attr("aria-selected",!1),this.m_widget.itemRenderComplete(m[0],p)}},y.prototype.setRootAriaProperties=function(){this.shouldUseGridRole()?this.m_root.setAttribute("role","grid"):this.IsHierarchical()?this.m_root.setAttribute("role","tree"):this.m_root.setAttribute("role","listbox")},y.prototype.unsetRootAriaProperties=function(){this.m_root.removeAttribute("role")},y.prototype.getItemsCount=function(t){return i(t).children("li").length},y.prototype.createContext=function(t){var e={};if(e.key=t.attr("id"),e.parentElement=t.children().first()[0],e.index=t.index(),e.data=t[0],e.component=this.m_widget.getWidgetConstructor(),e=this.m_widget._FixRendererContext(e),this.IsHierarchical()){e.leaf=0===t.children("ul").length;var i=t.parents("li."+this.m_widget.getItemElementStyleClass());e.depth=i.length,0===i.length?e.parentKey=null:e.parentKey=i.first().attr("id")}return e},y.prototype.setAriaProperties=function(t,e){var i=this.m_widget.getSingleFocusableElement(t);this.shouldUseGridRole()?null==e.leaf||e.leaf?this.isCardLayout()?i.attr("role","gridcell"):(t.attr("role","row"),i!==t?i.attr("role","gridcell"):i.children().wrapAll("<div role='gridcell' class='oj-listview-cell-element'></div>")):(t.attr("role","presentation"),i!==t&&i.attr("role","gridcell")):(i.attr("role",this.IsHierarchical()?"treeitem":"option"),i!==t&&t.attr("role","presentation")),i.addClass(this.m_widget.getFocusedElementStyleClass())},y.prototype.setGroupAriaProperties=function(t,e){var i=this.m_widget.getFocusedElementStyleClass();t.get(0).removeAttribute("aria-expanded"),t.removeClass(i),t.attr("role","row"),t.children().wrapAll("<div role='gridcell' aria-expanded='false' class='oj-listview-cell-element "+i+"'></div>"),this.isCardLayout()&&e>1&&t.children().first().attr("aria-colspan",e)},y.prototype.unsetGroupAriaProperties=function(t){t.children("div").first().children().unwrap()},y.prototype.unsetAriaProperties=function(t){h.enableAllFocusableElements(t);var e,s=this.m_widget.getGroupItemStyleClass(!0),n=this.m_widget.getFocusedElementStyleClass(),l=t.firstElementChild;if(l&&i(l).hasClass(s)){if(0===(e=i(l).children("."+n).first()).length)return}else e=this.m_widget.getSingleFocusableElement(i(t));e.removeAttr("role"),e.removeAttr("aria-selected"),e.removeAttr("aria-expanded"),e.removeClass(this.m_widget.getFocusedElementStyleClass()),this.shouldUseGridRole()&&!this.isCardLayout()&&(e!==t?(i(t).removeAttr("role"),e.children().first().children().unwrap()):e.children().first().children().unwrap().children().unwrap())},y.prototype.GetKey=function(t){return i(t).attr("id")},y.prototype.FindElementByKey=function(t){return document.getElementById(t)},y.prototype.isFocusable=function(t){return this.m_widget.getItemFocusable(t)},y.prototype.isSelectable=function(t){return this.m_widget.getItemSelectable(t)},y.prototype.isCardLayout=function(){return this.m_widget.isCardLayout()},y.prototype.shouldUseGridRole=function(){return this.m_widget.ShouldUseGridRole()},y.prototype.createKeyMap=function(t){var e=new m;return t?(t.forEach(function(t,i){e.set(i,t)}),e):e},y.prototype.createKeySet=function(t){return new d.KeySet(t)};const S=function(t,e,i){S.superclass.constructor.call(this,t,e,i)};e._registerLegacyNamespaceProp("TreeDataProviderContentHandler",S),e.Object.createSubclass(S,n.DataProviderContentHandler,"oj.TreeDataProviderContentHandler"),S.NUM_CHILD_SKELETONS=3,S.prototype.Init=function(){S.superclass.Init.call(this),this.m_childDataProviders=new m,this.m_fetchCalls=new Set},S.prototype.IsHierarchical=function(){return!0},S.prototype._getChildDataProvider=function(t){if(null===t)return this.getDataProvider();var e=this.m_childDataProviders.get(t);return null==e&&(e=this.getDataProvider().getChildDataProvider(t))&&this.m_childDataProviders.set(t,e),e},S.prototype.fetchRows=function(t){this.signalTaskStart("fetching rows"),S.superclass.fetchRows.call(this,t),this.m_fetchCalls.clear(),this._fetchChildren(null,this.m_root,null),this.signalTaskEnd()},S.prototype._fetchChildren=function(t,e,s,n){var l=this;this.signalTaskStart("fetching children from parent: "+t);var o=this.loadTemplateEngine();if(null!=t){var r=e.parentNode.firstElementChild.firstElementChild.firstElementChild;if(r){r=i(r);var a=this.m_widget.getCollapseIconStyleClass();if(r.hasClass(a)){var h=this.isSkeletonSupport()?this.m_widget.getExpandIconStyleClass():this.m_widget.getExpandingIconStyleClass();r.removeClass(a).addClass(h)}}}this.m_fetching=!0,null!=t&&this.m_fetchCalls.add(t),this._clientId=this._clientId||Symbol();var c={clientId:this._clientId,size:-1};this.signalTaskStart("first fetch");var u=this._getChildDataProvider(t).fetchFirst(c)[Symbol.asyncIterator](),d=u.next(),m=function(i){return i[0].done?i:u.next().then(function(t){return i[0].done=t.done,i[0].value.data=i[0].value.data.concat(t.value.data),i[0].value.metadata=i[0].value.metadata.concat(t.value.metadata),m(i)},function(i){null!=t&&l.m_fetchCalls.delete(t),n&&n(i),l._handleFetchError(i,e),l.signalTaskEnd()})};Promise.all([d,o]).then(function(t){return m(t)},function(i){null!=t&&l.m_fetchCalls.delete(t),l._handleFetchError(i,e),l.signalTaskEnd()}).then(function(i){if(i){if(null==l.m_widget)return void l.signalTaskEnd();var n=i[0],o=i[1];o&&l.cleanItems(o,e),l._handleFetchSuccess(n,t,e,s,o),l.signalTaskEnd()}}),this.signalTaskEnd()},S.prototype._getAtomicFetchChildPromise=function(){var t=this;return new Promise(function(e,i){t.m_fetchResolve=e})},S.prototype._handleFetchSuccess=function(t,e,s,n,l){var o=this;if(null!=this.m_widget&&null!=t.value){this.signalTaskStart("handling successful fetch"),this.m_fetching=!1,null!=e&&this.m_fetchCalls.delete(e);var r=t.value.data,a=t.value.metadata.map(function(t){return t.key}),h=t.value.metadata;if(r.length===a.length){for(var c=0,u=document.createDocumentFragment(),d=0;d<r.length;d++){var m=r[d];this.addItem(u,-1,m,this.getMetadata(c,a[d],m,s),l,null,h[d]),c+=1}if(null==this.m_fetchResolve&&this.shouldUseGridRole()?this.m_fetchCalls.size>0?(this.m_widget.signalTaskStart("Animating in content"),this._getAtomicFetchChildPromise().then(function(){this.animateShowContent(s,u,!0).then(function(){this.m_widget&&this.m_widget.signalTaskEnd(),g()}.bind(this))}.bind(this))):(this.m_widget.signalTaskStart("Animating in content"),this.animateShowContent(s,u,!0).then(function(){this.m_widget&&this.m_widget.signalTaskEnd(),g()}.bind(this))):(i(s).empty(),s.appendChild(u),this.shouldUseGridRole()?null!=n&&n.call(null,s):g()),this.shouldUseGridRole()&&this.isCardLayout()&&null!=e&&c>0){var p=s.parentNode.firstElementChild.firstElementChild;i(p).attr("aria-colspan",c+1)}}0===this.m_fetchCalls.size&&null!=this.m_fetchResolve&&(this.m_fetchResolve(),this.m_fetchResolve=null),this.m_initialized=!0,this.signalTaskEnd()}function g(){o.m_widget&&(null!=n&&n.call(null,s),o.m_widget.renderComplete(!1),o._processEventQueue())}},S.prototype.getMetadata=function(t,e,i,s){var n=S.superclass.getMetadata.call(this,t,e,i,s),l=this._getChildDataProvider(e);n.leaf=null===l,n.parentKey=null,s&&s!==this.m_root&&s.parentElement&&(n.parentKey=this.GetKey(s.parentElement));for(var o=0,r=s;r&&r!==this.m_root;)r=r.parentElement.parentElement,o+=1;return n.depth=o,n},S.prototype.GetBindingContext=function(t){var e=S.superclass.GetBindingContext.call(this,t);return e.depth=t.depth,e.leaf=t.leaf,e.parentKey=t.parentKey,e},S.prototype.afterRenderItem=function(t,e,s){this.signalTaskStart("after rendering an item"),S.superclass.afterRenderItem.call(this,t,e,s);var n=this.m_widget.getGroupStyleClass(),l=this.m_widget.getItemStyleClass(),o=this.m_widget.getGroupItemStyleClass(!0),r=this.m_widget.getGroupCollapseStyleClass(),a=this.m_widget.getCollapseIconStyleClass(),h=this.m_widget.getFocusedElementStyleClass();if(t=i(t),!1===e.leaf){t.children().wrapAll("<div></div>"),t.hasClass(h)?t.removeClass(h).children().first().addClass(h).attr("aria-expanded","false"):t.children().first().attr("role","presentation").find("."+h).attr("aria-expanded","false");var c=t.children().first();if(c.uniqueId().addClass(o),this.m_widget.isExpandable()){t.addClass("oj-collapsed");var u=document.createElement("a");i(u).attr("href","#").attr("aria-labelledby",c.get(0).id).addClass("oj-component-icon oj-clickable-icon-nocontext").addClass(a),c.prepend(u)}this.shouldUseGridRole()&&(c.get(0).removeAttribute("aria-expanded"),c.removeClass(h),c.attr("role","row"),c.children().wrapAll("<div role='gridcell' aria-expanded='false' class='oj-listview-cell-element "+h+"'></div>"));var d,m=document.createElement("ul");d=this.shouldUseGridRole()?this.isCardLayout()?"row":"presentation":"group",i(m).addClass(n).addClass(r).attr("role",d),t.append(m)}else!0===e.leaf&&(t.addClass(l),!s&&this.m_widget.getItemLayoutStyleClass&&t.addClass(this.m_widget.getItemLayoutStyleClass()));this.m_widget._isSelectionEnabled()&&this.isSelectable(e)&&this.m_widget.getFocusItem(t).attr("aria-selected",!1),e.depth>0&&t.addClass(this.m_widget.getDepthStyleClass(e.depth)),this.m_widget.itemRenderComplete(t[0],e),this.signalTaskEnd()},S.prototype._handleFetchError=function(t,e){if(null!=this.m_widget){u.error(t),this.m_fetching=!1,e&&this._destroySkeletons(e);var i=this.m_root.querySelector(".oj-listview-initial-skeletons");null!=i&&i.parentNode.removeChild(i),0===this.m_fetchCalls.size&&null!=this.m_fetchResolve&&(this.m_fetchResolve(),this.m_fetchResolve=null),this.m_widget.renderComplete(!0)}else u.info("handleFetchError: widget has already been destroyed")},S.prototype.Expand=function(t,e){this.signalTaskStart("expanding an item");var i,s=this.GetKey(t[0]),n=t.children("ul")[0];this.isSkeletonSupport()&&(i=setTimeout(function(){this._renderExpandSkeletons(n)}.bind(this),this.m_widget._getShowStatusDelay())),this._fetchChildren(s,n,function(t){i&&clearTimeout(i),e(t),n.classList.remove("oj-listview-skeleton-container")},function(){this._handleFetchError()}.bind(this)),this.signalTaskEnd()},S.prototype.Collapse=function(t){var e=this.getTemplateEngine();e&&e.clean(t.get(0)),t.empty()},S.prototype.addItemsForModelInsert=function(t,e,i,s,n,l,o){for(var r=this.getTemplateEngine(),a=0;a<t.length;a++){this.signalTaskStart("handling model add event for item: "+i[a]);var h,c=this.m_root;void 0!==s&&(c=null==s[a]?this.m_root:this.FindElementByKey(s[a]))&&c!==this.m_root&&(c=c.lastElementChild),null!=e?h=e[a]:(h=this.getIndex(l,a))>-1&&(h=n?h:h+1),this.addItem(c,h,t[a],this.getMetadata(h,i[a],t[a],c),r,this.afterRenderItemForInsertEvent.bind(this),null!=o?o[a]:null),this.signalTaskEnd()}this.m_widget.renderComplete(!0)},S.prototype.afterRenderItemForInsertEvent=function(t,e,i){!1===e.leaf?this.afterRenderItem(t,e,i):S.superclass.afterRenderItemForInsertEvent.call(this,t,e,i)},S.prototype.removeItem=function(t){var e=t.key;e&&this.m_childDataProviders.delete(e),S.superclass.removeItem.call(this,t)},S.prototype.replaceItem=function(t,e,i,s,n,l,o){var r=t.key;r&&this.m_childDataProviders.delete(r),S.superclass.replaceItem.call(this,t,e,i,s,n,l,o)},S.prototype.handleModelRefreshEvent=function(t){null!=this.m_root&&(this.IsReady()?(this.signalTaskStart("handling model refresh event"),this._clearEventQueue(),this.m_widget.ClearCache(!0),this.m_childDataProviders.clear(),this.m_widget.resetFocusBeforeRefresh(),this.fetchRows(!0),this.signalTaskEnd()):this._pushToEventQueue({type:t.type,event:t}))},S.prototype.renderInitialSkeletons=function(){this.m_superRoot&&(this.m_root=this.m_superRoot,this.m_superRoot=null),i(this.m_root).empty();var t=this.getRootElementHeight(),e=this.getDefaultSkeletonDimension(),s=0;if(e.width>0&&e.height>0){var n=e.height*(1+S.NUM_CHILD_SKELETONS);s=Math.ceil(t/n)}var l=document.createElement("li");l.setAttribute("role","presentation"),l.classList.add("oj-listview-initial-skeletons");var o=document.createElement("ul");o.setAttribute("role","presentation"),o.classList.add(this.m_widget.getGroupStyleClass()),o.classList.add("oj-listview-skeleton-container");for(var r=0;r<s;r++){o.appendChild(this.createSkeletonItem());var a=document.createElement("li");a.setAttribute("role","presentation");var h=document.createElement("ul");h.setAttribute("role","presentation"),h.classList.add("oj-listview-child-skeleton"),a.appendChild(h),h.appendChild(this.createSkeletonItem()),h.appendChild(this.createSkeletonItem()),h.appendChild(this.createSkeletonItem()),o.appendChild(a)}l.appendChild(o),this.m_root.appendChild(l)},S.prototype._renderExpandSkeletons=function(t){t.style.maxHeight="none";for(var e=0;e<S.NUM_CHILD_SKELETONS;e++)t.appendChild(this.createSkeletonItem());t.classList.add("oj-listview-skeleton-container"),t.setAttribute("data-oj-initial-height",this._getExpandSkeletonHeight(t))},S.prototype._destroySkeletons=function(t){i(t).empty(),t.classList.remove("oj-listview-skeleton-container")},S.prototype._getExpandSkeletonHeight=function(t){return null!=this.m_expandSkeletonHeight&&0!==this.m_expandSkeletonHeight||(this.m_expandSkeletonHeight=t.offsetHeight),this.m_expandSkeletonHeight};var C=function(){this.createKeyMap=function(t){var e=new m;return t?(t.forEach(function(t,i){e.set(i,t)}),e):e},this.createKeySet=function(t){return new d.KeySet(t)}};C.call(y.prototype),C.call(S.prototype),C.call(n.IteratingDataProviderContentHandler.prototype);const E=function(){E.superclass.constructor.call(this)};e._registerLegacyNamespaceProp("_ojListViewExpandedKeySet",E),e.Object.createSubclass(E,e.ExpandedKeySet,"ListViewExpandedKeySet");const I=function(t,s){var n=function(){};return e.Object.createSubclass(n,t,""),n.prototype=i.extend(n.prototype,s),n}(Object,{LEFT_KEY:37,RIGHT_KEY:39,DOWN_KEY:40,UP_KEY:38,TAB_KEY:9,ENTER_KEY:13,ESC_KEY:27,F2_KEY:113,SPACE_KEY:32,STATE_EXPANDED:0,STATE_COLLAPSED:1,STATE_NONE:2,MINIMUM_ITEM_HEIGHT:20,init:function(t){var s=this;this.readinessStack=[],this.element=t.element,this.ojContext=t.ojContext,this.OuterWrapper=t.OuterWrapper,this.options=t,this.element.uniqueId().addClass(this.GetStyleClass()+" oj-component-initnode"),this.OuterWrapper&&this.element[0].setAttribute("data-oj-context",""),this.signalTaskStart("Initializing"),this._rootTabIndexSet=!1,this.SetRootElementTabIndex();var n=this.GetDnDContext();n&&(this.m_dndContext=n,this.ojContext._on(this.element,{dragstart:function(t){return n._handleDragStart(t)},dragenter:function(t){return n._handleDragEnter(t)},dragover:function(t){return n._handleDragOver(t)},dragleave:function(t){return n._handleDragLeave(t)},dragend:function(t){return s.m_preActive=!1,n._handleDragEnd(t)},drag:function(t){return n._handleDrag(t)},drop:function(t){return s.m_preActive=!1,n._handleDrop(t)}})),this._touchStartListener=function(t){t.originalEvent||(t=i.Event(t)),s.touchStartEvent=t,s.HandleMouseDownOrTouchStart(t)},this.ojContext._IsCustomElement()?this.element[0].addEventListener("touchstart",this._touchStartListener,{passive:!0}):this.ojContext._on(this.element,{touchstart:this._touchStartListener}),this.ojContext._on(this.element,{click:function(t){s.HandleMouseClick(t),s.touchStartEvent=null},touchend:function(t){s.touchStartEvent&&t.changedTouches.length&&(document.elementFromPoint(t.changedTouches[0].clientX,t.changedTouches[0].clientY)!==s.touchStartEvent.target&&(s.touchStartEvent=null));s.HandleTouchEndOrCancel(t)},touchcancel:function(t){s.touchStartEvent=null,s.HandleTouchEndOrCancel(t)},mousedown:function(t){0===t.button?s._recentTouch()||s.HandleMouseDownOrTouchStart(t):s.m_preActive=!0},mouseup:function(t){s._handleMouseUpOrPanMove(t),s.m_preActive=!1},mouseout:function(t){s._handleMouseOut(t)},mouseover:function(t){s._handleMouseOver(t)},keydown:function(t){s.HandleKeyDown(t)},keyup:function(t){s.HandleKeyUp(t)},ojpanmove:function(t){s._handleMouseUpOrPanMove(t)}}),this.ojContext._on(this.ojContext.element,{focus:function(t){s.HandleFocus(t)},blur:function(t){s.HandleBlur(t)}}),e.AgentUtils.getAgentInfo().browser===e.AgentUtils.BROWSER.FIREFOX&&this._isComponentFocusable()&&(this._rootTabIndexSet=!0,this.getListContainer().attr("tabIndex",-1)),this.ojContext._on(this.ojContext.element,{focusin:function(t){s.HandleFocus(t)},focusout:function(t){s.HandleFocusOut(t)}}),this.ojContext._focusable({applyHighlight:s.ShouldApplyHighlight(),recentPointer:s.RecentPointerCallback(),setupHandlers:function(t,e){s._focusInHandler=t,s._focusOutHandler=e}})},isAvailable:function(){return null!=this.m_contentHandler},_initContentHandler:function(){this.signalTaskStart("Initialize ContentHandler");var t=this,e=function(e){t.m_contentHandler=e,e.RenderContent(),t.signalTaskEnd(),t._registerResizeListener(t.getListContainer()[0]),t._registerScrollHandler()},i=this.GetOption("data");null!=i?this.CreateDataContentHandler(i).then(e,function(){t.signalTaskEnd()}):(this._removeNoData(),e(new y(this,this.element[0])))},setupResources:function(){this.ojContext.document.bind("touchend.ojlistview touchcancel.ojlistview",this.HandleTouchEndOrCancel.bind(this)),this._syncSelectionWithKeySet(),this._initContentHandler(),this._updateGridlines()},releaseResources:function(){this.ojContext.document.off(".ojlistview"),this.DestroyContentHandler(!0),this._unregisterResizeListener(this.getListContainer()),this._unregisterScrollHandler(),this._resetState()},_isSelectedOptionExposed:function(){return this.ShouldUseGridRole()},_syncSelectionWithKeySet:function(){var t=this.GetOption("selection"),e=this.GetOption("selected");if(this._isSelectedOptionExposed()&&e&&(e.isAddAll()||e.values&&e.values().size>0))return t=[],e.isAddAll()?(t.inverted=!0,e.deletedValues().forEach(function(e){t.push(e)})):e.values().forEach(function(e){t.push(e)}),void this.SetOption("selection",t,{_context:{internalSet:!0},changed:!0});var i=!1;null==e&&(e=new d.KeySetImpl,i=!0),t.length>0&&e.values&&0===e.values().size&&(e=e.add(t),i=!0),i&&this.SetOption("selected",e,{_context:{internalSet:!0},changed:!0})},afterCreate:function(){this._buildList(),this.signalTaskEnd()},_isAnimateCards:function(){return this.isCardDisplayMode()&&this.m_contentHandler&&!this.m_contentHandler.IsHierarchical()},refresh:function(){var t=this.element[0].querySelectorAll(".oj-listview-card");if(t.length>0){var e=this;this.signalTaskStart("Exit animation"),this._applyExitAnimation(t).then(function(){e._refresh(),e.signalTaskEnd()})}else this._refresh()},_applyExitAnimation(t){var e,i=this;return t.forEach(function(t){e=i.StartAnimation(t,"cardExit")}),e},_refresh:function(){this._resetInternal(),this.signalTaskStart("Refresh"),this.SetAriaProperties(),this._initContentHandler(),this._updateGridlines(),this.resetFocusBeforeRefresh(),this.signalTaskEnd()},resetFocusBeforeRefresh:function(){this.element[0].contains(document.activeElement)&&(this.m_active=null,this.SetRootElementTabIndex(),this.element[0].focus())},whenReady:function(){return this.readyPromise},destroy:function(){this.element.removeClass(this.GetStyleClass()+" oj-component-initnode"),this._unregisterResizeListener(this.getListContainer()),this._resetInternal(),p.unwrap(this.element,this.getListContainer())},_isScrollToKey:function(){var t=this.GetOption("scrollToKey");if("never"===t)return!1;if("always"===t)return!0;var i=this.GetOption("data");if(!e.DataProviderFeatureChecker.isDataProvider(i))return!0;if(i.getCapability){var s=i.getCapability("fetchFirst");if(s&&"immediate"===s.iterationSpeed)return!0}return!1},adjustScrollPositionValueOnFetch:function(){var t=null==this.GetOption("scrollPosition")?{}:this.GetOption("scrollPosition"),e=this.GetOption("selection");this._isSelectionEnabled()&&e.length>0&&this._isScrollToKey()?null!=this.m_selectionFrontier&&this.m_selectionFrontier.length>0?t.key=this.GetKey(this.m_selectionFrontier[0]):t.key=e[0]:(t.y=0,t.key=null,t.index=0),t.x=0,t.offsetX=0,t.offsetY=0,this.SetOption("scrollPosition",t,{_context:{internalSet:!0},changed:!1})},_clearBusyState:function(){if(this.readinessStack&&this.readinessStack.length>0)for(u.warn("ListView did not end with a clean state, this could happen if ListView is detached before fetch is complete.  State: "+this.readinessStack);this.readinessStack.length>0;)this.signalTaskEnd()},_resetInternal:function(){this.UnsetAriaProperties(),this._cleanupTabbableElementProperties(this.element),this.DestroyContentHandler(),this._resetState()},_resetState:function(){this.m_active=null,this.m_isExpandAll=null,this.m_disclosing=null,this.m_itemHeight=null,this.m_keyElemMap=null,this.m_clientHeight=null,this.m_scrollHeight=null,this.m_clientWidth=null,this.m_scrollWidth=null,this.m_closestParent=null,this.m_gridlinesVisible=null,this.m_gridlinePlaceholder=null,this.m_scroller=null,this.m_initialSelectionStateValidated=null,this.m_validatedSelectedKeyData=null,this.ClearCache(),this._clearFocusoutTimeout(),this._clearFocusoutBusyState(),this._clearScrollPosBusyState(),null!=this.m_dndContext&&this.m_dndContext.reset()},notifyAttached:function(){null!=this.m_contentHandler&&this.m_contentHandler.IsReady()&&(this.syncScrollPosition(),this.m_contentHandler.notifyAttached())},notifyDetached:function(){this.getListContainer().removeClass("oj-focus-ancestor"),null!=this.m_active&&i(this.m_active.elem).removeClass("oj-focus oj-focus-highlight"),null!=this.m_hoverItem&&this._unhighlightElem(this.m_hoverItem,"oj-hover")},notifyShown:function(){null!=this.m_contentHandler&&(this.syncScrollPosition(),this.m_contentHandler.notifyShown())},getNodeBySubId:function(t){var e;if(null==t)return this.element[0];var s=t.subId;if("oj-listview-disclosure"===s||"oj-listview-icon"===s){if(null!=(e=t.key)){var n=this.FindElementByKey(e);if(null!=n){var l=i(n).find(".oj-clickable-icon-nocontext").first();if(this._isExpandCollapseIcon(l))return l.get(0)}}}else if("oj-listview-item"===s&&null!=(e=t.key))return this.FindElementByKey(e);return null},getSubIdByNode:function(t){if(null!=t&&this._isExpandCollapseIcon(t)){var e=this.FindItem(t);if(null!=e&&e.length>0){var i=this.GetKey(e[0]);if(null!=i)return{subId:"oj-listview-disclosure",key:i}}}return null},getContextByNode:function(t){var e=this.FindItem(t);if(null!=e&&e.length>0){var i=this.GetKey(e[0]);if(null!=i){var s=e.parent(),n={subId:"oj-listview-item",key:i,index:s.children("."+this.getItemElementStyleClass()).index(e)};return s.get(0)!==this.element.get(0)&&(n.parent=s.parent().get(0)),e.children().first().hasClass(this.getGroupItemStyleClass())?n.group=!0:n.group=!1,n}}return null},getDataForVisibleItem:function(t){var e,s=t.key;if(null!=s&&(e=this.FindElementByKey(s)),null==e){var n=t.index,l=t.parent;l=null==l?this.element.get(0):i(l).children("ul."+this.getGroupStyleClass()).first(),e=i(l).children("li").get(n)}return null!=e&&i(e).hasClass(this.getItemStyleClass())?this._getDataForItem(e):null},_getDataForItem:function(t){return null==this.GetOption("data")?t:i.data(t,"data")},_getMetadataForItem:function(t){return i.data(t,"metadata")},ShouldRegisterResizeListener:function(t){return t&&this.m_contentHandler&&this.m_contentHandler.HandleResize&&this.m_contentHandler.shouldHandleResize&&this.m_contentHandler.shouldHandleResize()},_unregisterResizeListener:function(t){t&&this._resizeHandler&&p.removeResizeListener(t,this._resizeHandler)},_registerResizeListener:function(t){this._unregisterResizeListener(t),this.ShouldRegisterResizeListener(t)&&(null==this._resizeHandler&&(this._resizeHandler=this.HandleResize.bind(this)),p.addResizeListener(t,this._resizeHandler))},disableResizeListener:function(){var t=this.getListContainer()[0];this._unregisterResizeListener(t)},enableResizeListener:function(){var t=this.getListContainer()[0];this._registerResizeListener(t)},GetDnDContext:function(){var t=this.GetOption("dnd");if(!(null===t||null===t.drag&&null===t.drop&&t.reorder&&"disabled"===t.reorder.items))return void 0!==e.ListViewDndContext?new e.ListViewDndContext(this):void 0},HandleResize:function(t,e){t>0&&e>0&&null!=this.m_contentHandler&&this.m_contentHandler.HandleResize&&this.m_contentHandler.HandleResize(t,e),this.m_clientHeight=null,this.m_scrollHeight=null,this.m_clientWidth=null,this.m_scrollWidth=null},ShouldApplyHighlight:function(){return!0},RecentPointerCallback:function(){return function(){return!1}},ShouldRefresh:function(t){return null!=t.data||null!=t.drillMode||null!=t.groupHeaderPosition||null!=t.item||null!=t.scrollPolicy||null!=t.scrollPolicyOptions||null!=t.gridlines||null!=t.display},_isKeySet:function(t){return void 0!==t.isAddAll&&(void 0!==t.values||void 0!==t.deletedValues)},_shouldExpand:function(t,e){return this._isKeySet(e)?e.has(t):!this.ojContext._IsCustomElement()&&"all"===e||!!Array.isArray(e)&&e.indexOf(t)>-1},setOptions:function(t,e){if(this.ShouldRefresh(t))return!0;if(null!=t.expanded&&this.m_contentHandler.IsHierarchical()){this._collapsedKeys=void 0;var s=t.expanded;this.signalTaskStart("Set expanded option"),this._ignoreExpanded=!0;try{for(var n="."+this.getGroupItemStyleClass(),l=this.element.find(n),o=0;o<l.length;o++){var r=l[o],a=this.GetKey(r.parentNode);this._shouldExpand(a,s)?this.expandKey(a,!0,!0,!0,!1):this.collapseKey(a,!0,!0,!1)}}finally{this._ignoreExpanded=void 0,this.signalTaskEnd()}}if(null!=t.currentItem){var h=this.FindElementByKey(t.currentItem);if(null!=h&&(h=i(h),!this.SkipFocus(h))){var c=document.activeElement;c&&this.element.get(0).contains(c)?this.ActiveAndFocus(h,null):this._setActive(h,null,!0)}}else null===t.currentItem&&(this.UnhighlightActive(),this.m_active&&this.m_active.elem&&this.m_active.elem.get(0).classList.remove("oj-listview-current-item"),this.m_active=null,this.SetRootElementTabIndex());if(this.HandleSelectionOption(t),null!=t.selectionMode&&(this.SetAriaProperties(),this.UpdateItemAriaProperties(t.selectionMode)),null!=t.scrollTop){var u=this._getScroller(),d=t.scrollTop;null==d||isNaN(d)||(u.scrollTop=d)}return null!=t.scrollPosition&&(this.syncScrollPosition(t.scrollPosition),delete t.scrollPosition),this._shouldDragSelectedItems()&&null!=this.m_active&&null!=t.dnd&&null!=t.dnd.reorder&&("enabled"===t.dnd.reorder.items?this.m_dndContext._setItemDraggable(this.m_active.elem):"disabled"===t.dnd.reorder.items&&this.m_dndContext._unsetItemDraggable(this.m_active.elem)),!1},_isFirstSelectedItem:function(t){var i=this.GetOption("firstSelectedItem");return i&&e.KeyUtils.equals(i.key,t)},_setFirstSelectedItem:function(t,e){var i={key:t,data:e};this.SetOption("firstSelectedItem",i,{_context:{originalEvent:null,internalSet:!0},changed:!0})},_updateFirstSelectedItem:function(t){var e;if(t.isAddAll())for(var i=this._getItemsCache(),s=0;s<i.length;s++){var n=this.m_contentHandler.GetKey(i[s]);if(t.has(n)){e=n;break}}else e=t.values().values().next().value;if(null!=e){var l=this._getLocalData(e);this._setFirstSelectedItem(e,l)}},updateSelectedKeyData:function(t,e){this._isFirstSelectedItem(t)&&this._setFirstSelectedItem(t,e),this.m_validatedSelectedKeyData&&this.m_validatedSelectedKeyData.has(t)&&this.m_validatedSelectedKeyData.set(t,e)},HandleSelectionOption:function(t){if(null!=t.selection||null!=t.selected){var e=t.selected;if(null!=e&&e.isAddAll()){for(var i=this._getItemsCache(),s=0;s<i.length;s++){var n=this.m_contentHandler.GetKey(i[s]);e.has(n)?this._applySelection(i[s],n):this._unhighlightElem(i[s],"oj-selected")}t.selection=d.KeySetUtils.toArray(e)}else{var l,o=null!=e?e.values():t.selection,r=this._cloneSelection(o);if(this._validateAndUpdateSelection(r),t.selection=r,e=(e=(e=this.GetOption("selected")).clear()).add(r),t.selected=e,this.m_selectionFrontier){var a=this.GetKey(this.m_selectionFrontier.get(0));l=e.has(a)?this.m_selectionFrontier:void 0}this._clearSelection(!1,l);for(var h=0;h<r.length;h++){var c=this.FindElementByKey(r[h]);null!=c&&this._applySelection(c,r[h])}}null!=e&&this._updateFirstSelectedItem(e)}},Trigger:function(t,e,i){return this.ojContext._trigger(t,e,i)},SetOption:function(t,e,i){this.ojContext.option(t,e,i)},GetOption:function(t){return this.ojContext.option(t)},_getBusyDescription:function(t){return"The component identified by '"+(this.ojContext._IsCustomElement()?this.GetRootElement().attr("id"):this.element.attr("id"))+"', "+t},signalTaskStart:function(t){var e=this;if(this.readinessStack){if(0===this.readinessStack.length){this.readyPromise=new Promise(function(t){e.readyResolve=t});var i=l.getContext(this.element[0]).getBusyContext(),s=null!=t?{description:this._getBusyDescription(t)}:{};e.busyStateResolve=i.addBusyState(s)}this.readinessStack.push(null!=t?t:"unknown task")}},signalTaskEnd:function(){this.readinessStack&&this.readinessStack.length>0&&(this.readinessStack.pop(),0===this.readinessStack.length&&(this.readyResolve(null),this.busyStateResolve(null),this.busyStateResolve=null))},isReady:function(){return null==this.busyStateResolve},throwError:function(t){if(this.readinessStack)for(;this.readinessStack.length>0;)this.signalTaskEnd();throw t},getItems:function(t){var e=this,s=[];return i.each(t,function(t,i){var n=e.FindElementByKey(i);null!=n&&s.push(n)}),s},isCardDisplayMode:function(){return"card"===this.GetOption("display")},isCardLayout:function(){return!!(this.ojContext._IsCustomElement()?this.GetRootElement():this.element).hasClass("oj-listview-card-layout")||this.isCardDisplayMode()},ShouldUseGridRole:function(){return!0},ShouldUpdateScrollPosition:function(){return this.ShouldUseGridRole()&&this.ojContext._IsCustomElement()},DestroyContentHandler:function(t){null!=this.m_contentHandler&&(this.m_contentHandler.Destroy(t),delete this.m_contentHandler,this.m_contentHandler=null),this._clearBusyState()},CreateDataContentHandler:function(i){var s;if(this.showStatusText(),void 0!==e.TableDataSource&&i instanceof e.TableDataSource)s=new n.IteratingDataProviderContentHandler(this,this.element[0],new e.TableDataSourceAdapter(i));else{if(void 0!==e.TreeDataSource&&i instanceof e.TreeDataSource){var l=new Promise(function(e,i){t(["ojs/ojtreedataprovideradapter"],function(t){e(function(t){if(t&&t.__esModule)return t;var e={};return t&&Object.keys(t).forEach(function(i){var s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:function(){return t[i]}})}),e.default=t,e}(t))},i)});if(!l)throw new Error("Error adapting a TreeDataSource");return l.then(t=>new S(this,this.element[0],new t.default(i)))}e.DataProviderFeatureChecker.isTreeDataProvider(i)?s=new S(this,this.element[0],i):e.DataProviderFeatureChecker.isDataProvider(i)?s=new n.IteratingDataProviderContentHandler(this,this.element[0],i):this.throwError("Invalid data or missing module")}return Promise.resolve(s)},UpdateActiveDescendant:function(t){this.element.attr("aria-activedescendant",t.attr("id"))},SetAriaProperties:function(){this._isMultipleSelection()?this.element.attr("aria-multiselectable",!0):this._isSelectionEnabled()&&this.element.attr("aria-multiselectable",!1)},UnsetAriaProperties:function(){this.element.removeAttr("aria-activedescendant").removeAttr("aria-multiselectable")},UpdateItemAriaProperties:function(t){var e,s=this;"none"===t?(this.element.removeAttr("aria-multiselectable"),e=function(t){s.getFocusItem(t).removeAttr("aria-selected")}):("single"===t?this.element.attr("aria-multiselectable",!1):this.element.attr("aria-multiselectable",!0),e=function(t){var e=s.getFocusItem(t),i=e.parent();e.attr("aria-selected",i.hasClass("oj-selected"))});for(var n=this._getItemsCache(),l=0;l<n.length;l++)e(i(n[l]))},_buildList:function(t){var e=this.getListContainer();this.SetAriaProperties(),this.m_elementOffset=this.element.get(0).offsetTop;var i=this._buildStatus();e.append(i),this.m_status=i;var s=this._buildAccInfo();e.append(s),this.m_accInfo=s,this._isTouchSupport()&&null!=this.m_dndContext&&e.append(this._buildAccInstructionText())},_buildStatus:function(){var t=i(document.createElement("div"));t.addClass("oj-icon").addClass(this.getLoadingStatusIconStyleClass());var e=i(document.createElement("div"));return e.addClass(this.getStatusMessageStyleClass()).addClass(this.getStatusStyleClass()).attr({id:this._createSubId("status"),role:"status"}),e.append(t),e},_buildAccInfo:function(){var t=i(document.createElement("div"));return t.addClass("oj-helper-hidden-accessible").attr({id:this._createSubId("info"),role:"status"}),t},_buildAccInstructionText:function(){var t=i(document.createElement("div"));return t.addClass("oj-helper-hidden-accessible").attr({id:this._createSubId("instr")}),t.text(this.ojContext.getTranslatedString("accessibleReorderTouchInstructionText")),t},_setAccInfoText:function(t){""!==t&&this.m_accInfo.text()!==t&&this.m_accInfo.text(t)},updateStatusFetchStart:function(){var t=this.ojContext.getTranslatedString("msgFetchingData");this._setAccInfoText(t)},updateStatusFetchEnd:function(t){var e=this.ojContext.getTranslatedString("msgItemsAppended",{count:t});this._setAccInfoText(e)},isSkeletonSupport:function(){return!(!this.ShouldUseGridRole()||!this.m_contentHandler.renderInitialSkeletons)&&"skeleton"===this._getOptionDefaults().loadIndicator},_showLoadingIcon:function(){var t=this.ojContext.getTranslatedString("msgFetchingData"),e=this.getListContainer();this.m_status.attr("aria-label",t).css("left",Math.max(0,e.outerWidth()/2-this.m_status.outerWidth()/2)).css("top",Math.max(0,e.outerHeight()/2-this.m_status.outerHeight()/2)).show();var i=this.m_status.get(0).offsetHeight,s=e.get(0).offsetHeight,n=e.get(0).style.minHeight,l=parseInt(n,10);isNaN(l)&&(l=0),s<i&&l<i&&(e.css("minHeight",Math.max(s,i+this.getListContainerBorderWidth())),isNaN(l)||e.get(0).setAttribute("data-oj-min-height",n))},_showLoadingSkeleton:function(){this.m_contentHandler.renderInitialSkeletons()},showStatusText:function(){var t=this;this.m_showStatusTimeout||(this.m_showStatusTimeout=setTimeout(function(){i(document.getElementById(t._createSubId("empty"))).remove(),null!=t.m_contentHandler&&(t.isSkeletonSupport()?t._showLoadingSkeleton():t._showLoadingIcon()),t.m_showStatusTimeout=null},this._getShowStatusDelay()))},_getShowStatusDelay:function(){var t=this._getOptionDefaults(),e=p.getCSSTimeUnitAsMillis(t.showIndicatorDelay);return isNaN(e)?0:e},hideStatusText:function(){this.m_showStatusTimeout&&(clearTimeout(this.m_showStatusTimeout),this.m_showStatusTimeout=null),this.m_status.hide();var t=this.getListContainer().get(0);t.hasAttribute("data-oj-min-height")&&(t.style.minHeight=t.getAttribute("data-oj-min-height"),t.removeAttribute("data-oj-min-height"))},GetRootElement:function(){return this.getListContainer()},getListContainer:function(){return null==this.m_container&&(this.m_container=this._createListContainer()),this.m_container},_createListContainer:function(){var t;return this.OuterWrapper?t=i(this.OuterWrapper):(t=i(document.createElement("div")),this.element.parent()[0].replaceChild(t[0],this.element[0])),t.addClass(this.GetContainerStyleClass()).addClass("oj-component"),t.prepend(this.element),t},_getEmptyText:function(){return this.ojContext.getTranslatedString("msgNoData")},_buildEmptyText:function(){var t=this._getEmptyText(),e=document.createElement("li");e.setAttribute("role","row"),e.id=this._createSubId("empty"),e.className=this.getEmptyTextStyleClass()+" "+this.getEmptyTextMarkerClass();var i=document.createElement("span");return i.setAttribute("role","gridcell"),i.textContent=t,e.appendChild(i),e},GetState:function(t){var e=this.getFocusItem(t).attr("aria-expanded");return"true"===e?this.STATE_EXPANDED:"false"===e?this.STATE_COLLAPSED:this.STATE_NONE},SetState:function(t,e){var i=this.isExpandable();e===this.STATE_EXPANDED?(this.getFocusItem(t).attr("aria-expanded","true"),i&&t.removeClass("oj-collapsed").addClass("oj-expanded")):e===this.STATE_COLLAPSED&&(this.getFocusItem(t).attr("aria-expanded","false"),i&&t.removeClass("oj-expanded").addClass("oj-collapsed"))},_getItemOption:function(t,e,i){var s=this.GetOption("item")[t];return"function"==typeof s&&i?s.call(this,e):s},getItemFocusable:function(t){return this._getItemOption("focusable",t,!0)},getItemSelectable:function(t){return this.getItemFocusable(t)&&this._getItemOption("selectable",t,!0)},_getItemRenderer:function(){var t=this._getItemOption("renderer",null,!1);return"function"!=typeof t?null:this._WrapCustomElementRenderer(t)},getItemTemplate:function(){if(void 0===this.m_template&&(this.m_template=null,this.ojContext._IsCustomElement())){var t=this.GetSlotMap().itemTemplate;t&&t.length>0&&"template"===t[0].tagName.toLowerCase()&&(this.m_template=t[0])}return this.m_template},getAs:function(){return this.GetOption("as")},GetSlotMap:function(){return _.CustomElementUtils.getSlotMap(this.GetRootElement()[0])},itemInsertComplete:function(t,e){this.m_clientHeight=null,this.m_scrollHeight=null},BeforeInsertItem:function(){},itemRemoveComplete:function(t,s){var n=!1;if(null!=this.m_active&&e.Object.compareValues(this.m_active.key,this.GetKey(t))){this._setActionableMode(!1,!0);var l=t.nextElementSibling;null!=l&&i(l).hasClass(this.getItemElementStyleClass())||null!=(l=t.previousElementSibling)&&i(l).hasClass(this.getItemElementStyleClass())||this.SetOption("currentItem",null),null!=l&&i(l).hasClass(this.getItemElementStyleClass())&&(this.SetCurrentItem(i(l),null,!s),n=!0)}return null!=t&&t.id&&null!=this.m_keyElemMap&&this.m_keyElemMap.delete(t.id),this.m_clientHeight=null,this.m_scrollHeight=null,n},itemRenderComplete:function(t,e){null!=this.m_dndContext&&this.m_dndContext.itemRenderComplete(t);var s=e.key;if(this._isSelectionEnabled()){var n,l=this.GetOption("selected"),o=l.has(s);this.IsSelectable(t)?(o&&(this._applySelection(t,s),this._isMultipleSelection()||l.values().size>1&&(n=this.FindElementByKey(s),l=l.clear().add([s]),this._setSelectionOption(l,null,n,e.data))),l.values&&0===l.values().size&&this._isSelectionRequired()&&(this._applySelection(t,s),l=l.clear().add([s]),this._setSelectionOption(l,null,[t],e.data))):o&&!l.isAddAll()&&(n=[],(l=l.delete([s])).values().forEach(function(t){n.push(this.FindElementByKey(t))},this),this._setSelectionOption(l,null,n))}var r=this;if(this.m_contentHandler.IsHierarchical()&&null==this._ignoreExpanded&&this.GetState(i(t))===this.STATE_COLLAPSED){var a=this.GetOption("expanded");this._isExpandAll(s)?(this.ojContext._IsCustomElement()||null==this._collapsedKeys)&&this.ExpandItem(i(t),null,!1,null,!1,!1,!1):!this.ojContext._IsCustomElement()&&Array.isArray(a)?i.each(a,function(e,n){n!==s||null!=r._collapsedKeys&&-1!==r._collapsedKeys.indexOf(n)||r.ExpandItem(i(t),null,!1,null,!1,!1,!1)}):a.has&&a.has(s)&&this.ExpandItem(i(t),null,!1,null,!1,!1,!1)}null!=this.m_active&&s===this.m_active.key&&null!=this.m_active.elem&&t!==this.m_active.elem.get(0)&&(this.m_active.elem=i(t))},_addNoData:function(){if(this.ojContext._IsCustomElement()){var t=this.GetSlotMap().noData;if(t&&t.length>0&&"template"===t[0].tagName.toLowerCase()){var e=document.createElement("li");e.setAttribute("role","row"),e.id=this._createSubId("empty"),e.classList.add("oj-listview-no-data-container"),e.classList.add("oj-listview-no-data-item");var i=document.createElement("div");i.setAttribute("role","gridcell"),i.classList.add("oj-listview-no-data-container"),e.appendChild(i);var s=this.element;s.addClass("oj-listview-no-data-container"),s.append(e);var n=this;return this.signalTaskStart("run no data template"),void o.__getTemplateEngine().then(function(e){e.execute(n.GetRootElement(),t[0],{},null).forEach(function(t){i.appendChild(t)}),n.m_engine=e,n.signalTaskEnd()},function(t){throw n.signalTaskEnd(),new Error("Error loading template engine: "+t)})}}this.element.append(this._buildEmptyText())},_removeNoData:function(){this.element.removeClass("oj-listview-no-data-container");var t=document.getElementById(this._createSubId("empty"));t&&(this.m_engine&&this.m_engine.clean(t),t.parentNode.removeChild(t))},resetInitialSelectionStateValidated:function(){this.m_initialSelectionStateValidated=!1},renderComplete:function(t){var e=this;if(this.hideStatusText(),this._removeNoData(),this.m_items=null,this.m_groupItems=null,this.m_scrollHeight=null,this._isEmptyGrid()&&this.element[0].removeChild(this.element[0].children[0]),this._isEmpty())return this._addNoData(),this.Trigger("ready",null,{}),null;var s=this.GetOption("currentItem");if(null!=s){var n=this.FindElementByKey(s);if(null==n)this.SetOption("currentItem",null);else if(null==this.m_active&&!this.SkipFocus(i(n))){var l=document.activeElement;l&&this.element.get(0).contains(l)?this.ActiveAndFocus(i(n),null):this._setActive(i(n),null,!0)}}if(this.getListContainer().hasClass("oj-focus-ancestor")&&null==this.m_active&&null==s&&!this._isTouchSupport()&&this._initFocus(),this.m_scrollAndFetch=void 0,null==this.m_scrollPosition&&(t||this.m_ticking)||this.syncScrollPosition(),!this.m_initialSelectionStateValidated&&this._isSelectionEnabled()&&this._isSelectionRequired()){var o=this.GetOption("selection").slice(0);this._validateAndUpdateSelection(o),this.m_initialSelectionStateValidated=!0}if(this._isSelectionEnabled()){var r=this.GetOption("firstSelectedItem");if(null==r||null==r.key){var a=this.GetOption("selected");null!=a&&this._updateFirstSelectedItem(a)}}if(null!=this.m_gridlinePlaceholder&&null!=this.m_gridlinePlaceholder.parentNode&&this.m_gridlinePlaceholder.parentNode.removeChild(this.m_gridlinePlaceholder),(void 0===this.m_contentHandler.hasMoreToFetch||this.m_contentHandler.hasMoreToFetch&&!this.m_contentHandler.hasMoreToFetch())&&this._shouldRenderGridlineForLastItem()){var h=document.createElement("li");h.setAttribute("role","presentation"),h.className="oj-listview-gridline-placeholder",this.element[0].appendChild(h),this.m_gridlinePlaceholder=h}var u=null;if(this._isAnimateCards()){var d=null==this.element[0].querySelector(".oj-listview-card-animated"),m=0,p=this._getCardEntranceAnimationDelay();d&&this.element[0].classList.add("oj-animation-host-viewport"),this.element[0].querySelectorAll(".oj-listview-card:not(.oj-listview-card-animated)").forEach(function(t){if(t.classList.add("oj-listview-card-animated"),d){var i=e.getAnimationEffect("cardEntrance");i&&i.forEach(function(t){t.delay=m+"ms"}),u=e.StartAnimation(t,"cardEntrance",i),m=Math.min(1e3,m+p)}else c.fadeIn(t,{duration:"150ms"});u&&u.then(function(){e.element[0].classList.remove("oj-animation-host-viewport")})})}return this.Trigger("ready",null,{}),u},_getCardEntranceAnimationDelay:function(){var t=this._getOptionDefaults(),e=parseInt(t.cardAnimationDelay,10);return isNaN(e)?0:e},_getLocalKeys:function(){for(var t=[],e=this._getItemsCache(),i=0;i<e.length;i++)t.push(this.GetKey(e[i]));return t},_validateAndUpdateSelection:function(t){if(this._isSelectionRequired()&&t.length>0){var e=t.length,i=this._validateSelection(t);if(i)this.signalTaskStart("validating selection-required keys"),i.then(function(t){var e=this.GetOption("selected").clear().add(t);this._setSelectionOption(e,null,null,null),this.enforceSelectionRequired(),this.signalTaskEnd()}.bind(this));else if(e!==t.length){var s=this.GetOption("selected").clear().add(t);this._setSelectionOption(s,null,null,null),this.enforceSelectionRequired()}}},_validateSelection:function(t){this.m_validatedSelectedKeyData=null;var e=t,i=this._getLocalKeys(),s=[];if(t.forEach(function(t){-1===i.indexOf(t)&&s.push(t)}),s.length>0){var n=this._fetchValidRowKeyData(s);if(n)return n.then(function(t){this.m_validatedSelectedKeyData=t.validKeyData,t.validKeys.forEach(function(t){s.splice(s.indexOf(t),1)});for(var i=e.length-1;i>=0;i--)s.indexOf(e[i])>-1&&e.splice(i,1);return e}.bind(this));for(var l=e.length-1;l>=0;l--)s.indexOf(e[l])>-1&&e.splice(l,1)}return null},_fetchValidRowKeyData:function(t){var e=this.m_contentHandler.getDataProvider();if(e&&e.getCapability){var i=e.getCapability("fetchByKeys");if(i&&"lookup"===i.implementation)return new Promise(function(i){e.fetchByKeys({keys:new Set(t),scope:"global"}).then(function(t){var e=[],s=new m;t.results.forEach(function(t,i){e.push(i),s.set(i,t.data)}),i({validKeys:e,validKeyData:s})},function(){i({validKeys:[],validData:new Map})})})}return null},_isEmptyGrid:function(){return this.ShouldUseGridRole()&&this.isCardLayout()&&!this.m_contentHandler.IsHierarchical()&&this.element[0].children[0]&&0===this.element[0].children[0].children[0].childElementCount},_setScrollY:function(t,e){var i=t.scrollTop;return u.info("Setting scroll y: "+e+" initial scrollTop: "+i),this._skipScrollUpdate||this._setScrollPosBusyState(),this._skipScrollUpdate=!0,t.scrollTop=e,this._handlePinGroupHeader(),u.info("scrollTop after updating: "+t.scrollTop),i!==t.scrollTop||(u.info("scrollPosBusyState getting clear"),this._clearScrollPosBusyState(),!1)},_setScrollX:function(t,e){this._skipScrollUpdate=!0,p.setScrollLeft(t,e)},_getScrollX:function(t){return Math.abs(t.scrollLeft)},getScrollToKey:function(){var t=this.GetOption("scrollPosition");if(t){var e=t.key;if(e){var i=this;return new Promise(function(t){var s=i._validateKeyForScroll(e,!0);null==s?t(null):s.then(function(i){t(i?e:null)})})}}return Promise.resolve(null)},_validateKeyForScroll:function(t,e){var i=this;if(!this._isScrollToKey())return null;if(!e&&null!=this.FindElementByKey(t))return Promise.resolve(!0);if(this.m_contentHandler instanceof n.IteratingDataProviderContentHandler){var s=this.m_contentHandler.getDataProvider();if(s.containsKeys)return new Promise(function(e){var n=new Set;n.add(t),i.signalTaskStart("Checking for keys"),s.containsKeys({keys:n}).then(function(t){e(t.results.size>0),i.signalTaskEnd()},function(){i.signalTaskEnd(),e(!1)})})}return null},_getScrollHeight:function(){return null==this.m_scrollHeight&&(this.m_scrollHeight=this._getScroller().scrollHeight),this.m_scrollHeight},_getClientHeight:function(){return null==this.m_clientHeight&&(this.m_clientHeight=this._getScroller().clientHeight),this.m_clientHeight},_getScrollWidth:function(){return null==this.m_scrollWidth&&(this.m_scrollWidth=this._getScroller().scrollWidth),this.m_scrollWidth},_getClientWidth:function(){return null==this.m_clientWidth&&(this.m_clientWidth=this._getScroller().clientWidth),this.m_clientWidth},_isScrollable:function(){return this._isScrollableY()||this._isScrollableX()},_isScrollableX:function(){return Math.abs(this._getScrollWidth()-this._getClientWidth())>1},_isScrollableY:function(){var t=0;if(this.m_contentHandler.getLoadingIndicator){var e=this.m_contentHandler.getLoadingIndicator();null!=e&&(t=e.offsetHeight)}var i=this._getScroller(),s=i.scrollHeight,n=i.clientHeight;return Math.abs(s-n)-t>1},syncScrollPosition:function(t,e){var i,s,n,l,o=this;if(this.ShouldUseGridRole()&&(e=void 0===e||e,this._isScrollable())){if(this.ShouldUpdateScrollPosition()){if(null!=this.m_scrollPosition?t=this.m_scrollPosition:void 0===t&&(t=this.GetOption("scrollPosition")),e&&null!=t.key){var r=this._validateKeyForScroll(t.key,!1);return void(r&&r.then(function(e){null!=o.m_contentHandler&&(e||delete t.key,o.syncScrollPosition(t,!1))}))}if(s=(i=this._getScrollCoordinates(t)).x,n=i.y,isNaN(s)&&isNaN(n))return void(null!=this.m_scrollPosition&&(this.SetOption("scrollPosition",this._getCurrentScrollPosition(l),{_context:{originalEvent:null,internalSet:!0}}),this.signalTaskEnd(),this.m_scrollPosition=null))}void 0===i&&(n=this.GetOption("scrollTop"));var a=this._getScroller();if(l=a.scrollTop,!isNaN(s)&&isNaN(n)||!isNaN(s)&&n===l&&s!==this._getScrollX(a,s)){if(!this._isScrollableX())return void this._clearOutstandingScrollPosition();this._setScrollX(a,s);var h=this.GetOption("scrollPosition"),c={x:s=this._getScrollX(a),y:h.y,index:h.index,key:h.key,offsetX:s,offsetY:h.offsetY};h.parent&&(c.parent=h.parent),this.SetOption("scrollPosition",c,{_context:{originalEvent:null,internalSet:!0}})}else if(Math.abs(l-n)>=1){var u=!1;if(this._isScrollableY()&&(u=this._setScrollY(a,n)),!isNaN(s)&&s!==this._getScrollX(a,s)&&this._isScrollableX()&&(this._setScrollX(a,s),u=!0),!u)return this.m_scrollPosition&&this.SetOption("scrollPosition",this._getCurrentScrollPosition(l),{_context:{originalEvent:null,internalSet:!0}}),void this._clearOutstandingScrollPosition();if(l=a.scrollTop,Math.abs(l-n)>=1&&this.m_contentHandler.hasMoreToFetch&&this.m_contentHandler.hasMoreToFetch())return null==this.m_scrollPosition&&this.signalTaskStart("Scroll position needs to resolve further"),this.m_scrollAndFetch=!0,void(this.m_scrollPosition=t);this.SetOption("scrollPosition",this._getCurrentScrollPosition(l),{_context:{originalEvent:null,internalSet:!0}})}else t&&(null==t.key||isNaN(t.index))&&this.SetOption("scrollPosition",this._getCurrentScrollPosition(l),{_context:{originalEvent:null,internalSet:!0}});this._clearOutstandingScrollPosition()}},_clearOutstandingScrollPosition:function(){null!=this.m_scrollPosition&&(this.signalTaskEnd(),this.m_scrollPosition=null)},restoreCurrentItemFocus:function(t){this._isInViewport(t)&&this._setActive(i(t),null,!0)},ClearCache:function(t){this.m_items=null,this.m_groupItems=null,t&&null!=this.m_keyElemMap&&this.m_keyElemMap.clear()},getMinimumCountForViewport:function(){var t=this._getItemHeight(),e=this._getClientHeight();return!isNaN(t)&&t>0?Math.ceil(e/t):1},_isInViewport:function(t){return h.isElementInScrollerBounds(t,this._getScroller())},_getAnimatedActions:function(){return["add","remove","update","expand","collapse"]},StartAnimation:function(t,e,i){if(this._getAnimatedActions().indexOf(e)>-1&&!this._isInViewport(t))return Promise.resolve(null);var s,n;if(null==i&&(i=this.getAnimationEffect(e)),"expand"===e){var l=t.getAttribute("data-oj-initial-height");if(null!=l&&!isNaN(l)){(i=Object.assign({},i)).startMaxHeight=l+"px";var o=t.offsetHeight;o<l&&(n=t.style.maxHeight,s=t.style.height,t.style.maxHeight="none",t.style.height=l+"px",i.effect="collapse",i.endMaxHeight=o+"px"),t.removeAttribute("data-oj-initial-height")}}var r=c.startAnimation(t,e,i,this.ojContext);return void 0!==s&&r.then(function(){t.style.height=s,t.style.maxHeight=n}),r},notifyContextMenuGesture:function(t,e,s){if(null==this.element[0].querySelector(".oj-listview-no-data-item")&&this.IsNodeEditableOrClickable(i(e.target)))return!1;var n,o=i(e.target).closest("."+this.getItemElementStyleClass());o.length>0&&!this.SkipFocus(i(o[0]))&&this.SetCurrentItem(i(o[0]),null),2===e.button?n=this.FindItem(i(e.target)):null!=this.m_active&&(n=this.m_active.elem),null==n&&(n=this.element);var r={launcher:n,initialFocus:"menu"};"keyboard"===s&&(r.position={my:"start top",at:"start bottom",of:n}),null==this.ojContext._GetContextMenu()?l.getContext(t).getBusyContext().whenReady().then(function(){this.PrepareContextMenu(o),this.ojContext._OpenContextMenu(e,s,r)}.bind(this)):(this.PrepareContextMenu(o),this.ojContext._OpenContextMenu(e,s,r))},PrepareContextMenu:function(t){var e=this.ojContext._GetContextMenu();null!=this.m_dndContext&&e&&this.m_dndContext.prepareContextMenu(e)},IsElementEditableOrClickable:function(t){return null!=t.prop("nodeName").match(/^INPUT|SELECT|OPTION|BUTTON|^A\b|TEXTAREA/)},IsNodeEditableOrClickable:function(t){for(;null!=t&&t[0]!==this.element[0]&&"LI"!==t.prop("nodeName");)if(3===t[0].nodeType)t=t.parent();else{var e=t.attr("tabIndex"),i=t.attr("data-oj-tabindex");if(null!=e&&e>=0&&!t.hasClass(this.getFocusedElementStyleClass())&&!t.hasClass("oj-listview-cell-element"))return!0;if(this.IsElementEditableOrClickable(t)&&(-1!==e||-1!==i))return!0;t=t.parent()}return!1},disableAllTabbableElements:function(t,e){var s=i(t);(s.hasClass(this.getItemStyleClass())||(s=i(s.get(0).firstElementChild)),s.children().first().hasClass("oj-listview-cell-element")&&(s=i(s.get(0).firstElementChild)),s[0])&&i(h.disableAllFocusableElements(s[0],!0,e)).each(function(){i(this).removeAttr("data-first").removeAttr("data-last")})},_disableAllTabbableElementsBeforeItem:function(t){for(var e=this._getItemsCache(),i=e.index(t),s=0;s<=i;s++)this.disableAllTabbableElements(e[s],!0)},_disableAllTabbableElementsAfterItem:function(t){var e=this._getItemsCache(),i=e.index(t);if(-1!==i)for(var s=i;s<=e.length-1;s++)this.disableAllTabbableElements(e[s],!0)},_enableAllTabbableElements:function(t){var e=i(h.enableAllFocusableElements(t[0]));(e=e.filter(":visible")).first().attr("data-first","true"),e.last().attr("data-last","true")},_cleanupTabbableElementProperties:function(t){h.enableAllFocusableElements(t[0]).forEach(function(t){t.removeAttribute("data-first"),t.removeAttribute("data-last")})},SkipFocus:function(t){return t.hasClass("oj-skipfocus")},GetFocusElement:function(){if(this.getListContainer().hasClass("oj-focus-ancestor")){if(this.m_active)return this.getFocusItem(this.m_active.elem)[0];var t=this.element.children("."+this.getEmptyTextStyleClass()).first();if(t.length>0&&0===t.attr("tabIndex"))return t[0]}return this.element[0]},_isFocusBlurTriggeredByDescendent:function(t){return void 0===t.relatedTarget||!(null==t.relatedTarget||!i.contains(this.ojContext.element.get(0),t.relatedTarget))},HandleFocus:function(t){if(this._clearFocusoutTimeout(),this._clearFocusoutBusyState(),this.getListContainer().addClass("oj-focus-ancestor"),null==this.m_active){var e=this.FindItem(i(t.target));this.m_preActive||this._isFocusBlurTriggeredByDescendent(t)||null!=e&&0!==e.length&&!this.SkipFocus(e)||this._initFocus(t)}else this.m_preActive||t.target!==this.ojContext.element[0]||this._isFocusBlurTriggeredByDescendent(t)||(this.HighlightActive(),this._focusItem(this.m_active.elem)),this.RemoveRootElementTabIndex(),this._setTabIndex(this.m_active.elem)},restoreFocusAfterDrag:function(){null==this.m_active?this._initFocus(null):(this._makeFocusable(this.m_active.elem),this.HighlightActive(),this._focusItem(this.m_active.elem),this.RemoveRootElementTabIndex()),this.m_active&&this.m_active.elem.removeClass("oj-focus-highlight")},_initFocus:function(t){for(var e=this._getItemsCache(),s=0;s<e.length;s++){var n=i(e[s]);if(!this.SkipFocus(n)){this.SetCurrentItem(n,t);break}}if(0===e.length){var l=this.element.children("."+this.getEmptyTextStyleClass()).first();l.length>0&&(l.attr("tabIndex",0),l.focus(),this.RemoveRootElementTabIndex())}},HandleFocusOut:function(t){this.HandleBlur(t)},_supportRelatedTargetOnBlur:function(){var t=e.AgentUtils.getAgentInfo();return!(t.browser===e.AgentUtils.BROWSER.FIREFOX&&parseInt(t.browserVersion,10)<48)},_isExtraBlurEvent:function(t){var i=e.AgentUtils.getAgentInfo();return null==t.relatedTarget&&i.browser===e.AgentUtils.BROWSER.IE&&t.target===this.ojContext.element.get(0)},_clearFocusoutTimeout:function(){this._focusoutTimeout&&(clearTimeout(this._focusoutTimeout),this._focusoutTimeout=null)},_setFocusoutBusyState:function(){this._focusoutResolveFunc||(this._focusoutResolveFunc=this._addComponentBusyState("is handling focusout."))},_setScrollPosBusyState:function(){this.ojContext._IsCustomElement()?this._scrollPosResolveFunc||(this._scrollPosResolveFunc=this._addComponentBusyState("is waiting for scroll handler.")):this.signalTaskStart("waiting for scroll handler")},_addComponentBusyState:function(t){var e=l.getContext(this.element[0]).getBusyContext(),i={description:"The component identified by '"+this.element[0].id+"' "+t};return e.addBusyState(i)},_clearFocusoutBusyState:function(){this._focusoutResolveFunc&&(this._focusoutResolveFunc(),this._focusoutResolveFunc=null)},_clearScrollPosBusyState:function(){this.ojContext._IsCustomElement()?this._scrollPosResolveFunc&&(this._scrollPosResolveFunc(),this._scrollPosResolveFunc=null):this.signalTaskEnd()},HandleBlur:function(t){if(this._clearFocusoutTimeout(),this._isExpandCollapseIcon(t.target)&&this._focusOutHandler(i(t.target)),this._isActionableMode()){if(null!=h.getLogicalChildPopup(this.getListContainer()))return;this._setFocusoutBusyState(),this._focusoutTimeout=setTimeout(function(){this._doBlur(),this._clearFocusoutBusyState()}.bind(this),100)}else this._isFocusBlurTriggeredByDescendent(t)||this.m_preActive||this._doBlur()},_doBlur:function(){if(this._isActionableMode()&&this._exitActionableMode(),this.getListContainer().removeClass("oj-focus-ancestor"),this.UnhighlightActive(),null!=this.m_active)this._resetTabIndex(this.m_active.elem),this._removeSkipItemAriaLabel(this.m_active.elem);else{var t=this.element.children("."+this.getEmptyTextStyleClass()).first();t.length>0&&t.removeAttr("tabIndex")}this.SetRootElementTabIndex()},_handleMouseOut:function(t){var e=this.FindItem(t.target);null!=e&&(this.m_hoverItem=null,this._unhighlightElem(e,"oj-hover"))},_handleMouseOver:function(t){if(!(!this._isShowHover()||this._recentTouch()||this.m_dndContext&&this.m_dndContext.isDndInProgress())){var e=this.FindItem(t.target);null==e||this.SkipFocus(e)||(this.m_hoverItem=e,this._highlightElem(e,"oj-hover"))}},_isShowHover:function(){return this._isSelectionEnabled()},_recentTouch:function(){return Date.now()-this._lastTouch<500},HandleKeyDown:function(t){if(this.isExpandable()){var e=t.key||t.keyCode;if("ArrowLeft"===e||"Left"===e||e===this.LEFT_KEY||"ArrowRight"===e||"Right"===e||e===this.RIGHT_KEY){var i=this.m_active.elem;if("ArrowLeft"===e||"Left"===e||e===this.LEFT_KEY){if(this.GetState(i)===this.STATE_EXPANDED)return void this.CollapseItem(i,t,!0,this.m_active.key,!0,!0)}else if(this.GetState(i)===this.STATE_COLLAPSED)return void this.ExpandItem(i,t,!0,this.m_active.key,!0,!0,!0)}}var s=this.HandleSelectionOrActiveKeyDown(t);null!=this.m_dndContext&&(s=s||this.m_dndContext.HandleKeyDown(t)),!0===s&&t.preventDefault(),this.m_keyProcessed=s},HandleKeyUp:function(t){var e=t.key||t.keyCode;"Escape"!==e&&"Esc"!==e&&e!==this.ESC_KEY||!this.m_keyProcessed||t.stopPropagation(),this.m_keyProcessed=void 0},_handleMouseUpOrPanMove:function(t){this.m_preActiveItem&&this._unhighlightElem(this.m_preActiveItem,"oj-focus"),null!=this.m_dndContext&&this.m_dragger&&this.m_dragger.get(0)!==t.target&&(this.m_dndContext._unsetDraggable(this.m_dragger),this.m_dragger=null)},_isNodeFocusable:function(t){var e=this.getItemElementStyleClass();return h.isElementOrAncestorFocusable(t,function(t){return t.classList.contains(e)||t.classList.contains("oj-listview-cell-element")})},HandleMouseDownOrTouchStart:function(t){var e=i(t.target);null!=this.m_dndContext&&(this.m_dndContext._setDraggable(e),this.m_dragger=e);var s=this.FindItem(e);null!=s&&s.length>0&&this._isLegacyClickthroughDisabled(t,s.get(0))&&(this.m_preActive=!0,s=null),null==s||0===s.length||this.SkipFocus(s)||e.hasClass("oj-listview-drag-handle")||(this.m_preActive=!0,this.getListContainer().hasClass("oj-focus-ancestor")||this.getListContainer().addClass("oj-focus-ancestor"),this.m_preActiveItem=s,this._highlightElem(s,"oj-focus"),this._makeFocusable(s),!this.element[0].contains(document.activeElement)||s.get(0).contains(document.activeElement)||this._isNodeFocusable(e[0])||this._focusItem(s),this.RemoveRootElementTabIndex(),null!=this.m_active&&this.m_active.elem.get(0)!==s.get(0)&&this._resetTabIndex(this.m_active.elem),t.originalEvent.touches&&t.originalEvent.touches.length>0&&(this.m_touchPos={x:t.originalEvent.changedTouches[0].pageX,y:t.originalEvent.changedTouches[0].pageY}))},HandleTouchEndOrCancel:function(t){if(null!=this.m_preActiveItem&&(this._unhighlightElem(this.m_preActiveItem,"oj-focus"),null!=this.m_touchPos)){var e=this.m_preActiveItem.offset(),i=this.getAnimationEffect("pointerUp");i.offsetX=this.m_touchPos.x-e.left+"px",i.offsetY=this.m_touchPos.y-e.top+"px";var s,n=this.m_preActiveItem.children("."+this.getGroupItemStyleClass());s=n.length>0?n.get(0):this.getFocusItem(this.m_preActiveItem).get(0);for(var l=t.target,o=s.querySelectorAll("input, select, button, a, textarea, object, [tabIndex]:not([tabIndex='-1'])"),r=0;r<o.length;r++)if(o[r].contains(l)){s=l;break}this.StartAnimation(s,"pointerUp",i),this.m_touchPos=null}this._lastTouch=Date.now(),this._handleMouseOut(t)},_enterActionableMode:function(){var t=this.m_active.elem;this.disableAllTabbableElements(t),this._enableAllTabbableElements(t),t.find("[data-first]").length>0&&this._setActionableMode(!0)},_exitActionableMode:function(){this._setActionableMode(!1),this.disableAllTabbableElements(this.m_active.elem)},HandleMouseClick:function(t){if(0===t.button){var e=this.getCollapseIconStyleClass(),s=this.getExpandIconStyleClass(),n=i(t.target);if(n.hasClass(s))this._collapse(t),t.preventDefault();else if(n.hasClass(e))this._expand(t),t.preventDefault();else{var l=this.FindItem(n);if(null==l||0===l.length)return;if(this._isLegacyClickthroughDisabled(t,l[0]))return;if(this.SkipFocus(l))return void this._handleHeaderClick(t,n,l);this._isActionableMode()&&null!=this.m_active&&this.m_active.elem.get(0)!==l.get(0)&&this._exitActionableMode(),this.getListContainer().hasClass("oj-focus-ancestor")||this.getListContainer().addClass("oj-focus-ancestor");var o=this._isClickthroughDisabled(t,l);if(!o&&this._isSelectionEnabled()&&this.IsSelectable(l[0])){var r=t.originalEvent.sourceCapabilities&&t.originalEvent.sourceCapabilities.firesTouchEvents;(this._isTouchSupport()&&(r||null!=this.touchStartEvent&&this.touchStartEvent.target===t.target)?this._handleTouchSelection(l,t):this.HandleClickSelection(l,t))||this.HandleClickActive(l,t),this.ShouldUseGridRole()&&t.target===l.get(0)&&this._focusItem(l),this._shouldDragSelectedItems()&&this.m_dndContext.setSelectionDraggable()}else this.HandleClickActive(l,t);if(o||this._fireActionEvent(l.get(0),t),this._isInputElement(n.get(0)))return void this._enterActionableMode();this._handleHeaderClick(t,n,l)}}},_handleHeaderClick:function(t,e,i){var s=this.getGroupItemStyleClass();this.isExpandable()&&e.closest("."+s)&&(this.GetState(i)===this.STATE_COLLAPSED?this._expand(t):this.GetState(i)===this.STATE_EXPANDED&&this._collapse(t))},_fireActionEvent:function(t,e){if(!this._isActionableMode()){var i={context:{key:this.GetKey(t),data:this._getDataForItem(t),metadata:this._getMetadataForItem(t)}};this.Trigger("itemAction",e,i)}},_shouldDragSelectedItems:function(){return null!=this.m_dndContext&&!this.m_dndContext.shouldDragCurrentItem()},_isTouchSupport:function(){return p.isTouchSupported()},_isNonWindowTouch:function(){return this._isTouchSupport()&&e.AgentUtils.getAgentInfo().os!==e.AgentUtils.OS.WINDOWS},_ctrlEquivalent:function(t){return p.isMetaKeyPressed(t)},_createSubId:function(t){return[this.element.attr("id"),t].join(":")},FindItem:function(t){return i(t).hasClass(this.getGroupStyleClass())?null:i(t).closest("."+this.getItemElementStyleClass())},_isLegacyClickthroughDisabled:function(t,e){for(var i=t.target;null!=i&&i!==e;){if(i.classList.contains("oj-clickthrough-disabled"))return!0;i=i.parentNode}return!1},_isClickthroughDisabled:function(t,e){return e.length>0&&h.isEventClickthroughDisabled(t,e.get(0))},getListContainerBorderWidth:function(){return null==this.m_borderWidth&&(this.m_borderWidth=parseInt(this.getListContainer().css("border-top-width"),10)+parseInt(this.getListContainer().css("border-bottom-width"),10)),this.m_borderWidth},scrollToItem:function(t){var e=t.key;if(null!=e){var s=this.FindElementByKey(e);if(null!=s)if(i(s).hasClass(this.getItemStyleClass()))this._scrollToVisible(s);else{var n=i(s).children("."+this.getGroupItemStyleClass()).first();this._scrollToGroupHeader(n.get(0))}}},_scrollToVisible:function(t){var e=0,s=t.offsetTop,n=t.offsetHeight,l=this.getListContainer()[0],o=l.scrollTop,r=l.offsetHeight;if(null!=this.m_groupItemToPin){var a=parseInt(this.m_groupItemToPin.style.top,10),h=i(this.m_groupItemToPin).outerHeight();s<=a&&a<s+n?e=(n+s-a)/2:s>=a&&s<a+h&&(e=(a+h-s)/2)}else if(null!=this.m_closestParent){var c=this.m_closestParent.firstElementChild;c.classList.contains("oj-sticky")&&(e=c.offsetTop+c.offsetHeight-s)}if(s>=o&&s+n<=o+r)e>0&&(l.scrollTop=o-e);else{var u=Math.max(0,Math.min(s-e,Math.abs(s+n-r)));u>o&&(u+=this.getListContainerBorderWidth()),l.scrollTop=u}},GetKey:function(t){return this.m_contentHandler.GetKey(t)},FindElementByKey:function(t){if(null!=this.m_keyElemMap){var e=this.m_keyElemMap.get(t);if(null!=e)return document.getElementById(e)}return this.m_contentHandler?this.m_contentHandler.FindElementByKey(t):null},GetIndexOf:function(t,i){for(var s=0;s<t.length;s++)if(i===t[s]||e.Object.compareValues(i,t[s]))return s;return-1},_isExpandCollapseIcon:function(t){return i(t).hasClass(this.getExpandIconStyleClass())||i(t).hasClass(this.getCollapseIconStyleClass())},_isGridlinesVisible:function(){if(null==this.m_gridlinesVisible){var t=this.GetOption("gridlines");if(null==t)return!0;this.m_gridlinesVisible="hidden"!==t.item}return this.m_gridlinesVisible},_isTopBottomGridlinesVisible:function(){var t=this._getOptionDefaults().gridlines;return t?{top:t.top,bottom:t.bottom}:{top:!0,bottom:!0}},_updateGridlines:function(){var t=this.GetRootElement()[0];this._isGridlinesVisible()?t.classList.remove("oj-listview-gridlines-hidden"):t.classList.add("oj-listview-gridlines-hidden");var e=this._isTopBottomGridlinesVisible();t.classList.remove("gridline-top-hidden"),t.classList.remove("gridline-bottom-hidden"),"hidden"===e.top&&t.classList.add("gridline-top-hidden"),"hidden"===e.bottom&&t.classList.add("gridline-bottom-hidden")},_shouldRenderGridlineForLastItem:function(){if(this.isCardLayout())return!1;var t=this.GetOption("gridlines");if(null!=t){var e=this._isTopBottomGridlinesVisible();if("visible"===t.item&&"hidden"===e.bottom)return!0}return!1},IsArrowKey:function(t){return this.isCardLayout()?"ArrowUp"===t||"Up"===t||t===this.UP_KEY||"ArrowDown"===t||"Down"===t||t===this.DOWN_KEY||"ArrowLeft"===t||"Left"===t||t===this.LEFT_KEY||"ArrowRight"===t||"Right"===t||t===this.RIGHT_KEY:"ArrowUp"===t||"Up"===t||t===this.UP_KEY||"ArrowDown"===t||"Down"===t||t===this.DOWN_KEY},_getItemsCache:function(){if(null==this.m_items){var t=this.getGroupCollapseStyleClass(),e="."+this.getItemElementStyleClass()+":visible";this.m_items=this.element.find(e).filter(function(){if(i(this).parent().hasClass(t))return!i(this).parent().parent().hasClass("oj-collapsed");if("LI"!==this.tagName){var e=this.parentElement;if(e&&e.classList.contains("oj-animate-remove"))return!1}return!0}).map(function(t,e){var i=e.parentElement;return i&&i.classList.contains("oj-animate-add")?i:e})}return this.m_items},_handleLastItemKeyboardFocus:function(t){var e=t.get(0).nextElementSibling;if(null==e||!i(e).hasClass(this.getItemElementStyleClass())){if(this.m_contentHandler.IsHierarchical()&&t.parent().hasClass(this.getGroupStyleClass())&&null!=t.parent().parent().get(0).nextElementSibling)return;var s=this._getScroller(),n=this._getScrollHeight();s.scrollTop<n&&(s.scrollTop=n)}},HandleArrowKeys:function(t,e,s){if(!this.m_contentHandler.IsReady())return!0;var n;n=!e||this.m_isNavigate?this.m_active.elem:this.m_selectionFrontier;var l=!1;switch(t){case this.UP_KEY:case"Up":case"ArrowUp":this.isCardLayout()&&i(n).hasClass(this.getItemStyleClass())?this._gotoItemAbove(n,e,s):this._gotoPrevItem(n,e,s),l=!0;break;case this.DOWN_KEY:case"Down":case"ArrowDown":this.isCardLayout()&&i(n).hasClass(this.getItemStyleClass())?this._gotoItemBelow(n,e,s):this._gotoNextItem(n,e,s),l=!0;break;case this.LEFT_KEY:case"Left":case"ArrowLeft":case this.RIGHT_KEY:case"Right":case"ArrowRight":this.isCardLayout()&&("rtl"===this.ojContext._GetReadingDirection()&&(t="ArrowLeft"===t||"Left"===t||t===this.LEFT_KEY?"ArrowRight":"ArrowLeft"),"ArrowLeft"===t||"Left"===t||t===this.LEFT_KEY?this._gotoPrevItem(n,e,s):this._gotoNextItem(n,e,s),l=!0)}return l},_gotoNextItem:function(t,e,s){var n=this._getItemsCache(),l=n.index(t)+1;if(l<n.length){for(var o=i(n[l]);this.SkipFocus(o);){if((l+=1)===n.length)return;o=i(n[l])}e?(this._extendSelection(o,s),this.m_isNavigate=!1):(this.SetCurrentItem(o,s),this.m_isNavigate=!0),this._handleLastItemKeyboardFocus(o)}},_gotoPrevItem:function(t,e,s){var n=this._getItemsCache(),l=n.index(t)-1;if(l>=0){for(var o=i(n[l]);this.SkipFocus(o);){if((l-=1)<0)return;o=i(n[l])}e?(this._extendSelection(o,s),this.m_isNavigate=!1):(this.SetCurrentItem(o,s),this.m_isNavigate=!0)}},_getColumnCount:function(t){var e,i;return t.each(function(t){var s=this.offsetTop;if(void 0===i)i=s;else if(i!==s)return!1;e=t}),e+1},_updateSkipItemAriaLabel:function(t,e){var s=this._createSubId("extra_info");if(null==this.m_skipAriaLabelText){var n=i(document.createElement("div"));n.addClass("oj-helper-hidden-accessible").attr("id",s),this.getListContainer().append(n),this.m_skipAriaLabelText=n}this.m_skipAriaLabelText.text(this.ojContext.getTranslatedString("accessibleNavigateSkipItems",{numSkip:e}));var l=this.getFocusItem(t);l.uniqueId().attr("aria-labelledby",s+" "+l.prop("id"))},_removeSkipItemAriaLabel:function(t){var e=this.getFocusItem(t);e.length>0&&e.get(0).removeAttribute("aria-labelledby")},_gotoItemAbove:function(t,e,s){var n,l;if(t.hasClass(this.getItemElementStyleClass())){var o=t.parent(),r=o.children("li."+this.getItemElementStyleClass()),a=this._getColumnCount(r),h=r.index(t),c=h-a;if(c<0?o.hasClass(this.getGroupStyleClass())&&o.parent().hasClass(this.getItemElementStyleClass())&&(n=o.parent(),l=h):(n=i(r.get(c)),l=a-1),n&&n.length>0){if(this.SkipFocus(n))return;e?(this._extendSelection(n,s),this.m_isNavigate=!1):(null!=l&&l>0&&this._updateSkipItemAriaLabel(n,l),this.SetCurrentItem(n,s),this.m_isNavigate=!0)}}else this._gotoPrevItem(t)},_gotoItemBelow:function(t,e,s){var n,l;if(t.hasClass(this.getItemElementStyleClass())){var o=t.parent(),r=o.children("li."+this.getItemElementStyleClass()),a=this._getColumnCount(r),h=r.index(t),c=h+a;if(c>=r.length){var u=Math.ceil(r.length/a);l=r.length-1-h,h<Math.max(0,(u-1)*a)?(n=r.last(),l-=1):o.hasClass(this.getGroupStyleClass())&&(n=o.parent().next("li."+this.getItemElementStyleClass()))}else n=i(r.get(c)),l=a-1;if(n.length>0){if(this.SkipFocus(n))return;e?(this._extendSelection(n,s),this.m_isNavigate=!1):(null!=l&&l>0&&this._updateSkipItemAriaLabel(n,l),this.SetCurrentItem(n,s),this.m_isNavigate=!0),this._handleLastItemKeyboardFocus(n)}}else this._gotoNextItem(t)},_isActionableMode:function(){return"actionable"===this.m_keyMode},_setActionableMode:function(t,e){this.m_keyMode=t?"actionable":"navigation",t||e||this.element[0].focus()},getFocusItem:function(t){if(!t.hasClass(this.getFocusedElementStyleClass()))return i(t.find("."+this.getFocusedElementStyleClass()).first());if(this.ShouldUseGridRole()&&"row"===t.attr("role")){var e=t.children(".oj-listview-cell-element").first();return 0===e.length?t.children().first():e}return t},SetRootElementTabIndex:function(){this._isComponentFocusable()&&this.element.attr("tabIndex",0)},RemoveRootElementTabIndex:function(){this.element.removeAttr("tabIndex")},_isComponentFocusable:function(){var t=this.ojContext._IsCustomElement()?this.GetRootElement():this.element;return this._rootTabIndexSet||-1!==parseInt(t.attr("tabIndex"),10)},_setTabIndex:function(t){this._isComponentFocusable()&&this.getFocusItem(t).attr("tabIndex",0)},_resetTabIndex:function(t){var e=!0;"presentation"===t.attr("role")&&(e=!1);var i=this.getFocusItem(t);e?i.removeAttr("tabIndex"):i.attr("tabIndex",-1)},_makeFocusable:function(t){this._setTabIndex(t)},getSingleFocusableElement:function(t){var e="a, input, select, textarea, button",i=t.children(e);return 1===i.length&&0===i.first().find(e).length?i.first():t},_setCurrentItemOption:function(t,e,s){var n={item:this.ojContext._IsCustomElement()?s:i(s)};this.SetOption("currentItem",t,{_context:{originalEvent:e,internalSet:!0,extraData:n},changed:!0})},_setActive:function(t,e,i){var s;if(null!=t){var n=t[0],l=this.GetKey(n);if(null==this.m_active||l!==this.m_active.key){var o={key:l,item:t};return null!=this.m_active&&(o.previousKey=this.m_active.key,o.previousItem=this.m_active.elem,this._shouldDragSelectedItems()&&this._isTouchSupport()&&this.m_dndContext._unsetDraggable(o.previousItem),this._removeSkipItemAriaLabel(o.previousItem)),!!this.Trigger("beforeCurrentItem",e,o)&&(null!=this.m_active&&this.m_active.elem&&this.m_active.elem.get(0).classList.remove("oj-listview-current-item"),s={key:l,elem:t},this.m_active=s,this._shouldDragSelectedItems()&&this._isTouchSupport()&&this.m_dndContext._setDraggable(t),t.get(0).classList.add("oj-listview-current-item"),void 0!==i&&i||(this._makeFocusable(t),this.HighlightActive(),(null==e||e.originalEvent&&"click"!==e.originalEvent.type)&&this._focusItem(t),this.RemoveRootElementTabIndex(),o.previousItem&&this._resetTabIndex(o.previousItem)),!0)}l===this.m_active.key&&(s={key:l,elem:t},this.m_active=s,void 0!==i&&i||(this._makeFocusable(t),this.RemoveRootElementTabIndex()))}else this.m_active=null;return!1},_focusItem:function(t){var e=this.getFocusItem(t).get(0);e&&e.focus()},HighlightActive:function(){if(null!=this.m_active&&this.getListContainer().hasClass("oj-focus-ancestor")){var t=this.m_active.elem;this._highlightElem(t,"oj-focus")}},UnhighlightActive:function(){null!=this.m_active&&this._unhighlightElem(this.m_active.elem,"oj-focus")},HandleClickActive:function(t,e){var s=null!=this.m_active?this.m_active.elem.get(0):null;null==s||i(s).hasClass(this.getItemStyleClass())||(s=s.firstElementChild),null!=e&&null!=s&&s!==e.target&&s.contains(e.target)||this.SetCurrentItem(t,e,!this.ShouldUseGridRole()||e.target!==t.get(0))},SetCurrentItem:function(t,e,i){this.ActiveAndFocus(t,e,i)&&this._setCurrentItemOption(this.GetKey(t[0]),e,t.get(0))},ActiveAndFocus:function(t,e,i){this._scrollToVisible(t[0]),this.UnhighlightActive();var s=this._setActive(t,e,i);return this.HighlightActive(),s},enforceSelectionRequired:function(){if(this._isSelectionEnabled()&&this._isSelectionRequired()){var t=this.GetOption("selection");(null==t||0===t.length&&!0!==t.inverted)&&this._selectFirstSelectableItem()}},_getFirstSelectableItem:function(){var t=this.element[0].querySelector(".oj-listview-cell-element[aria-selected]");return null==t?null:t.parentNode},_selectFirstSelectableItem:function(){var t=this._getFirstSelectableItem();if(t){var e=this.m_contentHandler.GetKey(t);if(null!=e){this._applySelection(t,e);var i=this.GetOption("selected");this._setSelectionOption(i.clear().add([e]),null,[t])}}},_isSelectionEnabled:function(){return"none"!==this.GetOption("selectionMode")},_isSelectionRequired:function(){return this.GetOption("selectionRequired")},_isMultipleSelection:function(){return"multiple"===this.GetOption("selectionMode")},IsSelectable:function(t){return this.getFocusItem(i(t)).get(0).hasAttribute("aria-selected")},_cloneSelection:function(t){var e=[];return t.forEach(function(t){e.push(t)}),e},_getLocalData:function(t){var e=this.getDataForVisibleItem({key:t});return null==e&&this.m_validatedSelectedKeyData&&(e=this.m_validatedSelectedKeyData.get(t)),e},_setSelectionOption:function(t,s,n,l){var o={key:null,data:null},r=d.KeySetUtils.toArray(t),a=this.GetOption("firstSelectedItem");null!=a&&(0===r.length&&null!=a.key||r[0]!==a.key&&!e.Object.compareValues(r[0],a.key)?(r.length>0&&(o={key:r[0],data:null!=l?l:this._getLocalData(r[0])}),this.SetOption("firstSelectedItem",o,{_context:{originalEvent:s,internalSet:!0},changed:!0})):void 0===a.data&&(null==l&&(l=this._getLocalData(r[0])),o={key:a.key,data:l},this.SetOption("firstSelectedItem",o,{_context:{originalEvent:null,internalSet:!0},changed:!0})));var h={items:this.ojContext._IsCustomElement()?n:i(null==n?{}:n)};this.SetOption("selected",t,{_context:{originalEvent:s,internalSet:!0,extraData:h},changed:!0}),this.SetOption("selection",r,{_context:{originalEvent:s,internalSet:!0,extraData:h},changed:!0})},_unhighlightSelection:function(){if(null!=this.m_keyElemMap){var t=this,e=this.GetOption("selected");if(e.isAddAll())for(var i=this._getItemsCache(),s=0;s<i.length;s++)t._unhighlightElem(i[s],"oj-selected");else e.values().forEach(function(e){var i=t.FindElementByKey(e);null!=i&&t._unhighlightElem(i,"oj-selected")})}},_highlightElem:function(t,e){this.HighlightUnhighlightElem(t,e,!0)},_unhighlightElem:function(t,e){this.HighlightUnhighlightElem(t,e,!1)},HighlightUnhighlightElem:function(t,e,s){var n=i(t);"oj-selected"===e&&this.getFocusItem(n).attr("aria-selected",s?"true":"false");var l=n.children("."+this.getGroupItemStyleClass());l.length>0&&(n=i(l[0])),"oj-focus"===e?s?"actionable"!==this.m_keyMode&&this._focusInHandler(n):this._focusOutHandler(n):s?n.addClass(e):n.removeClass(e)},HandleClickSelection:function(t,e){this._scrollToVisible(t[0]);var i=this._ctrlEquivalent(e),s=e.shiftKey,n=!0;return this._isMultipleSelection()&&(i||s)?!i&&s?n=this._extendSelection(t,e):this._augmentSelectionAndFocus(t,e):n=this.SelectAndFocus(t,e),n},_handleTouchSelection:function(t,e){var i=!0;return this._isMultipleSelection()?e.shiftKey?i=this._extendSelection(t,e):this._augmentSelectionAndFocus(t,e):i=this.SelectAndFocus(t,e),i},_clearSelection:function(t,e){if(this._unhighlightSelection(),t)if(this._isSelectionRequired())this._selectFirstSelectableItem();else{var i=this.GetOption("selected");i=i.clear(),this._setSelectionOption(i,null,null)}this.m_selectionFrontier=void 0===e?null:e},SelectAndFocus:function(t,e){var i=this.GetKey(t[0]),s=this.GetOption("selected"),n=s.has(i);return!(n&&s.values&&1===s.values().size&&this._isSelectionRequired())&&(this._clearSelection(n),n||this._augmentSelectionAndFocus(t,e,s.clear()),!0)},_extendSelection:function(t,e){return null!=this.m_active&&(this.m_selectionFrontier!==t&&(this._unhighlightElem(t,"oj-focus"),this._extendSelectionRange(this.m_active.elem,t,e),!0))},_extendSelectionRange:function(t,e,i,s){!0===s?this._clearSelection(!1,this.m_selectionFrontier):this._clearSelection(!1,e),this._highlightRange(t,e,i),this.HighlightActive(),this._scrollToVisible(e[0])},_highlightRange:function(t,e,i){var s,n,l=this.GetOption("selected").clear(),o=[],r=this._getItemsCache(),a=r.index(t),h=r.index(e);a>h?(s=h,n=a):(s=a,n=h);for(var c=s;c<=n;c++){var u=r[c];if(this.IsSelectable(u)){var d=this.m_contentHandler.GetKey(u);this._applySelection(u,d),l=l.add([d]),o.push(u)}}this._setSelectionOption(l,i,o)},_applySelection:function(t,e){null==this.m_keyElemMap&&(this.m_keyElemMap=this.m_contentHandler.createKeyMap()),this.m_keyElemMap.set(e,i(t).attr("id")),this._highlightElem(t,"oj-selected")},_augmentSelectionAndFocus:function(t,e,s){var n=t,l=this.GetKey(t[0]);null==s&&(s=this.GetOption("selected"));var o=null!=this.m_active?this.m_active.elem.get(0):null;(null==o||i(o).hasClass(this.getItemStyleClass())||(o=o.firstElementChild),null==e||null!=o&&o!==e.target&&o.contains(e.target))||(this.UnhighlightActive(),this._setActive(n,e)&&this._setCurrentItemOption(l,e,n.get(0)),this.HighlightActive());if(null!=(o=null!=this.m_active?this.m_active.elem.get(0):null)&&o===n.get(0)){if(s.has(l)){if(s.values&&1===s.values().size&&this._isSelectionRequired())return;this._unhighlightElem(t,"oj-selected"),s=s.delete([l])}else this.m_selectionFrontier=t,this._applySelection(t,l),s=s.add([l]);var r=[];s.values&&s.values().forEach(function(t){r.push(this.FindElementByKey(t))},this),this._setSelectionOption(s,e,r)}else null!=s&&0===s.values().size&&this._setSelectionOption(s,e,[])},ToggleSelection:function(t,e,i){var s=this.GetOption("selected"),n=this.m_active.elem,l=this.m_active.key;if(s.has(l)){if(i||1===s.values().size&&this._isSelectionRequired())return;this._unhighlightElem(n,"oj-selected"),0===(s=s.delete([l])).values().size&&(this.m_selectionFrontier=null)}else this.IsSelectable(n[0])&&(e||(this._clearSelection(!1),s=s.clear()),this.m_selectionFrontier=n,this._applySelection(n,l),s=s.add([l]));var o=[];s.values().forEach(function(t){o.push(this.FindElementByKey(t))},this),this._setSelectionOption(s,t,o)},_isInputElement:function(t){return null!=t.nodeName.match(/^INPUT|SELECT|OPTION|TEXTAREA/)&&!t.readOnly},HandleSelectionOrActiveKeyDown:function(t){var e,s,n,l=!1;if(null==this.m_active||t.isDefaultPrevented())return!1;var o=t.key||t.keyCode,r=this.m_active.elem;if(this._isActionableMode()){if("Escape"===o||"Esc"===o||o===this.ESC_KEY)this._exitActionableMode(),this.HighlightActive(),this._focusItem(r),this._setTabIndex(r),l=!0;else if("Tab"===o||o===this.TAB_KEY){var a=this.getFocusItem(r).get(0);if(l=t.shiftKey?h.handleActionablePrevTab(t,a):h.handleActionableTab(t,a),!t.shiftKey&&l||t.shiftKey&&!l){var c=h.getFocusableElementsInNode(a)[0];c&&this._isExpandCollapseIcon(c)&&this._focusInHandler(i(c))}}}else"F2"===o||o===this.F2_KEY?(this._enterActionableMode(),(n=r.find("[data-first]")).length>0&&(n[0].focus(),this._isExpandCollapseIcon(n)&&this._focusInHandler(n),r.hasClass(this.getItemStyleClass())||(r=r.children("."+this.getGroupItemStyleClass()).first()),r.removeClass("oj-focus-highlight"))):" "!==o&&"Spacebar"!==o&&o!==this.SPACE_KEY||!this._isSelectionEnabled()?"Enter"===o||o===this.ENTER_KEY?(this._isSelectionEnabled()&&this.ToggleSelection(t,!1,!0),this._fireActionEvent(r.get(0),t)):this.IsArrowKey(o)?(e=this._ctrlEquivalent(t),s=t.shiftKey,e||(l=this.HandleArrowKeys(o,s&&this._isSelectionEnabled()&&this._isMultipleSelection(),t))):"Tab"!==o&&o!==this.TAB_KEY||(t.shiftKey?this._disableAllTabbableElementsBeforeItem(r):this._disableAllTabbableElementsAfterItem(r)):(e=this._ctrlEquivalent(t),(s=t.shiftKey)&&!e&&null!=this.m_selectionFrontier&&this._isMultipleSelection()?this._extendSelectionRange(this.m_selectionFrontier,this.m_active.elem,t,!0):this.ToggleSelection(t,e&&!s&&this._isMultipleSelection(),!1),l=!0);return l},_isDisclosing:function(t){return!(!t||!this.m_disclosing)&&this.m_disclosing.indexOf(t)>-1},_setDisclosing:function(t,e){if(null!=t)if(null==this.m_disclosing&&(this.m_disclosing=[]),e)this.m_disclosing.push(t);else for(var i=this.m_disclosing.indexOf(t);i>-1;)this.m_disclosing.splice(i,1),i=this.m_disclosing.indexOf(t)},_getOptionDefaults:function(){return null==this.defaultOptions&&(this.defaultOptions=this.getStyleValues()),null==this.defaultOptions?(u.error("Cannot find oj-list-view option defaults, which might be caused by missing JET css file"),{}):this.defaultOptions},getAnimationEffect:function(t){var e=this._getOptionDefaults().animation;return null==e?null:e[t]},isExpandable:function(){return"none"!==this.GetOption("drillMode")},_isExpandAll:function(t){var e=this.GetOption("expanded");if("auto"===e){if(!this.isExpandable())return!0}else if("all"===e)return!0;return!!e.isAddAll&&(!this.isExpandable()&&e instanceof E||e.isAddAll()&&e.has(t))},expandKey:function(t,e,s,n,l){var o=this.FindElementByKey(t);null!=o&&this.ExpandItem(i(o),null,l,t,e,n,s)},_expand:function(t){var e=this.FindItem(t.target);null!=e&&e.length>0&&this.ExpandItem(e,t,!0,null,!0,!0,!0)},ExpandItem:function(t,e,i,s,n,l,o){if(this.GetState(t)===this.STATE_COLLAPSED&&(null==s&&(s=this.GetKey(t[0])),!i||!this._isDisclosing(s))){var r={item:t,key:s};if(o)if(!this.Trigger("beforeExpand",e,r)&&n)return;if(this.signalTaskStart("Expand item: "+s),i&&this._setDisclosing(s,!0),this.m_contentHandler.Expand(t,function(t){this._expandSuccess(t,i,e,r,l)}.bind(this)),this.m_items=null,null!=e&&e.stopPropagation(),!this.ojContext._IsCustomElement()&&null!=this._collapsedKeys){var a=this._collapsedKeys.indexOf(s);-1!==a&&this._collapsedKeys.splice(a,1)}this.signalTaskEnd()}},_expandSuccess:function(t,e,s,n,l){var o=this;this.signalTaskStart("Handle results from successful expand"),t.key=n.key;var r=this.AnimateExpand(i(t),e,s),a=t.parentNode;a=i(a),this.SetState(a,this.STATE_EXPANDED);var h=this.getCollapseIconStyleClass(),c=this.getExpandIconStyleClass(),u=this.getExpandingIconStyleClass(),d=this.getGroupItemStyleClass();a.children("."+d).find("."+h+", ."+u).removeClass(h).removeClass(u).addClass(c),l&&r.then(function(){if(o.ojContext._IsCustomElement()){var e=o.GetOption("expanded");if(o._isKeySet(e)&&!e.has(t.key)){var i=e.add([t.key]);o.SetOption("expanded",i,{_context:{originalEvent:s,internalSet:!0},changed:!0})}}o.Trigger("expand",s,n)}),r.then(function(){o.m_clientHeight=null,o.m_scrollHeight=null,o.signalTaskEnd()})},_adjustAncestorsMaxHeight:function(t,e){t.parentsUntil("ul.oj-component-initnode","ul."+this.getGroupStyleClass()).each(function(){var t=parseInt(i(this).css("maxHeight"),10);t>0&&i(this).css("maxHeight",t+e+"px")})},AnimateExpand:function(t,e,s){var n,o=0,r=this,a=new Promise(function(t){n=t});if(e){var h=t.get(0);h.setAttribute("data-oj-context",""),l.getContext(h).getBusyContext().whenReady().then(function(){r.isAvailable()&&(h.removeAttribute("data-oj-context"),r.signalTaskStart("Animate expand of group item"),t.css("maxHeight","100%"),t.children().each(function(){o+=i(this).outerHeight(!0)}),r._isNonWindowTouch()&&r._adjustAncestorsMaxHeight(t,o),t.css("maxHeight",o+"px"),r.signalTaskStart("Kick off expand animation"),r.StartAnimation(h,"expand").then(function(){r._handleExpandTransitionEnd(t,n)}),r.signalTaskEnd())})}else t.css("maxHeight",""),this.AnimateExpandComplete(t),n(null);return a},_handleExpandTransitionEnd:function(t,e){this._isNonWindowTouch()||t.css("maxHeight",""),this.AnimateExpandComplete(t),e(null),this.signalTaskEnd()},AnimateExpandComplete:function(t){t.removeClass(this.getGroupCollapseStyleClass()).addClass(this.getGroupExpandStyleClass()),this._setDisclosing(t[0].key,!1)},collapseKey:function(t,e,s,n){var l=this.FindElementByKey(t);null!=l&&this.CollapseItem(i(l),null,n,t,e,s)},_collapse:function(t){var e=this.FindItem(t.target);null!=e&&e.length>0&&this.CollapseItem(e,t,!0,null,!0,!0)},CollapseItem:function(t,e,i,s,n,l){var o=this;if(this.GetState(t)===this.STATE_EXPANDED&&(null==s&&(s=this.GetKey(t[0])),!i||!this._isDisclosing(s))){var r={item:t,key:s};if(!!this.Trigger("beforeCollapse",e,r)||!n){this.signalTaskStart("Collapse item: "+s),i&&this._setDisclosing(s,!0);var a=this.AnimateCollapse(t,s,i,e);this.SetState(t,this.STATE_COLLAPSED);var h=this.getCollapseIconStyleClass(),c=this.getExpandIconStyleClass();t.find("."+c).first().removeClass(c).addClass(h),this.m_items=null,null!=e&&e.stopPropagation(),l&&a.then(function(){if(null!=e&&o.ojContext._IsCustomElement()){var t=o.GetOption("expanded");if(o._isKeySet(t)){var i=t.delete([s]);o.SetOption("expanded",i,{_context:{originalEvent:e,internalSet:!0},changed:!0})}}o.Trigger("collapse",e,r)}),this.ojContext._IsCustomElement()||(null==this._collapsedKeys&&(this._collapsedKeys=[]),-1===this._collapsedKeys.indexOf(s)&&this._collapsedKeys.push(s)),a.then(function(){o.m_clientHeight=null,o.m_scrollHeight=null,o.signalTaskEnd()})}}},AnimateCollapse:function(t,e,s,n){var l,o=0,r=this,a=new Promise(function(t){l=t}),h=t.children("ul").first();if(h[0].key=e,s){this.signalTaskStart("Animate collapse"),h.children().each(function(){o+=i(this).outerHeight()}),h.css("maxHeight",o+"px");var c=this.getAnimationEffect("collapse");c.persist="all",this.signalTaskStart("Kick off collapse animation");var u=h.get(0);this.StartAnimation(u,"collapse",c).then(function(){r._handleCollapseTransitionEnd(h,l)}),this.signalTaskEnd()}else h.css("maxHeight","0px"),this.AnimateCollapseComplete(h),l(null);return a},_handleCollapseTransitionEnd:function(t,e){this.AnimateCollapseComplete(t),e(null),this.signalTaskEnd()},AnimateCollapseComplete:function(t){t.removeClass(this.getGroupExpandStyleClass()).addClass(this.getGroupCollapseStyleClass()),null!=this.m_contentHandler&&this.m_contentHandler.Collapse(t),this._setDisclosing(t[0].key,!1)},getExpanded:function(){var t=[],e=this;return this._getItemsCache().each(function(){var s=i(this);e.GetState(s)===e.STATE_EXPANDED&&t.push(e.GetKey(s[0]))}),t},getWidgetConstructor:function(){return a.__GetWidgetConstructor(this.element)},GetContainerStyleClass:function(){return this._isNonWindowTouch()?"oj-listview oj-listview-container-touch":"oj-listview oj-listview-container"},GetStyleClass:function(){return"oj-listview-element"},getItemStyleClass:function(){return this.isCardDisplayMode()?"oj-listview-card":"oj-listview-item"},getItemLayoutStyleClass:function(){return this.isCardLayout()?null:"oj-listview-item-layout"},getFocusedElementStyleClass:function(){return"oj-listview-focused-element"},getItemElementStyleClass:function(){return"oj-listview-item-element"},getGroupItemStyleClass:function(t){return t&&this._isPinGroupHeader()&&this._isPositionStickySupported()?"oj-listview-group-item oj-sticky":"oj-listview-group-item"},getGroupStyleClass:function(){return this.isCardDisplayMode()?"oj-listview-card-group":"oj-listview-group"},getGroupExpandStyleClass:function(){return""},getGroupCollapseStyleClass:function(){return this.getGroupExpandStyleClass()},getCollapseIconStyleClass:function(){return"oj-listview-collapse-icon"},getExpandIconStyleClass:function(){return"oj-listview-expand-icon"},getExpandingIconStyleClass:function(){return"oj-listview-expanding-icon"},getEmptyTextStyleClass:function(){return"oj-listview-no-data-message"},getEmptyTextMarkerClass:function(){return"oj-listview-empty-text"},getDepthStyleClass:function(t){return""},getStyleValues:function(){const t={};return Object.entries(I._CSS_Vars).forEach(([e,i])=>{t[e]="animation"===e||"gridlines"===e?I.getComplexCSSVariable(i):r.getCachedCSSVarValues([i])[0]}),t},getLoadingStatusIconStyleClass:function(){return"oj-listview-loading-icon"},getStatusMessageStyleClass:function(){return"oj-listview-status-message"},getStatusStyleClass:function(){return"oj-listview-status"},_isPositionStickySupported:function(){var t=e.AgentUtils.getAgentInfo().browser;return t!==e.AgentUtils.BROWSER.IE&&t!==e.AgentUtils.BROWSER.EDGE},_preventMouseWheelOverscroll:function(t,e){var i=e.originalEvent.deltaY;if(!isNaN(i)&&void 0!==this.m_contentHandler.hasMoreToFetch){var s=t.scrollTop;if(i>0){var n=this._getScrollHeight();this.m_contentHandler.hasMoreToFetch()&&s+this._getClientHeight()+Math.abs(i)>=n&&(t.scrollTop=n,e.preventDefault())}else s>0&&s+i<=0&&(t.scrollTop=0,e.preventDefault())}},_getScrollEventElement:function(){var t=this._getScroller();return t===document.body||t===document.documentElement?window:t},_findClosestElementToTop:function(t,e,s){var n,l=e?this._getItemsCache():i(this._getRootNodeForItems()).children("li."+this.getItemElementStyleClass());if(null==l||0===l.length)return null;var o=this.GetOption("scrollPosition");if(Math.abs(o.y-t)<this.MINIMUM_ITEM_HEIGHT&&null!=o.key&&!isNaN(o.index))if(e){var r=this.FindElementByKey(o.key);null!=r&&(n=l.index(r))}else n=o.index;isNaN(n)&&(n=Math.floor(t/s)),n=Math.min(Math.max(n,0),l.length-1);var a,h=Math.max(t,0),c=l[n],u=h-(a=0===n?0:c.offsetTop),d={index:n,elem:c,offsetTop:a,offset:u};if(Math.abs(u)<1)return d;var m=u>0;m?n+=1:n-=1;for(var p=!1;!p&&n>=0&&n<l.length;){if(a=(c=l[n]).offsetTop,p=(u=Math.abs(h-a))<1||(m?h<=a:h>=a)){(u<1||!m)&&(d={index:n,elem:c,offsetTop:a,offset:u});break}m&&d.offsetTop===a||(d={index:n,elem:c,offsetTop:a,offset:u}),m?n+=1:n-=1}return p||(n=m?l.length-1:0,d.index=n,d.elem=l[n]),d},_getRootNodeForItems:function(){return this.isCardLayout()?this.element.get(0).firstElementChild.firstElementChild:this.element.get(0)},_getItemHeight:function(){var t;null==this.m_itemHeight&&(this.m_contentHandler.IsHierarchical()?(t=this.element.children("li."+this.getItemElementStyleClass()).first()).length>0&&(this.m_itemHeight=t.get(0).firstElementChild.offsetHeight):(t=i(this._getRootNodeForItems()).children("li."+this.getItemElementStyleClass()).first()).length>0&&(this.m_itemHeight=t.get(0).offsetHeight));return this.m_itemHeight},_getCurrentScrollPosition:function(t){var e={},s=this._getScroller();void 0===t&&(t=s.scrollTop),e.x=this._getScrollX(s),e.y=t;var n=this.m_contentHandler.IsHierarchical(),l=this._getItemHeight();if(!isNaN(l)&&l>0){var o=this._findClosestElementToTop(t,n,l);if(null!=o){var r=o.elem;if(n){var a,h=r.parentNode;h!==this.element.get(0)?(this.m_closestParent=h.parentNode,e.parent=this.GetKey(this.m_closestParent),a=this.m_closestParent.firstElementChild):a=o.elem.firstElementChild,e.key=this.GetKey(o.elem),e.index=i(h).children().index(r),a&&a.classList.contains("oj-sticky")&&(this.m_stuckHeader&&this.m_stuckHeader!==a&&this.m_stuckHeader.classList.remove("oj-stuck"),a.classList.add("oj-stuck"),this.m_stuckHeader=a)}else e.index=o.index,e.key=this.GetKey(o.elem);e.offsetY=o.offset,e.offsetX=e.x}}return e},_getOffsetTop:function(t){var e=t.offsetTop;if(this.isCardLayout()&&this.m_contentHandler.getMargin){var i=this.m_contentHandler.getMargin();isNaN(i)||(e=Math.max(0,e-i))}var s=this.element.get(0).offsetTop;return isNaN(this.m_elementOffset)||this.m_elementOffset===s?e:Math.max(0,e-s)},_getScrollTopByIndex:function(t,e){var s;if(null!=e)null!=(s=this.FindElementByKey(e))&&(s=i(s).children("ul").first());else{if(0===t)return 0;s=this.element.get(0),this.isCardLayout()&&(s=s.firstElementChild.firstElementChild)}if(null!=s){var n=i(s).children("."+this.getItemElementStyleClass())[t];if(null!=n)return this._getOffsetTop(n)}if(this.m_contentHandler.hasMoreToFetch&&this.m_contentHandler.hasMoreToFetch())return this._getScrollHeight()},_getScrollTopByKey:function(t){var e=this.FindElementByKey(t);return null!=e?this._getOffsetTop(e):this.m_contentHandler.hasMoreToFetch&&this.m_contentHandler.hasMoreToFetch()?this._getScrollHeight():void 0},_getScrollCoordinates:function(t){var e,i=t.x,s=t.offsetX;isNaN(i)||isNaN(s)||(i+=s);var n=t.key;isNaN(e)&&null!=n&&(e=this._getScrollTopByKey(n));var l=t.parent,o=t.index;isNaN(e)&&!isNaN(o)&&(e=this._getScrollTopByIndex(o,l));var r=t.offsetY;return isNaN(e)||isNaN(r)||(e+=r),isNaN(e)&&!isNaN(t.y)&&(e=t.y),{x:i,y:e}},_isEmpty:function(){var t=this.element[0],e=t.querySelector("li."+this.getItemElementStyleClass()),i=t.querySelector("li.oj-listview-temp-item");return null==e&&null==i},_handleScroll:function(t){if(null!=this.m_contentHandler&&this.ShouldUseGridRole()&&!this._isEmpty()){var e=this._getScroller().scrollTop;this.ojContext._IsCustomElement()||this.SetOption("scrollTop",e,{_context:{originalEvent:t,internalSet:!0}}),this.ShouldUpdateScrollPosition()&&this.SetOption("scrollPosition",this._getCurrentScrollPosition(e),{_context:{originalEvent:t,internalSet:!0}}),this._handlePinGroupHeader()}},isLoadMoreOnScroll:function(){var t=this.GetOption("scrollPolicy");if("auto"===t){var i=this.GetOption("data");if(null!=i&&(void 0!==e.TableDataSource&&i instanceof e.TableDataSource||void 0!==e.TreeDataSource&&i instanceof e.TreeDataSource))return!1}return"loadAll"!==t},_unregisterScrollHandler:function(){var t=i(this._getScrollEventElement());return this._scrollListener&&t[0].removeEventListener("scroll",this._scrollListener),this.ojContext._IsCustomElement()?(t[0].removeEventListener("wheel",this._wheelListener,{passive:!1}),delete this._wheelListener):this.ojContext._off(t,"wheel"),t},_registerScrollHandler:function(){var t=this,e=this._unregisterScrollHandler();this._scrollListener=function(e){t._skipScrollUpdate||t.m_ticking||(window.requestAnimationFrame(function(){t._handleScroll(e),t.m_ticking=!1}),t.m_ticking=!0),u.info("scroll listener: "+t._skipScrollUpdate),t._skipScrollUpdate&&(u.info("clearing scrollPosBusyState"),t._clearScrollPosBusyState()),t._skipScrollUpdate=!1},e[0].addEventListener("scroll",this._scrollListener),this.isLoadMoreOnScroll()&&(this._wheelListener=function(e){e.originalEvent||(e.originalEvent=e),t._preventMouseWheelOverscroll(t._getScroller(),e)},this._scrollElem=e,this.ojContext._IsCustomElement()?this._scrollElem[0].addEventListener("wheel",this._wheelListener,{passive:!1}):this.ojContext._on(this._scrollElem,{wheel:this._wheelListener}))},mergeScrollListener:function(){this._scrollListener&&this._getScrollEventElement().removeEventListener("scroll",this._scrollListener);return this._scrollListener},unmergeScrollListener:function(){if(this._scrollListener){var t=this._getScrollEventElement();t.removeEventListener("scroll",this._scrollListener),t.addEventListener("scroll",this._scrollListener)}},_isPinGroupHeader:function(){return"static"!==this.GetOption("groupHeaderPosition")&&this.m_contentHandler.IsHierarchical()},_getGroupItemsCache:function(){if(null==this.m_groupItems){var t="."+this.getGroupItemStyleClass()+":visible";this.m_groupItems=this.element.find(t).filter(function(){return!i(this).parent().hasClass("oj-collapsed")&&i(this).next().children().length>0})}return this.m_groupItems},_unpinGroupItem:function(t){i(t).removeClass("oj-pinned"),t.style.top="auto",t.style.width="auto"},_getNextGroupItem:function(t){var e=this._getGroupItemsCache(),i=e.index(t);return i>-1&&i<e.length-1?e[i+1]:null},_pinGroupItem:function(t,e){var s=t.offsetWidth,n=t.offsetHeight,l=this._getNextGroupItem(t);null!=l&&l.offsetTop<=e+n+5&&(e-=n),i(t).addClass("oj-pinned"),t.style.top=e+"px",t.style.width=s+"px"},_handlePinGroupHeader:function(){var t;if(this._isPinGroupHeader()&&!this._isPositionStickySupported()){var e=this._getScroller().scrollTop;if(null!=this.m_groupItemToPin&&0===e)return this._unpinGroupItem(this.m_groupItemToPin),void(this.m_groupItemToPin=null);var i=this._getGroupItemsCache(),s=0;null!=this.m_groupItemToPin&&(s=this.m_groupItemToPin.offsetHeight);for(var n=0;n<i.length;n++){var l=i[n];if(this.m_groupItemToPin!==l){var o=i[n].offsetTop,r=o+l.parentNode.offsetHeight;if(o<e&&r>e+s){t=l;break}}}if(null!=t&&t!==this.m_groupItemToPin)null!=this.m_groupItemToPin&&this._unpinGroupItem(this.m_groupItemToPin),this._pinGroupItem(t,e),this.m_groupItemToPin=t;else if(null!=this.m_groupItemToPin){var a=this._getNextGroupItem(this.m_groupItemToPin);if(null!=a&&a.offsetTop<=e+s)return void(this.m_groupItemToPin.style.top=a.offsetTop-s+"px");this.m_groupItemToPin.style.top=e+"px"}}},_getScroller:function(){if(null!=this.m_scroller)return this.m_scroller;var t,e=this.GetOption("scrollPolicyOptions");return null!=e&&null!=(t=e.scroller)&&("string"==typeof t&&null==(t=document.querySelector(t))&&u.error("the css selector string specified in scroller attribute does not resolve to any element"),null==t||t.contains(this.getListContainer()[0])||(u.error("the specified scroller must be an ancestor of the component"),t=null)),this.m_scroller=null!=t?t:this.getListContainer().get(0),this.m_scroller},_scrollToGroupHeader:function(t){var e=this._getScroller(),i=e.scrollTop;null!=this.m_groupItemToPin&&(this._unpinGroupItem(this.m_groupItemToPin),this.m_groupItemToPin=null);var s=t.offsetTop;this._isPinGroupHeader()&&this._isPositionStickySupported()&&s<i&&(s=Math.max(0,s-t.parentNode.offsetHeight+t.offsetHeight)),e.scrollTop=s,i===e.scrollTop&&this._handlePinGroupHeader(),this._setFirstFocusableItemInGroupCurrent(t)},_setFirstFocusableItemInGroupCurrent:function(t){var e=this;i(t).next().children().each(function(){var t=i(this);if(!e.SkipFocus(t))return e.SetOption("currentItem",this.key),!1})}});I._CSS_Vars={animation:{add:"--oj-private-list-view-global-add-animation-default",remove:"--oj-private-list-view-global-remove-animation-default",update:"--oj-private-list-view-global-update-animation-default",expand:"--oj-private-list-view-global-expand-animation-default",collapse:"--oj-private-list-view-global-collapse-animation-default",pointerUp:"--oj-private-list-view-global-pointerUp-animation-default",cardEntrance:"--oj-private-list-view-global-card-entrance-animation-default",cardExit:"--oj-private-list-view-global-card-exit-animation-default"},gridlines:{item:"--oj-private-list-view-global-gridlines-item-default",top:"--oj-private-list-view-global-gridlines-top-default",bottom:"--oj-private-list-view-global-gridlines-bottom-default"},loadIndicator:"--oj-private-list-view-global-load-indicator-default",showIndicatorDelay:"--oj-private-core-global-loading-indicator-delay-duration",cardAnimationDelay:"--oj-private-animation-global-card-entrance-delay-increment"},I.getComplexCSSVariable=function(t){const e={},i=Object.keys(t),s=i.map(e=>t[e]),n=r.getCachedCSSVarValues(s);return i.forEach((t,i)=>{const s=/^(\[|{)/.test(n[i])?JSON.parse(n[i]):n[i];e[t]=s}),e},e._registerLegacyNamespaceProp("_ojListView",I),e.__registerWidget("oj.ojListView",i.oj.baseComponent,{widgetEventPrefix:"oj",options:{as:"",currentItem:null,data:null,display:"list",dnd:{drag:null,drop:null,reorder:{items:"disabled"}},drillMode:"collapsible",expanded:new E,firstSelectedItem:{key:null,data:null},gridlines:{item:"visible"},groupHeaderPosition:"sticky",item:{focusable:!0,renderer:null,selectable:!0},scrollToKey:"auto",scrollPolicy:"auto",scrollPolicyOptions:{fetchSize:25,maxCount:500},scrollPosition:{x:0,y:0},scrollTop:0,selected:new d.KeySetImpl,selection:[],selectionMode:"none",selectionRequired:!1,animateStart:null,animateEnd:null,beforeCurrentItem:null,beforeExpand:null,beforeCollapse:null,collapse:null,copy:null,cut:null,expand:null,itemAction:null,paste:null,ready:null,reorder:null},_ComponentCreate:function(){this._super(),this._setup()},_setup:function(){var t={};(t.element=this.element,t.OuterWrapper=this.OuterWrapper,t.ojContext=this,this._IsCustomElement())||this.options.expanded instanceof E&&(this.options.expanded="auto");t=i.extend(this.options,t),this.listview=new I,this.listview.init(t),h.disableDefaultBrowserStyling(this.element[0])},_AfterCreate:function(){this._super();var t=this;this.listview._FixRendererContext=function(e){return t._FixRendererContext(e)},this.listview._WrapCustomElementRenderer=function(e){return t._WrapCustomElementRenderer(e)},this.listview.afterCreate()},_SetupResources:function(){this._super(),this.listview.setupResources()},_ReleaseResources:function(){this._super(),this.listview.releaseResources()},GetFocusElement:function(){return null!=this.listview?this.listview.GetFocusElement():this._super()},_destroy:function(){this.listview.destroy(),this._super()},_NotifyContextMenuGesture:function(t,e,i){this.listview.notifyContextMenuGesture(t,e,i)},_setOptions:function(t,e){if(this.listview.isAvailable()){var i=this.listview.setOptions(t,e);this._super(t,e),i?(t.data&&this.listview.adjustScrollPositionValueOnFetch(),this.listview.refresh()):(t.selectionRequired||t.selection||t.selectionMode)&&this.listview.enforceSelectionRequired()}else this._super(t,e)},_setOption:function(t,e,s){var n,l=!0;if("selectionMode"===t?l="none"===e||"single"===e||"multiple"===e:"drillMode"===t?l="collapsible"===e||"none"===e:"scrollPolicy"===t?l="auto"===e||"loadMoreOnScroll"===e||"loadAll"===e:"groupHeaderPosition"===t?l="static"===e||"sticky"===e:"firstSelectedItem"===t&&(l=!1),!l)throw new Error("Invalid value: "+e+" for key: "+t);this.listview.isAvailable()&&("selection"===t?(n=this.listview.getItems(e),s={_context:{extraData:{items:this._IsCustomElement()?n:i(n)}}}):"currentItem"===t&&(n=this.listview.getItems([e])[0],s={_context:{extraData:{items:this._IsCustomElement()?n:i(n)}}})),this._super(t,e,s)},_NotifyAttached:function(){this.listview.notifyAttached()},_NotifyDetached:function(){this.listview.notifyDetached()},_NotifyShown:function(){this.listview.notifyShown()},_VerifyConnectedForSetup:function(){return!0},widget:function(){return this.listview.GetRootElement()},refresh:function(){this._super(),this.listview.refresh()},whenReady:function(){return this.listview.whenReady()},getNodeBySubId:function(t){return this.listview.getNodeBySubId(t)},getSubIdByNode:function(t){return this.listview.getSubIdByNode(t)},getContextByNode:function(t){return this.listview.getContextByNode(t)},getDataForVisibleItem:function(t){return this.listview.getDataForVisibleItem(t)},expand:function(t,e){this.listview.expandKey(t,e,!0,!0)},collapse:function(t,e){this.listview.collapseKey(t,e,!0)},getExpanded:function(){return this.listview.getExpanded()},getIndexerModel:function(){return null==this.indexerModel&&f.ListViewIndexerModel&&(this.indexerModel=new f.ListViewIndexerModel(this.listview)),this.indexerModel},scrollToItem:function(t){this.listview.scrollToItem(t)},_CompareOptionValues:function(t,i,s){switch(t){case"currentItem":case"scrollPolicyOptions":return e.Object.compareValues(i,s);case"selection":return i&&void 0===i.inverted&&(i.inverted=!1),s&&void 0===s.inverted&&(s.inverted=!1),(!i||!s||i.inverted===s.inverted)&&e.Object.compareValues(i,s);default:return this._super(t,i,s)}}}),a.setDefaultOptions({ojListView:{gridlines:a.createDynamicPropertyGetter(function(){const t=I._CSS_Vars.gridlines,e={gridlines:I.getComplexCSSVariable(t)};return null==e?(u.error("Cannot find oj-list-view option defaults, which might be caused by missing JET css file"),e={gridlines:{}}):null==e.gridlines&&(u.error("Cannot find gridlines default option, which might be caused by a mismatch between JET js and css files"),e={gridlines:{}}),{item:e.gridlines.item}})}})});
//# sourceMappingURL=ojlistview.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojdatasource-common',["exports","ojs/ojcore-base","ojs/ojcore"],function(e,a,t){"use strict";a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;
/**
   * @preserve Copyright 2013 jQuery Foundation and other contributors
   * Released under the MIT license.
   * http://jquery.org/license
   */
const r=function(e){this.data=e,this.Init()};a._registerLegacyNamespaceProp("DataSource",r),a.Object.createSubclass(r,a.EventSource,"oj.DataSource"),r.prototype.Init=function(){r.superclass.Init.call(this)};const o=function(e){o.superclass.constructor.call(this,e)};t._registerLegacyNamespaceProp("DataGridDataSource",o),t.Object.createSubclass(o,t.DataSource,"oj.DataGridDataSource");const c=function(e){c.superclass.constructor.call(this,e)};a._registerLegacyNamespaceProp("DiagramDataSource",c),a.Object.createSubclass(c,a.DataSource,"oj.DiagramDataSource"),c.EventType={ADD:"add",REMOVE:"remove",CHANGE:"change"};
/**
   * @preserve Copyright 2013 jQuery Foundation and other contributors
   * Released under the MIT license.
   * http://jquery.org/license
   */
const s=function(e,a){if(this.constructor===s){var t=s._LOGGER_MSG._ERR_TABLE_DATASOURCE_INSTANTIATED_SUMMARY,r=s._LOGGER_MSG._ERR_TABLE_DATASOURCE_INSTANTIATED_DETAIL;throw new Error(t+"\n"+r)}this.data=e,this.options=a,this.isFetching=!1,this._startIndex=0,this.Init()};t._registerLegacyNamespaceProp("TableDataSource",s),t.Object.createSubclass(s,t.DataSource,"oj.TableDataSource"),s.prototype.Init=function(){s.superclass.Init.call(this)},s.prototype.sortCriteria=null,s.prototype.totalSizeConfidence=function(){return"actual"},s.EventType={ADD:"add",REMOVE:"remove",RESET:"reset",REFRESH:"refresh",SORT:"sort",CHANGE:"change",REQUEST:"request",SYNC:"sync",ERROR:"error"},s._LOGGER_MSG={_ERR_TABLE_DATASOURCE_INSTANTIATED_SUMMARY:"oj.TableDataSource constructor called.",_ERR_TABLE_DATASOURCE_INSTANTIATED_DETAIL:"Please do not instantiate oj.TableDataSource. Please use one of the subclasses instead such as oj.ArrayTableDataSource or oj.CollectionTableDataSource.",_ERR_DATA_INVALID_TYPE_SUMMARY:"Invalid data type.",_ERR_DATA_INVALID_TYPE_DETAIL:"Please specify the appropriate data type."};const u=function(e){u.superclass.constructor.call(this,e)};t._registerLegacyNamespaceProp("TreeDataSource",u),t.Object.createSubclass(u,t.DataSource,"oj.TreeDataSource");var n={};n.DataGridDataSource=oj.DataGridDataSource,e.DataGridDataSource=o,e.DataSource=r,e.DataSourceCommon=n,e.DiagramDataSource=c,e.TableDataSource=s,e.TreeDataSource=u,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ojdatasource-common.js.map;
/**
 * @license
 * Copyright (c) 2014, 2021, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define('ojs/ojarraytabledatasource',["ojs/ojcore-base","jquery","ojs/ojlogger","ojs/ojtranslation","ojs/ojdatasource-common"],function(t,e,r,a,i){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;const s=function(t,e){if(this.data=t||{},!(t instanceof Array||this._isObservableArray(t))){var a=i.TableDataSource._LOGGER_MSG._ERR_DATA_INVALID_TYPE_SUMMARY,n=i.TableDataSource._LOGGER_MSG._ERR_DATA_INVALID_TYPE_DETAIL;throw new Error(a+"\n"+n)}null!=e&&null!=e.idAttribute||r.info(s._LOGGER_MSG._INFO_ARRAY_TABLE_DATASOURCE_IDATTR),s.superclass.constructor.call(this,t,e),this._eventHandlers=[],this._rows={},null!=t&&(this._idAttribute=null,null!=e&&null!=e.idAttribute&&(this._idAttribute=e.idAttribute)),(null==e||"enabled"!==e.startFetch&&null!=e.startFetch)&&null!=e||(this._startFetchEnabled=!0)};t._registerLegacyNamespaceProp("ArrayTableDataSource",s),t.Object.createSubclass(s,i.TableDataSource,"ArrayTableDataSource"),s.prototype.comparator=null,s.prototype.sortCriteria=null,s.prototype.Init=function(){s.superclass.Init.call(this)},s.prototype.add=function(t,e){e=e||{},this._checkDataLoaded();var r=e.at;return this._addToRowSet(t,r,e)},s.prototype.at=function(t,e){var r;return this._checkDataLoaded(),r=t<0||t>=this._rows.data.length?null:{data:this._rows.data[t],index:t,key:this._getId(this._rows.data[t])},new Promise(function(t){t(r)})},s.prototype.change=function(t,e){e=e||{},this._checkDataLoaded();var r=e.silent,a={data:[],keys:[],indexes:[]};t instanceof Array||(t=[t]);for(var s=0;s<t.length;s++){var n=t[s];if(null!=n){var o=this._getId(n),l=this._getInternal(o,!1);a.data.push(this._wrapWritableValue(n)),a.keys.push(o),a.indexes.push(l.index),this._rows.data[l.index]=n}}return!r&&a.data.length>0&&i.TableDataSource.superclass.handleEvent.call(this,i.TableDataSource.EventType.CHANGE,a),Promise.resolve(a)},s.prototype.fetch=function(t){return"init"!==(t=t||{}).fetchType||this._startFetchEnabled?this._fetchInternal(t):Promise.resolve()},s.prototype.get=function(t,e){return this._checkDataLoaded(),Promise.resolve(this._getInternal(t,!0))},s.prototype.getCapability=function(t){return"full"},s.prototype.remove=function(t,e){return e=e||{},this._checkDataLoaded(),this._removeInternal(t,e)},s.prototype.reset=function(t,e){(e=e||{}).previousRows=this._rows;var r=e.silent;return null!=t&&(this.data=t),this._rows={},this._totalSize=0,this._arrayChangeSubscription&&(this._arrayChangeSubscription.dispose(),this._arrayChangeSubscription=null),r||i.TableDataSource.superclass.handleEvent.call(this,i.TableDataSource.EventType.RESET,null),Promise.resolve()},s.prototype.sort=function(t){null==t?t=this.sortCriteria:this.sortCriteria=t,t=t||{},this._checkDataLoaded();var e=this;return new Promise(function(r){var a=e._getComparator();e._rows.data.sort(function(t,r){return s._sortFunc(t,r,a,e)}),e._sorted=!0;var n={header:t.key,direction:t.direction};i.TableDataSource.superclass.handleEvent.call(e,i.TableDataSource.EventType.SORT,n),r(n)})},s.prototype.totalSize=function(){return this._checkDataLoaded(),this._totalSize},s.prototype._addToRowSet=function(t,e,r){var a=(r=r||{}).silent,n={data:[],keys:[],indexes:[]};t instanceof Array||(t=[t]),null==e||e instanceof Array||(e=[e]);for(var o=0;o<t.length;o++){var l=t[o];if(null!=l){var u=this._getId(l);if(n.data.push(this._wrapWritableValue(l)),n.keys.push(u),!0===this._sorted&&this._rows.data.length>0)for(var h=0;h<this._rows.data.length;h++){if(s._sortFunc(l,this._rows.data[h],this._getComparator(),this)<0){this._rows.data.splice(h,0,l),n.indexes.push(h);break}if(h===this._rows.data.length-1){this._rows.data.push(l),n.indexes.push(h+1);break}}else null==e?(this._rows.data.push(l),n.indexes.push(this._rows.data.length-1)):(this._rows.data.splice(e[o],0,l),n.indexes.push(e[o]));this._totalSize+=1,this._realignRowIndices()}}return!a&&n.data.length>0&&i.TableDataSource.superclass.handleEvent.call(this,i.TableDataSource.EventType.ADD,n),Promise.resolve(n)},s.prototype._checkDataLoaded=function(){if(!this._isDataLoaded()){var t=[];this.data instanceof Array?t=this.data:this._isObservableArray(this.data)&&(t=this.data.peek(),this._subscribeObservableArray(this.data)),this._rows=this._getRowArray(t),this._totalSize=t.length}},s.prototype._isDataLoaded=function(){return null!=this._rows&&null!=this._rows.data},s.prototype._fetchInternal=function(t){var e,r,a,i;t=t||{},this._startFetch(t),this._checkDataLoaded();try{e=t.pageSize>0?t.pageSize:-1,this._startIndex||(this._startIndex=0),this._startIndex=null==t.startIndex?this._startIndex:t.startIndex,i=s._getEndIndex(this._rows,this._startIndex,e),r=[],a=[];for(var n=this._startIndex;n<=i;n++){var o=this._getId(this._rows.data[n]),l=this._wrapWritableValue(this._rows.data[n]);r[n-this._startIndex]=l,a[n-this._startIndex]=o}}catch(e){return this._endFetch(t,null,e),Promise.reject(e)}i<this._startIndex&&(this._startIndex=i+1),t.pageSize=e,t.startIndex=this._startIndex,t.refresh=!0;var u={data:r,keys:a,startIndex:this._startIndex};return this._endFetch(t,u,null),Promise.resolve(u)},s.prototype._getInternal=function(t,r){for(var a=null,i=0;i<this._rows.data.length;i++){var s=this._rows.data[i];if(void 0!==s){var n=this._getId(s);if(e.isArray(n)&&e.isArray(t)){if(n.length===t.length){for(var o=!0,l=0;l<t.length;l++)if(n[l]!==t[l]){o=!1;break}if(o){a=r?{data:this._wrapWritableValue(s),key:n,index:this._rows.indexes[i]}:{data:s,key:n,index:this._rows.indexes[i]};break}}}else if(n===t){a=r?{data:this._wrapWritableValue(s),key:n,index:this._rows.indexes[i]}:{data:s,key:n,index:this._rows.indexes[i]};break}}}return a},s.prototype._getComparator=function(){var t=this.comparator;if(null==t){var r=this.sortCriteria.key,a=this.sortCriteria.direction;"ascending"===a?t=function(t){return e.isFunction(t[r])?t[r]():t[r]}:"descending"===a&&(t=function(t,a){var i,s;return e.isFunction(t[r])?(i=t[r](),s=a[r]()):(i=t[r],s=a[r]),i===s?0:i>s?-1:1})}return t},s.prototype._realignRowIndices=function(){for(var t=0;t<this._rows.data.length;t++)this._rows.indexes[t]=t},s.prototype._removeInternal=function(t,e){var r,a=(e=e||{}).silent,s={data:[],keys:[],indexes:[]};t instanceof Array||(t=[t]);var n=[];for(r=0;r<t.length;r++){var o=t[r];if(null!=o){var l=this._getId(o),u=this._getInternal(l,!1);null!=u&&n.push({data:u.data,key:u.key,index:u.index})}}for(n.sort(function(t,e){return t.index-e.index}),r=0;r<n.length;r++)s.data.push(n[r].data),s.keys.push(n[r].key),s.indexes.push(n[r].index);for(r=s.indexes.length-1;r>=0;r--)this._rows.data.splice(s.indexes[r],1),this._rows.indexes.splice(s.indexes[r],1),this._totalSize-=1;return this._realignRowIndices(),!a&&s.data.length>0&&i.TableDataSource.superclass.handleEvent.call(this,i.TableDataSource.EventType.REMOVE,s),Promise.resolve(s)},s.prototype._setRow=function(t,e){this._rows[t]=e,e.index=t},s.prototype._startFetch=function(t){t.silent||i.TableDataSource.superclass.handleEvent.call(this,i.TableDataSource.EventType.REQUEST,{startIndex:t.startIndex})},s.prototype._endFetch=function(t,e,r){null!=r?i.TableDataSource.superclass.handleEvent.call(this,i.TableDataSource.EventType.ERROR,r):t.silent||i.TableDataSource.superclass.handleEvent.call(this,i.TableDataSource.EventType.SYNC,e)},s.prototype._handleRowChange=function(t){t.startIndex=this._startIndex,i.TableDataSource.superclass.handleEvent.call(this,i.TableDataSource.EventType.CHANGE,t)},s._compareKeys=function(t,e,r){if("descending"===r){if(t<e)return 1;if(e<t)return-1}else{if(t>e)return 1;if(e>t)return-1}return 0},s._getEndIndex=function(t,e,r){var a=t.data.length-1;return r>0&&(a=(a=e+r-1)>t.data.length-1?t.data.length-1:a),a},s._getKey=function(t,e){return"function"==typeof t[e]?t[e]():t[e]},s.prototype._getRowArray=function(t){var e=t.length-1,r={data:[],indexes:[]};this._attributes=null;for(var a=0;a<=e;a++){var i={},s=t[a];if(s)for(var n=Object.keys(s),o=0;o<n.length;o++){var l=n[o];i[l]=s[l],0===a&&(null==this._attributes&&(this._attributes=[]),this._attributes.push(l))}else i=null;r.data[a]=i,r.indexes[a]=a}return r},s.prototype._getId=function(t){var r,i,n=this._getIdAttr(t);if(null==t)return null;if(e.isArray(n)){var o;for(r=[],o=0;o<n.length;o++){if(!(n[o]in t))throw i=a.applyParameters(s._LOGGER_MSG._ERR_ARRAY_TABLE_DATASOURCE_IDATTR_NOT_IN_ROW,[n[o]]),new Error(i);r[o]=s._getKey(t,n[o])}}else{if(!(n in t))throw i=a.applyParameters(s._LOGGER_MSG._ERR_ARRAY_TABLE_DATASOURCE_IDATTR_NOT_IN_ROW,[n]),new Error(i);r=s._getKey(t,n)}return r},s.prototype._getIdAttr=function(t){if(null!=this._idAttribute)return this._idAttribute;if(null==this._attributes){this._attributes=[];for(var e=Object.keys(t),r=0;r<e.length;r++){var a=e[r];this._attributes.push(a)}}return Object.prototype.hasOwnProperty.call(this._attributes,"id")?"id":this._attributes},s._sortFunc=function(r,a,i,n){var o,l,u,h,d=n.sortCriteria.direction;if(e.isFunction(i)){if(1===i.length){o=i.call(n,r),l=i.call(n,a);var _=t.StringUtils.isString(o)?o.split(","):[o],c=t.StringUtils.isString(l)?l.split(","):[l];for(u=0;u<_.length;u++)if(0!==(h=s._compareKeys(_[u],c[u],d)))return h;return 0}return i.call(n,r,a)}if(t.StringUtils.isString(i)){var p=i.split(",");for(u=0;u<p.length;u++)if(o=s._getKey(r,p[u]),l=s._getKey(a,p[u]),0!==(h=s._compareKeys(o,l,d)))return h}return 0},s.prototype._subscribeObservableArray=function(e){if(!(e instanceof Array)){var r=this;this._arrayChangeSubscription=e.subscribe(function(e){var a,i,s,n,o=[],l=[];for(a=0;a<e.length;a++)for(s=e[a].index,n=e[a].status,i=0;i<e.length;i++)i!==a&&s===e[i].index&&n!==e[i].status&&o.indexOf(a)<0&&l.indexOf(a)<0&&("deleted"===n?(l.push(a),o.push(i)):(l.push(i),o.push(a)));var u=[];for(a=0;a<e.length;a++)if(o.indexOf(a)>=0){var h=r._getId(r._rows.data[e[a].index]),d=r._getId(e[a].value);null==d||t.Object.compareValues(d,h)||(r._rows.data[e[a].index]=e[a].value),u.push(e[a].value)}r.change(u,null),u=[];var _=[];for(a=0;a<e.length;a++)o.indexOf(a)<0&&l.indexOf(a)<0&&"deleted"===e[a].status&&u.push(e[a].value);for(r.remove(u,null),u=[],_=[],a=0;a<e.length;a++)o.indexOf(a)<0&&l.indexOf(a)<0&&"added"===e[a].status&&(u.push(e[a].value),_.push(e[a].index));r.add(u,{at:_})},null,"arrayChange")}},s.prototype._wrapWritableValue=function(t){var e={};if(!t)return null;for(var r=Object.keys(t),a=0;a<r.length;a++)s._defineProperty(e,t,r[a]);return e},s.prototype._isObservableArray=function(t){return"function"==typeof t&&"function"==typeof t.subscribe},s._defineProperty=function(t,e,r){Object.defineProperty(t,r,{get:function(){return e[r]},set:function(t){e[r]=t},enumerable:!0})},s._LOGGER_MSG={_INFO_ARRAY_TABLE_DATASOURCE_IDATTR:"idAttribute option has not been specified. Will default to using 'id' if the field exists. If not, will use all the fields.",_ERR_ARRAY_TABLE_DATASOURCE_IDATTR_NOT_IN_ROW:"Specified idAttribute {0} not in row data. Please ensure all specified idAttribute fields are in the row data or do not specify idAttribute and all fields will be used as id."}});
//# sourceMappingURL=ojarraytabledatasource.js.map;

define("rjs_bundles/listBundle", function(){});
